var qc=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};var H=(e,t,r)=>(qc(e,t,"read from private field"),r?r.call(e):t.get(e)),ne=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},ee=(e,t,r,s)=>(qc(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r);var ua=(e,t,r,s)=>({set _(i){ee(e,t,i,r)},get _(){return H(e,t,s)}}),ue=(e,t,r)=>(qc(e,t,"access private method"),r);function Fb(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(s,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();function mh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Xg={exports:{}},Yl={},Jg={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fo=Symbol.for("react.element"),$b=Symbol.for("react.portal"),Hb=Symbol.for("react.fragment"),Ub=Symbol.for("react.strict_mode"),Wb=Symbol.for("react.profiler"),zb=Symbol.for("react.provider"),Vb=Symbol.for("react.context"),qb=Symbol.for("react.forward_ref"),Gb=Symbol.for("react.suspense"),Kb=Symbol.for("react.memo"),Qb=Symbol.for("react.lazy"),sp=Symbol.iterator;function Yb(e){return e===null||typeof e!="object"?null:(e=sp&&e[sp]||e["@@iterator"],typeof e=="function"?e:null)}var Zg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ev=Object.assign,tv={};function si(e,t,r){this.props=e,this.context=t,this.refs=tv,this.updater=r||Zg}si.prototype.isReactComponent={};si.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};si.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function rv(){}rv.prototype=si.prototype;function gh(e,t,r){this.props=e,this.context=t,this.refs=tv,this.updater=r||Zg}var vh=gh.prototype=new rv;vh.constructor=gh;ev(vh,si.prototype);vh.isPureReactComponent=!0;var np=Array.isArray,sv=Object.prototype.hasOwnProperty,xh={current:null},nv={key:!0,ref:!0,__self:!0,__source:!0};function iv(e,t,r){var s,i={},a=null,c=null;if(t!=null)for(s in t.ref!==void 0&&(c=t.ref),t.key!==void 0&&(a=""+t.key),t)sv.call(t,s)&&!nv.hasOwnProperty(s)&&(i[s]=t[s]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var l=Array(o),f=0;f<o;f++)l[f]=arguments[f+2];i.children=l}if(e&&e.defaultProps)for(s in o=e.defaultProps,o)i[s]===void 0&&(i[s]=o[s]);return{$$typeof:Fo,type:e,key:a,ref:c,props:i,_owner:xh.current}}function Xb(e,t){return{$$typeof:Fo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function yh(e){return typeof e=="object"&&e!==null&&e.$$typeof===Fo}function Jb(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var ip=/\/+/g;function Gc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Jb(""+e.key):t.toString(36)}function $a(e,t,r,s,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var c=!1;if(e===null)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case Fo:case $b:c=!0}}if(c)return c=e,i=i(c),e=s===""?"."+Gc(c,0):s,np(i)?(r="",e!=null&&(r=e.replace(ip,"$&/")+"/"),$a(i,t,r,"",function(f){return f})):i!=null&&(yh(i)&&(i=Xb(i,r+(!i.key||c&&c.key===i.key?"":(""+i.key).replace(ip,"$&/")+"/")+e)),t.push(i)),1;if(c=0,s=s===""?".":s+":",np(e))for(var o=0;o<e.length;o++){a=e[o];var l=s+Gc(a,o);c+=$a(a,t,r,l,i)}else if(l=Yb(e),typeof l=="function")for(e=l.call(e),o=0;!(a=e.next()).done;)a=a.value,l=s+Gc(a,o++),c+=$a(a,t,r,l,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function ha(e,t,r){if(e==null)return e;var s=[],i=0;return $a(e,s,"","",function(a){return t.call(r,a,i++)}),s}function Zb(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var at={current:null},Ha={transition:null},e1={ReactCurrentDispatcher:at,ReactCurrentBatchConfig:Ha,ReactCurrentOwner:xh};function ov(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:ha,forEach:function(e,t,r){ha(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ha(e,function(){t++}),t},toArray:function(e){return ha(e,function(t){return t})||[]},only:function(e){if(!yh(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};de.Component=si;de.Fragment=Hb;de.Profiler=Wb;de.PureComponent=gh;de.StrictMode=Ub;de.Suspense=Gb;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=e1;de.act=ov;de.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=ev({},e.props),i=e.key,a=e.ref,c=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,c=xh.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)sv.call(t,l)&&!nv.hasOwnProperty(l)&&(s[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){o=Array(l);for(var f=0;f<l;f++)o[f]=arguments[f+2];s.children=o}return{$$typeof:Fo,type:e.type,key:i,ref:a,props:s,_owner:c}};de.createContext=function(e){return e={$$typeof:Vb,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:zb,_context:e},e.Consumer=e};de.createElement=iv;de.createFactory=function(e){var t=iv.bind(null,e);return t.type=e,t};de.createRef=function(){return{current:null}};de.forwardRef=function(e){return{$$typeof:qb,render:e}};de.isValidElement=yh;de.lazy=function(e){return{$$typeof:Qb,_payload:{_status:-1,_result:e},_init:Zb}};de.memo=function(e,t){return{$$typeof:Kb,type:e,compare:t===void 0?null:t}};de.startTransition=function(e){var t=Ha.transition;Ha.transition={};try{e()}finally{Ha.transition=t}};de.unstable_act=ov;de.useCallback=function(e,t){return at.current.useCallback(e,t)};de.useContext=function(e){return at.current.useContext(e)};de.useDebugValue=function(){};de.useDeferredValue=function(e){return at.current.useDeferredValue(e)};de.useEffect=function(e,t){return at.current.useEffect(e,t)};de.useId=function(){return at.current.useId()};de.useImperativeHandle=function(e,t,r){return at.current.useImperativeHandle(e,t,r)};de.useInsertionEffect=function(e,t){return at.current.useInsertionEffect(e,t)};de.useLayoutEffect=function(e,t){return at.current.useLayoutEffect(e,t)};de.useMemo=function(e,t){return at.current.useMemo(e,t)};de.useReducer=function(e,t,r){return at.current.useReducer(e,t,r)};de.useRef=function(e){return at.current.useRef(e)};de.useState=function(e){return at.current.useState(e)};de.useSyncExternalStore=function(e,t,r){return at.current.useSyncExternalStore(e,t,r)};de.useTransition=function(){return at.current.useTransition()};de.version="18.3.1";Jg.exports=de;var j=Jg.exports;const oe=mh(j),t1=Fb({__proto__:null,default:oe},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r1=j,s1=Symbol.for("react.element"),n1=Symbol.for("react.fragment"),i1=Object.prototype.hasOwnProperty,o1=r1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a1={key:!0,ref:!0,__self:!0,__source:!0};function av(e,t,r){var s,i={},a=null,c=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(c=t.ref);for(s in t)i1.call(t,s)&&!a1.hasOwnProperty(s)&&(i[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)i[s]===void 0&&(i[s]=t[s]);return{$$typeof:s1,type:e,key:a,ref:c,props:i,_owner:o1.current}}Yl.Fragment=n1;Yl.jsx=av;Yl.jsxs=av;Xg.exports=Yl;var n=Xg.exports,Ud={},lv={exports:{}},kt={},cv={exports:{}},dv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,E){var R=$.length;$.push(E);e:for(;0<R;){var F=R-1>>>1,M=$[F];if(0<i(M,E))$[F]=E,$[R]=M,R=F;else break e}}function r($){return $.length===0?null:$[0]}function s($){if($.length===0)return null;var E=$[0],R=$.pop();if(R!==E){$[0]=R;e:for(var F=0,M=$.length,z=M>>>1;F<z;){var q=2*(F+1)-1,Y=$[q],te=q+1,W=$[te];if(0>i(Y,R))te<M&&0>i(W,Y)?($[F]=W,$[te]=R,F=te):($[F]=Y,$[q]=R,F=q);else if(te<M&&0>i(W,R))$[F]=W,$[te]=R,F=te;else break e}}return E}function i($,E){var R=$.sortIndex-E.sortIndex;return R!==0?R:$.id-E.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var c=Date,o=c.now();e.unstable_now=function(){return c.now()-o}}var l=[],f=[],v=1,h=null,g=3,y=!1,_=!1,x=!1,m=typeof setTimeout=="function"?setTimeout:null,d=typeof clearTimeout=="function"?clearTimeout:null,u=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p($){for(var E=r(f);E!==null;){if(E.callback===null)s(f);else if(E.startTime<=$)s(f),E.sortIndex=E.expirationTime,t(l,E);else break;E=r(f)}}function b($){if(x=!1,p($),!_)if(r(l)!==null)_=!0,B(S);else{var E=r(f);E!==null&&U(b,E.startTime-$)}}function S($,E){_=!1,x&&(x=!1,d(w),w=-1),y=!0;var R=g;try{for(p(E),h=r(l);h!==null&&(!(h.expirationTime>E)||$&&!T());){var F=h.callback;if(typeof F=="function"){h.callback=null,g=h.priorityLevel;var M=F(h.expirationTime<=E);E=e.unstable_now(),typeof M=="function"?h.callback=M:h===r(l)&&s(l),p(E)}else s(l);h=r(l)}if(h!==null)var z=!0;else{var q=r(f);q!==null&&U(b,q.startTime-E),z=!1}return z}finally{h=null,g=R,y=!1}}var C=!1,k=null,w=-1,N=5,D=-1;function T(){return!(e.unstable_now()-D<N)}function I(){if(k!==null){var $=e.unstable_now();D=$;var E=!0;try{E=k(!0,$)}finally{E?A():(C=!1,k=null)}}else C=!1}var A;if(typeof u=="function")A=function(){u(I)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,P=O.port2;O.port1.onmessage=I,A=function(){P.postMessage(null)}}else A=function(){m(I,0)};function B($){k=$,C||(C=!0,A())}function U($,E){w=m(function(){$(e.unstable_now())},E)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){_||y||(_=!0,B(S))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function($){switch(g){case 1:case 2:case 3:var E=3;break;default:E=g}var R=g;g=E;try{return $()}finally{g=R}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,E){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var R=g;g=$;try{return E()}finally{g=R}},e.unstable_scheduleCallback=function($,E,R){var F=e.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?F+R:F):R=F,$){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=R+M,$={id:v++,callback:E,priorityLevel:$,startTime:R,expirationTime:M,sortIndex:-1},R>F?($.sortIndex=R,t(f,$),r(l)===null&&$===r(f)&&(x?(d(w),w=-1):x=!0,U(b,R-F))):($.sortIndex=M,t(l,$),_||y||(_=!0,B(S))),$},e.unstable_shouldYield=T,e.unstable_wrapCallback=function($){var E=g;return function(){var R=g;g=E;try{return $.apply(this,arguments)}finally{g=R}}}})(dv);cv.exports=dv;var l1=cv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c1=j,Ct=l1;function K(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uv=new Set,Qi={};function rn(e,t){$n(e,t),$n(e+"Capture",t)}function $n(e,t){for(Qi[e]=t,e=0;e<t.length;e++)uv.add(t[e])}var Sr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wd=Object.prototype.hasOwnProperty,d1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,op={},ap={};function u1(e){return Wd.call(ap,e)?!0:Wd.call(op,e)?!1:d1.test(e)?ap[e]=!0:(op[e]=!0,!1)}function h1(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function f1(e,t,r,s){if(t===null||typeof t>"u"||h1(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function lt(e,t,r,s,i,a,c){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=c}var Qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Qe[e]=new lt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Qe[t]=new lt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Qe[e]=new lt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Qe[e]=new lt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Qe[e]=new lt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Qe[e]=new lt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Qe[e]=new lt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Qe[e]=new lt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Qe[e]=new lt(e,5,!1,e.toLowerCase(),null,!1,!1)});var bh=/[\-:]([a-z])/g;function _h(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(bh,_h);Qe[t]=new lt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(bh,_h);Qe[t]=new lt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(bh,_h);Qe[t]=new lt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Qe[e]=new lt(e,1,!1,e.toLowerCase(),null,!1,!1)});Qe.xlinkHref=new lt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Qe[e]=new lt(e,1,!1,e.toLowerCase(),null,!0,!0)});function wh(e,t,r,s){var i=Qe.hasOwnProperty(t)?Qe[t]:null;(i!==null?i.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(f1(t,r,i,s)&&(r=null),s||i===null?u1(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,s=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var Dr=c1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fa=Symbol.for("react.element"),cn=Symbol.for("react.portal"),dn=Symbol.for("react.fragment"),Sh=Symbol.for("react.strict_mode"),zd=Symbol.for("react.profiler"),hv=Symbol.for("react.provider"),fv=Symbol.for("react.context"),Ch=Symbol.for("react.forward_ref"),Vd=Symbol.for("react.suspense"),qd=Symbol.for("react.suspense_list"),kh=Symbol.for("react.memo"),Lr=Symbol.for("react.lazy"),pv=Symbol.for("react.offscreen"),lp=Symbol.iterator;function pi(e){return e===null||typeof e!="object"?null:(e=lp&&e[lp]||e["@@iterator"],typeof e=="function"?e:null)}var De=Object.assign,Kc;function ji(e){if(Kc===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Kc=t&&t[1]||""}return`
`+Kc+e}var Qc=!1;function Yc(e,t){if(!e||Qc)return"";Qc=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var s=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){s=f}e.call(t.prototype)}else{try{throw Error()}catch(f){s=f}e()}}catch(f){if(f&&s&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),a=s.stack.split(`
`),c=i.length-1,o=a.length-1;1<=c&&0<=o&&i[c]!==a[o];)o--;for(;1<=c&&0<=o;c--,o--)if(i[c]!==a[o]){if(c!==1||o!==1)do if(c--,o--,0>o||i[c]!==a[o]){var l=`
`+i[c].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=c&&0<=o);break}}}finally{Qc=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?ji(e):""}function p1(e){switch(e.tag){case 5:return ji(e.type);case 16:return ji("Lazy");case 13:return ji("Suspense");case 19:return ji("SuspenseList");case 0:case 2:case 15:return e=Yc(e.type,!1),e;case 11:return e=Yc(e.type.render,!1),e;case 1:return e=Yc(e.type,!0),e;default:return""}}function Gd(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case dn:return"Fragment";case cn:return"Portal";case zd:return"Profiler";case Sh:return"StrictMode";case Vd:return"Suspense";case qd:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case fv:return(e.displayName||"Context")+".Consumer";case hv:return(e._context.displayName||"Context")+".Provider";case Ch:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case kh:return t=e.displayName||null,t!==null?t:Gd(e.type)||"Memo";case Lr:t=e._payload,e=e._init;try{return Gd(e(t))}catch{}}return null}function m1(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gd(t);case 8:return t===Sh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function us(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function mv(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function g1(e){var t=mv(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(c){s=""+c,a.call(this,c)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(c){s=""+c},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function pa(e){e._valueTracker||(e._valueTracker=g1(e))}function gv(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=mv(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function nl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Kd(e,t){var r=t.checked;return De({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function cp(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=us(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function vv(e,t){t=t.checked,t!=null&&wh(e,"checked",t,!1)}function Qd(e,t){vv(e,t);var r=us(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Yd(e,t.type,r):t.hasOwnProperty("defaultValue")&&Yd(e,t.type,us(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function dp(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Yd(e,t,r){(t!=="number"||nl(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ni=Array.isArray;function _n(e,t,r,s){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&s&&(e[r].defaultSelected=!0)}else{for(r=""+us(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,s&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Xd(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(K(91));return De({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function up(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(K(92));if(Ni(r)){if(1<r.length)throw Error(K(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:us(r)}}function xv(e,t){var r=us(t.value),s=us(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function hp(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function yv(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jd(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?yv(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ma,bv=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ma=ma||document.createElement("div"),ma.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ma.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Yi(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ti={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},v1=["Webkit","ms","Moz","O"];Object.keys(Ti).forEach(function(e){v1.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ti[t]=Ti[e]})});function _v(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ti.hasOwnProperty(e)&&Ti[e]?(""+t).trim():t+"px"}function wv(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,i=_v(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,i):e[r]=i}}var x1=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zd(e,t){if(t){if(x1[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(K(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(K(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(K(61))}if(t.style!=null&&typeof t.style!="object")throw Error(K(62))}}function eu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tu=null;function jh(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ru=null,wn=null,Sn=null;function fp(e){if(e=Uo(e)){if(typeof ru!="function")throw Error(K(280));var t=e.stateNode;t&&(t=tc(t),ru(e.stateNode,e.type,t))}}function Sv(e){wn?Sn?Sn.push(e):Sn=[e]:wn=e}function Cv(){if(wn){var e=wn,t=Sn;if(Sn=wn=null,fp(e),t)for(e=0;e<t.length;e++)fp(t[e])}}function kv(e,t){return e(t)}function jv(){}var Xc=!1;function Nv(e,t,r){if(Xc)return e(t,r);Xc=!0;try{return kv(e,t,r)}finally{Xc=!1,(wn!==null||Sn!==null)&&(jv(),Cv())}}function Xi(e,t){var r=e.stateNode;if(r===null)return null;var s=tc(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(K(231,t,typeof r));return r}var su=!1;if(Sr)try{var mi={};Object.defineProperty(mi,"passive",{get:function(){su=!0}}),window.addEventListener("test",mi,mi),window.removeEventListener("test",mi,mi)}catch{su=!1}function y1(e,t,r,s,i,a,c,o,l){var f=Array.prototype.slice.call(arguments,3);try{t.apply(r,f)}catch(v){this.onError(v)}}var Li=!1,il=null,ol=!1,nu=null,b1={onError:function(e){Li=!0,il=e}};function _1(e,t,r,s,i,a,c,o,l){Li=!1,il=null,y1.apply(b1,arguments)}function w1(e,t,r,s,i,a,c,o,l){if(_1.apply(this,arguments),Li){if(Li){var f=il;Li=!1,il=null}else throw Error(K(198));ol||(ol=!0,nu=f)}}function sn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Ev(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function pp(e){if(sn(e)!==e)throw Error(K(188))}function S1(e){var t=e.alternate;if(!t){if(t=sn(e),t===null)throw Error(K(188));return t!==e?null:e}for(var r=e,s=t;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(s=i.return,s!==null){r=s;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return pp(i),e;if(a===s)return pp(i),t;a=a.sibling}throw Error(K(188))}if(r.return!==s.return)r=i,s=a;else{for(var c=!1,o=i.child;o;){if(o===r){c=!0,r=i,s=a;break}if(o===s){c=!0,s=i,r=a;break}o=o.sibling}if(!c){for(o=a.child;o;){if(o===r){c=!0,r=a,s=i;break}if(o===s){c=!0,s=a,r=i;break}o=o.sibling}if(!c)throw Error(K(189))}}if(r.alternate!==s)throw Error(K(190))}if(r.tag!==3)throw Error(K(188));return r.stateNode.current===r?e:t}function Dv(e){return e=S1(e),e!==null?Pv(e):null}function Pv(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Pv(e);if(t!==null)return t;e=e.sibling}return null}var Rv=Ct.unstable_scheduleCallback,mp=Ct.unstable_cancelCallback,C1=Ct.unstable_shouldYield,k1=Ct.unstable_requestPaint,Te=Ct.unstable_now,j1=Ct.unstable_getCurrentPriorityLevel,Nh=Ct.unstable_ImmediatePriority,Av=Ct.unstable_UserBlockingPriority,al=Ct.unstable_NormalPriority,N1=Ct.unstable_LowPriority,Tv=Ct.unstable_IdlePriority,Xl=null,dr=null;function E1(e){if(dr&&typeof dr.onCommitFiberRoot=="function")try{dr.onCommitFiberRoot(Xl,e,void 0,(e.current.flags&128)===128)}catch{}}var Zt=Math.clz32?Math.clz32:R1,D1=Math.log,P1=Math.LN2;function R1(e){return e>>>=0,e===0?32:31-(D1(e)/P1|0)|0}var ga=64,va=4194304;function Ei(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ll(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,i=e.suspendedLanes,a=e.pingedLanes,c=r&268435455;if(c!==0){var o=c&~i;o!==0?s=Ei(o):(a&=c,a!==0&&(s=Ei(a)))}else c=r&~i,c!==0?s=Ei(c):a!==0&&(s=Ei(a));if(s===0)return 0;if(t!==0&&t!==s&&!(t&i)&&(i=s&-s,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-Zt(t),i=1<<r,s|=e[r],t&=~i;return s}function A1(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function T1(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var c=31-Zt(a),o=1<<c,l=i[c];l===-1?(!(o&r)||o&s)&&(i[c]=A1(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}function iu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Lv(){var e=ga;return ga<<=1,!(ga&4194240)&&(ga=64),e}function Jc(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function $o(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Zt(t),e[t]=r}function L1(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-Zt(r),a=1<<i;t[i]=0,s[i]=-1,e[i]=-1,r&=~a}}function Eh(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-Zt(r),i=1<<s;i&t|e[s]&t&&(e[s]|=t),r&=~i}}var ge=0;function Iv(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Mv,Dh,Ov,Bv,Fv,ou=!1,xa=[],Xr=null,Jr=null,Zr=null,Ji=new Map,Zi=new Map,Mr=[],I1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gp(e,t){switch(e){case"focusin":case"focusout":Xr=null;break;case"dragenter":case"dragleave":Jr=null;break;case"mouseover":case"mouseout":Zr=null;break;case"pointerover":case"pointerout":Ji.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zi.delete(t.pointerId)}}function gi(e,t,r,s,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Uo(t),t!==null&&Dh(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function M1(e,t,r,s,i){switch(t){case"focusin":return Xr=gi(Xr,e,t,r,s,i),!0;case"dragenter":return Jr=gi(Jr,e,t,r,s,i),!0;case"mouseover":return Zr=gi(Zr,e,t,r,s,i),!0;case"pointerover":var a=i.pointerId;return Ji.set(a,gi(Ji.get(a)||null,e,t,r,s,i)),!0;case"gotpointercapture":return a=i.pointerId,Zi.set(a,gi(Zi.get(a)||null,e,t,r,s,i)),!0}return!1}function $v(e){var t=As(e.target);if(t!==null){var r=sn(t);if(r!==null){if(t=r.tag,t===13){if(t=Ev(r),t!==null){e.blockedOn=t,Fv(e.priority,function(){Ov(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ua(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=au(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);tu=s,r.target.dispatchEvent(s),tu=null}else return t=Uo(r),t!==null&&Dh(t),e.blockedOn=r,!1;t.shift()}return!0}function vp(e,t,r){Ua(e)&&r.delete(t)}function O1(){ou=!1,Xr!==null&&Ua(Xr)&&(Xr=null),Jr!==null&&Ua(Jr)&&(Jr=null),Zr!==null&&Ua(Zr)&&(Zr=null),Ji.forEach(vp),Zi.forEach(vp)}function vi(e,t){e.blockedOn===t&&(e.blockedOn=null,ou||(ou=!0,Ct.unstable_scheduleCallback(Ct.unstable_NormalPriority,O1)))}function eo(e){function t(i){return vi(i,e)}if(0<xa.length){vi(xa[0],e);for(var r=1;r<xa.length;r++){var s=xa[r];s.blockedOn===e&&(s.blockedOn=null)}}for(Xr!==null&&vi(Xr,e),Jr!==null&&vi(Jr,e),Zr!==null&&vi(Zr,e),Ji.forEach(t),Zi.forEach(t),r=0;r<Mr.length;r++)s=Mr[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<Mr.length&&(r=Mr[0],r.blockedOn===null);)$v(r),r.blockedOn===null&&Mr.shift()}var Cn=Dr.ReactCurrentBatchConfig,cl=!0;function B1(e,t,r,s){var i=ge,a=Cn.transition;Cn.transition=null;try{ge=1,Ph(e,t,r,s)}finally{ge=i,Cn.transition=a}}function F1(e,t,r,s){var i=ge,a=Cn.transition;Cn.transition=null;try{ge=4,Ph(e,t,r,s)}finally{ge=i,Cn.transition=a}}function Ph(e,t,r,s){if(cl){var i=au(e,t,r,s);if(i===null)ld(e,t,s,dl,r),gp(e,s);else if(M1(i,e,t,r,s))s.stopPropagation();else if(gp(e,s),t&4&&-1<I1.indexOf(e)){for(;i!==null;){var a=Uo(i);if(a!==null&&Mv(a),a=au(e,t,r,s),a===null&&ld(e,t,s,dl,r),a===i)break;i=a}i!==null&&s.stopPropagation()}else ld(e,t,s,null,r)}}var dl=null;function au(e,t,r,s){if(dl=null,e=jh(s),e=As(e),e!==null)if(t=sn(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Ev(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return dl=e,null}function Hv(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(j1()){case Nh:return 1;case Av:return 4;case al:case N1:return 16;case Tv:return 536870912;default:return 16}default:return 16}}var qr=null,Rh=null,Wa=null;function Uv(){if(Wa)return Wa;var e,t=Rh,r=t.length,s,i="value"in qr?qr.value:qr.textContent,a=i.length;for(e=0;e<r&&t[e]===i[e];e++);var c=r-e;for(s=1;s<=c&&t[r-s]===i[a-s];s++);return Wa=i.slice(e,1<s?1-s:void 0)}function za(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ya(){return!0}function xp(){return!1}function jt(e){function t(r,s,i,a,c){this._reactName=r,this._targetInst=i,this.type=s,this.nativeEvent=a,this.target=c,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?ya:xp,this.isPropagationStopped=xp,this}return De(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ya)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ya)},persist:function(){},isPersistent:ya}),t}var ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ah=jt(ni),Ho=De({},ni,{view:0,detail:0}),$1=jt(Ho),Zc,ed,xi,Jl=De({},Ho,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Th,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xi&&(xi&&e.type==="mousemove"?(Zc=e.screenX-xi.screenX,ed=e.screenY-xi.screenY):ed=Zc=0,xi=e),Zc)},movementY:function(e){return"movementY"in e?e.movementY:ed}}),yp=jt(Jl),H1=De({},Jl,{dataTransfer:0}),U1=jt(H1),W1=De({},Ho,{relatedTarget:0}),td=jt(W1),z1=De({},ni,{animationName:0,elapsedTime:0,pseudoElement:0}),V1=jt(z1),q1=De({},ni,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),G1=jt(q1),K1=De({},ni,{data:0}),bp=jt(K1),Q1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Y1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},X1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function J1(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=X1[e])?!!t[e]:!1}function Th(){return J1}var Z1=De({},Ho,{key:function(e){if(e.key){var t=Q1[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=za(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Y1[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Th,charCode:function(e){return e.type==="keypress"?za(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?za(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),e_=jt(Z1),t_=De({},Jl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_p=jt(t_),r_=De({},Ho,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Th}),s_=jt(r_),n_=De({},ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),i_=jt(n_),o_=De({},Jl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),a_=jt(o_),l_=[9,13,27,32],Lh=Sr&&"CompositionEvent"in window,Ii=null;Sr&&"documentMode"in document&&(Ii=document.documentMode);var c_=Sr&&"TextEvent"in window&&!Ii,Wv=Sr&&(!Lh||Ii&&8<Ii&&11>=Ii),wp=String.fromCharCode(32),Sp=!1;function zv(e,t){switch(e){case"keyup":return l_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var un=!1;function d_(e,t){switch(e){case"compositionend":return Vv(t);case"keypress":return t.which!==32?null:(Sp=!0,wp);case"textInput":return e=t.data,e===wp&&Sp?null:e;default:return null}}function u_(e,t){if(un)return e==="compositionend"||!Lh&&zv(e,t)?(e=Uv(),Wa=Rh=qr=null,un=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Wv&&t.locale!=="ko"?null:t.data;default:return null}}var h_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!h_[e.type]:t==="textarea"}function qv(e,t,r,s){Sv(s),t=ul(t,"onChange"),0<t.length&&(r=new Ah("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Mi=null,to=null;function f_(e){sx(e,0)}function Zl(e){var t=pn(e);if(gv(t))return e}function p_(e,t){if(e==="change")return t}var Gv=!1;if(Sr){var rd;if(Sr){var sd="oninput"in document;if(!sd){var kp=document.createElement("div");kp.setAttribute("oninput","return;"),sd=typeof kp.oninput=="function"}rd=sd}else rd=!1;Gv=rd&&(!document.documentMode||9<document.documentMode)}function jp(){Mi&&(Mi.detachEvent("onpropertychange",Kv),to=Mi=null)}function Kv(e){if(e.propertyName==="value"&&Zl(to)){var t=[];qv(t,to,e,jh(e)),Nv(f_,t)}}function m_(e,t,r){e==="focusin"?(jp(),Mi=t,to=r,Mi.attachEvent("onpropertychange",Kv)):e==="focusout"&&jp()}function g_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Zl(to)}function v_(e,t){if(e==="click")return Zl(t)}function x_(e,t){if(e==="input"||e==="change")return Zl(t)}function y_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var tr=typeof Object.is=="function"?Object.is:y_;function ro(e,t){if(tr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var i=r[s];if(!Wd.call(t,i)||!tr(e[i],t[i]))return!1}return!0}function Np(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ep(e,t){var r=Np(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Np(r)}}function Qv(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Qv(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Yv(){for(var e=window,t=nl();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=nl(e.document)}return t}function Ih(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function b_(e){var t=Yv(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Qv(r.ownerDocument.documentElement,r)){if(s!==null&&Ih(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,a=Math.min(s.start,i);s=s.end===void 0?a:Math.min(s.end,i),!e.extend&&a>s&&(i=s,s=a,a=i),i=Ep(r,a);var c=Ep(r,s);i&&c&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==c.node||e.focusOffset!==c.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>s?(e.addRange(t),e.extend(c.node,c.offset)):(t.setEnd(c.node,c.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var __=Sr&&"documentMode"in document&&11>=document.documentMode,hn=null,lu=null,Oi=null,cu=!1;function Dp(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;cu||hn==null||hn!==nl(s)||(s=hn,"selectionStart"in s&&Ih(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Oi&&ro(Oi,s)||(Oi=s,s=ul(lu,"onSelect"),0<s.length&&(t=new Ah("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=hn)))}function ba(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var fn={animationend:ba("Animation","AnimationEnd"),animationiteration:ba("Animation","AnimationIteration"),animationstart:ba("Animation","AnimationStart"),transitionend:ba("Transition","TransitionEnd")},nd={},Xv={};Sr&&(Xv=document.createElement("div").style,"AnimationEvent"in window||(delete fn.animationend.animation,delete fn.animationiteration.animation,delete fn.animationstart.animation),"TransitionEvent"in window||delete fn.transitionend.transition);function ec(e){if(nd[e])return nd[e];if(!fn[e])return e;var t=fn[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Xv)return nd[e]=t[r];return e}var Jv=ec("animationend"),Zv=ec("animationiteration"),ex=ec("animationstart"),tx=ec("transitionend"),rx=new Map,Pp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vs(e,t){rx.set(e,t),rn(t,[e])}for(var id=0;id<Pp.length;id++){var od=Pp[id],w_=od.toLowerCase(),S_=od[0].toUpperCase()+od.slice(1);vs(w_,"on"+S_)}vs(Jv,"onAnimationEnd");vs(Zv,"onAnimationIteration");vs(ex,"onAnimationStart");vs("dblclick","onDoubleClick");vs("focusin","onFocus");vs("focusout","onBlur");vs(tx,"onTransitionEnd");$n("onMouseEnter",["mouseout","mouseover"]);$n("onMouseLeave",["mouseout","mouseover"]);$n("onPointerEnter",["pointerout","pointerover"]);$n("onPointerLeave",["pointerout","pointerover"]);rn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rn("onBeforeInput",["compositionend","keypress","textInput","paste"]);rn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Di="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Di));function Rp(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,w1(s,t,void 0,e),e.currentTarget=null}function sx(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],i=s.event;s=s.listeners;e:{var a=void 0;if(t)for(var c=s.length-1;0<=c;c--){var o=s[c],l=o.instance,f=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;Rp(i,o,f),a=l}else for(c=0;c<s.length;c++){if(o=s[c],l=o.instance,f=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;Rp(i,o,f),a=l}}}if(ol)throw e=nu,ol=!1,nu=null,e}function Se(e,t){var r=t[pu];r===void 0&&(r=t[pu]=new Set);var s=e+"__bubble";r.has(s)||(nx(t,e,2,!1),r.add(s))}function ad(e,t,r){var s=0;t&&(s|=4),nx(r,e,s,t)}var _a="_reactListening"+Math.random().toString(36).slice(2);function so(e){if(!e[_a]){e[_a]=!0,uv.forEach(function(r){r!=="selectionchange"&&(C_.has(r)||ad(r,!1,e),ad(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[_a]||(t[_a]=!0,ad("selectionchange",!1,t))}}function nx(e,t,r,s){switch(Hv(t)){case 1:var i=B1;break;case 4:i=F1;break;default:i=Ph}r=i.bind(null,t,r,e),i=void 0,!su||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),s?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function ld(e,t,r,s,i){var a=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var c=s.tag;if(c===3||c===4){var o=s.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(c===4)for(c=s.return;c!==null;){var l=c.tag;if((l===3||l===4)&&(l=c.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;c=c.return}for(;o!==null;){if(c=As(o),c===null)return;if(l=c.tag,l===5||l===6){s=a=c;continue e}o=o.parentNode}}s=s.return}Nv(function(){var f=a,v=jh(r),h=[];e:{var g=rx.get(e);if(g!==void 0){var y=Ah,_=e;switch(e){case"keypress":if(za(r)===0)break e;case"keydown":case"keyup":y=e_;break;case"focusin":_="focus",y=td;break;case"focusout":_="blur",y=td;break;case"beforeblur":case"afterblur":y=td;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=yp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=U1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=s_;break;case Jv:case Zv:case ex:y=V1;break;case tx:y=i_;break;case"scroll":y=$1;break;case"wheel":y=a_;break;case"copy":case"cut":case"paste":y=G1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=_p}var x=(t&4)!==0,m=!x&&e==="scroll",d=x?g!==null?g+"Capture":null:g;x=[];for(var u=f,p;u!==null;){p=u;var b=p.stateNode;if(p.tag===5&&b!==null&&(p=b,d!==null&&(b=Xi(u,d),b!=null&&x.push(no(u,b,p)))),m)break;u=u.return}0<x.length&&(g=new y(g,_,null,r,v),h.push({event:g,listeners:x}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",g&&r!==tu&&(_=r.relatedTarget||r.fromElement)&&(As(_)||_[Cr]))break e;if((y||g)&&(g=v.window===v?v:(g=v.ownerDocument)?g.defaultView||g.parentWindow:window,y?(_=r.relatedTarget||r.toElement,y=f,_=_?As(_):null,_!==null&&(m=sn(_),_!==m||_.tag!==5&&_.tag!==6)&&(_=null)):(y=null,_=f),y!==_)){if(x=yp,b="onMouseLeave",d="onMouseEnter",u="mouse",(e==="pointerout"||e==="pointerover")&&(x=_p,b="onPointerLeave",d="onPointerEnter",u="pointer"),m=y==null?g:pn(y),p=_==null?g:pn(_),g=new x(b,u+"leave",y,r,v),g.target=m,g.relatedTarget=p,b=null,As(v)===f&&(x=new x(d,u+"enter",_,r,v),x.target=p,x.relatedTarget=m,b=x),m=b,y&&_)t:{for(x=y,d=_,u=0,p=x;p;p=nn(p))u++;for(p=0,b=d;b;b=nn(b))p++;for(;0<u-p;)x=nn(x),u--;for(;0<p-u;)d=nn(d),p--;for(;u--;){if(x===d||d!==null&&x===d.alternate)break t;x=nn(x),d=nn(d)}x=null}else x=null;y!==null&&Ap(h,g,y,x,!1),_!==null&&m!==null&&Ap(h,m,_,x,!0)}}e:{if(g=f?pn(f):window,y=g.nodeName&&g.nodeName.toLowerCase(),y==="select"||y==="input"&&g.type==="file")var S=p_;else if(Cp(g))if(Gv)S=x_;else{S=g_;var C=m_}else(y=g.nodeName)&&y.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(S=v_);if(S&&(S=S(e,f))){qv(h,S,r,v);break e}C&&C(e,g,f),e==="focusout"&&(C=g._wrapperState)&&C.controlled&&g.type==="number"&&Yd(g,"number",g.value)}switch(C=f?pn(f):window,e){case"focusin":(Cp(C)||C.contentEditable==="true")&&(hn=C,lu=f,Oi=null);break;case"focusout":Oi=lu=hn=null;break;case"mousedown":cu=!0;break;case"contextmenu":case"mouseup":case"dragend":cu=!1,Dp(h,r,v);break;case"selectionchange":if(__)break;case"keydown":case"keyup":Dp(h,r,v)}var k;if(Lh)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else un?zv(e,r)&&(w="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(w="onCompositionStart");w&&(Wv&&r.locale!=="ko"&&(un||w!=="onCompositionStart"?w==="onCompositionEnd"&&un&&(k=Uv()):(qr=v,Rh="value"in qr?qr.value:qr.textContent,un=!0)),C=ul(f,w),0<C.length&&(w=new bp(w,e,null,r,v),h.push({event:w,listeners:C}),k?w.data=k:(k=Vv(r),k!==null&&(w.data=k)))),(k=c_?d_(e,r):u_(e,r))&&(f=ul(f,"onBeforeInput"),0<f.length&&(v=new bp("onBeforeInput","beforeinput",null,r,v),h.push({event:v,listeners:f}),v.data=k))}sx(h,t)})}function no(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ul(e,t){for(var r=t+"Capture",s=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Xi(e,r),a!=null&&s.unshift(no(e,a,i)),a=Xi(e,t),a!=null&&s.push(no(e,a,i))),e=e.return}return s}function nn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ap(e,t,r,s,i){for(var a=t._reactName,c=[];r!==null&&r!==s;){var o=r,l=o.alternate,f=o.stateNode;if(l!==null&&l===s)break;o.tag===5&&f!==null&&(o=f,i?(l=Xi(r,a),l!=null&&c.unshift(no(r,l,o))):i||(l=Xi(r,a),l!=null&&c.push(no(r,l,o)))),r=r.return}c.length!==0&&e.push({event:t,listeners:c})}var k_=/\r\n?/g,j_=/\u0000|\uFFFD/g;function Tp(e){return(typeof e=="string"?e:""+e).replace(k_,`
`).replace(j_,"")}function wa(e,t,r){if(t=Tp(t),Tp(e)!==t&&r)throw Error(K(425))}function hl(){}var du=null,uu=null;function hu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var fu=typeof setTimeout=="function"?setTimeout:void 0,N_=typeof clearTimeout=="function"?clearTimeout:void 0,Lp=typeof Promise=="function"?Promise:void 0,E_=typeof queueMicrotask=="function"?queueMicrotask:typeof Lp<"u"?function(e){return Lp.resolve(null).then(e).catch(D_)}:fu;function D_(e){setTimeout(function(){throw e})}function cd(e,t){var r=t,s=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(s===0){e.removeChild(i),eo(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=i}while(r);eo(t)}function es(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ip(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var ii=Math.random().toString(36).slice(2),cr="__reactFiber$"+ii,io="__reactProps$"+ii,Cr="__reactContainer$"+ii,pu="__reactEvents$"+ii,P_="__reactListeners$"+ii,R_="__reactHandles$"+ii;function As(e){var t=e[cr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Cr]||r[cr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Ip(e);e!==null;){if(r=e[cr])return r;e=Ip(e)}return t}e=r,r=e.parentNode}return null}function Uo(e){return e=e[cr]||e[Cr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function pn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(K(33))}function tc(e){return e[io]||null}var mu=[],mn=-1;function xs(e){return{current:e}}function Ce(e){0>mn||(e.current=mu[mn],mu[mn]=null,mn--)}function _e(e,t){mn++,mu[mn]=e.current,e.current=t}var hs={},et=xs(hs),mt=xs(!1),Gs=hs;function Hn(e,t){var r=e.type.contextTypes;if(!r)return hs;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=t[a];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function gt(e){return e=e.childContextTypes,e!=null}function fl(){Ce(mt),Ce(et)}function Mp(e,t,r){if(et.current!==hs)throw Error(K(168));_e(et,t),_e(mt,r)}function ix(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var i in s)if(!(i in t))throw Error(K(108,m1(e)||"Unknown",i));return De({},r,s)}function pl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hs,Gs=et.current,_e(et,e),_e(mt,mt.current),!0}function Op(e,t,r){var s=e.stateNode;if(!s)throw Error(K(169));r?(e=ix(e,t,Gs),s.__reactInternalMemoizedMergedChildContext=e,Ce(mt),Ce(et),_e(et,e)):Ce(mt),_e(mt,r)}var xr=null,rc=!1,dd=!1;function ox(e){xr===null?xr=[e]:xr.push(e)}function A_(e){rc=!0,ox(e)}function ys(){if(!dd&&xr!==null){dd=!0;var e=0,t=ge;try{var r=xr;for(ge=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}xr=null,rc=!1}catch(i){throw xr!==null&&(xr=xr.slice(e+1)),Rv(Nh,ys),i}finally{ge=t,dd=!1}}return null}var gn=[],vn=0,ml=null,gl=0,Tt=[],Lt=0,Ks=null,br=1,_r="";function Es(e,t){gn[vn++]=gl,gn[vn++]=ml,ml=e,gl=t}function ax(e,t,r){Tt[Lt++]=br,Tt[Lt++]=_r,Tt[Lt++]=Ks,Ks=e;var s=br;e=_r;var i=32-Zt(s)-1;s&=~(1<<i),r+=1;var a=32-Zt(t)+i;if(30<a){var c=i-i%5;a=(s&(1<<c)-1).toString(32),s>>=c,i-=c,br=1<<32-Zt(t)+i|r<<i|s,_r=a+e}else br=1<<a|r<<i|s,_r=e}function Mh(e){e.return!==null&&(Es(e,1),ax(e,1,0))}function Oh(e){for(;e===ml;)ml=gn[--vn],gn[vn]=null,gl=gn[--vn],gn[vn]=null;for(;e===Ks;)Ks=Tt[--Lt],Tt[Lt]=null,_r=Tt[--Lt],Tt[Lt]=null,br=Tt[--Lt],Tt[Lt]=null}var _t=null,yt=null,ke=!1,Qt=null;function lx(e,t){var r=Mt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Bp(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,_t=e,yt=es(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,_t=e,yt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Ks!==null?{id:br,overflow:_r}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Mt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,_t=e,yt=null,!0):!1;default:return!1}}function gu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function vu(e){if(ke){var t=yt;if(t){var r=t;if(!Bp(e,t)){if(gu(e))throw Error(K(418));t=es(r.nextSibling);var s=_t;t&&Bp(e,t)?lx(s,r):(e.flags=e.flags&-4097|2,ke=!1,_t=e)}}else{if(gu(e))throw Error(K(418));e.flags=e.flags&-4097|2,ke=!1,_t=e}}}function Fp(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;_t=e}function Sa(e){if(e!==_t)return!1;if(!ke)return Fp(e),ke=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!hu(e.type,e.memoizedProps)),t&&(t=yt)){if(gu(e))throw cx(),Error(K(418));for(;t;)lx(e,t),t=es(t.nextSibling)}if(Fp(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(K(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){yt=es(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}yt=null}}else yt=_t?es(e.stateNode.nextSibling):null;return!0}function cx(){for(var e=yt;e;)e=es(e.nextSibling)}function Un(){yt=_t=null,ke=!1}function Bh(e){Qt===null?Qt=[e]:Qt.push(e)}var T_=Dr.ReactCurrentBatchConfig;function yi(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(K(309));var s=r.stateNode}if(!s)throw Error(K(147,e));var i=s,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(c){var o=i.refs;c===null?delete o[a]:o[a]=c},t._stringRef=a,t)}if(typeof e!="string")throw Error(K(284));if(!r._owner)throw Error(K(290,e))}return e}function Ca(e,t){throw e=Object.prototype.toString.call(t),Error(K(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $p(e){var t=e._init;return t(e._payload)}function dx(e){function t(d,u){if(e){var p=d.deletions;p===null?(d.deletions=[u],d.flags|=16):p.push(u)}}function r(d,u){if(!e)return null;for(;u!==null;)t(d,u),u=u.sibling;return null}function s(d,u){for(d=new Map;u!==null;)u.key!==null?d.set(u.key,u):d.set(u.index,u),u=u.sibling;return d}function i(d,u){return d=ns(d,u),d.index=0,d.sibling=null,d}function a(d,u,p){return d.index=p,e?(p=d.alternate,p!==null?(p=p.index,p<u?(d.flags|=2,u):p):(d.flags|=2,u)):(d.flags|=1048576,u)}function c(d){return e&&d.alternate===null&&(d.flags|=2),d}function o(d,u,p,b){return u===null||u.tag!==6?(u=vd(p,d.mode,b),u.return=d,u):(u=i(u,p),u.return=d,u)}function l(d,u,p,b){var S=p.type;return S===dn?v(d,u,p.props.children,b,p.key):u!==null&&(u.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Lr&&$p(S)===u.type)?(b=i(u,p.props),b.ref=yi(d,u,p),b.return=d,b):(b=Xa(p.type,p.key,p.props,null,d.mode,b),b.ref=yi(d,u,p),b.return=d,b)}function f(d,u,p,b){return u===null||u.tag!==4||u.stateNode.containerInfo!==p.containerInfo||u.stateNode.implementation!==p.implementation?(u=xd(p,d.mode,b),u.return=d,u):(u=i(u,p.children||[]),u.return=d,u)}function v(d,u,p,b,S){return u===null||u.tag!==7?(u=qs(p,d.mode,b,S),u.return=d,u):(u=i(u,p),u.return=d,u)}function h(d,u,p){if(typeof u=="string"&&u!==""||typeof u=="number")return u=vd(""+u,d.mode,p),u.return=d,u;if(typeof u=="object"&&u!==null){switch(u.$$typeof){case fa:return p=Xa(u.type,u.key,u.props,null,d.mode,p),p.ref=yi(d,null,u),p.return=d,p;case cn:return u=xd(u,d.mode,p),u.return=d,u;case Lr:var b=u._init;return h(d,b(u._payload),p)}if(Ni(u)||pi(u))return u=qs(u,d.mode,p,null),u.return=d,u;Ca(d,u)}return null}function g(d,u,p,b){var S=u!==null?u.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return S!==null?null:o(d,u,""+p,b);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case fa:return p.key===S?l(d,u,p,b):null;case cn:return p.key===S?f(d,u,p,b):null;case Lr:return S=p._init,g(d,u,S(p._payload),b)}if(Ni(p)||pi(p))return S!==null?null:v(d,u,p,b,null);Ca(d,p)}return null}function y(d,u,p,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return d=d.get(p)||null,o(u,d,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case fa:return d=d.get(b.key===null?p:b.key)||null,l(u,d,b,S);case cn:return d=d.get(b.key===null?p:b.key)||null,f(u,d,b,S);case Lr:var C=b._init;return y(d,u,p,C(b._payload),S)}if(Ni(b)||pi(b))return d=d.get(p)||null,v(u,d,b,S,null);Ca(u,b)}return null}function _(d,u,p,b){for(var S=null,C=null,k=u,w=u=0,N=null;k!==null&&w<p.length;w++){k.index>w?(N=k,k=null):N=k.sibling;var D=g(d,k,p[w],b);if(D===null){k===null&&(k=N);break}e&&k&&D.alternate===null&&t(d,k),u=a(D,u,w),C===null?S=D:C.sibling=D,C=D,k=N}if(w===p.length)return r(d,k),ke&&Es(d,w),S;if(k===null){for(;w<p.length;w++)k=h(d,p[w],b),k!==null&&(u=a(k,u,w),C===null?S=k:C.sibling=k,C=k);return ke&&Es(d,w),S}for(k=s(d,k);w<p.length;w++)N=y(k,d,w,p[w],b),N!==null&&(e&&N.alternate!==null&&k.delete(N.key===null?w:N.key),u=a(N,u,w),C===null?S=N:C.sibling=N,C=N);return e&&k.forEach(function(T){return t(d,T)}),ke&&Es(d,w),S}function x(d,u,p,b){var S=pi(p);if(typeof S!="function")throw Error(K(150));if(p=S.call(p),p==null)throw Error(K(151));for(var C=S=null,k=u,w=u=0,N=null,D=p.next();k!==null&&!D.done;w++,D=p.next()){k.index>w?(N=k,k=null):N=k.sibling;var T=g(d,k,D.value,b);if(T===null){k===null&&(k=N);break}e&&k&&T.alternate===null&&t(d,k),u=a(T,u,w),C===null?S=T:C.sibling=T,C=T,k=N}if(D.done)return r(d,k),ke&&Es(d,w),S;if(k===null){for(;!D.done;w++,D=p.next())D=h(d,D.value,b),D!==null&&(u=a(D,u,w),C===null?S=D:C.sibling=D,C=D);return ke&&Es(d,w),S}for(k=s(d,k);!D.done;w++,D=p.next())D=y(k,d,w,D.value,b),D!==null&&(e&&D.alternate!==null&&k.delete(D.key===null?w:D.key),u=a(D,u,w),C===null?S=D:C.sibling=D,C=D);return e&&k.forEach(function(I){return t(d,I)}),ke&&Es(d,w),S}function m(d,u,p,b){if(typeof p=="object"&&p!==null&&p.type===dn&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case fa:e:{for(var S=p.key,C=u;C!==null;){if(C.key===S){if(S=p.type,S===dn){if(C.tag===7){r(d,C.sibling),u=i(C,p.props.children),u.return=d,d=u;break e}}else if(C.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Lr&&$p(S)===C.type){r(d,C.sibling),u=i(C,p.props),u.ref=yi(d,C,p),u.return=d,d=u;break e}r(d,C);break}else t(d,C);C=C.sibling}p.type===dn?(u=qs(p.props.children,d.mode,b,p.key),u.return=d,d=u):(b=Xa(p.type,p.key,p.props,null,d.mode,b),b.ref=yi(d,u,p),b.return=d,d=b)}return c(d);case cn:e:{for(C=p.key;u!==null;){if(u.key===C)if(u.tag===4&&u.stateNode.containerInfo===p.containerInfo&&u.stateNode.implementation===p.implementation){r(d,u.sibling),u=i(u,p.children||[]),u.return=d,d=u;break e}else{r(d,u);break}else t(d,u);u=u.sibling}u=xd(p,d.mode,b),u.return=d,d=u}return c(d);case Lr:return C=p._init,m(d,u,C(p._payload),b)}if(Ni(p))return _(d,u,p,b);if(pi(p))return x(d,u,p,b);Ca(d,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,u!==null&&u.tag===6?(r(d,u.sibling),u=i(u,p),u.return=d,d=u):(r(d,u),u=vd(p,d.mode,b),u.return=d,d=u),c(d)):r(d,u)}return m}var Wn=dx(!0),ux=dx(!1),vl=xs(null),xl=null,xn=null,Fh=null;function $h(){Fh=xn=xl=null}function Hh(e){var t=vl.current;Ce(vl),e._currentValue=t}function xu(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function kn(e,t){xl=e,Fh=xn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ft=!0),e.firstContext=null)}function $t(e){var t=e._currentValue;if(Fh!==e)if(e={context:e,memoizedValue:t,next:null},xn===null){if(xl===null)throw Error(K(308));xn=e,xl.dependencies={lanes:0,firstContext:e}}else xn=xn.next=e;return t}var Ts=null;function Uh(e){Ts===null?Ts=[e]:Ts.push(e)}function hx(e,t,r,s){var i=t.interleaved;return i===null?(r.next=r,Uh(t)):(r.next=i.next,i.next=r),t.interleaved=r,kr(e,s)}function kr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ir=!1;function Wh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fx(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function wr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ts(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,me&2){var i=s.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),s.pending=t,kr(e,r)}return i=s.interleaved,i===null?(t.next=t,Uh(s)):(t.next=i.next,i.next=t),s.interleaved=t,kr(e,r)}function Va(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Eh(e,r)}}function Hp(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var c={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=c:a=a.next=c,r=r.next}while(r!==null);a===null?i=a=t:a=a.next=t}else i=a=t;r={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function yl(e,t,r,s){var i=e.updateQueue;Ir=!1;var a=i.firstBaseUpdate,c=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,f=l.next;l.next=null,c===null?a=f:c.next=f,c=l;var v=e.alternate;v!==null&&(v=v.updateQueue,o=v.lastBaseUpdate,o!==c&&(o===null?v.firstBaseUpdate=f:o.next=f,v.lastBaseUpdate=l))}if(a!==null){var h=i.baseState;c=0,v=f=l=null,o=a;do{var g=o.lane,y=o.eventTime;if((s&g)===g){v!==null&&(v=v.next={eventTime:y,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var _=e,x=o;switch(g=t,y=r,x.tag){case 1:if(_=x.payload,typeof _=="function"){h=_.call(y,h,g);break e}h=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=x.payload,g=typeof _=="function"?_.call(y,h,g):_,g==null)break e;h=De({},h,g);break e;case 2:Ir=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,g=i.effects,g===null?i.effects=[o]:g.push(o))}else y={eventTime:y,lane:g,tag:o.tag,payload:o.payload,callback:o.callback,next:null},v===null?(f=v=y,l=h):v=v.next=y,c|=g;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;g=o,o=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(1);if(v===null&&(l=h),i.baseState=l,i.firstBaseUpdate=f,i.lastBaseUpdate=v,t=i.shared.interleaved,t!==null){i=t;do c|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Ys|=c,e.lanes=c,e.memoizedState=h}}function Up(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],i=s.callback;if(i!==null){if(s.callback=null,s=r,typeof i!="function")throw Error(K(191,i));i.call(s)}}}var Wo={},ur=xs(Wo),oo=xs(Wo),ao=xs(Wo);function Ls(e){if(e===Wo)throw Error(K(174));return e}function zh(e,t){switch(_e(ao,t),_e(oo,e),_e(ur,Wo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Jd(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Jd(t,e)}Ce(ur),_e(ur,t)}function zn(){Ce(ur),Ce(oo),Ce(ao)}function px(e){Ls(ao.current);var t=Ls(ur.current),r=Jd(t,e.type);t!==r&&(_e(oo,e),_e(ur,r))}function Vh(e){oo.current===e&&(Ce(ur),Ce(oo))}var Ne=xs(0);function bl(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ud=[];function qh(){for(var e=0;e<ud.length;e++)ud[e]._workInProgressVersionPrimary=null;ud.length=0}var qa=Dr.ReactCurrentDispatcher,hd=Dr.ReactCurrentBatchConfig,Qs=0,Ee=null,Me=null,Fe=null,_l=!1,Bi=!1,lo=0,L_=0;function Ye(){throw Error(K(321))}function Gh(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!tr(e[r],t[r]))return!1;return!0}function Kh(e,t,r,s,i,a){if(Qs=a,Ee=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,qa.current=e===null||e.memoizedState===null?B_:F_,e=r(s,i),Bi){a=0;do{if(Bi=!1,lo=0,25<=a)throw Error(K(301));a+=1,Fe=Me=null,t.updateQueue=null,qa.current=$_,e=r(s,i)}while(Bi)}if(qa.current=wl,t=Me!==null&&Me.next!==null,Qs=0,Fe=Me=Ee=null,_l=!1,t)throw Error(K(300));return e}function Qh(){var e=lo!==0;return lo=0,e}function ir(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?Ee.memoizedState=Fe=e:Fe=Fe.next=e,Fe}function Ht(){if(Me===null){var e=Ee.alternate;e=e!==null?e.memoizedState:null}else e=Me.next;var t=Fe===null?Ee.memoizedState:Fe.next;if(t!==null)Fe=t,Me=e;else{if(e===null)throw Error(K(310));Me=e,e={memoizedState:Me.memoizedState,baseState:Me.baseState,baseQueue:Me.baseQueue,queue:Me.queue,next:null},Fe===null?Ee.memoizedState=Fe=e:Fe=Fe.next=e}return Fe}function co(e,t){return typeof t=="function"?t(e):t}function fd(e){var t=Ht(),r=t.queue;if(r===null)throw Error(K(311));r.lastRenderedReducer=e;var s=Me,i=s.baseQueue,a=r.pending;if(a!==null){if(i!==null){var c=i.next;i.next=a.next,a.next=c}s.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,s=s.baseState;var o=c=null,l=null,f=a;do{var v=f.lane;if((Qs&v)===v)l!==null&&(l=l.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),s=f.hasEagerState?f.eagerState:e(s,f.action);else{var h={lane:v,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};l===null?(o=l=h,c=s):l=l.next=h,Ee.lanes|=v,Ys|=v}f=f.next}while(f!==null&&f!==a);l===null?c=s:l.next=o,tr(s,t.memoizedState)||(ft=!0),t.memoizedState=s,t.baseState=c,t.baseQueue=l,r.lastRenderedState=s}if(e=r.interleaved,e!==null){i=e;do a=i.lane,Ee.lanes|=a,Ys|=a,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function pd(e){var t=Ht(),r=t.queue;if(r===null)throw Error(K(311));r.lastRenderedReducer=e;var s=r.dispatch,i=r.pending,a=t.memoizedState;if(i!==null){r.pending=null;var c=i=i.next;do a=e(a,c.action),c=c.next;while(c!==i);tr(a,t.memoizedState)||(ft=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,s]}function mx(){}function gx(e,t){var r=Ee,s=Ht(),i=t(),a=!tr(s.memoizedState,i);if(a&&(s.memoizedState=i,ft=!0),s=s.queue,Yh(yx.bind(null,r,s,e),[e]),s.getSnapshot!==t||a||Fe!==null&&Fe.memoizedState.tag&1){if(r.flags|=2048,uo(9,xx.bind(null,r,s,i,t),void 0,null),$e===null)throw Error(K(349));Qs&30||vx(r,t,i)}return i}function vx(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ee.updateQueue,t===null?(t={lastEffect:null,stores:null},Ee.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function xx(e,t,r,s){t.value=r,t.getSnapshot=s,bx(t)&&_x(e)}function yx(e,t,r){return r(function(){bx(t)&&_x(e)})}function bx(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!tr(e,r)}catch{return!0}}function _x(e){var t=kr(e,1);t!==null&&er(t,e,1,-1)}function Wp(e){var t=ir();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:co,lastRenderedState:e},t.queue=e,e=e.dispatch=O_.bind(null,Ee,e),[t.memoizedState,e]}function uo(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=Ee.updateQueue,t===null?(t={lastEffect:null,stores:null},Ee.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function wx(){return Ht().memoizedState}function Ga(e,t,r,s){var i=ir();Ee.flags|=e,i.memoizedState=uo(1|t,r,void 0,s===void 0?null:s)}function sc(e,t,r,s){var i=Ht();s=s===void 0?null:s;var a=void 0;if(Me!==null){var c=Me.memoizedState;if(a=c.destroy,s!==null&&Gh(s,c.deps)){i.memoizedState=uo(t,r,a,s);return}}Ee.flags|=e,i.memoizedState=uo(1|t,r,a,s)}function zp(e,t){return Ga(8390656,8,e,t)}function Yh(e,t){return sc(2048,8,e,t)}function Sx(e,t){return sc(4,2,e,t)}function Cx(e,t){return sc(4,4,e,t)}function kx(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function jx(e,t,r){return r=r!=null?r.concat([e]):null,sc(4,4,kx.bind(null,t,e),r)}function Xh(){}function Nx(e,t){var r=Ht();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Gh(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function Ex(e,t){var r=Ht();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Gh(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function Dx(e,t,r){return Qs&21?(tr(r,t)||(r=Lv(),Ee.lanes|=r,Ys|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ft=!0),e.memoizedState=r)}function I_(e,t){var r=ge;ge=r!==0&&4>r?r:4,e(!0);var s=hd.transition;hd.transition={};try{e(!1),t()}finally{ge=r,hd.transition=s}}function Px(){return Ht().memoizedState}function M_(e,t,r){var s=ss(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},Rx(e))Ax(t,r);else if(r=hx(e,t,r,s),r!==null){var i=it();er(r,e,s,i),Tx(r,t,s)}}function O_(e,t,r){var s=ss(e),i={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(Rx(e))Ax(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var c=t.lastRenderedState,o=a(c,r);if(i.hasEagerState=!0,i.eagerState=o,tr(o,c)){var l=t.interleaved;l===null?(i.next=i,Uh(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}r=hx(e,t,i,s),r!==null&&(i=it(),er(r,e,s,i),Tx(r,t,s))}}function Rx(e){var t=e.alternate;return e===Ee||t!==null&&t===Ee}function Ax(e,t){Bi=_l=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Tx(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Eh(e,r)}}var wl={readContext:$t,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useInsertionEffect:Ye,useLayoutEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useMutableSource:Ye,useSyncExternalStore:Ye,useId:Ye,unstable_isNewReconciler:!1},B_={readContext:$t,useCallback:function(e,t){return ir().memoizedState=[e,t===void 0?null:t],e},useContext:$t,useEffect:zp,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ga(4194308,4,kx.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ga(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ga(4,2,e,t)},useMemo:function(e,t){var r=ir();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=ir();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=M_.bind(null,Ee,e),[s.memoizedState,e]},useRef:function(e){var t=ir();return e={current:e},t.memoizedState=e},useState:Wp,useDebugValue:Xh,useDeferredValue:function(e){return ir().memoizedState=e},useTransition:function(){var e=Wp(!1),t=e[0];return e=I_.bind(null,e[1]),ir().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=Ee,i=ir();if(ke){if(r===void 0)throw Error(K(407));r=r()}else{if(r=t(),$e===null)throw Error(K(349));Qs&30||vx(s,t,r)}i.memoizedState=r;var a={value:r,getSnapshot:t};return i.queue=a,zp(yx.bind(null,s,a,e),[e]),s.flags|=2048,uo(9,xx.bind(null,s,a,r,t),void 0,null),r},useId:function(){var e=ir(),t=$e.identifierPrefix;if(ke){var r=_r,s=br;r=(s&~(1<<32-Zt(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=lo++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=L_++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},F_={readContext:$t,useCallback:Nx,useContext:$t,useEffect:Yh,useImperativeHandle:jx,useInsertionEffect:Sx,useLayoutEffect:Cx,useMemo:Ex,useReducer:fd,useRef:wx,useState:function(){return fd(co)},useDebugValue:Xh,useDeferredValue:function(e){var t=Ht();return Dx(t,Me.memoizedState,e)},useTransition:function(){var e=fd(co)[0],t=Ht().memoizedState;return[e,t]},useMutableSource:mx,useSyncExternalStore:gx,useId:Px,unstable_isNewReconciler:!1},$_={readContext:$t,useCallback:Nx,useContext:$t,useEffect:Yh,useImperativeHandle:jx,useInsertionEffect:Sx,useLayoutEffect:Cx,useMemo:Ex,useReducer:pd,useRef:wx,useState:function(){return pd(co)},useDebugValue:Xh,useDeferredValue:function(e){var t=Ht();return Me===null?t.memoizedState=e:Dx(t,Me.memoizedState,e)},useTransition:function(){var e=pd(co)[0],t=Ht().memoizedState;return[e,t]},useMutableSource:mx,useSyncExternalStore:gx,useId:Px,unstable_isNewReconciler:!1};function zt(e,t){if(e&&e.defaultProps){t=De({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function yu(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:De({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var nc={isMounted:function(e){return(e=e._reactInternals)?sn(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=it(),i=ss(e),a=wr(s,i);a.payload=t,r!=null&&(a.callback=r),t=ts(e,a,i),t!==null&&(er(t,e,i,s),Va(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=it(),i=ss(e),a=wr(s,i);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=ts(e,a,i),t!==null&&(er(t,e,i,s),Va(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=it(),s=ss(e),i=wr(r,s);i.tag=2,t!=null&&(i.callback=t),t=ts(e,i,s),t!==null&&(er(t,e,s,r),Va(t,e,s))}};function Vp(e,t,r,s,i,a,c){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,a,c):t.prototype&&t.prototype.isPureReactComponent?!ro(r,s)||!ro(i,a):!0}function Lx(e,t,r){var s=!1,i=hs,a=t.contextType;return typeof a=="object"&&a!==null?a=$t(a):(i=gt(t)?Gs:et.current,s=t.contextTypes,a=(s=s!=null)?Hn(e,i):hs),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=nc,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function qp(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&nc.enqueueReplaceState(t,t.state,null)}function bu(e,t,r,s){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},Wh(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=$t(a):(a=gt(t)?Gs:et.current,i.context=Hn(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(yu(e,t,a,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&nc.enqueueReplaceState(i,i.state,null),yl(e,r,i,s),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Vn(e,t){try{var r="",s=t;do r+=p1(s),s=s.return;while(s);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function md(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function _u(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var H_=typeof WeakMap=="function"?WeakMap:Map;function Ix(e,t,r){r=wr(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){Cl||(Cl=!0,Ru=s),_u(e,t)},r}function Mx(e,t,r){r=wr(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var i=t.value;r.payload=function(){return s(i)},r.callback=function(){_u(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){_u(e,t),typeof s!="function"&&(rs===null?rs=new Set([this]):rs.add(this));var c=t.stack;this.componentDidCatch(t.value,{componentStack:c!==null?c:""})}),r}function Gp(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new H_;var i=new Set;s.set(t,i)}else i=s.get(t),i===void 0&&(i=new Set,s.set(t,i));i.has(r)||(i.add(r),e=tw.bind(null,e,t,r),t.then(e,e))}function Kp(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Qp(e,t,r,s,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=wr(-1,1),t.tag=2,ts(r,t,1))),r.lanes|=1),e)}var U_=Dr.ReactCurrentOwner,ft=!1;function nt(e,t,r,s){t.child=e===null?ux(t,null,r,s):Wn(t,e.child,r,s)}function Yp(e,t,r,s,i){r=r.render;var a=t.ref;return kn(t,i),s=Kh(e,t,r,s,a,i),r=Qh(),e!==null&&!ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,jr(e,t,i)):(ke&&r&&Mh(t),t.flags|=1,nt(e,t,s,i),t.child)}function Xp(e,t,r,s,i){if(e===null){var a=r.type;return typeof a=="function"&&!of(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,Ox(e,t,a,s,i)):(e=Xa(r.type,null,s,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var c=a.memoizedProps;if(r=r.compare,r=r!==null?r:ro,r(c,s)&&e.ref===t.ref)return jr(e,t,i)}return t.flags|=1,e=ns(a,s),e.ref=t.ref,e.return=t,t.child=e}function Ox(e,t,r,s,i){if(e!==null){var a=e.memoizedProps;if(ro(a,s)&&e.ref===t.ref)if(ft=!1,t.pendingProps=s=a,(e.lanes&i)!==0)e.flags&131072&&(ft=!0);else return t.lanes=e.lanes,jr(e,t,i)}return wu(e,t,r,s,i)}function Bx(e,t,r){var s=t.pendingProps,i=s.children,a=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(bn,xt),xt|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_e(bn,xt),xt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:r,_e(bn,xt),xt|=s}else a!==null?(s=a.baseLanes|r,t.memoizedState=null):s=r,_e(bn,xt),xt|=s;return nt(e,t,i,r),t.child}function Fx(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function wu(e,t,r,s,i){var a=gt(r)?Gs:et.current;return a=Hn(t,a),kn(t,i),r=Kh(e,t,r,s,a,i),s=Qh(),e!==null&&!ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,jr(e,t,i)):(ke&&s&&Mh(t),t.flags|=1,nt(e,t,r,i),t.child)}function Jp(e,t,r,s,i){if(gt(r)){var a=!0;pl(t)}else a=!1;if(kn(t,i),t.stateNode===null)Ka(e,t),Lx(t,r,s),bu(t,r,s,i),s=!0;else if(e===null){var c=t.stateNode,o=t.memoizedProps;c.props=o;var l=c.context,f=r.contextType;typeof f=="object"&&f!==null?f=$t(f):(f=gt(r)?Gs:et.current,f=Hn(t,f));var v=r.getDerivedStateFromProps,h=typeof v=="function"||typeof c.getSnapshotBeforeUpdate=="function";h||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(o!==s||l!==f)&&qp(t,c,s,f),Ir=!1;var g=t.memoizedState;c.state=g,yl(t,s,c,i),l=t.memoizedState,o!==s||g!==l||mt.current||Ir?(typeof v=="function"&&(yu(t,r,v,s),l=t.memoizedState),(o=Ir||Vp(t,r,o,s,g,l,f))?(h||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(t.flags|=4194308)):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=l),c.props=s,c.state=l,c.context=f,s=o):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{c=t.stateNode,fx(e,t),o=t.memoizedProps,f=t.type===t.elementType?o:zt(t.type,o),c.props=f,h=t.pendingProps,g=c.context,l=r.contextType,typeof l=="object"&&l!==null?l=$t(l):(l=gt(r)?Gs:et.current,l=Hn(t,l));var y=r.getDerivedStateFromProps;(v=typeof y=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(o!==h||g!==l)&&qp(t,c,s,l),Ir=!1,g=t.memoizedState,c.state=g,yl(t,s,c,i);var _=t.memoizedState;o!==h||g!==_||mt.current||Ir?(typeof y=="function"&&(yu(t,r,y,s),_=t.memoizedState),(f=Ir||Vp(t,r,f,s,g,_,l)||!1)?(v||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(s,_,l),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(s,_,l)),typeof c.componentDidUpdate=="function"&&(t.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof c.componentDidUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=_),c.props=s,c.state=_,c.context=l,s=f):(typeof c.componentDidUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),s=!1)}return Su(e,t,r,s,a,i)}function Su(e,t,r,s,i,a){Fx(e,t);var c=(t.flags&128)!==0;if(!s&&!c)return i&&Op(t,r,!1),jr(e,t,a);s=t.stateNode,U_.current=t;var o=c&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&c?(t.child=Wn(t,e.child,null,a),t.child=Wn(t,null,o,a)):nt(e,t,o,a),t.memoizedState=s.state,i&&Op(t,r,!0),t.child}function $x(e){var t=e.stateNode;t.pendingContext?Mp(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Mp(e,t.context,!1),zh(e,t.containerInfo)}function Zp(e,t,r,s,i){return Un(),Bh(i),t.flags|=256,nt(e,t,r,s),t.child}var Cu={dehydrated:null,treeContext:null,retryLane:0};function ku(e){return{baseLanes:e,cachePool:null,transitions:null}}function Hx(e,t,r){var s=t.pendingProps,i=Ne.current,a=!1,c=(t.flags&128)!==0,o;if((o=c)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),_e(Ne,i&1),e===null)return vu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(c=s.children,e=s.fallback,a?(s=t.mode,a=t.child,c={mode:"hidden",children:c},!(s&1)&&a!==null?(a.childLanes=0,a.pendingProps=c):a=ac(c,s,0,null),e=qs(e,s,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=ku(r),t.memoizedState=Cu,e):Jh(t,c));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return W_(e,t,c,s,o,i,r);if(a){a=s.fallback,c=t.mode,i=e.child,o=i.sibling;var l={mode:"hidden",children:s.children};return!(c&1)&&t.child!==i?(s=t.child,s.childLanes=0,s.pendingProps=l,t.deletions=null):(s=ns(i,l),s.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=ns(o,a):(a=qs(a,c,r,null),a.flags|=2),a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,c=e.child.memoizedState,c=c===null?ku(r):{baseLanes:c.baseLanes|r,cachePool:null,transitions:c.transitions},a.memoizedState=c,a.childLanes=e.childLanes&~r,t.memoizedState=Cu,s}return a=e.child,e=a.sibling,s=ns(a,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function Jh(e,t){return t=ac({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ka(e,t,r,s){return s!==null&&Bh(s),Wn(t,e.child,null,r),e=Jh(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function W_(e,t,r,s,i,a,c){if(r)return t.flags&256?(t.flags&=-257,s=md(Error(K(422))),ka(e,t,c,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=s.fallback,i=t.mode,s=ac({mode:"visible",children:s.children},i,0,null),a=qs(a,i,c,null),a.flags|=2,s.return=t,a.return=t,s.sibling=a,t.child=s,t.mode&1&&Wn(t,e.child,null,c),t.child.memoizedState=ku(c),t.memoizedState=Cu,a);if(!(t.mode&1))return ka(e,t,c,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var o=s.dgst;return s=o,a=Error(K(419)),s=md(a,s,void 0),ka(e,t,c,s)}if(o=(c&e.childLanes)!==0,ft||o){if(s=$e,s!==null){switch(c&-c){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|c)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,kr(e,i),er(s,e,i,-1))}return nf(),s=md(Error(K(421))),ka(e,t,c,s)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=rw.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,yt=es(i.nextSibling),_t=t,ke=!0,Qt=null,e!==null&&(Tt[Lt++]=br,Tt[Lt++]=_r,Tt[Lt++]=Ks,br=e.id,_r=e.overflow,Ks=t),t=Jh(t,s.children),t.flags|=4096,t)}function em(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),xu(e.return,t,r)}function gd(e,t,r,s,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=r,a.tailMode=i)}function Ux(e,t,r){var s=t.pendingProps,i=s.revealOrder,a=s.tail;if(nt(e,t,s.children,r),s=Ne.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&em(e,r,t);else if(e.tag===19)em(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(_e(Ne,s),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&bl(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),gd(t,!1,i,r,a);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&bl(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}gd(t,!0,r,null,a);break;case"together":gd(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ka(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function jr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ys|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(K(153));if(t.child!==null){for(e=t.child,r=ns(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ns(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function z_(e,t,r){switch(t.tag){case 3:$x(t),Un();break;case 5:px(t);break;case 1:gt(t.type)&&pl(t);break;case 4:zh(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,i=t.memoizedProps.value;_e(vl,s._currentValue),s._currentValue=i;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(_e(Ne,Ne.current&1),t.flags|=128,null):r&t.child.childLanes?Hx(e,t,r):(_e(Ne,Ne.current&1),e=jr(e,t,r),e!==null?e.sibling:null);_e(Ne,Ne.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return Ux(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),_e(Ne,Ne.current),s)break;return null;case 22:case 23:return t.lanes=0,Bx(e,t,r)}return jr(e,t,r)}var Wx,ju,zx,Vx;Wx=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};ju=function(){};zx=function(e,t,r,s){var i=e.memoizedProps;if(i!==s){e=t.stateNode,Ls(ur.current);var a=null;switch(r){case"input":i=Kd(e,i),s=Kd(e,s),a=[];break;case"select":i=De({},i,{value:void 0}),s=De({},s,{value:void 0}),a=[];break;case"textarea":i=Xd(e,i),s=Xd(e,s),a=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=hl)}Zd(r,s);var c;r=null;for(f in i)if(!s.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var o=i[f];for(c in o)o.hasOwnProperty(c)&&(r||(r={}),r[c]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Qi.hasOwnProperty(f)?a||(a=[]):(a=a||[]).push(f,null));for(f in s){var l=s[f];if(o=i!=null?i[f]:void 0,s.hasOwnProperty(f)&&l!==o&&(l!=null||o!=null))if(f==="style")if(o){for(c in o)!o.hasOwnProperty(c)||l&&l.hasOwnProperty(c)||(r||(r={}),r[c]="");for(c in l)l.hasOwnProperty(c)&&o[c]!==l[c]&&(r||(r={}),r[c]=l[c])}else r||(a||(a=[]),a.push(f,r)),r=l;else f==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(a=a||[]).push(f,l)):f==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(f,""+l):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Qi.hasOwnProperty(f)?(l!=null&&f==="onScroll"&&Se("scroll",e),a||o===l||(a=[])):(a=a||[]).push(f,l))}r&&(a=a||[]).push("style",r);var f=a;(t.updateQueue=f)&&(t.flags|=4)}};Vx=function(e,t,r,s){r!==s&&(t.flags|=4)};function bi(e,t){if(!ke)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Xe(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function V_(e,t,r){var s=t.pendingProps;switch(Oh(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(t),null;case 1:return gt(t.type)&&fl(),Xe(t),null;case 3:return s=t.stateNode,zn(),Ce(mt),Ce(et),qh(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Sa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Qt!==null&&(Lu(Qt),Qt=null))),ju(e,t),Xe(t),null;case 5:Vh(t);var i=Ls(ao.current);if(r=t.type,e!==null&&t.stateNode!=null)zx(e,t,r,s,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(K(166));return Xe(t),null}if(e=Ls(ur.current),Sa(t)){s=t.stateNode,r=t.type;var a=t.memoizedProps;switch(s[cr]=t,s[io]=a,e=(t.mode&1)!==0,r){case"dialog":Se("cancel",s),Se("close",s);break;case"iframe":case"object":case"embed":Se("load",s);break;case"video":case"audio":for(i=0;i<Di.length;i++)Se(Di[i],s);break;case"source":Se("error",s);break;case"img":case"image":case"link":Se("error",s),Se("load",s);break;case"details":Se("toggle",s);break;case"input":cp(s,a),Se("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},Se("invalid",s);break;case"textarea":up(s,a),Se("invalid",s)}Zd(r,a),i=null;for(var c in a)if(a.hasOwnProperty(c)){var o=a[c];c==="children"?typeof o=="string"?s.textContent!==o&&(a.suppressHydrationWarning!==!0&&wa(s.textContent,o,e),i=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&wa(s.textContent,o,e),i=["children",""+o]):Qi.hasOwnProperty(c)&&o!=null&&c==="onScroll"&&Se("scroll",s)}switch(r){case"input":pa(s),dp(s,a,!0);break;case"textarea":pa(s),hp(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=hl)}s=i,t.updateQueue=s,s!==null&&(t.flags|=4)}else{c=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=yv(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=c.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=c.createElement(r,{is:s.is}):(e=c.createElement(r),r==="select"&&(c=e,s.multiple?c.multiple=!0:s.size&&(c.size=s.size))):e=c.createElementNS(e,r),e[cr]=t,e[io]=s,Wx(e,t,!1,!1),t.stateNode=e;e:{switch(c=eu(r,s),r){case"dialog":Se("cancel",e),Se("close",e),i=s;break;case"iframe":case"object":case"embed":Se("load",e),i=s;break;case"video":case"audio":for(i=0;i<Di.length;i++)Se(Di[i],e);i=s;break;case"source":Se("error",e),i=s;break;case"img":case"image":case"link":Se("error",e),Se("load",e),i=s;break;case"details":Se("toggle",e),i=s;break;case"input":cp(e,s),i=Kd(e,s),Se("invalid",e);break;case"option":i=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},i=De({},s,{value:void 0}),Se("invalid",e);break;case"textarea":up(e,s),i=Xd(e,s),Se("invalid",e);break;default:i=s}Zd(r,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="style"?wv(e,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&bv(e,l)):a==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Yi(e,l):typeof l=="number"&&Yi(e,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Qi.hasOwnProperty(a)?l!=null&&a==="onScroll"&&Se("scroll",e):l!=null&&wh(e,a,l,c))}switch(r){case"input":pa(e),dp(e,s,!1);break;case"textarea":pa(e),hp(e);break;case"option":s.value!=null&&e.setAttribute("value",""+us(s.value));break;case"select":e.multiple=!!s.multiple,a=s.value,a!=null?_n(e,!!s.multiple,a,!1):s.defaultValue!=null&&_n(e,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=hl)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Xe(t),null;case 6:if(e&&t.stateNode!=null)Vx(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(K(166));if(r=Ls(ao.current),Ls(ur.current),Sa(t)){if(s=t.stateNode,r=t.memoizedProps,s[cr]=t,(a=s.nodeValue!==r)&&(e=_t,e!==null))switch(e.tag){case 3:wa(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&wa(s.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[cr]=t,t.stateNode=s}return Xe(t),null;case 13:if(Ce(Ne),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ke&&yt!==null&&t.mode&1&&!(t.flags&128))cx(),Un(),t.flags|=98560,a=!1;else if(a=Sa(t),s!==null&&s.dehydrated!==null){if(e===null){if(!a)throw Error(K(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(K(317));a[cr]=t}else Un(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Xe(t),a=!1}else Qt!==null&&(Lu(Qt),Qt=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Ne.current&1?Oe===0&&(Oe=3):nf())),t.updateQueue!==null&&(t.flags|=4),Xe(t),null);case 4:return zn(),ju(e,t),e===null&&so(t.stateNode.containerInfo),Xe(t),null;case 10:return Hh(t.type._context),Xe(t),null;case 17:return gt(t.type)&&fl(),Xe(t),null;case 19:if(Ce(Ne),a=t.memoizedState,a===null)return Xe(t),null;if(s=(t.flags&128)!==0,c=a.rendering,c===null)if(s)bi(a,!1);else{if(Oe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(c=bl(e),c!==null){for(t.flags|=128,bi(a,!1),s=c.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)a=r,e=s,a.flags&=14680066,c=a.alternate,c===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,e=c.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return _e(Ne,Ne.current&1|2),t.child}e=e.sibling}a.tail!==null&&Te()>qn&&(t.flags|=128,s=!0,bi(a,!1),t.lanes=4194304)}else{if(!s)if(e=bl(c),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),bi(a,!0),a.tail===null&&a.tailMode==="hidden"&&!c.alternate&&!ke)return Xe(t),null}else 2*Te()-a.renderingStartTime>qn&&r!==1073741824&&(t.flags|=128,s=!0,bi(a,!1),t.lanes=4194304);a.isBackwards?(c.sibling=t.child,t.child=c):(r=a.last,r!==null?r.sibling=c:t.child=c,a.last=c)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Te(),t.sibling=null,r=Ne.current,_e(Ne,s?r&1|2:r&1),t):(Xe(t),null);case 22:case 23:return sf(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?xt&1073741824&&(Xe(t),t.subtreeFlags&6&&(t.flags|=8192)):Xe(t),null;case 24:return null;case 25:return null}throw Error(K(156,t.tag))}function q_(e,t){switch(Oh(t),t.tag){case 1:return gt(t.type)&&fl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return zn(),Ce(mt),Ce(et),qh(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Vh(t),null;case 13:if(Ce(Ne),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(K(340));Un()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ce(Ne),null;case 4:return zn(),null;case 10:return Hh(t.type._context),null;case 22:case 23:return sf(),null;case 24:return null;default:return null}}var ja=!1,Ze=!1,G_=typeof WeakSet=="function"?WeakSet:Set,Z=null;function yn(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Re(e,t,s)}else r.current=null}function Nu(e,t,r){try{r()}catch(s){Re(e,t,s)}}var tm=!1;function K_(e,t){if(du=cl,e=Yv(),Ih(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var i=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var c=0,o=-1,l=-1,f=0,v=0,h=e,g=null;t:for(;;){for(var y;h!==r||i!==0&&h.nodeType!==3||(o=c+i),h!==a||s!==0&&h.nodeType!==3||(l=c+s),h.nodeType===3&&(c+=h.nodeValue.length),(y=h.firstChild)!==null;)g=h,h=y;for(;;){if(h===e)break t;if(g===r&&++f===i&&(o=c),g===a&&++v===s&&(l=c),(y=h.nextSibling)!==null)break;h=g,g=h.parentNode}h=y}r=o===-1||l===-1?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(uu={focusedElem:e,selectionRange:r},cl=!1,Z=t;Z!==null;)if(t=Z,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Z=e;else for(;Z!==null;){t=Z;try{var _=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var x=_.memoizedProps,m=_.memoizedState,d=t.stateNode,u=d.getSnapshotBeforeUpdate(t.elementType===t.type?x:zt(t.type,x),m);d.__reactInternalSnapshotBeforeUpdate=u}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(b){Re(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,Z=e;break}Z=t.return}return _=tm,tm=!1,_}function Fi(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&Nu(t,r,a)}i=i.next}while(i!==s)}}function ic(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function Eu(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function qx(e){var t=e.alternate;t!==null&&(e.alternate=null,qx(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[cr],delete t[io],delete t[pu],delete t[P_],delete t[R_])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Gx(e){return e.tag===5||e.tag===3||e.tag===4}function rm(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Gx(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Du(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=hl));else if(s!==4&&(e=e.child,e!==null))for(Du(e,t,r),e=e.sibling;e!==null;)Du(e,t,r),e=e.sibling}function Pu(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Pu(e,t,r),e=e.sibling;e!==null;)Pu(e,t,r),e=e.sibling}var Ve=null,Gt=!1;function Ar(e,t,r){for(r=r.child;r!==null;)Kx(e,t,r),r=r.sibling}function Kx(e,t,r){if(dr&&typeof dr.onCommitFiberUnmount=="function")try{dr.onCommitFiberUnmount(Xl,r)}catch{}switch(r.tag){case 5:Ze||yn(r,t);case 6:var s=Ve,i=Gt;Ve=null,Ar(e,t,r),Ve=s,Gt=i,Ve!==null&&(Gt?(e=Ve,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ve.removeChild(r.stateNode));break;case 18:Ve!==null&&(Gt?(e=Ve,r=r.stateNode,e.nodeType===8?cd(e.parentNode,r):e.nodeType===1&&cd(e,r),eo(e)):cd(Ve,r.stateNode));break;case 4:s=Ve,i=Gt,Ve=r.stateNode.containerInfo,Gt=!0,Ar(e,t,r),Ve=s,Gt=i;break;case 0:case 11:case 14:case 15:if(!Ze&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var a=i,c=a.destroy;a=a.tag,c!==void 0&&(a&2||a&4)&&Nu(r,t,c),i=i.next}while(i!==s)}Ar(e,t,r);break;case 1:if(!Ze&&(yn(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(o){Re(r,t,o)}Ar(e,t,r);break;case 21:Ar(e,t,r);break;case 22:r.mode&1?(Ze=(s=Ze)||r.memoizedState!==null,Ar(e,t,r),Ze=s):Ar(e,t,r);break;default:Ar(e,t,r)}}function sm(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new G_),t.forEach(function(s){var i=sw.bind(null,e,s);r.has(s)||(r.add(s),s.then(i,i))})}}function Ut(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var i=r[s];try{var a=e,c=t,o=c;e:for(;o!==null;){switch(o.tag){case 5:Ve=o.stateNode,Gt=!1;break e;case 3:Ve=o.stateNode.containerInfo,Gt=!0;break e;case 4:Ve=o.stateNode.containerInfo,Gt=!0;break e}o=o.return}if(Ve===null)throw Error(K(160));Kx(a,c,i),Ve=null,Gt=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(f){Re(i,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Qx(t,e),t=t.sibling}function Qx(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ut(t,e),nr(e),s&4){try{Fi(3,e,e.return),ic(3,e)}catch(x){Re(e,e.return,x)}try{Fi(5,e,e.return)}catch(x){Re(e,e.return,x)}}break;case 1:Ut(t,e),nr(e),s&512&&r!==null&&yn(r,r.return);break;case 5:if(Ut(t,e),nr(e),s&512&&r!==null&&yn(r,r.return),e.flags&32){var i=e.stateNode;try{Yi(i,"")}catch(x){Re(e,e.return,x)}}if(s&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,c=r!==null?r.memoizedProps:a,o=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&vv(i,a),eu(o,c);var f=eu(o,a);for(c=0;c<l.length;c+=2){var v=l[c],h=l[c+1];v==="style"?wv(i,h):v==="dangerouslySetInnerHTML"?bv(i,h):v==="children"?Yi(i,h):wh(i,v,h,f)}switch(o){case"input":Qd(i,a);break;case"textarea":xv(i,a);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var y=a.value;y!=null?_n(i,!!a.multiple,y,!1):g!==!!a.multiple&&(a.defaultValue!=null?_n(i,!!a.multiple,a.defaultValue,!0):_n(i,!!a.multiple,a.multiple?[]:"",!1))}i[io]=a}catch(x){Re(e,e.return,x)}}break;case 6:if(Ut(t,e),nr(e),s&4){if(e.stateNode===null)throw Error(K(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(x){Re(e,e.return,x)}}break;case 3:if(Ut(t,e),nr(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{eo(t.containerInfo)}catch(x){Re(e,e.return,x)}break;case 4:Ut(t,e),nr(e);break;case 13:Ut(t,e),nr(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(tf=Te())),s&4&&sm(e);break;case 22:if(v=r!==null&&r.memoizedState!==null,e.mode&1?(Ze=(f=Ze)||v,Ut(t,e),Ze=f):Ut(t,e),nr(e),s&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!v&&e.mode&1)for(Z=e,v=e.child;v!==null;){for(h=Z=v;Z!==null;){switch(g=Z,y=g.child,g.tag){case 0:case 11:case 14:case 15:Fi(4,g,g.return);break;case 1:yn(g,g.return);var _=g.stateNode;if(typeof _.componentWillUnmount=="function"){s=g,r=g.return;try{t=s,_.props=t.memoizedProps,_.state=t.memoizedState,_.componentWillUnmount()}catch(x){Re(s,r,x)}}break;case 5:yn(g,g.return);break;case 22:if(g.memoizedState!==null){im(h);continue}}y!==null?(y.return=g,Z=y):im(h)}v=v.sibling}e:for(v=null,h=e;;){if(h.tag===5){if(v===null){v=h;try{i=h.stateNode,f?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=h.stateNode,l=h.memoizedProps.style,c=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=_v("display",c))}catch(x){Re(e,e.return,x)}}}else if(h.tag===6){if(v===null)try{h.stateNode.nodeValue=f?"":h.memoizedProps}catch(x){Re(e,e.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;v===h&&(v=null),h=h.return}v===h&&(v=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ut(t,e),nr(e),s&4&&sm(e);break;case 21:break;default:Ut(t,e),nr(e)}}function nr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Gx(r)){var s=r;break e}r=r.return}throw Error(K(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(Yi(i,""),s.flags&=-33);var a=rm(e);Pu(e,a,i);break;case 3:case 4:var c=s.stateNode.containerInfo,o=rm(e);Du(e,o,c);break;default:throw Error(K(161))}}catch(l){Re(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Q_(e,t,r){Z=e,Yx(e)}function Yx(e,t,r){for(var s=(e.mode&1)!==0;Z!==null;){var i=Z,a=i.child;if(i.tag===22&&s){var c=i.memoizedState!==null||ja;if(!c){var o=i.alternate,l=o!==null&&o.memoizedState!==null||Ze;o=ja;var f=Ze;if(ja=c,(Ze=l)&&!f)for(Z=i;Z!==null;)c=Z,l=c.child,c.tag===22&&c.memoizedState!==null?om(i):l!==null?(l.return=c,Z=l):om(i);for(;a!==null;)Z=a,Yx(a),a=a.sibling;Z=i,ja=o,Ze=f}nm(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Z=a):nm(e)}}function nm(e){for(;Z!==null;){var t=Z;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ze||ic(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Ze)if(r===null)s.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:zt(t.type,r.memoizedProps);s.componentDidUpdate(i,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Up(t,a,s);break;case 3:var c=t.updateQueue;if(c!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Up(t,c,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var v=f.memoizedState;if(v!==null){var h=v.dehydrated;h!==null&&eo(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}Ze||t.flags&512&&Eu(t)}catch(g){Re(t,t.return,g)}}if(t===e){Z=null;break}if(r=t.sibling,r!==null){r.return=t.return,Z=r;break}Z=t.return}}function im(e){for(;Z!==null;){var t=Z;if(t===e){Z=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Z=r;break}Z=t.return}}function om(e){for(;Z!==null;){var t=Z;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ic(4,t)}catch(l){Re(t,r,l)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var i=t.return;try{s.componentDidMount()}catch(l){Re(t,i,l)}}var a=t.return;try{Eu(t)}catch(l){Re(t,a,l)}break;case 5:var c=t.return;try{Eu(t)}catch(l){Re(t,c,l)}}}catch(l){Re(t,t.return,l)}if(t===e){Z=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Z=o;break}Z=t.return}}var Y_=Math.ceil,Sl=Dr.ReactCurrentDispatcher,Zh=Dr.ReactCurrentOwner,Bt=Dr.ReactCurrentBatchConfig,me=0,$e=null,Le=null,Ke=0,xt=0,bn=xs(0),Oe=0,ho=null,Ys=0,oc=0,ef=0,$i=null,ht=null,tf=0,qn=1/0,vr=null,Cl=!1,Ru=null,rs=null,Na=!1,Gr=null,kl=0,Hi=0,Au=null,Qa=-1,Ya=0;function it(){return me&6?Te():Qa!==-1?Qa:Qa=Te()}function ss(e){return e.mode&1?me&2&&Ke!==0?Ke&-Ke:T_.transition!==null?(Ya===0&&(Ya=Lv()),Ya):(e=ge,e!==0||(e=window.event,e=e===void 0?16:Hv(e.type)),e):1}function er(e,t,r,s){if(50<Hi)throw Hi=0,Au=null,Error(K(185));$o(e,r,s),(!(me&2)||e!==$e)&&(e===$e&&(!(me&2)&&(oc|=r),Oe===4&&Or(e,Ke)),vt(e,s),r===1&&me===0&&!(t.mode&1)&&(qn=Te()+500,rc&&ys()))}function vt(e,t){var r=e.callbackNode;T1(e,t);var s=ll(e,e===$e?Ke:0);if(s===0)r!==null&&mp(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&mp(r),t===1)e.tag===0?A_(am.bind(null,e)):ox(am.bind(null,e)),E_(function(){!(me&6)&&ys()}),r=null;else{switch(Iv(s)){case 1:r=Nh;break;case 4:r=Av;break;case 16:r=al;break;case 536870912:r=Tv;break;default:r=al}r=n0(r,Xx.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Xx(e,t){if(Qa=-1,Ya=0,me&6)throw Error(K(327));var r=e.callbackNode;if(jn()&&e.callbackNode!==r)return null;var s=ll(e,e===$e?Ke:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=jl(e,s);else{t=s;var i=me;me|=2;var a=Zx();($e!==e||Ke!==t)&&(vr=null,qn=Te()+500,Vs(e,t));do try{Z_();break}catch(o){Jx(e,o)}while(1);$h(),Sl.current=a,me=i,Le!==null?t=0:($e=null,Ke=0,t=Oe)}if(t!==0){if(t===2&&(i=iu(e),i!==0&&(s=i,t=Tu(e,i))),t===1)throw r=ho,Vs(e,0),Or(e,s),vt(e,Te()),r;if(t===6)Or(e,s);else{if(i=e.current.alternate,!(s&30)&&!X_(i)&&(t=jl(e,s),t===2&&(a=iu(e),a!==0&&(s=a,t=Tu(e,a))),t===1))throw r=ho,Vs(e,0),Or(e,s),vt(e,Te()),r;switch(e.finishedWork=i,e.finishedLanes=s,t){case 0:case 1:throw Error(K(345));case 2:Ds(e,ht,vr);break;case 3:if(Or(e,s),(s&130023424)===s&&(t=tf+500-Te(),10<t)){if(ll(e,0)!==0)break;if(i=e.suspendedLanes,(i&s)!==s){it(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=fu(Ds.bind(null,e,ht,vr),t);break}Ds(e,ht,vr);break;case 4:if(Or(e,s),(s&4194240)===s)break;for(t=e.eventTimes,i=-1;0<s;){var c=31-Zt(s);a=1<<c,c=t[c],c>i&&(i=c),s&=~a}if(s=i,s=Te()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Y_(s/1960))-s,10<s){e.timeoutHandle=fu(Ds.bind(null,e,ht,vr),s);break}Ds(e,ht,vr);break;case 5:Ds(e,ht,vr);break;default:throw Error(K(329))}}}return vt(e,Te()),e.callbackNode===r?Xx.bind(null,e):null}function Tu(e,t){var r=$i;return e.current.memoizedState.isDehydrated&&(Vs(e,t).flags|=256),e=jl(e,t),e!==2&&(t=ht,ht=r,t!==null&&Lu(t)),e}function Lu(e){ht===null?ht=e:ht.push.apply(ht,e)}function X_(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var i=r[s],a=i.getSnapshot;i=i.value;try{if(!tr(a(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Or(e,t){for(t&=~ef,t&=~oc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Zt(t),s=1<<r;e[r]=-1,t&=~s}}function am(e){if(me&6)throw Error(K(327));jn();var t=ll(e,0);if(!(t&1))return vt(e,Te()),null;var r=jl(e,t);if(e.tag!==0&&r===2){var s=iu(e);s!==0&&(t=s,r=Tu(e,s))}if(r===1)throw r=ho,Vs(e,0),Or(e,t),vt(e,Te()),r;if(r===6)throw Error(K(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ds(e,ht,vr),vt(e,Te()),null}function rf(e,t){var r=me;me|=1;try{return e(t)}finally{me=r,me===0&&(qn=Te()+500,rc&&ys())}}function Xs(e){Gr!==null&&Gr.tag===0&&!(me&6)&&jn();var t=me;me|=1;var r=Bt.transition,s=ge;try{if(Bt.transition=null,ge=1,e)return e()}finally{ge=s,Bt.transition=r,me=t,!(me&6)&&ys()}}function sf(){xt=bn.current,Ce(bn)}function Vs(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,N_(r)),Le!==null)for(r=Le.return;r!==null;){var s=r;switch(Oh(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&fl();break;case 3:zn(),Ce(mt),Ce(et),qh();break;case 5:Vh(s);break;case 4:zn();break;case 13:Ce(Ne);break;case 19:Ce(Ne);break;case 10:Hh(s.type._context);break;case 22:case 23:sf()}r=r.return}if($e=e,Le=e=ns(e.current,null),Ke=xt=t,Oe=0,ho=null,ef=oc=Ys=0,ht=$i=null,Ts!==null){for(t=0;t<Ts.length;t++)if(r=Ts[t],s=r.interleaved,s!==null){r.interleaved=null;var i=s.next,a=r.pending;if(a!==null){var c=a.next;a.next=i,s.next=c}r.pending=s}Ts=null}return e}function Jx(e,t){do{var r=Le;try{if($h(),qa.current=wl,_l){for(var s=Ee.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}_l=!1}if(Qs=0,Fe=Me=Ee=null,Bi=!1,lo=0,Zh.current=null,r===null||r.return===null){Oe=1,ho=t,Le=null;break}e:{var a=e,c=r.return,o=r,l=t;if(t=Ke,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var f=l,v=o,h=v.tag;if(!(v.mode&1)&&(h===0||h===11||h===15)){var g=v.alternate;g?(v.updateQueue=g.updateQueue,v.memoizedState=g.memoizedState,v.lanes=g.lanes):(v.updateQueue=null,v.memoizedState=null)}var y=Kp(c);if(y!==null){y.flags&=-257,Qp(y,c,o,a,t),y.mode&1&&Gp(a,f,t),t=y,l=f;var _=t.updateQueue;if(_===null){var x=new Set;x.add(l),t.updateQueue=x}else _.add(l);break e}else{if(!(t&1)){Gp(a,f,t),nf();break e}l=Error(K(426))}}else if(ke&&o.mode&1){var m=Kp(c);if(m!==null){!(m.flags&65536)&&(m.flags|=256),Qp(m,c,o,a,t),Bh(Vn(l,o));break e}}a=l=Vn(l,o),Oe!==4&&(Oe=2),$i===null?$i=[a]:$i.push(a),a=c;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var d=Ix(a,l,t);Hp(a,d);break e;case 1:o=l;var u=a.type,p=a.stateNode;if(!(a.flags&128)&&(typeof u.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(rs===null||!rs.has(p)))){a.flags|=65536,t&=-t,a.lanes|=t;var b=Mx(a,o,t);Hp(a,b);break e}}a=a.return}while(a!==null)}t0(r)}catch(S){t=S,Le===r&&r!==null&&(Le=r=r.return);continue}break}while(1)}function Zx(){var e=Sl.current;return Sl.current=wl,e===null?wl:e}function nf(){(Oe===0||Oe===3||Oe===2)&&(Oe=4),$e===null||!(Ys&268435455)&&!(oc&268435455)||Or($e,Ke)}function jl(e,t){var r=me;me|=2;var s=Zx();($e!==e||Ke!==t)&&(vr=null,Vs(e,t));do try{J_();break}catch(i){Jx(e,i)}while(1);if($h(),me=r,Sl.current=s,Le!==null)throw Error(K(261));return $e=null,Ke=0,Oe}function J_(){for(;Le!==null;)e0(Le)}function Z_(){for(;Le!==null&&!C1();)e0(Le)}function e0(e){var t=s0(e.alternate,e,xt);e.memoizedProps=e.pendingProps,t===null?t0(e):Le=t,Zh.current=null}function t0(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=q_(r,t),r!==null){r.flags&=32767,Le=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Oe=6,Le=null;return}}else if(r=V_(r,t,xt),r!==null){Le=r;return}if(t=t.sibling,t!==null){Le=t;return}Le=t=e}while(t!==null);Oe===0&&(Oe=5)}function Ds(e,t,r){var s=ge,i=Bt.transition;try{Bt.transition=null,ge=1,ew(e,t,r,s)}finally{Bt.transition=i,ge=s}return null}function ew(e,t,r,s){do jn();while(Gr!==null);if(me&6)throw Error(K(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(K(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(L1(e,a),e===$e&&(Le=$e=null,Ke=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Na||(Na=!0,n0(al,function(){return jn(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Bt.transition,Bt.transition=null;var c=ge;ge=1;var o=me;me|=4,Zh.current=null,K_(e,r),Qx(r,e),b_(uu),cl=!!du,uu=du=null,e.current=r,Q_(r),k1(),me=o,ge=c,Bt.transition=a}else e.current=r;if(Na&&(Na=!1,Gr=e,kl=i),a=e.pendingLanes,a===0&&(rs=null),E1(r.stateNode),vt(e,Te()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],s(i.value,{componentStack:i.stack,digest:i.digest});if(Cl)throw Cl=!1,e=Ru,Ru=null,e;return kl&1&&e.tag!==0&&jn(),a=e.pendingLanes,a&1?e===Au?Hi++:(Hi=0,Au=e):Hi=0,ys(),null}function jn(){if(Gr!==null){var e=Iv(kl),t=Bt.transition,r=ge;try{if(Bt.transition=null,ge=16>e?16:e,Gr===null)var s=!1;else{if(e=Gr,Gr=null,kl=0,me&6)throw Error(K(331));var i=me;for(me|=4,Z=e.current;Z!==null;){var a=Z,c=a.child;if(Z.flags&16){var o=a.deletions;if(o!==null){for(var l=0;l<o.length;l++){var f=o[l];for(Z=f;Z!==null;){var v=Z;switch(v.tag){case 0:case 11:case 15:Fi(8,v,a)}var h=v.child;if(h!==null)h.return=v,Z=h;else for(;Z!==null;){v=Z;var g=v.sibling,y=v.return;if(qx(v),v===f){Z=null;break}if(g!==null){g.return=y,Z=g;break}Z=y}}}var _=a.alternate;if(_!==null){var x=_.child;if(x!==null){_.child=null;do{var m=x.sibling;x.sibling=null,x=m}while(x!==null)}}Z=a}}if(a.subtreeFlags&2064&&c!==null)c.return=a,Z=c;else e:for(;Z!==null;){if(a=Z,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Fi(9,a,a.return)}var d=a.sibling;if(d!==null){d.return=a.return,Z=d;break e}Z=a.return}}var u=e.current;for(Z=u;Z!==null;){c=Z;var p=c.child;if(c.subtreeFlags&2064&&p!==null)p.return=c,Z=p;else e:for(c=u;Z!==null;){if(o=Z,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:ic(9,o)}}catch(S){Re(o,o.return,S)}if(o===c){Z=null;break e}var b=o.sibling;if(b!==null){b.return=o.return,Z=b;break e}Z=o.return}}if(me=i,ys(),dr&&typeof dr.onPostCommitFiberRoot=="function")try{dr.onPostCommitFiberRoot(Xl,e)}catch{}s=!0}return s}finally{ge=r,Bt.transition=t}}return!1}function lm(e,t,r){t=Vn(r,t),t=Ix(e,t,1),e=ts(e,t,1),t=it(),e!==null&&($o(e,1,t),vt(e,t))}function Re(e,t,r){if(e.tag===3)lm(e,e,r);else for(;t!==null;){if(t.tag===3){lm(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(rs===null||!rs.has(s))){e=Vn(r,e),e=Mx(t,e,1),t=ts(t,e,1),e=it(),t!==null&&($o(t,1,e),vt(t,e));break}}t=t.return}}function tw(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=it(),e.pingedLanes|=e.suspendedLanes&r,$e===e&&(Ke&r)===r&&(Oe===4||Oe===3&&(Ke&130023424)===Ke&&500>Te()-tf?Vs(e,0):ef|=r),vt(e,t)}function r0(e,t){t===0&&(e.mode&1?(t=va,va<<=1,!(va&130023424)&&(va=4194304)):t=1);var r=it();e=kr(e,t),e!==null&&($o(e,t,r),vt(e,r))}function rw(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),r0(e,r)}function sw(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(K(314))}s!==null&&s.delete(t),r0(e,r)}var s0;s0=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||mt.current)ft=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ft=!1,z_(e,t,r);ft=!!(e.flags&131072)}else ft=!1,ke&&t.flags&1048576&&ax(t,gl,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Ka(e,t),e=t.pendingProps;var i=Hn(t,et.current);kn(t,r),i=Kh(null,t,s,e,i,r);var a=Qh();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,gt(s)?(a=!0,pl(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Wh(t),i.updater=nc,t.stateNode=i,i._reactInternals=t,bu(t,s,e,r),t=Su(null,t,s,!0,a,r)):(t.tag=0,ke&&a&&Mh(t),nt(null,t,i,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Ka(e,t),e=t.pendingProps,i=s._init,s=i(s._payload),t.type=s,i=t.tag=iw(s),e=zt(s,e),i){case 0:t=wu(null,t,s,e,r);break e;case 1:t=Jp(null,t,s,e,r);break e;case 11:t=Yp(null,t,s,e,r);break e;case 14:t=Xp(null,t,s,zt(s.type,e),r);break e}throw Error(K(306,s,""))}return t;case 0:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:zt(s,i),wu(e,t,s,i,r);case 1:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:zt(s,i),Jp(e,t,s,i,r);case 3:e:{if($x(t),e===null)throw Error(K(387));s=t.pendingProps,a=t.memoizedState,i=a.element,fx(e,t),yl(t,s,null,r);var c=t.memoizedState;if(s=c.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:c.cache,pendingSuspenseBoundaries:c.pendingSuspenseBoundaries,transitions:c.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=Vn(Error(K(423)),t),t=Zp(e,t,s,r,i);break e}else if(s!==i){i=Vn(Error(K(424)),t),t=Zp(e,t,s,r,i);break e}else for(yt=es(t.stateNode.containerInfo.firstChild),_t=t,ke=!0,Qt=null,r=ux(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Un(),s===i){t=jr(e,t,r);break e}nt(e,t,s,r)}t=t.child}return t;case 5:return px(t),e===null&&vu(t),s=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,c=i.children,hu(s,i)?c=null:a!==null&&hu(s,a)&&(t.flags|=32),Fx(e,t),nt(e,t,c,r),t.child;case 6:return e===null&&vu(t),null;case 13:return Hx(e,t,r);case 4:return zh(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Wn(t,null,s,r):nt(e,t,s,r),t.child;case 11:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:zt(s,i),Yp(e,t,s,i,r);case 7:return nt(e,t,t.pendingProps,r),t.child;case 8:return nt(e,t,t.pendingProps.children,r),t.child;case 12:return nt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,i=t.pendingProps,a=t.memoizedProps,c=i.value,_e(vl,s._currentValue),s._currentValue=c,a!==null)if(tr(a.value,c)){if(a.children===i.children&&!mt.current){t=jr(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){c=a.child;for(var l=o.firstContext;l!==null;){if(l.context===s){if(a.tag===1){l=wr(-1,r&-r),l.tag=2;var f=a.updateQueue;if(f!==null){f=f.shared;var v=f.pending;v===null?l.next=l:(l.next=v.next,v.next=l),f.pending=l}}a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),xu(a.return,r,t),o.lanes|=r;break}l=l.next}}else if(a.tag===10)c=a.type===t.type?null:a.child;else if(a.tag===18){if(c=a.return,c===null)throw Error(K(341));c.lanes|=r,o=c.alternate,o!==null&&(o.lanes|=r),xu(c,r,t),c=a.sibling}else c=a.child;if(c!==null)c.return=a;else for(c=a;c!==null;){if(c===t){c=null;break}if(a=c.sibling,a!==null){a.return=c.return,c=a;break}c=c.return}a=c}nt(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,s=t.pendingProps.children,kn(t,r),i=$t(i),s=s(i),t.flags|=1,nt(e,t,s,r),t.child;case 14:return s=t.type,i=zt(s,t.pendingProps),i=zt(s.type,i),Xp(e,t,s,i,r);case 15:return Ox(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:zt(s,i),Ka(e,t),t.tag=1,gt(s)?(e=!0,pl(t)):e=!1,kn(t,r),Lx(t,s,i),bu(t,s,i,r),Su(null,t,s,!0,e,r);case 19:return Ux(e,t,r);case 22:return Bx(e,t,r)}throw Error(K(156,t.tag))};function n0(e,t){return Rv(e,t)}function nw(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mt(e,t,r,s){return new nw(e,t,r,s)}function of(e){return e=e.prototype,!(!e||!e.isReactComponent)}function iw(e){if(typeof e=="function")return of(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ch)return 11;if(e===kh)return 14}return 2}function ns(e,t){var r=e.alternate;return r===null?(r=Mt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Xa(e,t,r,s,i,a){var c=2;if(s=e,typeof e=="function")of(e)&&(c=1);else if(typeof e=="string")c=5;else e:switch(e){case dn:return qs(r.children,i,a,t);case Sh:c=8,i|=8;break;case zd:return e=Mt(12,r,t,i|2),e.elementType=zd,e.lanes=a,e;case Vd:return e=Mt(13,r,t,i),e.elementType=Vd,e.lanes=a,e;case qd:return e=Mt(19,r,t,i),e.elementType=qd,e.lanes=a,e;case pv:return ac(r,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case hv:c=10;break e;case fv:c=9;break e;case Ch:c=11;break e;case kh:c=14;break e;case Lr:c=16,s=null;break e}throw Error(K(130,e==null?e:typeof e,""))}return t=Mt(c,r,t,i),t.elementType=e,t.type=s,t.lanes=a,t}function qs(e,t,r,s){return e=Mt(7,e,s,t),e.lanes=r,e}function ac(e,t,r,s){return e=Mt(22,e,s,t),e.elementType=pv,e.lanes=r,e.stateNode={isHidden:!1},e}function vd(e,t,r){return e=Mt(6,e,null,t),e.lanes=r,e}function xd(e,t,r){return t=Mt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ow(e,t,r,s,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jc(0),this.expirationTimes=Jc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jc(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function af(e,t,r,s,i,a,c,o,l){return e=new ow(e,t,r,o,l),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Mt(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wh(a),e}function aw(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cn,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function i0(e){if(!e)return hs;e=e._reactInternals;e:{if(sn(e)!==e||e.tag!==1)throw Error(K(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(gt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(K(171))}if(e.tag===1){var r=e.type;if(gt(r))return ix(e,r,t)}return t}function o0(e,t,r,s,i,a,c,o,l){return e=af(r,s,!0,e,i,a,c,o,l),e.context=i0(null),r=e.current,s=it(),i=ss(r),a=wr(s,i),a.callback=t??null,ts(r,a,i),e.current.lanes=i,$o(e,i,s),vt(e,s),e}function lc(e,t,r,s){var i=t.current,a=it(),c=ss(i);return r=i0(r),t.context===null?t.context=r:t.pendingContext=r,t=wr(a,c),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=ts(i,t,c),e!==null&&(er(e,i,c,a),Va(e,i,c)),c}function Nl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function cm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function lf(e,t){cm(e,t),(e=e.alternate)&&cm(e,t)}function lw(){return null}var a0=typeof reportError=="function"?reportError:function(e){console.error(e)};function cf(e){this._internalRoot=e}cc.prototype.render=cf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(K(409));lc(e,t,null,null)};cc.prototype.unmount=cf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Xs(function(){lc(null,e,null,null)}),t[Cr]=null}};function cc(e){this._internalRoot=e}cc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Bv();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Mr.length&&t!==0&&t<Mr[r].priority;r++);Mr.splice(r,0,e),r===0&&$v(e)}};function df(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function dc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function dm(){}function cw(e,t,r,s,i){if(i){if(typeof s=="function"){var a=s;s=function(){var f=Nl(c);a.call(f)}}var c=o0(t,s,e,0,null,!1,!1,"",dm);return e._reactRootContainer=c,e[Cr]=c.current,so(e.nodeType===8?e.parentNode:e),Xs(),c}for(;i=e.lastChild;)e.removeChild(i);if(typeof s=="function"){var o=s;s=function(){var f=Nl(l);o.call(f)}}var l=af(e,0,!1,null,null,!1,!1,"",dm);return e._reactRootContainer=l,e[Cr]=l.current,so(e.nodeType===8?e.parentNode:e),Xs(function(){lc(t,l,r,s)}),l}function uc(e,t,r,s,i){var a=r._reactRootContainer;if(a){var c=a;if(typeof i=="function"){var o=i;i=function(){var l=Nl(c);o.call(l)}}lc(t,c,e,i)}else c=cw(r,t,e,i,s);return Nl(c)}Mv=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ei(t.pendingLanes);r!==0&&(Eh(t,r|1),vt(t,Te()),!(me&6)&&(qn=Te()+500,ys()))}break;case 13:Xs(function(){var s=kr(e,1);if(s!==null){var i=it();er(s,e,1,i)}}),lf(e,1)}};Dh=function(e){if(e.tag===13){var t=kr(e,134217728);if(t!==null){var r=it();er(t,e,134217728,r)}lf(e,134217728)}};Ov=function(e){if(e.tag===13){var t=ss(e),r=kr(e,t);if(r!==null){var s=it();er(r,e,t,s)}lf(e,t)}};Bv=function(){return ge};Fv=function(e,t){var r=ge;try{return ge=e,t()}finally{ge=r}};ru=function(e,t,r){switch(t){case"input":if(Qd(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var i=tc(s);if(!i)throw Error(K(90));gv(s),Qd(s,i)}}}break;case"textarea":xv(e,r);break;case"select":t=r.value,t!=null&&_n(e,!!r.multiple,t,!1)}};kv=rf;jv=Xs;var dw={usingClientEntryPoint:!1,Events:[Uo,pn,tc,Sv,Cv,rf]},_i={findFiberByHostInstance:As,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uw={bundleType:_i.bundleType,version:_i.version,rendererPackageName:_i.rendererPackageName,rendererConfig:_i.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Dr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Dv(e),e===null?null:e.stateNode},findFiberByHostInstance:_i.findFiberByHostInstance||lw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ea=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ea.isDisabled&&Ea.supportsFiber)try{Xl=Ea.inject(uw),dr=Ea}catch{}}kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dw;kt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!df(t))throw Error(K(200));return aw(e,t,null,r)};kt.createRoot=function(e,t){if(!df(e))throw Error(K(299));var r=!1,s="",i=a0;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=af(e,1,!1,null,null,r,!1,s,i),e[Cr]=t.current,so(e.nodeType===8?e.parentNode:e),new cf(t)};kt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(K(188)):(e=Object.keys(e).join(","),Error(K(268,e)));return e=Dv(t),e=e===null?null:e.stateNode,e};kt.flushSync=function(e){return Xs(e)};kt.hydrate=function(e,t,r){if(!dc(t))throw Error(K(200));return uc(null,e,t,!0,r)};kt.hydrateRoot=function(e,t,r){if(!df(e))throw Error(K(405));var s=r!=null&&r.hydratedSources||null,i=!1,a="",c=a0;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(c=r.onRecoverableError)),t=o0(t,null,e,1,r??null,i,!1,a,c),e[Cr]=t.current,so(e),s)for(e=0;e<s.length;e++)r=s[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new cc(t)};kt.render=function(e,t,r){if(!dc(t))throw Error(K(200));return uc(null,e,t,!1,r)};kt.unmountComponentAtNode=function(e){if(!dc(e))throw Error(K(40));return e._reactRootContainer?(Xs(function(){uc(null,null,e,!1,function(){e._reactRootContainer=null,e[Cr]=null})}),!0):!1};kt.unstable_batchedUpdates=rf;kt.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!dc(r))throw Error(K(200));if(e==null||e._reactInternals===void 0)throw Error(K(38));return uc(e,t,r,!1,s)};kt.version="18.3.1-next-f1338f8080-20240426";function l0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l0)}catch(e){console.error(e)}}l0(),lv.exports=kt;var uf=lv.exports;const hw=mh(uf);var um=uf;Ud.createRoot=um.createRoot,Ud.hydrateRoot=um.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fo(){return fo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},fo.apply(this,arguments)}var Kr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Kr||(Kr={}));const hm="popstate";function fw(e){e===void 0&&(e={});function t(s,i){let{pathname:a,search:c,hash:o}=s.location;return Iu("",{pathname:a,search:c,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(s,i){return typeof i=="string"?i:El(i)}return mw(t,r,null,e)}function Ae(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function c0(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function pw(){return Math.random().toString(36).substr(2,8)}function fm(e,t){return{usr:e.state,key:e.key,idx:t}}function Iu(e,t,r,s){return r===void 0&&(r=null),fo({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?oi(t):t,{state:r,key:t&&t.key||s||pw()})}function El(e){let{pathname:t="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function oi(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function mw(e,t,r,s){s===void 0&&(s={});let{window:i=document.defaultView,v5Compat:a=!1}=s,c=i.history,o=Kr.Pop,l=null,f=v();f==null&&(f=0,c.replaceState(fo({},c.state,{idx:f}),""));function v(){return(c.state||{idx:null}).idx}function h(){o=Kr.Pop;let m=v(),d=m==null?null:m-f;f=m,l&&l({action:o,location:x.location,delta:d})}function g(m,d){o=Kr.Push;let u=Iu(x.location,m,d);r&&r(u,m),f=v()+1;let p=fm(u,f),b=x.createHref(u);try{c.pushState(p,"",b)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(b)}a&&l&&l({action:o,location:x.location,delta:1})}function y(m,d){o=Kr.Replace;let u=Iu(x.location,m,d);r&&r(u,m),f=v();let p=fm(u,f),b=x.createHref(u);c.replaceState(p,"",b),a&&l&&l({action:o,location:x.location,delta:0})}function _(m){let d=i.location.origin!=="null"?i.location.origin:i.location.href,u=typeof m=="string"?m:El(m);return u=u.replace(/ $/,"%20"),Ae(d,"No window.location.(origin|href) available to create URL for href: "+u),new URL(u,d)}let x={get action(){return o},get location(){return e(i,c)},listen(m){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(hm,h),l=m,()=>{i.removeEventListener(hm,h),l=null}},createHref(m){return t(i,m)},createURL:_,encodeLocation(m){let d=_(m);return{pathname:d.pathname,search:d.search,hash:d.hash}},push:g,replace:y,go(m){return c.go(m)}};return x}var pm;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(pm||(pm={}));function gw(e,t,r){return r===void 0&&(r="/"),vw(e,t,r,!1)}function vw(e,t,r,s){let i=typeof t=="string"?oi(t):t,a=Gn(i.pathname||"/",r);if(a==null)return null;let c=d0(e);xw(c);let o=null;for(let l=0;o==null&&l<c.length;++l){let f=Dw(a);o=Nw(c[l],f,s)}return o}function d0(e,t,r,s){t===void 0&&(t=[]),r===void 0&&(r=[]),s===void 0&&(s="");let i=(a,c,o)=>{let l={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};l.relativePath.startsWith("/")&&(Ae(l.relativePath.startsWith(s),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(s.length));let f=is([s,l.relativePath]),v=r.concat(l);a.children&&a.children.length>0&&(Ae(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),d0(a.children,t,v,f)),!(a.path==null&&!a.index)&&t.push({path:f,score:kw(f,a.index),routesMeta:v})};return e.forEach((a,c)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))i(a,c);else for(let l of u0(a.path))i(a,c,l)}),t}function u0(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(s.length===0)return i?[a,""]:[a];let c=u0(s.join("/")),o=[];return o.push(...c.map(l=>l===""?a:[a,l].join("/"))),i&&o.push(...c),o.map(l=>e.startsWith("/")&&l===""?"/":l)}function xw(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:jw(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const yw=/^:[\w-]+$/,bw=3,_w=2,ww=1,Sw=10,Cw=-2,mm=e=>e==="*";function kw(e,t){let r=e.split("/"),s=r.length;return r.some(mm)&&(s+=Cw),t&&(s+=_w),r.filter(i=>!mm(i)).reduce((i,a)=>i+(yw.test(a)?bw:a===""?ww:Sw),s)}function jw(e,t){return e.length===t.length&&e.slice(0,-1).every((s,i)=>s===t[i])?e[e.length-1]-t[t.length-1]:0}function Nw(e,t,r){r===void 0&&(r=!1);let{routesMeta:s}=e,i={},a="/",c=[];for(let o=0;o<s.length;++o){let l=s[o],f=o===s.length-1,v=a==="/"?t:t.slice(a.length)||"/",h=Dl({path:l.relativePath,caseSensitive:l.caseSensitive,end:f},v),g=l.route;if(!h&&f&&r&&!s[s.length-1].route.index&&(h=Dl({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},v)),!h)return null;Object.assign(i,h.params),c.push({params:i,pathname:is([a,h.pathname]),pathnameBase:Tw(is([a,h.pathnameBase])),route:g}),h.pathnameBase!=="/"&&(a=is([a,h.pathnameBase]))}return c}function Dl(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=Ew(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let a=i[0],c=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:s.reduce((f,v,h)=>{let{paramName:g,isOptional:y}=v;if(g==="*"){let x=o[h]||"";c=a.slice(0,a.length-x.length).replace(/(.)\/+$/,"$1")}const _=o[h];return y&&!_?f[g]=void 0:f[g]=(_||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:c,pattern:e}}function Ew(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),c0(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,o,l)=>(s.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),s]}function Dw(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return c0(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Gn(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}function Pw(e,t){t===void 0&&(t="/");let{pathname:r,search:s="",hash:i=""}=typeof e=="string"?oi(e):e;return{pathname:r?r.startsWith("/")?r:Rw(r,t):t,search:Lw(s),hash:Iw(i)}}function Rw(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function yd(e,t,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Aw(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function h0(e,t){let r=Aw(e);return t?r.map((s,i)=>i===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function f0(e,t,r,s){s===void 0&&(s=!1);let i;typeof e=="string"?i=oi(e):(i=fo({},e),Ae(!i.pathname||!i.pathname.includes("?"),yd("?","pathname","search",i)),Ae(!i.pathname||!i.pathname.includes("#"),yd("#","pathname","hash",i)),Ae(!i.search||!i.search.includes("#"),yd("#","search","hash",i)));let a=e===""||i.pathname==="",c=a?"/":i.pathname,o;if(c==null)o=r;else{let h=t.length-1;if(!s&&c.startsWith("..")){let g=c.split("/");for(;g[0]==="..";)g.shift(),h-=1;i.pathname=g.join("/")}o=h>=0?t[h]:"/"}let l=Pw(i,o),f=c&&c!=="/"&&c.endsWith("/"),v=(a||c===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(f||v)&&(l.pathname+="/"),l}const is=e=>e.join("/").replace(/\/\/+/g,"/"),Tw=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Lw=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Iw=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Mw(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const p0=["post","put","patch","delete"];new Set(p0);const Ow=["get",...p0];new Set(Ow);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function po(){return po=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},po.apply(this,arguments)}const hc=j.createContext(null),m0=j.createContext(null),bs=j.createContext(null),fc=j.createContext(null),_s=j.createContext({outlet:null,matches:[],isDataRoute:!1}),g0=j.createContext(null);function Bw(e,t){let{relative:r}=t===void 0?{}:t;zo()||Ae(!1);let{basename:s,navigator:i}=j.useContext(bs),{hash:a,pathname:c,search:o}=pc(e,{relative:r}),l=c;return s!=="/"&&(l=c==="/"?s:is([s,c])),i.createHref({pathname:l,search:o,hash:a})}function zo(){return j.useContext(fc)!=null}function ws(){return zo()||Ae(!1),j.useContext(fc).location}function v0(e){j.useContext(bs).static||j.useLayoutEffect(e)}function Ss(){let{isDataRoute:e}=j.useContext(_s);return e?Xw():Fw()}function Fw(){zo()||Ae(!1);let e=j.useContext(hc),{basename:t,future:r,navigator:s}=j.useContext(bs),{matches:i}=j.useContext(_s),{pathname:a}=ws(),c=JSON.stringify(h0(i,r.v7_relativeSplatPath)),o=j.useRef(!1);return v0(()=>{o.current=!0}),j.useCallback(function(f,v){if(v===void 0&&(v={}),!o.current)return;if(typeof f=="number"){s.go(f);return}let h=f0(f,JSON.parse(c),a,v.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:is([t,h.pathname])),(v.replace?s.replace:s.push)(h,v.state,v)},[t,s,c,a,e])}function x0(){let{matches:e}=j.useContext(_s),t=e[e.length-1];return t?t.params:{}}function pc(e,t){let{relative:r}=t===void 0?{}:t,{future:s}=j.useContext(bs),{matches:i}=j.useContext(_s),{pathname:a}=ws(),c=JSON.stringify(h0(i,s.v7_relativeSplatPath));return j.useMemo(()=>f0(e,JSON.parse(c),a,r==="path"),[e,c,a,r])}function $w(e,t){return Hw(e,t)}function Hw(e,t,r,s){zo()||Ae(!1);let{navigator:i}=j.useContext(bs),{matches:a}=j.useContext(_s),c=a[a.length-1],o=c?c.params:{};c&&c.pathname;let l=c?c.pathnameBase:"/";c&&c.route;let f=ws(),v;if(t){var h;let m=typeof t=="string"?oi(t):t;l==="/"||(h=m.pathname)!=null&&h.startsWith(l)||Ae(!1),v=m}else v=f;let g=v.pathname||"/",y=g;if(l!=="/"){let m=l.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(m.length).join("/")}let _=gw(e,{pathname:y}),x=qw(_&&_.map(m=>Object.assign({},m,{params:Object.assign({},o,m.params),pathname:is([l,i.encodeLocation?i.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?l:is([l,i.encodeLocation?i.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),a,r,s);return t&&x?j.createElement(fc.Provider,{value:{location:po({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:Kr.Pop}},x):x}function Uw(){let e=Yw(),t=Mw(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},a=null;return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),r?j.createElement("pre",{style:i},r):null,a)}const Ww=j.createElement(Uw,null);class zw extends j.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?j.createElement(_s.Provider,{value:this.props.routeContext},j.createElement(g0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Vw(e){let{routeContext:t,match:r,children:s}=e,i=j.useContext(hc);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),j.createElement(_s.Provider,{value:t},s)}function qw(e,t,r,s){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),s===void 0&&(s=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=s)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let c=e,o=(i=r)==null?void 0:i.errors;if(o!=null){let v=c.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);v>=0||Ae(!1),c=c.slice(0,Math.min(c.length,v+1))}let l=!1,f=-1;if(r&&s&&s.v7_partialHydration)for(let v=0;v<c.length;v++){let h=c[v];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(f=v),h.route.id){let{loaderData:g,errors:y}=r,_=h.route.loader&&g[h.route.id]===void 0&&(!y||y[h.route.id]===void 0);if(h.route.lazy||_){l=!0,f>=0?c=c.slice(0,f+1):c=[c[0]];break}}}return c.reduceRight((v,h,g)=>{let y,_=!1,x=null,m=null;r&&(y=o&&h.route.id?o[h.route.id]:void 0,x=h.route.errorElement||Ww,l&&(f<0&&g===0?(Jw("route-fallback",!1),_=!0,m=null):f===g&&(_=!0,m=h.route.hydrateFallbackElement||null)));let d=t.concat(c.slice(0,g+1)),u=()=>{let p;return y?p=x:_?p=m:h.route.Component?p=j.createElement(h.route.Component,null):h.route.element?p=h.route.element:p=v,j.createElement(Vw,{match:h,routeContext:{outlet:v,matches:d,isDataRoute:r!=null},children:p})};return r&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?j.createElement(zw,{location:r.location,revalidation:r.revalidation,component:x,error:y,children:u(),routeContext:{outlet:null,matches:d,isDataRoute:!0}}):u()},null)}var y0=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(y0||{}),Pl=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Pl||{});function Gw(e){let t=j.useContext(hc);return t||Ae(!1),t}function Kw(e){let t=j.useContext(m0);return t||Ae(!1),t}function Qw(e){let t=j.useContext(_s);return t||Ae(!1),t}function b0(e){let t=Qw(),r=t.matches[t.matches.length-1];return r.route.id||Ae(!1),r.route.id}function Yw(){var e;let t=j.useContext(g0),r=Kw(Pl.UseRouteError),s=b0(Pl.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[s]}function Xw(){let{router:e}=Gw(y0.UseNavigateStable),t=b0(Pl.UseNavigateStable),r=j.useRef(!1);return v0(()=>{r.current=!0}),j.useCallback(function(i,a){a===void 0&&(a={}),r.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,po({fromRouteId:t},a)))},[e,t])}const gm={};function Jw(e,t,r){!t&&!gm[e]&&(gm[e]=!0)}function Zw(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function Pt(e){Ae(!1)}function eS(e){let{basename:t="/",children:r=null,location:s,navigationType:i=Kr.Pop,navigator:a,static:c=!1,future:o}=e;zo()&&Ae(!1);let l=t.replace(/^\/*/,"/"),f=j.useMemo(()=>({basename:l,navigator:a,static:c,future:po({v7_relativeSplatPath:!1},o)}),[l,o,a,c]);typeof s=="string"&&(s=oi(s));let{pathname:v="/",search:h="",hash:g="",state:y=null,key:_="default"}=s,x=j.useMemo(()=>{let m=Gn(v,l);return m==null?null:{location:{pathname:m,search:h,hash:g,state:y,key:_},navigationType:i}},[l,v,h,g,y,_,i]);return x==null?null:j.createElement(bs.Provider,{value:f},j.createElement(fc.Provider,{children:r,value:x}))}function tS(e){let{children:t,location:r}=e;return $w(Mu(t),r)}new Promise(()=>{});function Mu(e,t){t===void 0&&(t=[]);let r=[];return j.Children.forEach(e,(s,i)=>{if(!j.isValidElement(s))return;let a=[...t,i];if(s.type===j.Fragment){r.push.apply(r,Mu(s.props.children,a));return}s.type!==Pt&&Ae(!1),!s.props.index||!s.props.children||Ae(!1);let c={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=Mu(s.props.children,a)),r.push(c)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rl(){return Rl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Rl.apply(this,arguments)}function _0(e,t){if(e==null)return{};var r={},s=Object.keys(e),i,a;for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function rS(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function sS(e,t){return e.button===0&&(!t||t==="_self")&&!rS(e)}function Ou(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let s=e[r];return t.concat(Array.isArray(s)?s.map(i=>[r,i]):[[r,s]])},[]))}function nS(e,t){let r=Ou(e);return t&&t.forEach((s,i)=>{r.has(i)||t.getAll(i).forEach(a=>{r.append(i,a)})}),r}const iS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],oS=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],aS="6";try{window.__reactRouterVersion=aS}catch{}const lS=j.createContext({isTransitioning:!1}),cS="startTransition",vm=t1[cS];function dS(e){let{basename:t,children:r,future:s,window:i}=e,a=j.useRef();a.current==null&&(a.current=fw({window:i,v5Compat:!0}));let c=a.current,[o,l]=j.useState({action:c.action,location:c.location}),{v7_startTransition:f}=s||{},v=j.useCallback(h=>{f&&vm?vm(()=>l(h)):l(h)},[l,f]);return j.useLayoutEffect(()=>c.listen(v),[c,v]),j.useEffect(()=>Zw(s),[s]),j.createElement(eS,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:c,future:s})}const uS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",hS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fS=j.forwardRef(function(t,r){let{onClick:s,relative:i,reloadDocument:a,replace:c,state:o,target:l,to:f,preventScrollReset:v,viewTransition:h}=t,g=_0(t,iS),{basename:y}=j.useContext(bs),_,x=!1;if(typeof f=="string"&&hS.test(f)&&(_=f,uS))try{let p=new URL(window.location.href),b=f.startsWith("//")?new URL(p.protocol+f):new URL(f),S=Gn(b.pathname,y);b.origin===p.origin&&S!=null?f=S+b.search+b.hash:x=!0}catch{}let m=Bw(f,{relative:i}),d=mS(f,{replace:c,state:o,target:l,preventScrollReset:v,relative:i,viewTransition:h});function u(p){s&&s(p),p.defaultPrevented||d(p)}return j.createElement("a",Rl({},g,{href:_||m,onClick:x||a?s:u,ref:r,target:l}))}),xm=j.forwardRef(function(t,r){let{"aria-current":s="page",caseSensitive:i=!1,className:a="",end:c=!1,style:o,to:l,viewTransition:f,children:v}=t,h=_0(t,oS),g=pc(l,{relative:h.relative}),y=ws(),_=j.useContext(m0),{navigator:x,basename:m}=j.useContext(bs),d=_!=null&&gS(g)&&f===!0,u=x.encodeLocation?x.encodeLocation(g).pathname:g.pathname,p=y.pathname,b=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;i||(p=p.toLowerCase(),b=b?b.toLowerCase():null,u=u.toLowerCase()),b&&m&&(b=Gn(b,m)||b);const S=u!=="/"&&u.endsWith("/")?u.length-1:u.length;let C=p===u||!c&&p.startsWith(u)&&p.charAt(S)==="/",k=b!=null&&(b===u||!c&&b.startsWith(u)&&b.charAt(u.length)==="/"),w={isActive:C,isPending:k,isTransitioning:d},N=C?s:void 0,D;typeof a=="function"?D=a(w):D=[a,C?"active":null,k?"pending":null,d?"transitioning":null].filter(Boolean).join(" ");let T=typeof o=="function"?o(w):o;return j.createElement(fS,Rl({},h,{"aria-current":N,className:D,ref:r,style:T,to:l,viewTransition:f}),typeof v=="function"?v(w):v)});var Bu;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Bu||(Bu={}));var ym;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(ym||(ym={}));function pS(e){let t=j.useContext(hc);return t||Ae(!1),t}function mS(e,t){let{target:r,replace:s,state:i,preventScrollReset:a,relative:c,viewTransition:o}=t===void 0?{}:t,l=Ss(),f=ws(),v=pc(e,{relative:c});return j.useCallback(h=>{if(sS(h,r)){h.preventDefault();let g=s!==void 0?s:El(f)===El(v);l(e,{replace:g,state:i,preventScrollReset:a,relative:c,viewTransition:o})}},[f,l,v,s,i,r,e,a,c,o])}function w0(e){let t=j.useRef(Ou(e)),r=j.useRef(!1),s=ws(),i=j.useMemo(()=>nS(s.search,r.current?null:t.current),[s.search]),a=Ss(),c=j.useCallback((o,l)=>{const f=Ou(typeof o=="function"?o(i):o);r.current=!0,a("?"+f,l)},[a,i]);return[i,c]}function gS(e,t){t===void 0&&(t={});let r=j.useContext(lS);r==null&&Ae(!1);let{basename:s}=pS(Bu.useViewTransitionState),i=pc(e,{relative:t.relative});if(!r.isTransitioning)return!1;let a=Gn(r.currentLocation.pathname,s)||r.currentLocation.pathname,c=Gn(r.nextLocation.pathname,s)||r.nextLocation.pathname;return Dl(i.pathname,c)!=null||Dl(i.pathname,a)!=null}var Vo=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Js=typeof window>"u"||"Deno"in globalThis;function ut(){}function vS(e,t){return typeof e=="function"?e(t):e}function Fu(e){return typeof e=="number"&&e>=0&&e!==1/0}function S0(e,t){return Math.max(e+(t||0)-Date.now(),0)}function os(e,t){return typeof e=="function"?e(t):e}function Yt(e,t){return typeof e=="function"?e(t):e}function bm(e,t){const{type:r="all",exact:s,fetchStatus:i,predicate:a,queryKey:c,stale:o}=e;if(c){if(s){if(t.queryHash!==hf(c,t.options))return!1}else if(!go(t.queryKey,c))return!1}if(r!=="all"){const l=t.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||i&&i!==t.state.fetchStatus||a&&!a(t))}function _m(e,t){const{exact:r,status:s,predicate:i,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(r){if(mo(t.options.mutationKey)!==mo(a))return!1}else if(!go(t.options.mutationKey,a))return!1}return!(s&&t.state.status!==s||i&&!i(t))}function hf(e,t){return((t==null?void 0:t.queryKeyHashFn)||mo)(e)}function mo(e){return JSON.stringify(e,(t,r)=>Hu(r)?Object.keys(r).sort().reduce((s,i)=>(s[i]=r[i],s),{}):r)}function go(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>go(e[r],t[r])):!1}function C0(e,t){if(e===t)return e;const r=wm(e)&&wm(t);if(r||Hu(e)&&Hu(t)){const s=r?e:Object.keys(e),i=s.length,a=r?t:Object.keys(t),c=a.length,o=r?[]:{},l=new Set(s);let f=0;for(let v=0;v<c;v++){const h=r?v:a[v];(!r&&l.has(h)||r)&&e[h]===void 0&&t[h]===void 0?(o[h]=void 0,f++):(o[h]=C0(e[h],t[h]),o[h]===e[h]&&e[h]!==void 0&&f++)}return i===c&&f===i?e:o}return t}function $u(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function wm(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Hu(e){if(!Sm(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Sm(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Sm(e){return Object.prototype.toString.call(e)==="[object Object]"}function xS(e){return new Promise(t=>{setTimeout(t,e)})}function Uu(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?C0(e,t):t}function yS(e,t,r=0){const s=[...e,t];return r&&s.length>r?s.slice(1):s}function bS(e,t,r=0){const s=[t,...e];return r&&s.length>r?s.slice(0,-1):s}var ff=Symbol();function k0(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===ff?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function _S(e,t){return typeof e=="function"?e(...t):!!e}var Is,Br,En,Ug,wS=(Ug=class extends Vo{constructor(){super();ne(this,Is,void 0);ne(this,Br,void 0);ne(this,En,void 0);ee(this,En,t=>{if(!Js&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){H(this,Br)||this.setEventListener(H(this,En))}onUnsubscribe(){var t;this.hasListeners()||((t=H(this,Br))==null||t.call(this),ee(this,Br,void 0))}setEventListener(t){var r;ee(this,En,t),(r=H(this,Br))==null||r.call(this),ee(this,Br,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){H(this,Is)!==t&&(ee(this,Is,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof H(this,Is)=="boolean"?H(this,Is):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Is=new WeakMap,Br=new WeakMap,En=new WeakMap,Ug),pf=new wS,Dn,Fr,Pn,Wg,SS=(Wg=class extends Vo{constructor(){super();ne(this,Dn,!0);ne(this,Fr,void 0);ne(this,Pn,void 0);ee(this,Pn,t=>{if(!Js&&window.addEventListener){const r=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}}})}onSubscribe(){H(this,Fr)||this.setEventListener(H(this,Pn))}onUnsubscribe(){var t;this.hasListeners()||((t=H(this,Fr))==null||t.call(this),ee(this,Fr,void 0))}setEventListener(t){var r;ee(this,Pn,t),(r=H(this,Fr))==null||r.call(this),ee(this,Fr,t(this.setOnline.bind(this)))}setOnline(t){H(this,Dn)!==t&&(ee(this,Dn,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return H(this,Dn)}},Dn=new WeakMap,Fr=new WeakMap,Pn=new WeakMap,Wg),Al=new SS;function Wu(){let e,t;const r=new Promise((i,a)=>{e=i,t=a});r.status="pending",r.catch(()=>{});function s(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{s({status:"fulfilled",value:i}),e(i)},r.reject=i=>{s({status:"rejected",reason:i}),t(i)},r}function CS(e){return Math.min(1e3*2**e,3e4)}function j0(e){return(e??"online")==="online"?Al.isOnline():!0}var N0=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function bd(e){return e instanceof N0}function E0(e){let t=!1,r=0,s=!1,i;const a=Wu(),c=x=>{var m;s||(g(new N0(x)),(m=e.abort)==null||m.call(e))},o=()=>{t=!0},l=()=>{t=!1},f=()=>pf.isFocused()&&(e.networkMode==="always"||Al.isOnline())&&e.canRun(),v=()=>j0(e.networkMode)&&e.canRun(),h=x=>{var m;s||(s=!0,(m=e.onSuccess)==null||m.call(e,x),i==null||i(),a.resolve(x))},g=x=>{var m;s||(s=!0,(m=e.onError)==null||m.call(e,x),i==null||i(),a.reject(x))},y=()=>new Promise(x=>{var m;i=d=>{(s||f())&&x(d)},(m=e.onPause)==null||m.call(e)}).then(()=>{var x;i=void 0,s||(x=e.onContinue)==null||x.call(e)}),_=()=>{if(s)return;let x;const m=r===0?e.initialPromise:void 0;try{x=m??e.fn()}catch(d){x=Promise.reject(d)}Promise.resolve(x).then(h).catch(d=>{var C;if(s)return;const u=e.retry??(Js?0:3),p=e.retryDelay??CS,b=typeof p=="function"?p(r,d):p,S=u===!0||typeof u=="number"&&r<u||typeof u=="function"&&u(r,d);if(t||!S){g(d);return}r++,(C=e.onFail)==null||C.call(e,r,d),xS(b).then(()=>f()?void 0:y()).then(()=>{t?g(d):_()})})};return{promise:a,cancel:c,continue:()=>(i==null||i(),a),cancelRetry:o,continueRetry:l,canStart:v,start:()=>(v()?_():y().then(_),a)}}var kS=e=>setTimeout(e,0);function jS(){let e=[],t=0,r=o=>{o()},s=o=>{o()},i=kS;const a=o=>{t?e.push(o):i(()=>{r(o)})},c=()=>{const o=e;e=[],o.length&&i(()=>{s(()=>{o.forEach(l=>{r(l)})})})};return{batch:o=>{let l;t++;try{l=o()}finally{t--,t||c()}return l},batchCalls:o=>(...l)=>{a(()=>{o(...l)})},schedule:a,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{s=o},setScheduler:o=>{i=o}}}var qe=jS(),Ms,zg,D0=(zg=class{constructor(){ne(this,Ms,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Fu(this.gcTime)&&ee(this,Ms,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Js?1/0:5*60*1e3))}clearGcTimeout(){H(this,Ms)&&(clearTimeout(H(this,Ms)),ee(this,Ms,void 0))}},Ms=new WeakMap,zg),Rn,Os,Rt,Bs,Je,Eo,Fs,Vt,gr,Vg,NS=(Vg=class extends D0{constructor(t){super();ne(this,Vt);ne(this,Rn,void 0);ne(this,Os,void 0);ne(this,Rt,void 0);ne(this,Bs,void 0);ne(this,Je,void 0);ne(this,Eo,void 0);ne(this,Fs,void 0);ee(this,Fs,!1),ee(this,Eo,t.defaultOptions),this.setOptions(t.options),this.observers=[],ee(this,Bs,t.client),ee(this,Rt,H(this,Bs).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ee(this,Rn,ES(this.options)),this.state=t.state??H(this,Rn),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=H(this,Je))==null?void 0:t.promise}setOptions(t){this.options={...H(this,Eo),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&H(this,Rt).remove(this)}setData(t,r){const s=Uu(this.state.data,t,this.options);return ue(this,Vt,gr).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(t,r){ue(this,Vt,gr).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var s,i;const r=(s=H(this,Je))==null?void 0:s.promise;return(i=H(this,Je))==null||i.cancel(t),r?r.then(ut).catch(ut):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(H(this,Rn))}isActive(){return this.observers.some(t=>Yt(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ff||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>os(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!S0(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=H(this,Je))==null||r.continue()}onOnline(){var r;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=H(this,Je))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),H(this,Rt).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(H(this,Je)&&(H(this,Fs)?H(this,Je).cancel({revert:!0}):H(this,Je).cancelRetry()),this.scheduleGc()),H(this,Rt).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ue(this,Vt,gr).call(this,{type:"invalidate"})}fetch(t,r){var f,v,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(H(this,Je))return H(this,Je).continueRetry(),H(this,Je).promise}if(t&&this.setOptions(t),!this.options.queryFn){const g=this.observers.find(y=>y.options.queryFn);g&&this.setOptions(g.options)}const s=new AbortController,i=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(ee(this,Fs,!0),s.signal)})},a=()=>{const g=k0(this.options,r),_=(()=>{const x={client:H(this,Bs),queryKey:this.queryKey,meta:this.meta};return i(x),x})();return ee(this,Fs,!1),this.options.persister?this.options.persister(g,_,this):g(_)},o=(()=>{const g={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:H(this,Bs),state:this.state,fetchFn:a};return i(g),g})();(f=this.options.behavior)==null||f.onFetch(o,this),ee(this,Os,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((v=o.fetchOptions)==null?void 0:v.meta))&&ue(this,Vt,gr).call(this,{type:"fetch",meta:(h=o.fetchOptions)==null?void 0:h.meta});const l=g=>{var y,_,x,m;bd(g)&&g.silent||ue(this,Vt,gr).call(this,{type:"error",error:g}),bd(g)||((_=(y=H(this,Rt).config).onError)==null||_.call(y,g,this),(m=(x=H(this,Rt).config).onSettled)==null||m.call(x,this.state.data,g,this)),this.scheduleGc()};return ee(this,Je,E0({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,abort:s.abort.bind(s),onSuccess:g=>{var y,_,x,m;if(g===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(g)}catch(d){l(d);return}(_=(y=H(this,Rt).config).onSuccess)==null||_.call(y,g,this),(m=(x=H(this,Rt).config).onSettled)==null||m.call(x,g,this.state.error,this),this.scheduleGc()},onError:l,onFail:(g,y)=>{ue(this,Vt,gr).call(this,{type:"failed",failureCount:g,error:y})},onPause:()=>{ue(this,Vt,gr).call(this,{type:"pause"})},onContinue:()=>{ue(this,Vt,gr).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),H(this,Je).start()}},Rn=new WeakMap,Os=new WeakMap,Rt=new WeakMap,Bs=new WeakMap,Je=new WeakMap,Eo=new WeakMap,Fs=new WeakMap,Vt=new WeakSet,gr=function(t){const r=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...P0(s.data,this.options),fetchMeta:t.meta??null};case"success":return ee(this,Os,void 0),{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return bd(i)&&i.revert&&H(this,Os)?{...H(this,Os),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=r(this.state),qe.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),H(this,Rt).notify({query:this,type:"updated",action:t})})},Vg);function P0(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:j0(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function ES(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,s=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var or,qg,DS=(qg=class extends Vo{constructor(t={}){super();ne(this,or,void 0);this.config=t,ee(this,or,new Map)}build(t,r,s){const i=r.queryKey,a=r.queryHash??hf(i,r);let c=this.get(a);return c||(c=new NS({client:t,queryKey:i,queryHash:a,options:t.defaultQueryOptions(r),state:s,defaultOptions:t.getQueryDefaults(i)}),this.add(c)),c}add(t){H(this,or).has(t.queryHash)||(H(this,or).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=H(this,or).get(t.queryHash);r&&(t.destroy(),r===t&&H(this,or).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){qe.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return H(this,or).get(t)}getAll(){return[...H(this,or).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(s=>bm(r,s))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(s=>bm(t,s)):r}notify(t){qe.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){qe.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){qe.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},or=new WeakMap,qg),ar,rt,$s,lr,Tr,Gg,PS=(Gg=class extends D0{constructor(t){super();ne(this,lr);ne(this,ar,void 0);ne(this,rt,void 0);ne(this,$s,void 0);this.mutationId=t.mutationId,ee(this,rt,t.mutationCache),ee(this,ar,[]),this.state=t.state||RS(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){H(this,ar).includes(t)||(H(this,ar).push(t),this.clearGcTimeout(),H(this,rt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ee(this,ar,H(this,ar).filter(r=>r!==t)),this.scheduleGc(),H(this,rt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){H(this,ar).length||(this.state.status==="pending"?this.scheduleGc():H(this,rt).remove(this))}continue(){var t;return((t=H(this,$s))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,c,o,l,f,v,h,g,y,_,x,m,d,u,p,b,S,C,k,w;const r=()=>{ue(this,lr,Tr).call(this,{type:"continue"})};ee(this,$s,E0({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(N,D)=>{ue(this,lr,Tr).call(this,{type:"failed",failureCount:N,error:D})},onPause:()=>{ue(this,lr,Tr).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>H(this,rt).canRun(this)}));const s=this.state.status==="pending",i=!H(this,$s).canStart();try{if(s)r();else{ue(this,lr,Tr).call(this,{type:"pending",variables:t,isPaused:i}),await((c=(a=H(this,rt).config).onMutate)==null?void 0:c.call(a,t,this));const D=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,t));D!==this.state.context&&ue(this,lr,Tr).call(this,{type:"pending",context:D,variables:t,isPaused:i})}const N=await H(this,$s).start();return await((v=(f=H(this,rt).config).onSuccess)==null?void 0:v.call(f,N,t,this.state.context,this)),await((g=(h=this.options).onSuccess)==null?void 0:g.call(h,N,t,this.state.context)),await((_=(y=H(this,rt).config).onSettled)==null?void 0:_.call(y,N,null,this.state.variables,this.state.context,this)),await((m=(x=this.options).onSettled)==null?void 0:m.call(x,N,null,t,this.state.context)),ue(this,lr,Tr).call(this,{type:"success",data:N}),N}catch(N){try{throw await((u=(d=H(this,rt).config).onError)==null?void 0:u.call(d,N,t,this.state.context,this)),await((b=(p=this.options).onError)==null?void 0:b.call(p,N,t,this.state.context)),await((C=(S=H(this,rt).config).onSettled)==null?void 0:C.call(S,void 0,N,this.state.variables,this.state.context,this)),await((w=(k=this.options).onSettled)==null?void 0:w.call(k,void 0,N,t,this.state.context)),N}finally{ue(this,lr,Tr).call(this,{type:"error",error:N})}}finally{H(this,rt).runNext(this)}}},ar=new WeakMap,rt=new WeakMap,$s=new WeakMap,lr=new WeakSet,Tr=function(t){const r=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),qe.batch(()=>{H(this,ar).forEach(s=>{s.onMutationUpdate(t)}),H(this,rt).notify({mutation:this,type:"updated",action:t})})},Gg);function RS(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var yr,qt,Do,Kg,AS=(Kg=class extends Vo{constructor(t={}){super();ne(this,yr,void 0);ne(this,qt,void 0);ne(this,Do,void 0);this.config=t,ee(this,yr,new Set),ee(this,qt,new Map),ee(this,Do,0)}build(t,r,s){const i=new PS({mutationCache:this,mutationId:++ua(this,Do)._,options:t.defaultMutationOptions(r),state:s});return this.add(i),i}add(t){H(this,yr).add(t);const r=Da(t);if(typeof r=="string"){const s=H(this,qt).get(r);s?s.push(t):H(this,qt).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(H(this,yr).delete(t)){const r=Da(t);if(typeof r=="string"){const s=H(this,qt).get(r);if(s)if(s.length>1){const i=s.indexOf(t);i!==-1&&s.splice(i,1)}else s[0]===t&&H(this,qt).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Da(t);if(typeof r=="string"){const s=H(this,qt).get(r),i=s==null?void 0:s.find(a=>a.state.status==="pending");return!i||i===t}else return!0}runNext(t){var s;const r=Da(t);if(typeof r=="string"){const i=(s=H(this,qt).get(r))==null?void 0:s.find(a=>a!==t&&a.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){qe.batch(()=>{H(this,yr).forEach(t=>{this.notify({type:"removed",mutation:t})}),H(this,yr).clear(),H(this,qt).clear()})}getAll(){return Array.from(H(this,yr))}find(t){const r={exact:!0,...t};return this.getAll().find(s=>_m(r,s))}findAll(t={}){return this.getAll().filter(r=>_m(t,r))}notify(t){qe.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return qe.batch(()=>Promise.all(t.map(r=>r.continue().catch(ut))))}},yr=new WeakMap,qt=new WeakMap,Do=new WeakMap,Kg);function Da(e){var t;return(t=e.options.scope)==null?void 0:t.id}function Cm(e){return{onFetch:(t,r)=>{var v,h,g,y,_;const s=t.options,i=(g=(h=(v=t.fetchOptions)==null?void 0:v.meta)==null?void 0:h.fetchMore)==null?void 0:g.direction,a=((y=t.state.data)==null?void 0:y.pages)||[],c=((_=t.state.data)==null?void 0:_.pageParams)||[];let o={pages:[],pageParams:[]},l=0;const f=async()=>{let x=!1;const m=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(t.signal.aborted?x=!0:t.signal.addEventListener("abort",()=>{x=!0}),t.signal)})},d=k0(t.options,t.fetchOptions),u=async(p,b,S)=>{if(x)return Promise.reject();if(b==null&&p.pages.length)return Promise.resolve(p);const k=(()=>{const T={client:t.client,queryKey:t.queryKey,pageParam:b,direction:S?"backward":"forward",meta:t.options.meta};return m(T),T})(),w=await d(k),{maxPages:N}=t.options,D=S?bS:yS;return{pages:D(p.pages,w,N),pageParams:D(p.pageParams,b,N)}};if(i&&a.length){const p=i==="backward",b=p?TS:km,S={pages:a,pageParams:c},C=b(s,S);o=await u(S,C,p)}else{const p=e??a.length;do{const b=l===0?c[0]??s.initialPageParam:km(s,o);if(l>0&&b==null)break;o=await u(o,b),l++}while(l<p)}return o};t.options.persister?t.fetchFn=()=>{var x,m;return(m=(x=t.options).persister)==null?void 0:m.call(x,f,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=f}}}function km(e,{pages:t,pageParams:r}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,r[s],r):void 0}function TS(e,{pages:t,pageParams:r}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,r[0],r):void 0}var Pe,$r,Hr,An,Tn,Ur,Ln,In,Qg,LS=(Qg=class{constructor(e={}){ne(this,Pe,void 0);ne(this,$r,void 0);ne(this,Hr,void 0);ne(this,An,void 0);ne(this,Tn,void 0);ne(this,Ur,void 0);ne(this,Ln,void 0);ne(this,In,void 0);ee(this,Pe,e.queryCache||new DS),ee(this,$r,e.mutationCache||new AS),ee(this,Hr,e.defaultOptions||{}),ee(this,An,new Map),ee(this,Tn,new Map),ee(this,Ur,0)}mount(){ua(this,Ur)._++,H(this,Ur)===1&&(ee(this,Ln,pf.subscribe(async e=>{e&&(await this.resumePausedMutations(),H(this,Pe).onFocus())})),ee(this,In,Al.subscribe(async e=>{e&&(await this.resumePausedMutations(),H(this,Pe).onOnline())})))}unmount(){var e,t;ua(this,Ur)._--,H(this,Ur)===0&&((e=H(this,Ln))==null||e.call(this),ee(this,Ln,void 0),(t=H(this,In))==null||t.call(this),ee(this,In,void 0))}isFetching(e){return H(this,Pe).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return H(this,$r).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=H(this,Pe).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=H(this,Pe).build(this,t),s=r.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(os(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return H(this,Pe).findAll(e).map(({queryKey:t,state:r})=>{const s=r.data;return[t,s]})}setQueryData(e,t,r){const s=this.defaultQueryOptions({queryKey:e}),i=H(this,Pe).get(s.queryHash),a=i==null?void 0:i.state.data,c=vS(t,a);if(c!==void 0)return H(this,Pe).build(this,s).setData(c,{...r,manual:!0})}setQueriesData(e,t,r){return qe.batch(()=>H(this,Pe).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=H(this,Pe).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=H(this,Pe);qe.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=H(this,Pe);return qe.batch(()=>(r.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},s=qe.batch(()=>H(this,Pe).findAll(e).map(i=>i.cancel(r)));return Promise.all(s).then(ut).catch(ut)}invalidateQueries(e,t={}){return qe.batch(()=>(H(this,Pe).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},s=qe.batch(()=>H(this,Pe).findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,r);return r.throwOnError||(a=a.catch(ut)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(s).then(ut)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=H(this,Pe).build(this,t);return r.isStaleByTime(os(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ut).catch(ut)}fetchInfiniteQuery(e){return e.behavior=Cm(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ut).catch(ut)}ensureInfiniteQueryData(e){return e.behavior=Cm(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Al.isOnline()?H(this,$r).resumePausedMutations():Promise.resolve()}getQueryCache(){return H(this,Pe)}getMutationCache(){return H(this,$r)}getDefaultOptions(){return H(this,Hr)}setDefaultOptions(e){ee(this,Hr,e)}setQueryDefaults(e,t){H(this,An).set(mo(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...H(this,An).values()],r={};return t.forEach(s=>{go(e,s.queryKey)&&Object.assign(r,s.defaultOptions)}),r}setMutationDefaults(e,t){H(this,Tn).set(mo(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...H(this,Tn).values()],r={};return t.forEach(s=>{go(e,s.mutationKey)&&Object.assign(r,s.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...H(this,Hr).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=hf(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===ff&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...H(this,Hr).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){H(this,Pe).clear(),H(this,$r).clear()}},Pe=new WeakMap,$r=new WeakMap,Hr=new WeakMap,An=new WeakMap,Tn=new WeakMap,Ur=new WeakMap,Ln=new WeakMap,In=new WeakMap,Qg),dt,he,Po,st,Hs,Mn,Wr,zr,Ro,On,Bn,Us,Ws,Vr,Fn,zs,Pi,Ao,zu,To,Vu,Lo,qu,Io,Gu,Mo,Ku,Oo,Qu,Bo,Yu,Ql,R0,Yg,IS=(Yg=class extends Vo{constructor(t,r){super();ne(this,zs);ne(this,Ao);ne(this,To);ne(this,Lo);ne(this,Io);ne(this,Mo);ne(this,Oo);ne(this,Bo);ne(this,Ql);ne(this,dt,void 0);ne(this,he,void 0);ne(this,Po,void 0);ne(this,st,void 0);ne(this,Hs,void 0);ne(this,Mn,void 0);ne(this,Wr,void 0);ne(this,zr,void 0);ne(this,Ro,void 0);ne(this,On,void 0);ne(this,Bn,void 0);ne(this,Us,void 0);ne(this,Ws,void 0);ne(this,Vr,void 0);ne(this,Fn,new Set);this.options=r,ee(this,dt,t),ee(this,zr,null),ee(this,Wr,Wu()),this.options.experimental_prefetchInRender||H(this,Wr).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(H(this,he).addObserver(this),jm(H(this,he),this.options)?ue(this,zs,Pi).call(this):this.updateResult(),ue(this,Io,Gu).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Xu(H(this,he),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Xu(H(this,he),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ue(this,Mo,Ku).call(this),ue(this,Oo,Qu).call(this),H(this,he).removeObserver(this)}setOptions(t){const r=this.options,s=H(this,he);if(this.options=H(this,dt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Yt(this.options.enabled,H(this,he))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ue(this,Bo,Yu).call(this),H(this,he).setOptions(this.options),r._defaulted&&!$u(this.options,r)&&H(this,dt).getQueryCache().notify({type:"observerOptionsUpdated",query:H(this,he),observer:this});const i=this.hasListeners();i&&Nm(H(this,he),s,this.options,r)&&ue(this,zs,Pi).call(this),this.updateResult(),i&&(H(this,he)!==s||Yt(this.options.enabled,H(this,he))!==Yt(r.enabled,H(this,he))||os(this.options.staleTime,H(this,he))!==os(r.staleTime,H(this,he)))&&ue(this,Ao,zu).call(this);const a=ue(this,To,Vu).call(this);i&&(H(this,he)!==s||Yt(this.options.enabled,H(this,he))!==Yt(r.enabled,H(this,he))||a!==H(this,Vr))&&ue(this,Lo,qu).call(this,a)}getOptimisticResult(t){const r=H(this,dt).getQueryCache().build(H(this,dt),t),s=this.createResult(r,t);return OS(this,s)&&(ee(this,st,s),ee(this,Mn,this.options),ee(this,Hs,H(this,he).state)),s}getCurrentResult(){return H(this,st)}trackResult(t,r){return new Proxy(t,{get:(s,i)=>(this.trackProp(i),r==null||r(i),Reflect.get(s,i))})}trackProp(t){H(this,Fn).add(t)}getCurrentQuery(){return H(this,he)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=H(this,dt).defaultQueryOptions(t),s=H(this,dt).getQueryCache().build(H(this,dt),r);return s.fetch().then(()=>this.createResult(s,r))}fetch(t){return ue(this,zs,Pi).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),H(this,st)))}createResult(t,r){var N;const s=H(this,he),i=this.options,a=H(this,st),c=H(this,Hs),o=H(this,Mn),f=t!==s?t.state:H(this,Po),{state:v}=t;let h={...v},g=!1,y;if(r._optimisticResults){const D=this.hasListeners(),T=!D&&jm(t,r),I=D&&Nm(t,s,r,i);(T||I)&&(h={...h,...P0(v.data,t.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:_,errorUpdatedAt:x,status:m}=h;y=h.data;let d=!1;if(r.placeholderData!==void 0&&y===void 0&&m==="pending"){let D;a!=null&&a.isPlaceholderData&&r.placeholderData===(o==null?void 0:o.placeholderData)?(D=a.data,d=!0):D=typeof r.placeholderData=="function"?r.placeholderData((N=H(this,Bn))==null?void 0:N.state.data,H(this,Bn)):r.placeholderData,D!==void 0&&(m="success",y=Uu(a==null?void 0:a.data,D,r),g=!0)}if(r.select&&y!==void 0&&!d)if(a&&y===(c==null?void 0:c.data)&&r.select===H(this,Ro))y=H(this,On);else try{ee(this,Ro,r.select),y=r.select(y),y=Uu(a==null?void 0:a.data,y,r),ee(this,On,y),ee(this,zr,null)}catch(D){ee(this,zr,D)}H(this,zr)&&(_=H(this,zr),y=H(this,On),x=Date.now(),m="error");const u=h.fetchStatus==="fetching",p=m==="pending",b=m==="error",S=p&&u,C=y!==void 0,w={status:m,fetchStatus:h.fetchStatus,isPending:p,isSuccess:m==="success",isError:b,isInitialLoading:S,isLoading:S,data:y,dataUpdatedAt:h.dataUpdatedAt,error:_,errorUpdatedAt:x,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>f.dataUpdateCount||h.errorUpdateCount>f.errorUpdateCount,isFetching:u,isRefetching:u&&!p,isLoadingError:b&&!C,isPaused:h.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:b&&C,isStale:mf(t,r),refetch:this.refetch,promise:H(this,Wr)};if(this.options.experimental_prefetchInRender){const D=A=>{w.status==="error"?A.reject(w.error):w.data!==void 0&&A.resolve(w.data)},T=()=>{const A=ee(this,Wr,w.promise=Wu());D(A)},I=H(this,Wr);switch(I.status){case"pending":t.queryHash===s.queryHash&&D(I);break;case"fulfilled":(w.status==="error"||w.data!==I.value)&&T();break;case"rejected":(w.status!=="error"||w.error!==I.reason)&&T();break}}return w}updateResult(){const t=H(this,st),r=this.createResult(H(this,he),this.options);if(ee(this,Hs,H(this,he).state),ee(this,Mn,this.options),H(this,Hs).data!==void 0&&ee(this,Bn,H(this,he)),$u(r,t))return;ee(this,st,r);const s=()=>{if(!t)return!0;const{notifyOnChangeProps:i}=this.options,a=typeof i=="function"?i():i;if(a==="all"||!a&&!H(this,Fn).size)return!0;const c=new Set(a??H(this,Fn));return this.options.throwOnError&&c.add("error"),Object.keys(H(this,st)).some(o=>{const l=o;return H(this,st)[l]!==t[l]&&c.has(l)})};ue(this,Ql,R0).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ue(this,Io,Gu).call(this)}},dt=new WeakMap,he=new WeakMap,Po=new WeakMap,st=new WeakMap,Hs=new WeakMap,Mn=new WeakMap,Wr=new WeakMap,zr=new WeakMap,Ro=new WeakMap,On=new WeakMap,Bn=new WeakMap,Us=new WeakMap,Ws=new WeakMap,Vr=new WeakMap,Fn=new WeakMap,zs=new WeakSet,Pi=function(t){ue(this,Bo,Yu).call(this);let r=H(this,he).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(ut)),r},Ao=new WeakSet,zu=function(){ue(this,Mo,Ku).call(this);const t=os(this.options.staleTime,H(this,he));if(Js||H(this,st).isStale||!Fu(t))return;const s=S0(H(this,st).dataUpdatedAt,t)+1;ee(this,Us,setTimeout(()=>{H(this,st).isStale||this.updateResult()},s))},To=new WeakSet,Vu=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(H(this,he)):this.options.refetchInterval)??!1},Lo=new WeakSet,qu=function(t){ue(this,Oo,Qu).call(this),ee(this,Vr,t),!(Js||Yt(this.options.enabled,H(this,he))===!1||!Fu(H(this,Vr))||H(this,Vr)===0)&&ee(this,Ws,setInterval(()=>{(this.options.refetchIntervalInBackground||pf.isFocused())&&ue(this,zs,Pi).call(this)},H(this,Vr)))},Io=new WeakSet,Gu=function(){ue(this,Ao,zu).call(this),ue(this,Lo,qu).call(this,ue(this,To,Vu).call(this))},Mo=new WeakSet,Ku=function(){H(this,Us)&&(clearTimeout(H(this,Us)),ee(this,Us,void 0))},Oo=new WeakSet,Qu=function(){H(this,Ws)&&(clearInterval(H(this,Ws)),ee(this,Ws,void 0))},Bo=new WeakSet,Yu=function(){const t=H(this,dt).getQueryCache().build(H(this,dt),this.options);if(t===H(this,he))return;const r=H(this,he);ee(this,he,t),ee(this,Po,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},Ql=new WeakSet,R0=function(t){qe.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(H(this,st))}),H(this,dt).getQueryCache().notify({query:H(this,he),type:"observerResultsUpdated"})})},Yg);function MS(e,t){return Yt(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function jm(e,t){return MS(e,t)||e.state.data!==void 0&&Xu(e,t,t.refetchOnMount)}function Xu(e,t,r){if(Yt(t.enabled,e)!==!1&&os(t.staleTime,e)!=="static"){const s=typeof r=="function"?r(e):r;return s==="always"||s!==!1&&mf(e,t)}return!1}function Nm(e,t,r,s){return(e!==t||Yt(s.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&mf(e,r)}function mf(e,t){return Yt(t.enabled,e)!==!1&&e.isStaleByTime(os(t.staleTime,e))}function OS(e,t){return!$u(e.getCurrentResult(),t)}var A0=j.createContext(void 0),T0=e=>{const t=j.useContext(A0);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},BS=({client:e,children:t})=>(j.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),n.jsx(A0.Provider,{value:e,children:t})),L0=j.createContext(!1),FS=()=>j.useContext(L0);L0.Provider;function $S(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var HS=j.createContext($S()),US=()=>j.useContext(HS),WS=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},zS=e=>{j.useEffect(()=>{e.clearReset()},[e])},VS=({result:e,errorResetBoundary:t,throwOnError:r,query:s,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&(i&&e.data===void 0||_S(r,[e.error,s])),qS=e=>{if(e.suspense){const t=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>t(r(...s)):t(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},GS=(e,t)=>e.isLoading&&e.isFetching&&!t,KS=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Em=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function QS(e,t,r){var h,g,y,_,x;const s=FS(),i=US(),a=T0(r),c=a.defaultQueryOptions(e);(g=(h=a.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||g.call(h,c),c._optimisticResults=s?"isRestoring":"optimistic",qS(c),WS(c,i),zS(i);const o=!a.getQueryCache().get(c.queryHash),[l]=j.useState(()=>new t(a,c)),f=l.getOptimisticResult(c),v=!s&&e.subscribed!==!1;if(j.useSyncExternalStore(j.useCallback(m=>{const d=v?l.subscribe(qe.batchCalls(m)):ut;return l.updateResult(),d},[l,v]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),j.useEffect(()=>{l.setOptions(c)},[c,l]),KS(c,f))throw Em(c,l,i);if(VS({result:f,errorResetBoundary:i,throwOnError:c.throwOnError,query:a.getQueryCache().get(c.queryHash),suspense:c.suspense}))throw f.error;if((_=(y=a.getDefaultOptions().queries)==null?void 0:y._experimental_afterQuery)==null||_.call(y,c,f),c.experimental_prefetchInRender&&!Js&&GS(f,s)){const m=o?Em(c,l,i):(x=a.getQueryCache().get(c.queryHash))==null?void 0:x.promise;m==null||m.catch(ut).finally(()=>{l.updateResult()})}return c.notifyOnChangeProps?f:l.trackResult(f)}function fr(e,t){return QS(e,IS,t)}var YS=function(){return null};function I0(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=I0(e[t]))&&(s&&(s+=" "),s+=r);else for(t in e)e[t]&&(s&&(s+=" "),s+=t);return s}function Qr(){for(var e,t,r=0,s="";r<arguments.length;)(e=arguments[r++])&&(t=I0(e))&&(s&&(s+=" "),s+=t);return s}const Ui=e=>typeof e=="number"&&!isNaN(e),Zs=e=>typeof e=="string",pt=e=>typeof e=="function",Ja=e=>Zs(e)||pt(e)?e:null,_d=e=>j.isValidElement(e)||Zs(e)||pt(e)||Ui(e);function XS(e,t,r){r===void 0&&(r=300);const{scrollHeight:s,style:i}=e;requestAnimationFrame(()=>{i.minHeight="initial",i.height=s+"px",i.transition=`all ${r}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(t,r)})})}function mc(e){let{enter:t,exit:r,appendPosition:s=!1,collapse:i=!0,collapseDuration:a=300}=e;return function(c){let{children:o,position:l,preventExitTransition:f,done:v,nodeRef:h,isIn:g}=c;const y=s?`${t}--${l}`:t,_=s?`${r}--${l}`:r,x=j.useRef(0);return j.useLayoutEffect(()=>{const m=h.current,d=y.split(" "),u=p=>{p.target===h.current&&(m.dispatchEvent(new Event("d")),m.removeEventListener("animationend",u),m.removeEventListener("animationcancel",u),x.current===0&&p.type!=="animationcancel"&&m.classList.remove(...d))};m.classList.add(...d),m.addEventListener("animationend",u),m.addEventListener("animationcancel",u)},[]),j.useEffect(()=>{const m=h.current,d=()=>{m.removeEventListener("animationend",d),i?XS(m,v,a):v()};g||(f?d():(x.current=1,m.className+=` ${_}`,m.addEventListener("animationend",d)))},[g]),oe.createElement(oe.Fragment,null,o)}}function Dm(e,t){return e!=null?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}:{}}const At={list:new Map,emitQueue:new Map,on(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off(e,t){if(t){const r=this.list.get(e).filter(s=>s!==t);return this.list.set(e,r),this}return this.list.delete(e),this},cancelEmit(e){const t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit(e){this.list.has(e)&&this.list.get(e).forEach(t=>{const r=setTimeout(()=>{t(...[].slice.call(arguments,1))},0);this.emitQueue.has(e)||this.emitQueue.set(e,[]),this.emitQueue.get(e).push(r)})}},Pa=e=>{let{theme:t,type:r,...s}=e;return oe.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${r})`,...s})},wd={info:function(e){return oe.createElement(Pa,{...e},oe.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return oe.createElement(Pa,{...e},oe.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return oe.createElement(Pa,{...e},oe.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return oe.createElement(Pa,{...e},oe.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return oe.createElement("div",{className:"Toastify__spinner"})}};function JS(e){const[,t]=j.useReducer(y=>y+1,0),[r,s]=j.useState([]),i=j.useRef(null),a=j.useRef(new Map).current,c=y=>r.indexOf(y)!==-1,o=j.useRef({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:c,getToast:y=>a.get(y)}).current;function l(y){let{containerId:_}=y;const{limit:x}=o.props;!x||_&&o.containerId!==_||(o.count-=o.queue.length,o.queue=[])}function f(y){s(_=>y==null?[]:_.filter(x=>x!==y))}function v(){const{toastContent:y,toastProps:_,staleId:x}=o.queue.shift();g(y,_,x)}function h(y,_){let{delay:x,staleId:m,...d}=_;if(!_d(y)||function(I){return!i.current||o.props.enableMultiContainer&&I.containerId!==o.props.containerId||a.has(I.toastId)&&I.updateId==null}(d))return;const{toastId:u,updateId:p,data:b}=d,{props:S}=o,C=()=>f(u),k=p==null;k&&o.count++;const w={...S,style:S.toastStyle,key:o.toastKey++,...Object.fromEntries(Object.entries(d).filter(I=>{let[A,O]=I;return O!=null})),toastId:u,updateId:p,data:b,closeToast:C,isIn:!1,className:Ja(d.className||S.toastClassName),bodyClassName:Ja(d.bodyClassName||S.bodyClassName),progressClassName:Ja(d.progressClassName||S.progressClassName),autoClose:!d.isLoading&&(N=d.autoClose,D=S.autoClose,N===!1||Ui(N)&&N>0?N:D),deleteToast(){const I=Dm(a.get(u),"removed");a.delete(u),At.emit(4,I);const A=o.queue.length;if(o.count=u==null?o.count-o.displayedToast:o.count-1,o.count<0&&(o.count=0),A>0){const O=u==null?o.props.limit:1;if(A===1||O===1)o.displayedToast++,v();else{const P=O>A?A:O;o.displayedToast=P;for(let B=0;B<P;B++)v()}}else t()}};var N,D;w.iconOut=function(I){let{theme:A,type:O,isLoading:P,icon:B}=I,U=null;const $={theme:A,type:O};return B===!1||(pt(B)?U=B($):j.isValidElement(B)?U=j.cloneElement(B,$):Zs(B)||Ui(B)?U=B:P?U=wd.spinner():(E=>E in wd)(O)&&(U=wd[O]($))),U}(w),pt(d.onOpen)&&(w.onOpen=d.onOpen),pt(d.onClose)&&(w.onClose=d.onClose),w.closeButton=S.closeButton,d.closeButton===!1||_d(d.closeButton)?w.closeButton=d.closeButton:d.closeButton===!0&&(w.closeButton=!_d(S.closeButton)||S.closeButton);let T=y;j.isValidElement(y)&&!Zs(y.type)?T=j.cloneElement(y,{closeToast:C,toastProps:w,data:b}):pt(y)&&(T=y({closeToast:C,toastProps:w,data:b})),S.limit&&S.limit>0&&o.count>S.limit&&k?o.queue.push({toastContent:T,toastProps:w,staleId:m}):Ui(x)?setTimeout(()=>{g(T,w,m)},x):g(T,w,m)}function g(y,_,x){const{toastId:m}=_;x&&a.delete(x);const d={content:y,props:_};a.set(m,d),s(u=>[...u,m].filter(p=>p!==x)),At.emit(4,Dm(d,d.props.updateId==null?"added":"updated"))}return j.useEffect(()=>(o.containerId=e.containerId,At.cancelEmit(3).on(0,h).on(1,y=>i.current&&f(y)).on(5,l).emit(2,o),()=>{a.clear(),At.emit(3,o)}),[]),j.useEffect(()=>{o.props=e,o.isToastActive=c,o.displayedToast=r.length}),{getToastToRender:function(y){const _=new Map,x=Array.from(a.values());return e.newestOnTop&&x.reverse(),x.forEach(m=>{const{position:d}=m.props;_.has(d)||_.set(d,[]),_.get(d).push(m)}),Array.from(_,m=>y(m[0],m[1]))},containerRef:i,isToastActive:c}}function Pm(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function Rm(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function ZS(e){const[t,r]=j.useState(!1),[s,i]=j.useState(!1),a=j.useRef(null),c=j.useRef({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,o=j.useRef(e),{autoClose:l,pauseOnHover:f,closeToast:v,onClick:h,closeOnClick:g}=e;function y(b){if(e.draggable){b.nativeEvent.type==="touchstart"&&b.nativeEvent.preventDefault(),c.didMove=!1,document.addEventListener("mousemove",d),document.addEventListener("mouseup",u),document.addEventListener("touchmove",d),document.addEventListener("touchend",u);const S=a.current;c.canCloseOnClick=!0,c.canDrag=!0,c.boundingRect=S.getBoundingClientRect(),S.style.transition="",c.x=Pm(b.nativeEvent),c.y=Rm(b.nativeEvent),e.draggableDirection==="x"?(c.start=c.x,c.removalDistance=S.offsetWidth*(e.draggablePercent/100)):(c.start=c.y,c.removalDistance=S.offsetHeight*(e.draggablePercent===80?1.5*e.draggablePercent:e.draggablePercent/100))}}function _(b){if(c.boundingRect){const{top:S,bottom:C,left:k,right:w}=c.boundingRect;b.nativeEvent.type!=="touchend"&&e.pauseOnHover&&c.x>=k&&c.x<=w&&c.y>=S&&c.y<=C?m():x()}}function x(){r(!0)}function m(){r(!1)}function d(b){const S=a.current;c.canDrag&&S&&(c.didMove=!0,t&&m(),c.x=Pm(b),c.y=Rm(b),c.delta=e.draggableDirection==="x"?c.x-c.start:c.y-c.start,c.start!==c.x&&(c.canCloseOnClick=!1),S.style.transform=`translate${e.draggableDirection}(${c.delta}px)`,S.style.opacity=""+(1-Math.abs(c.delta/c.removalDistance)))}function u(){document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",u),document.removeEventListener("touchmove",d),document.removeEventListener("touchend",u);const b=a.current;if(c.canDrag&&c.didMove&&b){if(c.canDrag=!1,Math.abs(c.delta)>c.removalDistance)return i(!0),void e.closeToast();b.style.transition="transform 0.2s, opacity 0.2s",b.style.transform=`translate${e.draggableDirection}(0)`,b.style.opacity="1"}}j.useEffect(()=>{o.current=e}),j.useEffect(()=>(a.current&&a.current.addEventListener("d",x,{once:!0}),pt(e.onOpen)&&e.onOpen(j.isValidElement(e.children)&&e.children.props),()=>{const b=o.current;pt(b.onClose)&&b.onClose(j.isValidElement(b.children)&&b.children.props)}),[]),j.useEffect(()=>(e.pauseOnFocusLoss&&(document.hasFocus()||m(),window.addEventListener("focus",x),window.addEventListener("blur",m)),()=>{e.pauseOnFocusLoss&&(window.removeEventListener("focus",x),window.removeEventListener("blur",m))}),[e.pauseOnFocusLoss]);const p={onMouseDown:y,onTouchStart:y,onMouseUp:_,onTouchEnd:_};return l&&f&&(p.onMouseEnter=m,p.onMouseLeave=x),g&&(p.onClick=b=>{h&&h(b),c.canCloseOnClick&&v()}),{playToast:x,pauseToast:m,isRunning:t,preventExitTransition:s,toastRef:a,eventHandlers:p}}function M0(e){let{closeToast:t,theme:r,ariaLabel:s="close"}=e;return oe.createElement("button",{className:`Toastify__close-button Toastify__close-button--${r}`,type:"button",onClick:i=>{i.stopPropagation(),t(i)},"aria-label":s},oe.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},oe.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function e2(e){let{delay:t,isRunning:r,closeToast:s,type:i="default",hide:a,className:c,style:o,controlledProgress:l,progress:f,rtl:v,isIn:h,theme:g}=e;const y=a||l&&f===0,_={...o,animationDuration:`${t}ms`,animationPlayState:r?"running":"paused",opacity:y?0:1};l&&(_.transform=`scaleX(${f})`);const x=Qr("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${g}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":v}),m=pt(c)?c({rtl:v,type:i,defaultClassName:x}):Qr(x,c);return oe.createElement("div",{role:"progressbar","aria-hidden":y?"true":"false","aria-label":"notification timer",className:m,style:_,[l&&f>=1?"onTransitionEnd":"onAnimationEnd"]:l&&f<1?null:()=>{h&&s()}})}const t2=e=>{const{isRunning:t,preventExitTransition:r,toastRef:s,eventHandlers:i}=ZS(e),{closeButton:a,children:c,autoClose:o,onClick:l,type:f,hideProgressBar:v,closeToast:h,transition:g,position:y,className:_,style:x,bodyClassName:m,bodyStyle:d,progressClassName:u,progressStyle:p,updateId:b,role:S,progress:C,rtl:k,toastId:w,deleteToast:N,isIn:D,isLoading:T,iconOut:I,closeOnClick:A,theme:O}=e,P=Qr("Toastify__toast",`Toastify__toast-theme--${O}`,`Toastify__toast--${f}`,{"Toastify__toast--rtl":k},{"Toastify__toast--close-on-click":A}),B=pt(_)?_({rtl:k,position:y,type:f,defaultClassName:P}):Qr(P,_),U=!!C||!o,$={closeToast:h,type:f,theme:O};let E=null;return a===!1||(E=pt(a)?a($):j.isValidElement(a)?j.cloneElement(a,$):M0($)),oe.createElement(g,{isIn:D,done:N,position:y,preventExitTransition:r,nodeRef:s},oe.createElement("div",{id:w,onClick:l,className:B,...i,style:x,ref:s},oe.createElement("div",{...D&&{role:S},className:pt(m)?m({type:f}):Qr("Toastify__toast-body",m),style:d},I!=null&&oe.createElement("div",{className:Qr("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!T})},I),oe.createElement("div",null,c)),E,oe.createElement(e2,{...b&&!U?{key:`pb-${b}`}:{},rtl:k,theme:O,delay:o,isRunning:t,isIn:D,closeToast:h,hide:v,type:f,style:p,className:u,controlledProgress:U,progress:C||0})))},gc=function(e,t){return t===void 0&&(t=!1),{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}},r2=mc(gc("bounce",!0));mc(gc("slide",!0));mc(gc("zoom"));mc(gc("flip"));const Ju=j.forwardRef((e,t)=>{const{getToastToRender:r,containerRef:s,isToastActive:i}=JS(e),{className:a,style:c,rtl:o,containerId:l}=e;function f(v){const h=Qr("Toastify__toast-container",`Toastify__toast-container--${v}`,{"Toastify__toast-container--rtl":o});return pt(a)?a({position:v,rtl:o,defaultClassName:h}):Qr(h,Ja(a))}return j.useEffect(()=>{t&&(t.current=s.current)},[]),oe.createElement("div",{ref:s,className:"Toastify",id:l},r((v,h)=>{const g=h.length?{...c}:{...c,pointerEvents:"none"};return oe.createElement("div",{className:f(v),style:g,key:`container-${v}`},h.map((y,_)=>{let{content:x,props:m}=y;return oe.createElement(t2,{...m,isIn:i(m.toastId),style:{...m.style,"--nth":_+1,"--len":h.length},key:`toast-${m.key}`},x)}))}))});Ju.displayName="ToastContainer",Ju.defaultProps={position:"top-right",transition:r2,autoClose:5e3,closeButton:M0,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let Sd,Ps=new Map,Ri=[],s2=1;function O0(){return""+s2++}function n2(e){return e&&(Zs(e.toastId)||Ui(e.toastId))?e.toastId:O0()}function Wi(e,t){return Ps.size>0?At.emit(0,e,t):Ri.push({content:e,options:t}),t.toastId}function Tl(e,t){return{...t,type:t&&t.type||e,toastId:n2(t)}}function Ra(e){return(t,r)=>Wi(t,Tl(e,r))}function se(e,t){return Wi(e,Tl("default",t))}se.loading=(e,t)=>Wi(e,Tl("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),se.promise=function(e,t,r){let s,{pending:i,error:a,success:c}=t;i&&(s=Zs(i)?se.loading(i,r):se.loading(i.render,{...r,...i}));const o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(v,h,g)=>{if(h==null)return void se.dismiss(s);const y={type:v,...o,...r,data:g},_=Zs(h)?{render:h}:h;return s?se.update(s,{...y,..._}):se(_.render,{...y,..._}),g},f=pt(e)?e():e;return f.then(v=>l("success",c,v)).catch(v=>l("error",a,v)),f},se.success=Ra("success"),se.info=Ra("info"),se.error=Ra("error"),se.warning=Ra("warning"),se.warn=se.warning,se.dark=(e,t)=>Wi(e,Tl("default",{theme:"dark",...t})),se.dismiss=e=>{Ps.size>0?At.emit(1,e):Ri=Ri.filter(t=>e!=null&&t.options.toastId!==e)},se.clearWaitingQueue=function(e){return e===void 0&&(e={}),At.emit(5,e)},se.isActive=e=>{let t=!1;return Ps.forEach(r=>{r.isToastActive&&r.isToastActive(e)&&(t=!0)}),t},se.update=function(e,t){t===void 0&&(t={}),setTimeout(()=>{const r=function(s,i){let{containerId:a}=i;const c=Ps.get(a||Sd);return c&&c.getToast(s)}(e,t);if(r){const{props:s,content:i}=r,a={delay:100,...s,...t,toastId:t.toastId||e,updateId:O0()};a.toastId!==e&&(a.staleId=e);const c=a.render||i;delete a.render,Wi(c,a)}},0)},se.done=e=>{se.update(e,{progress:1})},se.onChange=e=>(At.on(4,e),()=>{At.off(4,e)}),se.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},se.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},At.on(2,e=>{Sd=e.containerId||e,Ps.set(Sd,e),Ri.forEach(t=>{At.emit(0,t.content,t.options)}),Ri=[]}).on(3,e=>{Ps.delete(e.containerId||e),Ps.size===0&&At.off(0).off(1).off(5)});function i2({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const o2=j.forwardRef(i2),a2=o2;function l2({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const c2=j.forwardRef(l2),Ll=c2;function d2({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6 9 12.75l4.286-4.286a11.948 11.948 0 0 1 4.306 6.43l.776 2.898m0 0 3.182-5.511m-3.182 5.51-5.511-3.181"}))}const u2=j.forwardRef(d2),h2=u2;function f2({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"}))}const p2=j.forwardRef(f2),Am=p2;function m2({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9V4.5M9 9H4.5M9 9 3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5 5.25 5.25"}))}const g2=j.forwardRef(m2),v2=g2;function x2({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"}))}const y2=j.forwardRef(x2),Zu=y2;function b2({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 21 3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5"}))}const _2=j.forwardRef(b2),w2=_2;function S2({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const C2=j.forwardRef(S2),k2=C2;function j2({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const N2=j.forwardRef(j2),E2=N2;function D2({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const P2=j.forwardRef(D2),gf=P2;function R2({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const A2=j.forwardRef(R2),Il=A2;function T2({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const L2=j.forwardRef(T2),vf=L2;function I2({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const M2=j.forwardRef(I2),O2=M2;function B2({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const F2=j.forwardRef(B2),Tm=F2;function $2({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}const H2=j.forwardRef($2),B0=H2;function U2({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"}))}const W2=j.forwardRef(U2),eh=W2;function z2({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const V2=j.forwardRef(z2),en=V2;function q2({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 6.75 22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3-4.5 16.5"}))}const G2=j.forwardRef(q2),vo=G2;function K2({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"}))}const Q2=j.forwardRef(K2),Ml=Q2;function Y2({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m6.75 7.5 3 2.25-3 2.25m4.5 0h3m-9 8.25h13.5A2.25 2.25 0 0 0 21 18V6a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 6v12a2.25 2.25 0 0 0 2.25 2.25Z"}))}const X2=j.forwardRef(Y2),Nr=X2;function J2({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25"}))}const Z2=j.forwardRef(J2),eC=Z2;function tC({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 0 0 2.25-2.25V6.75a2.25 2.25 0 0 0-2.25-2.25H6.75A2.25 2.25 0 0 0 4.5 6.75v10.5a2.25 2.25 0 0 0 2.25 2.25Zm.75-12h9v9h-9v-9Z"}))}const rC=j.forwardRef(tC),F0=rC;function sC({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"}))}const nC=j.forwardRef(sC),iC=nC;function oC({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 12.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 18.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5Z"}))}const aC=j.forwardRef(oC),Lm=aC;function lC({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const cC=j.forwardRef(lC),Ol=cC;function dC({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"}))}const uC=j.forwardRef(dC),zi=uC;function hC({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const fC=j.forwardRef(hC),pC=fC;function mC({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"}))}const gC=j.forwardRef(mC),vC=gC;function xC({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const yC=j.forwardRef(xC),$0=yC;function bC({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const _C=j.forwardRef(bC),vc=_C;function wC({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}const SC=j.forwardRef(wC),Kn=SC;function CC({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const kC=j.forwardRef(CC),xo=kC;function jC({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"}))}const NC=j.forwardRef(jC),EC=NC;function DC({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.59 14.37a6 6 0 0 1-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 0 0 6.16-12.12A14.98 14.98 0 0 0 9.631 8.41m5.96 5.96a14.926 14.926 0 0 1-5.841 2.58m-.119-8.54a6 6 0 0 0-7.381 5.84h4.8m2.581-5.84a14.927 14.927 0 0 0-2.58 5.84m2.699 2.7c-.103.021-.207.041-.311.06a15.09 15.09 0 0 1-2.448-2.448 14.9 14.9 0 0 1 .06-.312m-2.24 2.39a4.493 4.493 0 0 0-1.757 4.306 4.493 4.493 0 0 0 4.306-1.758M16.5 9a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"}))}const PC=j.forwardRef(DC),RC=PC;function AC({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 17.25v-.228a4.5 4.5 0 0 0-.12-1.03l-2.268-9.64a3.375 3.375 0 0 0-3.285-2.602H7.923a3.375 3.375 0 0 0-3.285 2.602l-2.268 9.64a4.5 4.5 0 0 0-.12 1.03v.228m19.5 0a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3m19.5 0a3 3 0 0 0-3-3H5.25a3 3 0 0 0-3 3m16.5 0h.008v.008h-.008v-.008Zm-3 0h.008v.008h-.008v-.008Z"}))}const TC=j.forwardRef(AC),fs=TC;function LC({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.348 14.652a3.75 3.75 0 0 1 0-5.304m5.304 0a3.75 3.75 0 0 1 0 5.304m-7.425 2.121a6.75 6.75 0 0 1 0-9.546m9.546 0a6.75 6.75 0 0 1 0 9.546M5.106 18.894c-3.808-3.807-3.808-9.98 0-13.788m13.788 0c3.808 3.807 3.808 9.98 0 13.788M12 12h.008v.008H12V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const IC=j.forwardRef(LC),MC=IC;function OC({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"}))}const BC=j.forwardRef(OC),H0=BC;function FC({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"}))}const $C=j.forwardRef(FC),yo=$C;function HC({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const UC=j.forwardRef(HC),Im=UC;function WC({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const zC=j.forwardRef(WC),VC=zC;function qC({title:e,titleId:t,...r},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?j.createElement("title",{id:t},e):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const GC=j.forwardRef(qC),Qn=GC,KC=[{name:"Dashboard",href:"/",icon:pC},{name:"Agents",href:"/agents",icon:fs,badge:12},{name:"Projects",href:"/projects",icon:zi,badge:5},{name:"Tasks",icon:eh,children:[{name:"Browse",href:"/tasks",icon:eh},{name:"Assign",href:"/tasks/assign",icon:w2}]},{name:"Analytics",href:"/analytics",icon:gf},{name:"Settings",href:"/settings",icon:Ml}],QC=[{name:"Terminal",icon:Nr}],YC=({isCollapsed:e,onToggle:t,onTerminalToggle:r})=>{const s=ws(),[i,a]=j.useState(["Tasks"]),c=f=>{a(v=>v.includes(f)?v.filter(h=>h!==f):[...v,f])},o=()=>{r()},l=f=>{var y,_;const v=f.children&&f.children.length>0,h=i.includes(f.name);f.href&&(s.pathname,f.href);const g=v&&((y=f.children)==null?void 0:y.some(x=>x.href&&s.pathname===x.href));return f.name==="Terminal"?n.jsxs("button",{onClick:o,className:`w-full group flex items-center ${e?"px-2 py-3 justify-center":"px-3 py-2"} text-sm font-medium rounded-md transition-all duration-200 text-foreground-secondary hover:bg-background-tertiary hover:text-foreground`,title:e?f.name:void 0,children:[n.jsx(f.icon,{className:`${e?"":"mr-3"} h-5 w-5 flex-shrink-0`}),!e&&n.jsx("span",{className:"flex-1 text-left",children:f.name})]},f.name):v?e?null:n.jsxs("div",{children:[n.jsxs("button",{onClick:()=>c(f.name),className:`w-full group flex items-center px-3 py-2 text-sm font-medium rounded-md transition-all duration-200 ${g?"text-foreground bg-background-tertiary":"text-foreground-secondary hover:bg-background-tertiary hover:text-foreground"}`,children:[n.jsx(f.icon,{className:"mr-3 h-5 w-5 flex-shrink-0"}),n.jsx("span",{className:"flex-1 text-left",children:f.name}),h?n.jsx(vf,{className:"h-4 w-4"}):n.jsx(Tm,{className:"h-4 w-4"})]}),h&&n.jsx("div",{className:"ml-8 mt-1 space-y-1",children:(_=f.children)==null?void 0:_.map(x=>n.jsxs(xm,{to:x.href,className:({isActive:m})=>`group flex items-center px-3 py-2 text-sm font-medium rounded-md transition-all duration-200 ${m?"bg-background-tertiary text-foreground":"text-foreground-secondary hover:bg-background-tertiary hover:text-foreground"}`,children:[n.jsx(x.icon,{className:"mr-3 h-4 w-4 flex-shrink-0"}),x.name]},x.name))})]},f.name):n.jsxs(xm,{to:f.href,className:({isActive:x})=>`group flex items-center ${e?"px-2 py-3 justify-center":"px-3 py-2"} text-sm font-medium rounded-md transition-all duration-200 ${x?"bg-background-tertiary text-foreground":"text-foreground-secondary hover:bg-background-tertiary hover:text-foreground"}`,title:e?f.name:void 0,children:[n.jsx(f.icon,{className:`${e?"":"mr-3"} h-5 w-5 flex-shrink-0`}),!e&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"flex-1",children:f.name}),f.badge&&n.jsx("span",{className:"ml-auto inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-background-tertiary text-foreground-secondary",children:f.badge})]}),e&&f.badge&&n.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center w-4 h-4 text-xs font-bold text-white bg-brand rounded-full",children:f.badge})]},f.name)};return n.jsxs("div",{className:`${e?"w-16":"w-64"} bg-background-sidebar/95 backdrop-blur-sm border-r border-border/50 flex flex-col h-full transition-all duration-300 ease-in-out shadow-sm`,children:[n.jsx("div",{className:`${e?"p-3":"p-6"} transition-all duration-200`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"h-8 w-8 rounded-lg bg-brand flex items-center justify-center flex-shrink-0",children:n.jsx("span",{className:"text-white font-bold text-lg",children:"M"})}),!e&&n.jsxs("div",{className:"transition-opacity duration-200",children:[n.jsx("h1",{className:"text-xl font-semibold text-foreground",children:"Magents"}),n.jsx("p",{className:"text-foreground-tertiary text-xs",children:"Multi-Agent Dev"})]})]}),n.jsx("button",{onClick:t,className:"p-1.5 text-foreground-secondary hover:text-foreground hover:bg-background-tertiary rounded-lg transition-colors",title:e?"Expand sidebar":"Collapse sidebar",children:e?n.jsx(Tm,{className:"w-4 h-4"}):n.jsx(O2,{className:"w-4 h-4"})})]})}),n.jsx("nav",{className:"flex-1 px-3 overflow-y-auto",children:n.jsxs("div",{className:"space-y-1",children:[!e&&n.jsx("h3",{className:"px-3 text-xs font-semibold text-foreground-tertiary uppercase tracking-wider mb-4 transition-opacity duration-200",children:"Navigation"}),KC.map(l)]})}),n.jsx("div",{className:"px-3 pb-4 space-y-1 border-t border-border pt-4",children:QC.map(l)}),n.jsx("div",{className:`${e?"p-3":"p-4"} border-t border-border`,children:n.jsxs("div",{className:`flex items-center ${e?"justify-center":""}`,children:[n.jsx("div",{className:"h-2 w-2 bg-status-success rounded-full animate-pulse"}),!e&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"mr-2"}),n.jsx("span",{className:"text-xs text-foreground-tertiary transition-opacity duration-200",children:"System Online"})]})]})})]})},pr=Object.create(null);pr.open="0";pr.close="1";pr.ping="2";pr.pong="3";pr.message="4";pr.upgrade="5";pr.noop="6";const Za=Object.create(null);Object.keys(pr).forEach(e=>{Za[pr[e]]=e});const th={type:"error",data:"parser error"},U0=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",W0=typeof ArrayBuffer=="function",z0=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,xf=({type:e,data:t},r,s)=>U0&&t instanceof Blob?r?s(t):Mm(t,s):W0&&(t instanceof ArrayBuffer||z0(t))?r?s(t):Mm(new Blob([t]),s):s(pr[e]+(t||"")),Mm=(e,t)=>{const r=new FileReader;return r.onload=function(){const s=r.result.split(",")[1];t("b"+(s||""))},r.readAsDataURL(e)};function Om(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Cd;function XC(e,t){if(U0&&e.data instanceof Blob)return e.data.arrayBuffer().then(Om).then(t);if(W0&&(e.data instanceof ArrayBuffer||z0(e.data)))return t(Om(e.data));xf(e,!1,r=>{Cd||(Cd=new TextEncoder),t(Cd.encode(r))})}const Bm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ai=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Bm.length;e++)Ai[Bm.charCodeAt(e)]=e;const JC=e=>{let t=e.length*.75,r=e.length,s,i=0,a,c,o,l;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const f=new ArrayBuffer(t),v=new Uint8Array(f);for(s=0;s<r;s+=4)a=Ai[e.charCodeAt(s)],c=Ai[e.charCodeAt(s+1)],o=Ai[e.charCodeAt(s+2)],l=Ai[e.charCodeAt(s+3)],v[i++]=a<<2|c>>4,v[i++]=(c&15)<<4|o>>2,v[i++]=(o&3)<<6|l&63;return f},ZC=typeof ArrayBuffer=="function",yf=(e,t)=>{if(typeof e!="string")return{type:"message",data:V0(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:ek(e.substring(1),t)}:Za[r]?e.length>1?{type:Za[r],data:e.substring(1)}:{type:Za[r]}:th},ek=(e,t)=>{if(ZC){const r=JC(e);return V0(r,t)}else return{base64:!0,data:e}},V0=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},q0=String.fromCharCode(30),tk=(e,t)=>{const r=e.length,s=new Array(r);let i=0;e.forEach((a,c)=>{xf(a,!1,o=>{s[c]=o,++i===r&&t(s.join(q0))})})},rk=(e,t)=>{const r=e.split(q0),s=[];for(let i=0;i<r.length;i++){const a=yf(r[i],t);if(s.push(a),a.type==="error")break}return s};function sk(){return new TransformStream({transform(e,t){XC(e,r=>{const s=r.length;let i;if(s<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,s);else if(s<65536){i=new Uint8Array(3);const a=new DataView(i.buffer);a.setUint8(0,126),a.setUint16(1,s)}else{i=new Uint8Array(9);const a=new DataView(i.buffer);a.setUint8(0,127),a.setBigUint64(1,BigInt(s))}e.data&&typeof e.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(r)})}})}let kd;function Aa(e){return e.reduce((t,r)=>t+r.length,0)}function Ta(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let s=0;for(let i=0;i<t;i++)r[i]=e[0][s++],s===e[0].length&&(e.shift(),s=0);return e.length&&s<e[0].length&&(e[0]=e[0].slice(s)),r}function nk(e,t){kd||(kd=new TextDecoder);const r=[];let s=0,i=-1,a=!1;return new TransformStream({transform(c,o){for(r.push(c);;){if(s===0){if(Aa(r)<1)break;const l=Ta(r,1);a=(l[0]&128)===128,i=l[0]&127,i<126?s=3:i===126?s=1:s=2}else if(s===1){if(Aa(r)<2)break;const l=Ta(r,2);i=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),s=3}else if(s===2){if(Aa(r)<8)break;const l=Ta(r,8),f=new DataView(l.buffer,l.byteOffset,l.length),v=f.getUint32(0);if(v>Math.pow(2,53-32)-1){o.enqueue(th);break}i=v*Math.pow(2,32)+f.getUint32(4),s=3}else{if(Aa(r)<i)break;const l=Ta(r,i);o.enqueue(yf(a?l:kd.decode(l),t)),s=0}if(i===0||i>e){o.enqueue(th);break}}}})}const G0=4;function Ie(e){if(e)return ik(e)}function ik(e){for(var t in Ie.prototype)e[t]=Ie.prototype[t];return e}Ie.prototype.on=Ie.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Ie.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};Ie.prototype.off=Ie.prototype.removeListener=Ie.prototype.removeAllListeners=Ie.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var s,i=0;i<r.length;i++)if(s=r[i],s===t||s.fn===t){r.splice(i,1);break}return r.length===0&&delete this._callbacks["$"+e],this};Ie.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(r){r=r.slice(0);for(var s=0,i=r.length;s<i;++s)r[s].apply(this,t)}return this};Ie.prototype.emitReserved=Ie.prototype.emit;Ie.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Ie.prototype.hasListeners=function(e){return!!this.listeners(e).length};const xc=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0))(),It=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())(),ok="arraybuffer";function K0(e,...t){return t.reduce((r,s)=>(e.hasOwnProperty(s)&&(r[s]=e[s]),r),{})}const ak=It.setTimeout,lk=It.clearTimeout;function yc(e,t){t.useNativeTimers?(e.setTimeoutFn=ak.bind(It),e.clearTimeoutFn=lk.bind(It)):(e.setTimeoutFn=It.setTimeout.bind(It),e.clearTimeoutFn=It.clearTimeout.bind(It))}const ck=1.33;function dk(e){return typeof e=="string"?uk(e):Math.ceil((e.byteLength||e.size)*ck)}function uk(e){let t=0,r=0;for(let s=0,i=e.length;s<i;s++)t=e.charCodeAt(s),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(s++,r+=4);return r}function Q0(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function hk(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function fk(e){let t={},r=e.split("&");for(let s=0,i=r.length;s<i;s++){let a=r[s].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t}class pk extends Error{constructor(t,r,s){super(t),this.description=r,this.context=s,this.type="TransportError"}}class bf extends Ie{constructor(t){super(),this.writable=!1,yc(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,s){return super.emitReserved("error",new pk(t,r,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=yf(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=hk(t);return r.length?"?"+r:""}}class mk extends bf{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||r()})),this.writable||(s++,this.once("drain",function(){--s||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};rk(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,tk(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=Q0()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let Y0=!1;try{Y0=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const gk=Y0;function vk(){}class xk extends mk{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let s=location.port;s||(s=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||s!==t.port}}doWrite(t,r){const s=this.request({method:"POST",data:t});s.on("success",r),s.on("error",(i,a)=>{this.onError("xhr post error",i,a)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,s)=>{this.onError("xhr poll error",r,s)}),this.pollXhr=t}}class hr extends Ie{constructor(t,r,s){super(),this.createRequest=t,yc(this,s),this._opts=s,this._method=s.method||"GET",this._uri=r,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var t;const r=K0(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(r);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&s.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var i;s.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=hr.requestsCount++,hr.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=vk,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete hr.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}hr.requestsCount=0;hr.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Fm);else if(typeof addEventListener=="function"){const e="onpagehide"in It?"pagehide":"unload";addEventListener(e,Fm,!1)}}function Fm(){for(let e in hr.requests)hr.requests.hasOwnProperty(e)&&hr.requests[e].abort()}const yk=function(){const e=X0({xdomain:!1});return e&&e.responseType!==null}();class bk extends xk{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=yk&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new hr(X0,this.uri(),t)}}function X0(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||gk))return new XMLHttpRequest}catch{}if(!t)try{return new It[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const J0=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class _k extends bf{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,s=J0?{}:K0(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,s)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const s=t[r],i=r===t.length-1;xf(s,this.supportsBinary,a=>{try{this.doWrite(s,a)}catch{}i&&xc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=Q0()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const jd=It.WebSocket||It.MozWebSocket;class wk extends _k{createSocket(t,r,s){return J0?new jd(t,r,s):r?new jd(t,r):new jd(t)}doWrite(t,r){this.ws.send(r)}}class Sk extends bf{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=nk(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=t.readable.pipeThrough(r).getReader(),i=sk();i.readable.pipeTo(t.writable),this._writer=i.writable.getWriter();const a=()=>{s.read().then(({done:o,value:l})=>{o||(this.onPacket(l),a())}).catch(o=>{})};a();const c={type:"open"};this.query.sid&&(c.data=`{"sid":"${this.query.sid}"}`),this._writer.write(c).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const s=t[r],i=r===t.length-1;this._writer.write(s).then(()=>{i&&xc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const Ck={websocket:wk,webtransport:Sk,polling:bk},kk=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,jk=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function rh(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),s=e.indexOf("]");r!=-1&&s!=-1&&(e=e.substring(0,r)+e.substring(r,s).replace(/:/g,";")+e.substring(s,e.length));let i=kk.exec(e||""),a={},c=14;for(;c--;)a[jk[c]]=i[c]||"";return r!=-1&&s!=-1&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=Nk(a,a.path),a.queryKey=Ek(a,a.query),a}function Nk(e,t){const r=/\/{2,9}/g,s=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&s.splice(0,1),t.slice(-1)=="/"&&s.splice(s.length-1,1),s}function Ek(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,i,a){i&&(r[i]=a)}),r}const sh=typeof addEventListener=="function"&&typeof removeEventListener=="function",el=[];sh&&addEventListener("offline",()=>{el.forEach(e=>e())},!1);class as extends Ie{constructor(t,r){if(super(),this.binaryType=ok,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const s=rh(t);r.hostname=s.host,r.secure=s.protocol==="https"||s.protocol==="wss",r.port=s.port,s.query&&(r.query=s.query)}else r.host&&(r.hostname=rh(r.host).host);yc(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(s=>{const i=s.prototype.name;this.transports.push(i),this._transportsByName[i]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=fk(this.opts.query)),sh&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},el.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=G0,r.transport=t,this.id&&(r.sid=this.id);const s=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&as.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",as.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let s=0;s<this.writeBuffer.length;s++){const i=this.writeBuffer[s].data;if(i&&(r+=dk(i)),s>0&&r>this._maxPayload)return this.writeBuffer.slice(0,s);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,xc(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,s){return this._sendPacket("message",t,r,s),this}send(t,r,s){return this._sendPacket("message",t,r,s),this}_sendPacket(t,r,s,i){if(typeof r=="function"&&(i=r,r=void 0),typeof s=="function"&&(i=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const a={type:t,data:r,options:s};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},s=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():t()}):this.upgrading?s():t()),this}_onError(t){if(as.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),sh&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=el.indexOf(this._offlineEventListener);s!==-1&&el.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}as.protocol=G0;class Dk extends as{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),s=!1;as.priorWebsocketSuccess=!1;const i=()=>{s||(r.send([{type:"ping",data:"probe"}]),r.once("packet",h=>{if(!s)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;as.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(v(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const g=new Error("probe error");g.transport=r.name,this.emitReserved("upgradeError",g)}}))};function a(){s||(s=!0,v(),r.close(),r=null)}const c=h=>{const g=new Error("probe error: "+h);g.transport=r.name,a(),this.emitReserved("upgradeError",g)};function o(){c("transport closed")}function l(){c("socket closed")}function f(h){r&&h.name!==r.name&&a()}const v=()=>{r.removeListener("open",i),r.removeListener("error",c),r.removeListener("close",o),this.off("close",l),this.off("upgrading",f)};r.once("open",i),r.once("error",c),r.once("close",o),this.once("close",l),this.once("upgrading",f),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{s||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let s=0;s<t.length;s++)~this.transports.indexOf(t[s])&&r.push(t[s]);return r}}let Pk=class extends Dk{constructor(t,r={}){const s=typeof t=="object"?t:r;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(i=>Ck[i]).filter(i=>!!i)),super(t,s)}};function Rk(e,t="",r){let s=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),s=rh(e)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const a=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+a+":"+s.port+t,s.href=s.protocol+"://"+a+(r&&r.port===s.port?"":":"+s.port),s}const Ak=typeof ArrayBuffer=="function",Tk=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Z0=Object.prototype.toString,Lk=typeof Blob=="function"||typeof Blob<"u"&&Z0.call(Blob)==="[object BlobConstructor]",Ik=typeof File=="function"||typeof File<"u"&&Z0.call(File)==="[object FileConstructor]";function _f(e){return Ak&&(e instanceof ArrayBuffer||Tk(e))||Lk&&e instanceof Blob||Ik&&e instanceof File}function tl(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,s=e.length;r<s;r++)if(tl(e[r]))return!0;return!1}if(_f(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return tl(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&tl(e[r]))return!0;return!1}function Mk(e){const t=[],r=e.data,s=e;return s.data=nh(r,t),s.attachments=t.length,{packet:s,buffers:t}}function nh(e,t){if(!e)return e;if(_f(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let s=0;s<e.length;s++)r[s]=nh(e[s],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=nh(e[s],t));return r}return e}function Ok(e,t){return e.data=ih(e.data,t),delete e.attachments,e}function ih(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=ih(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=ih(e[r],t));return e}const Bk=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Fk=5;var fe;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(fe||(fe={}));class $k{constructor(t){this.replacer=t}encode(t){return(t.type===fe.EVENT||t.type===fe.ACK)&&tl(t)?this.encodeAsBinary({type:t.type===fe.EVENT?fe.BINARY_EVENT:fe.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===fe.BINARY_EVENT||t.type===fe.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=Mk(t),s=this.encodeAsString(r.packet),i=r.buffers;return i.unshift(s),i}}function $m(e){return Object.prototype.toString.call(e)==="[object Object]"}class wf extends Ie{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const s=r.type===fe.BINARY_EVENT;s||r.type===fe.BINARY_ACK?(r.type=s?fe.EVENT:fe.ACK,this.reconstructor=new Hk(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(_f(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const s={type:Number(t.charAt(0))};if(fe[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===fe.BINARY_EVENT||s.type===fe.BINARY_ACK){const a=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const c=t.substring(a,r);if(c!=Number(c)||t.charAt(r)!=="-")throw new Error("Illegal attachments");s.attachments=Number(c)}if(t.charAt(r+1)==="/"){const a=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););s.nsp=t.substring(a,r)}else s.nsp="/";const i=t.charAt(r+1);if(i!==""&&Number(i)==i){const a=r+1;for(;++r;){const c=t.charAt(r);if(c==null||Number(c)!=c){--r;break}if(r===t.length)break}s.id=Number(t.substring(a,r+1))}if(t.charAt(++r)){const a=this.tryParse(t.substr(r));if(wf.isPayloadValid(s.type,a))s.data=a;else throw new Error("invalid payload")}return s}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case fe.CONNECT:return $m(r);case fe.DISCONNECT:return r===void 0;case fe.CONNECT_ERROR:return typeof r=="string"||$m(r);case fe.EVENT:case fe.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&Bk.indexOf(r[0])===-1);case fe.ACK:case fe.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Hk{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=Ok(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Uk=Object.freeze(Object.defineProperty({__proto__:null,Decoder:wf,Encoder:$k,get PacketType(){return fe},protocol:Fk},Symbol.toStringTag,{value:"Module"}));function Kt(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const Wk=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class ey extends Ie{constructor(t,r,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Kt(t,"open",this.onopen.bind(this)),Kt(t,"packet",this.onpacket.bind(this)),Kt(t,"error",this.onerror.bind(this)),Kt(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var s,i,a;if(Wk.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const c={type:fe.EVENT,data:r};if(c.options={},c.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const v=this.ids++,h=r.pop();this._registerAckCallback(v,h),c.id=v}const o=(i=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||i===void 0?void 0:i.writable,l=this.connected&&!(!((a=this.io.engine)===null||a===void 0)&&a._hasPingExpired());return this.flags.volatile&&!o||(l?(this.notifyOutgoingListeners(c),this.packet(c)):this.sendBuffer.push(c)),this.flags={},this}_registerAckCallback(t,r){var s;const i=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(i===void 0){this.acks[t]=r;return}const a=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===t&&this.sendBuffer.splice(o,1);r.call(this,new Error("operation has timed out"))},i),c=(...o)=>{this.io.clearTimeoutFn(a),r.apply(this,o)};c.withError=!0,this.acks[t]=c}emitWithAck(t,...r){return new Promise((s,i)=>{const a=(c,o)=>c?i(c):s(o);a.withError=!0,r.push(a),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...a)=>s!==this._queue[0]?void 0:(i!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(i)):(this._queue.shift(),r&&r(null,...a)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:fe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(s=>String(s.id)===t)){const s=this.acks[t];delete this.acks[t],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case fe.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case fe.EVENT:case fe.BINARY_EVENT:this.onevent(t);break;case fe.ACK:case fe.BINARY_ACK:this.onack(t);break;case fe.DISCONNECT:this.ondisconnect();break;case fe.CONNECT_ERROR:this.destroy();const s=new Error(t.data.message);s.data=t.data.data,this.emitReserved("connect_error",s);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const s of r)s.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let s=!1;return function(...i){s||(s=!0,r.packet({type:fe.ACK,id:t,data:i}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:fe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let s=0;s<r.length;s++)if(t===r[s])return r.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let s=0;s<r.length;s++)if(t===r[s])return r.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const s of r)s.apply(this,t.data)}}}function ai(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}ai.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};ai.prototype.reset=function(){this.attempts=0};ai.prototype.setMin=function(e){this.ms=e};ai.prototype.setMax=function(e){this.max=e};ai.prototype.setJitter=function(e){this.jitter=e};class oh extends Ie{constructor(t,r){var s;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,yc(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((s=r.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new ai({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const i=r.parser||Uk;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Pk(this.uri,this.opts);const r=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const i=Kt(r,"open",function(){s.onopen(),t&&t()}),a=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),t?t(o):this.maybeReconnectOnOpen()},c=Kt(r,"error",a);if(this._timeout!==!1){const o=this._timeout,l=this.setTimeoutFn(()=>{i(),a(new Error("timeout")),r.close()},o);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(i),this.subs.push(c),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Kt(t,"ping",this.onping.bind(this)),Kt(t,"data",this.ondata.bind(this)),Kt(t,"error",this.onerror.bind(this)),Kt(t,"close",this.onclose.bind(this)),Kt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){xc(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let s=this.nsps[t];return s?this._autoConnect&&!s.active&&s.connect():(s=new ey(this,t,r),this.nsps[t]=s),s}_destroy(t){const r=Object.keys(this.nsps);for(const s of r)if(this.nsps[s].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let s=0;s<r.length;s++)this.engine.write(r[s],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},r);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const wi={};function Vi(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=Rk(e,t.path||"/socket.io"),s=r.source,i=r.id,a=r.path,c=wi[i]&&a in wi[i].nsps,o=t.forceNew||t["force new connection"]||t.multiplex===!1||c;let l;return o?l=new oh(s,t):(wi[i]||(wi[i]=new oh(s,t)),l=wi[i]),r.query&&!t.query&&(t.query=r.queryKey),l.socket(r.path,t)}Object.assign(Vi,{Manager:oh,Socket:ey,io:Vi,connect:Vi});const ty=j.createContext(void 0),zk=({children:e})=>{const[t,r]=j.useState(null),[s,i]=j.useState(!1),[a,c]=j.useState({});j.useEffect(()=>{const f={}.VITE_WS_URL||"http://localhost:3001",v=Vi(f,{transports:["websocket","polling"]});v.on("connect",()=>{console.log("WebSocket connected"),i(!0),se.success("Connected to Magents server")}),v.on("disconnect",g=>{console.log("WebSocket disconnected:",g),i(!1),se.warning("Disconnected from Magents server")}),v.on("message",g=>{console.log("WebSocket message:",g)}),v.on("agent:event",g=>{const{data:y}=g,_=`Agent ${y.agentId} ${y.event}`;switch(y.event){case"created":se.info(_);break;case"started":se.success(_);break;case"stopped":se.info(_);break;case"error":se.error(_);break}}),v.on("project:update",g=>{console.log("Project update:",g),se.info("Project updated")}),v.on("config:change",g=>{console.log("Config change:",g),se.info("Configuration updated")}),v.on("agent:progress",g=>{console.log("Agent progress:",g);const{agentId:y,data:_}=g;y&&c(x=>({...x,[y]:_}))});const h=setInterval(()=>{v.connected&&v.emit("ping")},3e4);return v.on("pong",g=>{console.log("Pong received:",g)}),r(v),()=>{clearInterval(h),v.close()}},[]);const o=f=>{t&&t.connected&&t.emit(`subscribe:${f}`)},l=f=>{t&&t.connected&&t.emit(`unsubscribe:${f}`)};return n.jsx(ty.Provider,{value:{socket:t,isConnected:s,subscribe:o,unsubscribe:l,agentProgress:a},children:e})},qo=()=>{const e=j.useContext(ty);if(e===void 0)throw new Error("useWebSocket must be used within a WebSocketProvider");return e},Vk={"/":"Dashboard","/agents":"Agents","/projects":"Projects","/tasks":"TaskMaster Tasks","/tasks/assign":"Assign Tasks","/analytics":"Analytics","/settings":"Settings","/terminal":"Terminal"},qk=({onToggleSidebar:e,isSidebarCollapsed:t})=>{const{isConnected:r}=qo(),s=ws(),i=Vk[s.pathname]||"Dashboard";return n.jsx("header",{className:"bg-background/80 backdrop-blur-md border-b border-border/50",children:n.jsxs("div",{className:"flex items-center justify-between px-6 py-3",children:[n.jsxs("div",{className:"flex items-center flex-1 space-x-4",children:[t&&n.jsx("button",{onClick:e,className:"p-2 text-foreground-secondary hover:text-foreground hover:bg-background-tertiary rounded-lg transition-colors",title:"Expand sidebar",children:n.jsx(k2,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-foreground",children:i}),n.jsx("p",{className:"text-sm text-foreground-tertiary mt-0.5",children:"Overview of your multi-agent development environment"})]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",placeholder:"Search...",className:"w-64 pl-10 pr-4 py-2 bg-background-tertiary/80 border border-border/50 rounded-lg text-sm text-foreground placeholder-foreground-tertiary focus:outline-none focus:border-brand focus:ring-2 focus:ring-brand/30 focus:bg-background-tertiary transition-all duration-200"}),n.jsx(vc,{className:"absolute left-3 top-2.5 h-5 w-5 text-foreground-tertiary"})]}),n.jsxs("div",{className:"flex items-center space-x-2 px-3 py-1.5 bg-background-tertiary rounded-lg",children:[n.jsx("div",{className:`h-2 w-2 rounded-full ${r?"bg-status-success":"bg-status-error"}`}),n.jsx("span",{className:"text-xs text-foreground-secondary font-medium",children:r?"Connected":"Disconnected"})]}),n.jsxs("button",{className:"relative p-2 text-foreground-secondary hover:text-foreground hover:bg-background-tertiary rounded-lg transition-colors",children:[n.jsx(E2,{className:"h-5 w-5"}),n.jsx("span",{className:"absolute top-1 right-1 h-2 w-2 bg-status-error rounded-full"})]}),n.jsxs("button",{className:"flex items-center space-x-3 px-3 py-1.5 text-foreground-secondary hover:text-foreground hover:bg-background-tertiary rounded-lg transition-colors",children:[n.jsx(VC,{className:"h-6 w-6"}),n.jsx("span",{className:"text-sm font-medium",children:"Admin"})]})]})]})})};var ry={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(globalThis,()=>(()=>{var r={4567:function(c,o,l){var f=this&&this.__decorate||function(u,p,b,S){var C,k=arguments.length,w=k<3?p:S===null?S=Object.getOwnPropertyDescriptor(p,b):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(u,p,b,S);else for(var N=u.length-1;N>=0;N--)(C=u[N])&&(w=(k<3?C(w):k>3?C(p,b,w):C(p,b))||w);return k>3&&w&&Object.defineProperty(p,b,w),w},v=this&&this.__param||function(u,p){return function(b,S){p(b,S,u)}};Object.defineProperty(o,"__esModule",{value:!0}),o.AccessibilityManager=void 0;const h=l(9042),g=l(9924),y=l(844),_=l(4725),x=l(2585),m=l(3656);let d=o.AccessibilityManager=class extends y.Disposable{constructor(u,p,b,S){super(),this._terminal=u,this._coreBrowserService=b,this._renderService=S,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let C=0;C<this._terminal.rows;C++)this._rowElements[C]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[C]);if(this._topBoundaryFocusListener=C=>this._handleBoundaryFocus(C,0),this._bottomBoundaryFocusListener=C=>this._handleBoundaryFocus(C,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new g.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(C=>this._handleResize(C.rows))),this.register(this._terminal.onRender(C=>this._refreshRows(C.start,C.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(C=>this._handleChar(C))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(C=>this._handleTab(C))),this.register(this._terminal.onKey(C=>this._handleKey(C.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,m.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,y.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(u){for(let p=0;p<u;p++)this._handleChar(" ")}_handleChar(u){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==u&&(this._charsToAnnounce+=u):this._charsToAnnounce+=u,u===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=h.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(u){this._clearLiveRegion(),/\p{Control}/u.test(u)||this._charsToConsume.push(u)}_refreshRows(u,p){this._liveRegionDebouncer.refresh(u,p,this._terminal.rows)}_renderRows(u,p){const b=this._terminal.buffer,S=b.lines.length.toString();for(let C=u;C<=p;C++){const k=b.lines.get(b.ydisp+C),w=[],N=(k==null?void 0:k.translateToString(!0,void 0,void 0,w))||"",D=(b.ydisp+C+1).toString(),T=this._rowElements[C];T&&(N.length===0?(T.innerText="",this._rowColumns.set(T,[0,1])):(T.textContent=N,this._rowColumns.set(T,w)),T.setAttribute("aria-posinset",D),T.setAttribute("aria-setsize",S))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(u,p){const b=u.target,S=this._rowElements[p===0?1:this._rowElements.length-2];if(b.getAttribute("aria-posinset")===(p===0?"1":`${this._terminal.buffer.lines.length}`)||u.relatedTarget!==S)return;let C,k;if(p===0?(C=b,k=this._rowElements.pop(),this._rowContainer.removeChild(k)):(C=this._rowElements.shift(),k=b,this._rowContainer.removeChild(C)),C.removeEventListener("focus",this._topBoundaryFocusListener),k.removeEventListener("focus",this._bottomBoundaryFocusListener),p===0){const w=this._createAccessibilityTreeNode();this._rowElements.unshift(w),this._rowContainer.insertAdjacentElement("afterbegin",w)}else{const w=this._createAccessibilityTreeNode();this._rowElements.push(w),this._rowContainer.appendChild(w)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(p===0?-1:1),this._rowElements[p===0?1:this._rowElements.length-2].focus(),u.preventDefault(),u.stopImmediatePropagation()}_handleSelectionChange(){var N;if(this._rowElements.length===0)return;const u=document.getSelection();if(!u)return;if(u.isCollapsed)return void(this._rowContainer.contains(u.anchorNode)&&this._terminal.clearSelection());if(!u.anchorNode||!u.focusNode)return void console.error("anchorNode and/or focusNode are null");let p={node:u.anchorNode,offset:u.anchorOffset},b={node:u.focusNode,offset:u.focusOffset};if((p.node.compareDocumentPosition(b.node)&Node.DOCUMENT_POSITION_PRECEDING||p.node===b.node&&p.offset>b.offset)&&([p,b]=[b,p]),p.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(p={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(p.node))return;const S=this._rowElements.slice(-1)[0];if(b.node.compareDocumentPosition(S)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(b={node:S,offset:((N=S.textContent)==null?void 0:N.length)??0}),!this._rowContainer.contains(b.node))return;const C=({node:D,offset:T})=>{const I=D instanceof Text?D.parentNode:D;let A=parseInt(I==null?void 0:I.getAttribute("aria-posinset"),10)-1;if(isNaN(A))return console.warn("row is invalid. Race condition?"),null;const O=this._rowColumns.get(I);if(!O)return console.warn("columns is null. Race condition?"),null;let P=T<O.length?O[T]:O.slice(-1)[0]+1;return P>=this._terminal.cols&&(++A,P=0),{row:A,column:P}},k=C(p),w=C(b);if(k&&w){if(k.row>w.row||k.row===w.row&&k.column>=w.column)throw new Error("invalid range");this._terminal.select(k.column,k.row,(w.row-k.row)*this._terminal.cols-k.column+w.column)}}_handleResize(u){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let p=this._rowContainer.children.length;p<this._terminal.rows;p++)this._rowElements[p]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[p]);for(;this._rowElements.length>u;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const u=this._coreBrowserService.mainDocument.createElement("div");return u.setAttribute("role","listitem"),u.tabIndex=-1,this._refreshRowDimensions(u),u}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let u=0;u<this._terminal.rows;u++)this._refreshRowDimensions(this._rowElements[u])}}_refreshRowDimensions(u){u.style.height=`${this._renderService.dimensions.css.cell.height}px`}};o.AccessibilityManager=d=f([v(1,x.IInstantiationService),v(2,_.ICoreBrowserService),v(3,_.IRenderService)],d)},3614:(c,o)=>{function l(g){return g.replace(/\r?\n/g,"\r")}function f(g,y){return y?"\x1B[200~"+g+"\x1B[201~":g}function v(g,y,_,x){g=f(g=l(g),_.decPrivateModes.bracketedPasteMode&&x.rawOptions.ignoreBracketedPasteMode!==!0),_.triggerDataEvent(g,!0),y.value=""}function h(g,y,_){const x=_.getBoundingClientRect(),m=g.clientX-x.left-10,d=g.clientY-x.top-10;y.style.width="20px",y.style.height="20px",y.style.left=`${m}px`,y.style.top=`${d}px`,y.style.zIndex="1000",y.focus()}Object.defineProperty(o,"__esModule",{value:!0}),o.rightClickHandler=o.moveTextAreaUnderMouseCursor=o.paste=o.handlePasteEvent=o.copyHandler=o.bracketTextForPaste=o.prepareTextForTerminal=void 0,o.prepareTextForTerminal=l,o.bracketTextForPaste=f,o.copyHandler=function(g,y){g.clipboardData&&g.clipboardData.setData("text/plain",y.selectionText),g.preventDefault()},o.handlePasteEvent=function(g,y,_,x){g.stopPropagation(),g.clipboardData&&v(g.clipboardData.getData("text/plain"),y,_,x)},o.paste=v,o.moveTextAreaUnderMouseCursor=h,o.rightClickHandler=function(g,y,_,x,m){h(g,y,_),m&&x.rightClickSelect(g),y.value=x.selectionText,y.select()}},7239:(c,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ColorContrastCache=void 0;const f=l(1505);o.ColorContrastCache=class{constructor(){this._color=new f.TwoKeyMap,this._css=new f.TwoKeyMap}setCss(v,h,g){this._css.set(v,h,g)}getCss(v,h){return this._css.get(v,h)}setColor(v,h,g){this._color.set(v,h,g)}getColor(v,h){return this._color.get(v,h)}clear(){this._color.clear(),this._css.clear()}}},3656:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.addDisposableDomListener=void 0,o.addDisposableDomListener=function(l,f,v,h){l.addEventListener(f,v,h);let g=!1;return{dispose:()=>{g||(g=!0,l.removeEventListener(f,v,h))}}}},3551:function(c,o,l){var f=this&&this.__decorate||function(d,u,p,b){var S,C=arguments.length,k=C<3?u:b===null?b=Object.getOwnPropertyDescriptor(u,p):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(d,u,p,b);else for(var w=d.length-1;w>=0;w--)(S=d[w])&&(k=(C<3?S(k):C>3?S(u,p,k):S(u,p))||k);return C>3&&k&&Object.defineProperty(u,p,k),k},v=this&&this.__param||function(d,u){return function(p,b){u(p,b,d)}};Object.defineProperty(o,"__esModule",{value:!0}),o.Linkifier=void 0;const h=l(3656),g=l(8460),y=l(844),_=l(2585),x=l(4725);let m=o.Linkifier=class extends y.Disposable{get currentLink(){return this._currentLink}constructor(d,u,p,b,S){super(),this._element=d,this._mouseService=u,this._renderService=p,this._bufferService=b,this._linkProviderService=S,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new g.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new g.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,y.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,y.toDisposable)(()=>{var C;this._lastMouseEvent=void 0,(C=this._activeProviderReplies)==null||C.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,h.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,h.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(d){this._lastMouseEvent=d;const u=this._positionFromMouseEvent(d,this._element,this._mouseService);if(!u)return;this._isMouseOut=!1;const p=d.composedPath();for(let b=0;b<p.length;b++){const S=p[b];if(S.classList.contains("xterm"))break;if(S.classList.contains("xterm-hover"))return}this._lastBufferCell&&u.x===this._lastBufferCell.x&&u.y===this._lastBufferCell.y||(this._handleHover(u),this._lastBufferCell=u)}_handleHover(d){if(this._activeLine!==d.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(d,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,d)||(this._clearCurrentLink(),this._askForLink(d,!0))}_askForLink(d,u){var b,S;this._activeProviderReplies&&u||((b=this._activeProviderReplies)==null||b.forEach(C=>{C==null||C.forEach(k=>{k.link.dispose&&k.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=d.y);let p=!1;for(const[C,k]of this._linkProviderService.linkProviders.entries())u?(S=this._activeProviderReplies)!=null&&S.get(C)&&(p=this._checkLinkProviderResult(C,d,p)):k.provideLinks(d.y,w=>{var D,T;if(this._isMouseOut)return;const N=w==null?void 0:w.map(I=>({link:I}));(D=this._activeProviderReplies)==null||D.set(C,N),p=this._checkLinkProviderResult(C,d,p),((T=this._activeProviderReplies)==null?void 0:T.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(d.y,this._activeProviderReplies)})}_removeIntersectingLinks(d,u){const p=new Set;for(let b=0;b<u.size;b++){const S=u.get(b);if(S)for(let C=0;C<S.length;C++){const k=S[C],w=k.link.range.start.y<d?0:k.link.range.start.x,N=k.link.range.end.y>d?this._bufferService.cols:k.link.range.end.x;for(let D=w;D<=N;D++){if(p.has(D)){S.splice(C--,1);break}p.add(D)}}}}_checkLinkProviderResult(d,u,p){var C;if(!this._activeProviderReplies)return p;const b=this._activeProviderReplies.get(d);let S=!1;for(let k=0;k<d;k++)this._activeProviderReplies.has(k)&&!this._activeProviderReplies.get(k)||(S=!0);if(!S&&b){const k=b.find(w=>this._linkAtPosition(w.link,u));k&&(p=!0,this._handleNewLink(k))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!p)for(let k=0;k<this._activeProviderReplies.size;k++){const w=(C=this._activeProviderReplies.get(k))==null?void 0:C.find(N=>this._linkAtPosition(N.link,u));if(w){p=!0,this._handleNewLink(w);break}}return p}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(d){if(!this._currentLink)return;const u=this._positionFromMouseEvent(d,this._element,this._mouseService);u&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,u)&&this._currentLink.link.activate(d,this._currentLink.link.text)}_clearCurrentLink(d,u){this._currentLink&&this._lastMouseEvent&&(!d||!u||this._currentLink.link.range.start.y>=d&&this._currentLink.link.range.end.y<=u)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,y.disposeArray)(this._linkCacheDisposables))}_handleNewLink(d){if(!this._lastMouseEvent)return;const u=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);u&&this._linkAtPosition(d.link,u)&&(this._currentLink=d,this._currentLink.state={decorations:{underline:d.link.decorations===void 0||d.link.decorations.underline,pointerCursor:d.link.decorations===void 0||d.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,d.link,this._lastMouseEvent),d.link.decorations={},Object.defineProperties(d.link.decorations,{pointerCursor:{get:()=>{var p,b;return(b=(p=this._currentLink)==null?void 0:p.state)==null?void 0:b.decorations.pointerCursor},set:p=>{var b;(b=this._currentLink)!=null&&b.state&&this._currentLink.state.decorations.pointerCursor!==p&&(this._currentLink.state.decorations.pointerCursor=p,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",p))}},underline:{get:()=>{var p,b;return(b=(p=this._currentLink)==null?void 0:p.state)==null?void 0:b.decorations.underline},set:p=>{var b,S,C;(b=this._currentLink)!=null&&b.state&&((C=(S=this._currentLink)==null?void 0:S.state)==null?void 0:C.decorations.underline)!==p&&(this._currentLink.state.decorations.underline=p,this._currentLink.state.isHovered&&this._fireUnderlineEvent(d.link,p))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(p=>{if(!this._currentLink)return;const b=p.start===0?0:p.start+1+this._bufferService.buffer.ydisp,S=this._bufferService.buffer.ydisp+1+p.end;if(this._currentLink.link.range.start.y>=b&&this._currentLink.link.range.end.y<=S&&(this._clearCurrentLink(b,S),this._lastMouseEvent)){const C=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);C&&this._askForLink(C,!1)}})))}_linkHover(d,u,p){var b;(b=this._currentLink)!=null&&b.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(u,!0),this._currentLink.state.decorations.pointerCursor&&d.classList.add("xterm-cursor-pointer")),u.hover&&u.hover(p,u.text)}_fireUnderlineEvent(d,u){const p=d.range,b=this._bufferService.buffer.ydisp,S=this._createLinkUnderlineEvent(p.start.x-1,p.start.y-b-1,p.end.x,p.end.y-b-1,void 0);(u?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(S)}_linkLeave(d,u,p){var b;(b=this._currentLink)!=null&&b.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(u,!1),this._currentLink.state.decorations.pointerCursor&&d.classList.remove("xterm-cursor-pointer")),u.leave&&u.leave(p,u.text)}_linkAtPosition(d,u){const p=d.range.start.y*this._bufferService.cols+d.range.start.x,b=d.range.end.y*this._bufferService.cols+d.range.end.x,S=u.y*this._bufferService.cols+u.x;return p<=S&&S<=b}_positionFromMouseEvent(d,u,p){const b=p.getCoords(d,u,this._bufferService.cols,this._bufferService.rows);if(b)return{x:b[0],y:b[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(d,u,p,b,S){return{x1:d,y1:u,x2:p,y2:b,cols:this._bufferService.cols,fg:S}}};o.Linkifier=m=f([v(1,x.IMouseService),v(2,x.IRenderService),v(3,_.IBufferService),v(4,x.ILinkProviderService)],m)},9042:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.tooMuchOutput=o.promptLabel=void 0,o.promptLabel="Terminal input",o.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(c,o,l){var f=this&&this.__decorate||function(x,m,d,u){var p,b=arguments.length,S=b<3?m:u===null?u=Object.getOwnPropertyDescriptor(m,d):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(x,m,d,u);else for(var C=x.length-1;C>=0;C--)(p=x[C])&&(S=(b<3?p(S):b>3?p(m,d,S):p(m,d))||S);return b>3&&S&&Object.defineProperty(m,d,S),S},v=this&&this.__param||function(x,m){return function(d,u){m(d,u,x)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OscLinkProvider=void 0;const h=l(511),g=l(2585);let y=o.OscLinkProvider=class{constructor(x,m,d){this._bufferService=x,this._optionsService=m,this._oscLinkService=d}provideLinks(x,m){var N;const d=this._bufferService.buffer.lines.get(x-1);if(!d)return void m(void 0);const u=[],p=this._optionsService.rawOptions.linkHandler,b=new h.CellData,S=d.getTrimmedLength();let C=-1,k=-1,w=!1;for(let D=0;D<S;D++)if(k!==-1||d.hasContent(D)){if(d.loadCell(D,b),b.hasExtendedAttrs()&&b.extended.urlId){if(k===-1){k=D,C=b.extended.urlId;continue}w=b.extended.urlId!==C}else k!==-1&&(w=!0);if(w||k!==-1&&D===S-1){const T=(N=this._oscLinkService.getLinkData(C))==null?void 0:N.uri;if(T){const I={start:{x:k+1,y:x},end:{x:D+(w||D!==S-1?0:1),y:x}};let A=!1;if(!(p!=null&&p.allowNonHttpProtocols))try{const O=new URL(T);["http:","https:"].includes(O.protocol)||(A=!0)}catch{A=!0}A||u.push({text:T,range:I,activate:(O,P)=>p?p.activate(O,P,I):_(0,P),hover:(O,P)=>{var B;return(B=p==null?void 0:p.hover)==null?void 0:B.call(p,O,P,I)},leave:(O,P)=>{var B;return(B=p==null?void 0:p.leave)==null?void 0:B.call(p,O,P,I)}})}w=!1,b.hasExtendedAttrs()&&b.extended.urlId?(k=D,C=b.extended.urlId):(k=-1,C=-1)}}m(u)}};function _(x,m){if(confirm(`Do you want to navigate to ${m}?

WARNING: This link could potentially be dangerous`)){const d=window.open();if(d){try{d.opener=null}catch{}d.location.href=m}else console.warn("Opening link blocked as opener could not be cleared")}}o.OscLinkProvider=y=f([v(0,g.IBufferService),v(1,g.IOptionsService),v(2,g.IOscLinkService)],y)},6193:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.RenderDebouncer=void 0,o.RenderDebouncer=class{constructor(l,f){this._renderCallback=l,this._coreBrowserService=f,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(l){return this._refreshCallbacks.push(l),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(l,f,v){this._rowCount=v,l=l!==void 0?l:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,l):l,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const l=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(l,f),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const l of this._refreshCallbacks)l(0);this._refreshCallbacks=[]}}},3236:(c,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Terminal=void 0;const f=l(3614),v=l(3656),h=l(3551),g=l(9042),y=l(3730),_=l(1680),x=l(3107),m=l(5744),d=l(2950),u=l(1296),p=l(428),b=l(4269),S=l(5114),C=l(8934),k=l(3230),w=l(9312),N=l(4725),D=l(6731),T=l(8055),I=l(8969),A=l(8460),O=l(844),P=l(6114),B=l(8437),U=l(2584),$=l(7399),E=l(5941),R=l(9074),F=l(2585),M=l(5435),z=l(4567),q=l(779);class Y extends I.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(W={}){super(W),this.browser=P,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new O.MutableDisposable),this._onCursorMove=this.register(new A.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new A.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new A.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new A.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new A.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new A.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new A.EventEmitter),this._onBlur=this.register(new A.EventEmitter),this._onA11yCharEmitter=this.register(new A.EventEmitter),this._onA11yTabEmitter=this.register(new A.EventEmitter),this._onWillOpen=this.register(new A.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(R.DecorationService),this._instantiationService.setService(F.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(q.LinkProviderService),this._instantiationService.setService(N.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(y.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((L,G)=>this.refresh(L,G))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(L=>this._reportWindowsOptions(L))),this.register(this._inputHandler.onColor(L=>this._handleColorEvent(L))),this.register((0,A.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,A.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(L=>this._afterResize(L.cols,L.rows))),this.register((0,O.toDisposable)(()=>{var L,G;this._customKeyEventHandler=void 0,(G=(L=this.element)==null?void 0:L.parentNode)==null||G.removeChild(this.element)}))}_handleColorEvent(W){if(this._themeService)for(const L of W){let G,V="";switch(L.index){case 256:G="foreground",V="10";break;case 257:G="background",V="11";break;case 258:G="cursor",V="12";break;default:G="ansi",V="4;"+L.index}switch(L.type){case 0:const J=T.color.toColorRGB(G==="ansi"?this._themeService.colors.ansi[L.index]:this._themeService.colors[G]);this.coreService.triggerDataEvent(`${U.C0.ESC}]${V};${(0,E.toRgbString)(J)}${U.C1_ESCAPED.ST}`);break;case 1:if(G==="ansi")this._themeService.modifyColors(X=>X.ansi[L.index]=T.channels.toColor(...L.color));else{const X=G;this._themeService.modifyColors(ce=>ce[X]=T.channels.toColor(...L.color))}break;case 2:this._themeService.restoreColor(L.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(W){W?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(z.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(W){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(U.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var W;return(W=this.textarea)==null?void 0:W.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(U.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const W=this.buffer.ybase+this.buffer.y,L=this.buffer.lines.get(W);if(!L)return;const G=Math.min(this.buffer.x,this.cols-1),V=this._renderService.dimensions.css.cell.height,J=L.getWidth(G),X=this._renderService.dimensions.css.cell.width*J,ce=this.buffer.y*this._renderService.dimensions.css.cell.height,xe=G*this._renderService.dimensions.css.cell.width;this.textarea.style.left=xe+"px",this.textarea.style.top=ce+"px",this.textarea.style.width=X+"px",this.textarea.style.height=V+"px",this.textarea.style.lineHeight=V+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,v.addDisposableDomListener)(this.element,"copy",L=>{this.hasSelection()&&(0,f.copyHandler)(L,this._selectionService)}));const W=L=>(0,f.handlePasteEvent)(L,this.textarea,this.coreService,this.optionsService);this.register((0,v.addDisposableDomListener)(this.textarea,"paste",W)),this.register((0,v.addDisposableDomListener)(this.element,"paste",W)),P.isFirefox?this.register((0,v.addDisposableDomListener)(this.element,"mousedown",L=>{L.button===2&&(0,f.rightClickHandler)(L,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,v.addDisposableDomListener)(this.element,"contextmenu",L=>{(0,f.rightClickHandler)(L,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),P.isLinux&&this.register((0,v.addDisposableDomListener)(this.element,"auxclick",L=>{L.button===1&&(0,f.moveTextAreaUnderMouseCursor)(L,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,v.addDisposableDomListener)(this.textarea,"keyup",W=>this._keyUp(W),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"keydown",W=>this._keyDown(W),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"keypress",W=>this._keyPress(W),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionupdate",W=>this._compositionHelper.compositionupdate(W))),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,v.addDisposableDomListener)(this.textarea,"input",W=>this._inputEvent(W),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(W){var G;if(!W)throw new Error("Terminal requires a parent element.");if(W.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((G=this.element)==null?void 0:G.ownerDocument.defaultView)&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=W.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),W.appendChild(this.element);const L=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),L.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,v.addDisposableDomListener)(this.screenElement,"mousemove",V=>this.updateCursorStyle(V))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),L.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",g.promptLabel),P.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(S.CoreBrowserService,this.textarea,W.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(N.ICoreBrowserService,this._coreBrowserService),this.register((0,v.addDisposableDomListener)(this.textarea,"focus",V=>this._handleTextAreaFocus(V))),this.register((0,v.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(p.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(N.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(D.ThemeService),this._instantiationService.setService(N.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(b.CharacterJoinerService),this._instantiationService.setService(N.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(k.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(N.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(V=>this._onRender.fire(V))),this.onResize(V=>this._renderService.resize(V.cols,V.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(d.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(C.MouseService),this._instantiationService.setService(N.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(h.Linkifier,this.screenElement)),this.element.appendChild(L);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(_.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(V=>this.scrollLines(V.amount,V.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(w.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(N.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(V=>this.scrollLines(V.amount,V.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(V=>this._renderService.handleSelectionChanged(V.start,V.end,V.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(V=>{this.textarea.value=V,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(V=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,v.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(x.BufferDecorationRenderer,this.screenElement)),this.register((0,v.addDisposableDomListener)(this.element,"mousedown",V=>this._selectionService.handleMouseDown(V))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(z.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",V=>this._handleScreenReaderModeOptionChange(V))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(m.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",V=>{!this._overviewRulerRenderer&&V&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(m.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(u.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const W=this,L=this.element;function G(X){const ce=W._mouseService.getMouseReportCoords(X,W.screenElement);if(!ce)return!1;let xe,we;switch(X.overrideType||X.type){case"mousemove":we=32,X.buttons===void 0?(xe=3,X.button!==void 0&&(xe=X.button<3?X.button:3)):xe=1&X.buttons?0:4&X.buttons?1:2&X.buttons?2:3;break;case"mouseup":we=0,xe=X.button<3?X.button:3;break;case"mousedown":we=1,xe=X.button<3?X.button:3;break;case"wheel":if(W._customWheelEventHandler&&W._customWheelEventHandler(X)===!1||W.viewport.getLinesScrolled(X)===0)return!1;we=X.deltaY<0?0:1,xe=4;break;default:return!1}return!(we===void 0||xe===void 0||xe>4)&&W.coreMouseService.triggerMouseEvent({col:ce.col,row:ce.row,x:ce.x,y:ce.y,button:xe,action:we,ctrl:X.ctrlKey,alt:X.altKey,shift:X.shiftKey})}const V={mouseup:null,wheel:null,mousedrag:null,mousemove:null},J={mouseup:X=>(G(X),X.buttons||(this._document.removeEventListener("mouseup",V.mouseup),V.mousedrag&&this._document.removeEventListener("mousemove",V.mousedrag)),this.cancel(X)),wheel:X=>(G(X),this.cancel(X,!0)),mousedrag:X=>{X.buttons&&G(X)},mousemove:X=>{X.buttons||G(X)}};this.register(this.coreMouseService.onProtocolChange(X=>{X?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(X)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&X?V.mousemove||(L.addEventListener("mousemove",J.mousemove),V.mousemove=J.mousemove):(L.removeEventListener("mousemove",V.mousemove),V.mousemove=null),16&X?V.wheel||(L.addEventListener("wheel",J.wheel,{passive:!1}),V.wheel=J.wheel):(L.removeEventListener("wheel",V.wheel),V.wheel=null),2&X?V.mouseup||(V.mouseup=J.mouseup):(this._document.removeEventListener("mouseup",V.mouseup),V.mouseup=null),4&X?V.mousedrag||(V.mousedrag=J.mousedrag):(this._document.removeEventListener("mousemove",V.mousedrag),V.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,v.addDisposableDomListener)(L,"mousedown",X=>{if(X.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(X))return G(X),V.mouseup&&this._document.addEventListener("mouseup",V.mouseup),V.mousedrag&&this._document.addEventListener("mousemove",V.mousedrag),this.cancel(X)})),this.register((0,v.addDisposableDomListener)(L,"wheel",X=>{if(!V.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(X)===!1)return!1;if(!this.buffer.hasScrollback){const ce=this.viewport.getLinesScrolled(X);if(ce===0)return;const xe=U.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(X.deltaY<0?"A":"B");let we="";for(let Be=0;Be<Math.abs(ce);Be++)we+=xe;return this.coreService.triggerDataEvent(we,!0),this.cancel(X,!0)}return this.viewport.handleWheel(X)?this.cancel(X):void 0}},{passive:!1})),this.register((0,v.addDisposableDomListener)(L,"touchstart",X=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(X),this.cancel(X)},{passive:!0})),this.register((0,v.addDisposableDomListener)(L,"touchmove",X=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(X)?void 0:this.cancel(X)},{passive:!1}))}refresh(W,L){var G;(G=this._renderService)==null||G.refreshRows(W,L)}updateCursorStyle(W){var L;(L=this._selectionService)!=null&&L.shouldColumnSelect(W)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(W,L,G=0){var V;G===1?(super.scrollLines(W,L,G),this.refresh(0,this.rows-1)):(V=this.viewport)==null||V.scrollLines(W)}paste(W){(0,f.paste)(W,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(W){this._customKeyEventHandler=W}attachCustomWheelEventHandler(W){this._customWheelEventHandler=W}registerLinkProvider(W){return this._linkProviderService.registerLinkProvider(W)}registerCharacterJoiner(W){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const L=this._characterJoinerService.register(W);return this.refresh(0,this.rows-1),L}deregisterCharacterJoiner(W){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(W)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(W){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+W)}registerDecoration(W){return this._decorationService.registerDecoration(W)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(W,L,G){this._selectionService.setSelection(W,L,G)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var W;(W=this._selectionService)==null||W.clearSelection()}selectAll(){var W;(W=this._selectionService)==null||W.selectAll()}selectLines(W,L){var G;(G=this._selectionService)==null||G.selectLines(W,L)}_keyDown(W){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(W)===!1)return!1;const L=this.browser.isMac&&this.options.macOptionIsMeta&&W.altKey;if(!L&&!this._compositionHelper.keydown(W))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;L||W.key!=="Dead"&&W.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const G=(0,$.evaluateKeyboardEvent)(W,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(W),G.type===3||G.type===2){const V=this.rows-1;return this.scrollLines(G.type===2?-V:V),this.cancel(W,!0)}return G.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,W)||(G.cancel&&this.cancel(W,!0),!G.key||!!(W.key&&!W.ctrlKey&&!W.altKey&&!W.metaKey&&W.key.length===1&&W.key.charCodeAt(0)>=65&&W.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(G.key!==U.C0.ETX&&G.key!==U.C0.CR||(this.textarea.value=""),this._onKey.fire({key:G.key,domEvent:W}),this._showCursor(),this.coreService.triggerDataEvent(G.key,!0),!this.optionsService.rawOptions.screenReaderMode||W.altKey||W.ctrlKey?this.cancel(W,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(W,L){const G=W.isMac&&!this.options.macOptionIsMeta&&L.altKey&&!L.ctrlKey&&!L.metaKey||W.isWindows&&L.altKey&&L.ctrlKey&&!L.metaKey||W.isWindows&&L.getModifierState("AltGraph");return L.type==="keypress"?G:G&&(!L.keyCode||L.keyCode>47)}_keyUp(W){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(W)===!1||(function(L){return L.keyCode===16||L.keyCode===17||L.keyCode===18}(W)||this.focus(),this.updateCursorStyle(W),this._keyPressHandled=!1)}_keyPress(W){let L;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(W)===!1)return!1;if(this.cancel(W),W.charCode)L=W.charCode;else if(W.which===null||W.which===void 0)L=W.keyCode;else{if(W.which===0||W.charCode===0)return!1;L=W.which}return!(!L||(W.altKey||W.ctrlKey||W.metaKey)&&!this._isThirdLevelShift(this.browser,W)||(L=String.fromCharCode(L),this._onKey.fire({key:L,domEvent:W}),this._showCursor(),this.coreService.triggerDataEvent(L,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(W){if(W.data&&W.inputType==="insertText"&&(!W.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const L=W.data;return this.coreService.triggerDataEvent(L,!0),this.cancel(W),!0}return!1}resize(W,L){W!==this.cols||L!==this.rows?super.resize(W,L):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(W,L){var G,V;(G=this._charSizeService)==null||G.measure(),(V=this.viewport)==null||V.syncScrollArea(!0)}clear(){var W;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let L=1;L<this.rows;L++)this.buffer.lines.push(this.buffer.getBlankLine(B.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(W=this.viewport)==null||W.reset(),this.refresh(0,this.rows-1)}}reset(){var L,G;this.options.rows=this.rows,this.options.cols=this.cols;const W=this._customKeyEventHandler;this._setup(),super.reset(),(L=this._selectionService)==null||L.reset(),this._decorationService.reset(),(G=this.viewport)==null||G.reset(),this._customKeyEventHandler=W,this.refresh(0,this.rows-1)}clearTextureAtlas(){var W;(W=this._renderService)==null||W.clearTextureAtlas()}_reportFocus(){var W;(W=this.element)!=null&&W.classList.contains("focus")?this.coreService.triggerDataEvent(U.C0.ESC+"[I"):this.coreService.triggerDataEvent(U.C0.ESC+"[O")}_reportWindowsOptions(W){if(this._renderService)switch(W){case M.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const L=this._renderService.dimensions.css.canvas.width.toFixed(0),G=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${U.C0.ESC}[4;${G};${L}t`);break;case M.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const V=this._renderService.dimensions.css.cell.width.toFixed(0),J=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${U.C0.ESC}[6;${J};${V}t`)}}cancel(W,L){if(this.options.cancelEvents||L)return W.preventDefault(),W.stopPropagation(),!1}}o.Terminal=Y},9924:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TimeBasedDebouncer=void 0,o.TimeBasedDebouncer=class{constructor(l,f=1e3){this._renderCallback=l,this._debounceThresholdMS=f,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(l,f,v){this._rowCount=v,l=l!==void 0?l:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,l):l,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f;const h=Date.now();if(h-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=h,this._innerRefresh();else if(!this._additionalRefreshRequested){const g=h-this._lastRefreshMs,y=this._debounceThresholdMS-g;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},y)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const l=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(l,f)}}},1680:function(c,o,l){var f=this&&this.__decorate||function(d,u,p,b){var S,C=arguments.length,k=C<3?u:b===null?b=Object.getOwnPropertyDescriptor(u,p):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(d,u,p,b);else for(var w=d.length-1;w>=0;w--)(S=d[w])&&(k=(C<3?S(k):C>3?S(u,p,k):S(u,p))||k);return C>3&&k&&Object.defineProperty(u,p,k),k},v=this&&this.__param||function(d,u){return function(p,b){u(p,b,d)}};Object.defineProperty(o,"__esModule",{value:!0}),o.Viewport=void 0;const h=l(3656),g=l(4725),y=l(8460),_=l(844),x=l(2585);let m=o.Viewport=class extends _.Disposable{constructor(d,u,p,b,S,C,k,w){super(),this._viewportElement=d,this._scrollArea=u,this._bufferService=p,this._optionsService=b,this._charSizeService=S,this._renderService=C,this._coreBrowserService=k,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new y.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,h.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(N=>this._activeBuffer=N.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(N=>this._renderDimensions=N)),this._handleThemeChange(w.colors),this.register(w.onChangeColors(N=>this._handleThemeChange(N))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(d){this._viewportElement.style.backgroundColor=d.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(d){if(d)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const u=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==u&&(this._lastRecordedBufferHeight=u,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const d=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==d&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=d),this._refreshAnimationFrame=null}syncScrollArea(d=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(d);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(d)}_handleScroll(d){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const u=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:u,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const d=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(d*(this._smoothScrollState.target-this._smoothScrollState.origin)),d<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(d,u){const p=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(u<0&&this._viewportElement.scrollTop!==0||u>0&&p<this._lastRecordedBufferHeight)||(d.cancelable&&d.preventDefault(),!1)}handleWheel(d){const u=this._getPixelsScrolled(d);return u!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+u:this._smoothScrollState.target+=u,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=u,this._bubbleScroll(d,u))}scrollLines(d){if(d!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const u=d*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+u,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:d,suppressScrollEvent:!1})}_getPixelsScrolled(d){if(d.deltaY===0||d.shiftKey)return 0;let u=this._applyScrollModifier(d.deltaY,d);return d.deltaMode===WheelEvent.DOM_DELTA_LINE?u*=this._currentRowHeight:d.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(u*=this._currentRowHeight*this._bufferService.rows),u}getBufferElements(d,u){var w;let p,b="";const S=[],C=u??this._bufferService.buffer.lines.length,k=this._bufferService.buffer.lines;for(let N=d;N<C;N++){const D=k.get(N);if(!D)continue;const T=(w=k.get(N+1))==null?void 0:w.isWrapped;if(b+=D.translateToString(!T),!T||N===k.length-1){const I=document.createElement("div");I.textContent=b,S.push(I),b.length>0&&(p=I),b=""}}return{bufferElements:S,cursorElement:p}}getLinesScrolled(d){if(d.deltaY===0||d.shiftKey)return 0;let u=this._applyScrollModifier(d.deltaY,d);return d.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(u/=this._currentRowHeight+0,this._wheelPartialScroll+=u,u=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):d.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(u*=this._bufferService.rows),u}_applyScrollModifier(d,u){const p=this._optionsService.rawOptions.fastScrollModifier;return p==="alt"&&u.altKey||p==="ctrl"&&u.ctrlKey||p==="shift"&&u.shiftKey?d*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:d*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(d){this._lastTouchY=d.touches[0].pageY}handleTouchMove(d){const u=this._lastTouchY-d.touches[0].pageY;return this._lastTouchY=d.touches[0].pageY,u!==0&&(this._viewportElement.scrollTop+=u,this._bubbleScroll(d,u))}};o.Viewport=m=f([v(2,x.IBufferService),v(3,x.IOptionsService),v(4,g.ICharSizeService),v(5,g.IRenderService),v(6,g.ICoreBrowserService),v(7,g.IThemeService)],m)},3107:function(c,o,l){var f=this&&this.__decorate||function(x,m,d,u){var p,b=arguments.length,S=b<3?m:u===null?u=Object.getOwnPropertyDescriptor(m,d):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(x,m,d,u);else for(var C=x.length-1;C>=0;C--)(p=x[C])&&(S=(b<3?p(S):b>3?p(m,d,S):p(m,d))||S);return b>3&&S&&Object.defineProperty(m,d,S),S},v=this&&this.__param||function(x,m){return function(d,u){m(d,u,x)}};Object.defineProperty(o,"__esModule",{value:!0}),o.BufferDecorationRenderer=void 0;const h=l(4725),g=l(844),y=l(2585);let _=o.BufferDecorationRenderer=class extends g.Disposable{constructor(x,m,d,u,p){super(),this._screenElement=x,this._bufferService=m,this._coreBrowserService=d,this._decorationService=u,this._renderService=p,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(b=>this._removeDecoration(b))),this.register((0,g.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const x of this._decorationService.decorations)this._renderDecoration(x);this._dimensionsChanged=!1}_renderDecoration(x){this._refreshStyle(x),this._dimensionsChanged&&this._refreshXPosition(x)}_createElement(x){var u;const m=this._coreBrowserService.mainDocument.createElement("div");m.classList.add("xterm-decoration"),m.classList.toggle("xterm-decoration-top-layer",((u=x==null?void 0:x.options)==null?void 0:u.layer)==="top"),m.style.width=`${Math.round((x.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,m.style.height=(x.options.height||1)*this._renderService.dimensions.css.cell.height+"px",m.style.top=(x.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",m.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const d=x.options.x??0;return d&&d>this._bufferService.cols&&(m.style.display="none"),this._refreshXPosition(x,m),m}_refreshStyle(x){const m=x.marker.line-this._bufferService.buffers.active.ydisp;if(m<0||m>=this._bufferService.rows)x.element&&(x.element.style.display="none",x.onRenderEmitter.fire(x.element));else{let d=this._decorationElements.get(x);d||(d=this._createElement(x),x.element=d,this._decorationElements.set(x,d),this._container.appendChild(d),x.onDispose(()=>{this._decorationElements.delete(x),d.remove()})),d.style.top=m*this._renderService.dimensions.css.cell.height+"px",d.style.display=this._altBufferIsActive?"none":"block",x.onRenderEmitter.fire(d)}}_refreshXPosition(x,m=x.element){if(!m)return;const d=x.options.x??0;(x.options.anchor||"left")==="right"?m.style.right=d?d*this._renderService.dimensions.css.cell.width+"px":"":m.style.left=d?d*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(x){var m;(m=this._decorationElements.get(x))==null||m.remove(),this._decorationElements.delete(x),x.dispose()}};o.BufferDecorationRenderer=_=f([v(1,y.IBufferService),v(2,h.ICoreBrowserService),v(3,y.IDecorationService),v(4,h.IRenderService)],_)},5871:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ColorZoneStore=void 0,o.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(l){if(l.options.overviewRulerOptions){for(const f of this._zones)if(f.color===l.options.overviewRulerOptions.color&&f.position===l.options.overviewRulerOptions.position){if(this._lineIntersectsZone(f,l.marker.line))return;if(this._lineAdjacentToZone(f,l.marker.line,l.options.overviewRulerOptions.position))return void this._addLineToZone(f,l.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=l.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=l.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=l.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=l.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:l.options.overviewRulerOptions.color,position:l.options.overviewRulerOptions.position,startBufferLine:l.marker.line,endBufferLine:l.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(l){this._linePadding=l}_lineIntersectsZone(l,f){return f>=l.startBufferLine&&f<=l.endBufferLine}_lineAdjacentToZone(l,f,v){return f>=l.startBufferLine-this._linePadding[v||"full"]&&f<=l.endBufferLine+this._linePadding[v||"full"]}_addLineToZone(l,f){l.startBufferLine=Math.min(l.startBufferLine,f),l.endBufferLine=Math.max(l.endBufferLine,f)}}},5744:function(c,o,l){var f=this&&this.__decorate||function(p,b,S,C){var k,w=arguments.length,N=w<3?b:C===null?C=Object.getOwnPropertyDescriptor(b,S):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(p,b,S,C);else for(var D=p.length-1;D>=0;D--)(k=p[D])&&(N=(w<3?k(N):w>3?k(b,S,N):k(b,S))||N);return w>3&&N&&Object.defineProperty(b,S,N),N},v=this&&this.__param||function(p,b){return function(S,C){b(S,C,p)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OverviewRulerRenderer=void 0;const h=l(5871),g=l(4725),y=l(844),_=l(2585),x={full:0,left:0,center:0,right:0},m={full:0,left:0,center:0,right:0},d={full:0,left:0,center:0,right:0};let u=o.OverviewRulerRenderer=class extends y.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(p,b,S,C,k,w,N){var T;super(),this._viewportElement=p,this._screenElement=b,this._bufferService=S,this._decorationService=C,this._renderService=k,this._optionsService=w,this._coreBrowserService=N,this._colorZoneStore=new h.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(T=this._viewportElement.parentElement)==null||T.insertBefore(this._canvas,this._viewportElement);const D=this._canvas.getContext("2d");if(!D)throw new Error("Ctx cannot be null");this._ctx=D,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,y.toDisposable)(()=>{var I;(I=this._canvas)==null||I.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const p=Math.floor(this._canvas.width/3),b=Math.ceil(this._canvas.width/3);m.full=this._canvas.width,m.left=p,m.center=b,m.right=p,this._refreshDrawHeightConstants(),d.full=0,d.left=0,d.center=m.left,d.right=m.left+m.center}_refreshDrawHeightConstants(){x.full=Math.round(2*this._coreBrowserService.dpr);const p=this._canvas.height/this._bufferService.buffer.lines.length,b=Math.round(Math.max(Math.min(p,12),6)*this._coreBrowserService.dpr);x.left=b,x.center=b,x.right=b}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*x.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*x.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*x.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*x.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const b of this._decorationService.decorations)this._colorZoneStore.addDecoration(b);this._ctx.lineWidth=1;const p=this._colorZoneStore.zones;for(const b of p)b.position!=="full"&&this._renderColorZone(b);for(const b of p)b.position==="full"&&this._renderColorZone(b);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(p){this._ctx.fillStyle=p.color,this._ctx.fillRect(d[p.position||"full"],Math.round((this._canvas.height-1)*(p.startBufferLine/this._bufferService.buffers.active.lines.length)-x[p.position||"full"]/2),m[p.position||"full"],Math.round((this._canvas.height-1)*((p.endBufferLine-p.startBufferLine)/this._bufferService.buffers.active.lines.length)+x[p.position||"full"]))}_queueRefresh(p,b){this._shouldUpdateDimensions=p||this._shouldUpdateDimensions,this._shouldUpdateAnchor=b||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};o.OverviewRulerRenderer=u=f([v(2,_.IBufferService),v(3,_.IDecorationService),v(4,g.IRenderService),v(5,_.IOptionsService),v(6,g.ICoreBrowserService)],u)},2950:function(c,o,l){var f=this&&this.__decorate||function(x,m,d,u){var p,b=arguments.length,S=b<3?m:u===null?u=Object.getOwnPropertyDescriptor(m,d):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(x,m,d,u);else for(var C=x.length-1;C>=0;C--)(p=x[C])&&(S=(b<3?p(S):b>3?p(m,d,S):p(m,d))||S);return b>3&&S&&Object.defineProperty(m,d,S),S},v=this&&this.__param||function(x,m){return function(d,u){m(d,u,x)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CompositionHelper=void 0;const h=l(4725),g=l(2585),y=l(2584);let _=o.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(x,m,d,u,p,b){this._textarea=x,this._compositionView=m,this._bufferService=d,this._optionsService=u,this._coreService=p,this._renderService=b,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(x){this._compositionView.textContent=x.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(x){if(this._isComposing||this._isSendingComposition){if(x.keyCode===229||x.keyCode===16||x.keyCode===17||x.keyCode===18)return!1;this._finalizeComposition(!1)}return x.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(x){if(this._compositionView.classList.remove("active"),this._isComposing=!1,x){const m={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let d;this._isSendingComposition=!1,m.start+=this._dataAlreadySent.length,d=this._isComposing?this._textarea.value.substring(m.start,m.end):this._textarea.value.substring(m.start),d.length>0&&this._coreService.triggerDataEvent(d,!0)}},0)}else{this._isSendingComposition=!1;const m=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(m,!0)}}_handleAnyTextareaChanges(){const x=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const m=this._textarea.value,d=m.replace(x,"");this._dataAlreadySent=d,m.length>x.length?this._coreService.triggerDataEvent(d,!0):m.length<x.length?this._coreService.triggerDataEvent(`${y.C0.DEL}`,!0):m.length===x.length&&m!==x&&this._coreService.triggerDataEvent(m,!0)}},0)}updateCompositionElements(x){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const m=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),d=this._renderService.dimensions.css.cell.height,u=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,p=m*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=p+"px",this._compositionView.style.top=u+"px",this._compositionView.style.height=d+"px",this._compositionView.style.lineHeight=d+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const b=this._compositionView.getBoundingClientRect();this._textarea.style.left=p+"px",this._textarea.style.top=u+"px",this._textarea.style.width=Math.max(b.width,1)+"px",this._textarea.style.height=Math.max(b.height,1)+"px",this._textarea.style.lineHeight=b.height+"px"}x||setTimeout(()=>this.updateCompositionElements(!0),0)}}};o.CompositionHelper=_=f([v(2,g.IBufferService),v(3,g.IOptionsService),v(4,g.ICoreService),v(5,h.IRenderService)],_)},9806:(c,o)=>{function l(f,v,h){const g=h.getBoundingClientRect(),y=f.getComputedStyle(h),_=parseInt(y.getPropertyValue("padding-left")),x=parseInt(y.getPropertyValue("padding-top"));return[v.clientX-g.left-_,v.clientY-g.top-x]}Object.defineProperty(o,"__esModule",{value:!0}),o.getCoords=o.getCoordsRelativeToElement=void 0,o.getCoordsRelativeToElement=l,o.getCoords=function(f,v,h,g,y,_,x,m,d){if(!_)return;const u=l(f,v,h);return u?(u[0]=Math.ceil((u[0]+(d?x/2:0))/x),u[1]=Math.ceil(u[1]/m),u[0]=Math.min(Math.max(u[0],1),g+(d?1:0)),u[1]=Math.min(Math.max(u[1],1),y),u):void 0}},9504:(c,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.moveToCellSequence=void 0;const f=l(2584);function v(m,d,u,p){const b=m-h(m,u),S=d-h(d,u),C=Math.abs(b-S)-function(k,w,N){let D=0;const T=k-h(k,N),I=w-h(w,N);for(let A=0;A<Math.abs(T-I);A++){const O=g(k,w)==="A"?-1:1,P=N.buffer.lines.get(T+O*A);P!=null&&P.isWrapped&&D++}return D}(m,d,u);return x(C,_(g(m,d),p))}function h(m,d){let u=0,p=d.buffer.lines.get(m),b=p==null?void 0:p.isWrapped;for(;b&&m>=0&&m<d.rows;)u++,p=d.buffer.lines.get(--m),b=p==null?void 0:p.isWrapped;return u}function g(m,d){return m>d?"A":"B"}function y(m,d,u,p,b,S){let C=m,k=d,w="";for(;C!==u||k!==p;)C+=b?1:-1,b&&C>S.cols-1?(w+=S.buffer.translateBufferLineToString(k,!1,m,C),C=0,m=0,k++):!b&&C<0&&(w+=S.buffer.translateBufferLineToString(k,!1,0,m+1),C=S.cols-1,m=C,k--);return w+S.buffer.translateBufferLineToString(k,!1,m,C)}function _(m,d){const u=d?"O":"[";return f.C0.ESC+u+m}function x(m,d){m=Math.floor(m);let u="";for(let p=0;p<m;p++)u+=d;return u}o.moveToCellSequence=function(m,d,u,p){const b=u.buffer.x,S=u.buffer.y;if(!u.buffer.hasScrollback)return function(w,N,D,T,I,A){return v(N,T,I,A).length===0?"":x(y(w,N,w,N-h(N,I),!1,I).length,_("D",A))}(b,S,0,d,u,p)+v(S,d,u,p)+function(w,N,D,T,I,A){let O;O=v(N,T,I,A).length>0?T-h(T,I):N;const P=T,B=function(U,$,E,R,F,M){let z;return z=v(E,R,F,M).length>0?R-h(R,F):$,U<E&&z<=R||U>=E&&z<R?"C":"D"}(w,N,D,T,I,A);return x(y(w,O,D,P,B==="C",I).length,_(B,A))}(b,S,m,d,u,p);let C;if(S===d)return C=b>m?"D":"C",x(Math.abs(b-m),_(C,p));C=S>d?"D":"C";const k=Math.abs(S-d);return x(function(w,N){return N.cols-w}(S>d?m:b,u)+(k-1)*u.cols+1+((S>d?b:m)-1),_(C,p))}},1296:function(c,o,l){var f=this&&this.__decorate||function(A,O,P,B){var U,$=arguments.length,E=$<3?O:B===null?B=Object.getOwnPropertyDescriptor(O,P):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(A,O,P,B);else for(var R=A.length-1;R>=0;R--)(U=A[R])&&(E=($<3?U(E):$>3?U(O,P,E):U(O,P))||E);return $>3&&E&&Object.defineProperty(O,P,E),E},v=this&&this.__param||function(A,O){return function(P,B){O(P,B,A)}};Object.defineProperty(o,"__esModule",{value:!0}),o.DomRenderer=void 0;const h=l(3787),g=l(2550),y=l(2223),_=l(6171),x=l(6052),m=l(4725),d=l(8055),u=l(8460),p=l(844),b=l(2585),S="xterm-dom-renderer-owner-",C="xterm-rows",k="xterm-fg-",w="xterm-bg-",N="xterm-focus",D="xterm-selection";let T=1,I=o.DomRenderer=class extends p.Disposable{constructor(A,O,P,B,U,$,E,R,F,M,z,q,Y){super(),this._terminal=A,this._document=O,this._element=P,this._screenElement=B,this._viewportElement=U,this._helperContainer=$,this._linkifier2=E,this._charSizeService=F,this._optionsService=M,this._bufferService=z,this._coreBrowserService=q,this._themeService=Y,this._terminalClass=T++,this._rowElements=[],this._selectionRenderModel=(0,x.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new u.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(C),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(D),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,_.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(te=>this._injectCss(te))),this._injectCss(this._themeService.colors),this._rowFactory=R.createInstance(h.DomRendererRowFactory,document),this._element.classList.add(S+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(te=>this._handleLinkHover(te))),this.register(this._linkifier2.onHideLinkUnderline(te=>this._handleLinkLeave(te))),this.register((0,p.toDisposable)(()=>{this._element.classList.remove(S+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new g.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const A=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*A,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*A),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/A),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/A),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const P of this._rowElements)P.style.width=`${this.dimensions.css.canvas.width}px`,P.style.height=`${this.dimensions.css.cell.height}px`,P.style.lineHeight=`${this.dimensions.css.cell.height}px`,P.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const O=`${this._terminalSelector} .${C} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=O,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(A){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let O=`${this._terminalSelector} .${C} { color: ${A.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;O+=`${this._terminalSelector} .${C} .xterm-dim { color: ${d.color.multiplyOpacity(A.foreground,.5).css};}`,O+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const P=`blink_underline_${this._terminalClass}`,B=`blink_bar_${this._terminalClass}`,U=`blink_block_${this._terminalClass}`;O+=`@keyframes ${P} { 50% {  border-bottom-style: hidden; }}`,O+=`@keyframes ${B} { 50% {  box-shadow: none; }}`,O+=`@keyframes ${U} { 0% {  background-color: ${A.cursor.css};  color: ${A.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${A.cursor.css}; }}`,O+=`${this._terminalSelector} .${C}.${N} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${P} 1s step-end infinite;}${this._terminalSelector} .${C}.${N} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${B} 1s step-end infinite;}${this._terminalSelector} .${C}.${N} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${U} 1s step-end infinite;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-block { background-color: ${A.cursor.css}; color: ${A.cursorAccent.css};}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${A.cursor.css} !important; color: ${A.cursorAccent.css} !important;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${A.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${A.cursor.css} inset;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${A.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,O+=`${this._terminalSelector} .${D} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${D} div { position: absolute; background-color: ${A.selectionBackgroundOpaque.css};}${this._terminalSelector} .${D} div { position: absolute; background-color: ${A.selectionInactiveBackgroundOpaque.css};}`;for(const[$,E]of A.ansi.entries())O+=`${this._terminalSelector} .${k}${$} { color: ${E.css}; }${this._terminalSelector} .${k}${$}.xterm-dim { color: ${d.color.multiplyOpacity(E,.5).css}; }${this._terminalSelector} .${w}${$} { background-color: ${E.css}; }`;O+=`${this._terminalSelector} .${k}${y.INVERTED_DEFAULT_COLOR} { color: ${d.color.opaque(A.background).css}; }${this._terminalSelector} .${k}${y.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${d.color.multiplyOpacity(d.color.opaque(A.background),.5).css}; }${this._terminalSelector} .${w}${y.INVERTED_DEFAULT_COLOR} { background-color: ${A.foreground.css}; }`,this._themeStyleElement.textContent=O}_setDefaultSpacing(){const A=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${A}px`,this._rowFactory.defaultSpacing=A}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(A,O){for(let P=this._rowElements.length;P<=O;P++){const B=this._document.createElement("div");this._rowContainer.appendChild(B),this._rowElements.push(B)}for(;this._rowElements.length>O;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(A,O){this._refreshRowElements(A,O),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(N),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(N),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(A,O,P){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(A,O,P),this.renderRows(0,this._bufferService.rows-1),!A||!O)return;this._selectionRenderModel.update(this._terminal,A,O,P);const B=this._selectionRenderModel.viewportStartRow,U=this._selectionRenderModel.viewportEndRow,$=this._selectionRenderModel.viewportCappedStartRow,E=this._selectionRenderModel.viewportCappedEndRow;if($>=this._bufferService.rows||E<0)return;const R=this._document.createDocumentFragment();if(P){const F=A[0]>O[0];R.appendChild(this._createSelectionElement($,F?O[0]:A[0],F?A[0]:O[0],E-$+1))}else{const F=B===$?A[0]:0,M=$===U?O[0]:this._bufferService.cols;R.appendChild(this._createSelectionElement($,F,M));const z=E-$-1;if(R.appendChild(this._createSelectionElement($+1,0,this._bufferService.cols,z)),$!==E){const q=U===E?O[0]:this._bufferService.cols;R.appendChild(this._createSelectionElement(E,0,q))}}this._selectionContainer.appendChild(R)}_createSelectionElement(A,O,P,B=1){const U=this._document.createElement("div"),$=O*this.dimensions.css.cell.width;let E=this.dimensions.css.cell.width*(P-O);return $+E>this.dimensions.css.canvas.width&&(E=this.dimensions.css.canvas.width-$),U.style.height=B*this.dimensions.css.cell.height+"px",U.style.top=A*this.dimensions.css.cell.height+"px",U.style.left=`${$}px`,U.style.width=`${E}px`,U}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const A of this._rowElements)A.replaceChildren()}renderRows(A,O){const P=this._bufferService.buffer,B=P.ybase+P.y,U=Math.min(P.x,this._bufferService.cols-1),$=this._optionsService.rawOptions.cursorBlink,E=this._optionsService.rawOptions.cursorStyle,R=this._optionsService.rawOptions.cursorInactiveStyle;for(let F=A;F<=O;F++){const M=F+P.ydisp,z=this._rowElements[F],q=P.lines.get(M);if(!z||!q)break;z.replaceChildren(...this._rowFactory.createRow(q,M,M===B,E,R,U,$,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${S}${this._terminalClass}`}_handleLinkHover(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!0)}_handleLinkLeave(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!1)}_setCellUnderline(A,O,P,B,U,$){P<0&&(A=0),B<0&&(O=0);const E=this._bufferService.rows-1;P=Math.max(Math.min(P,E),0),B=Math.max(Math.min(B,E),0),U=Math.min(U,this._bufferService.cols);const R=this._bufferService.buffer,F=R.ybase+R.y,M=Math.min(R.x,U-1),z=this._optionsService.rawOptions.cursorBlink,q=this._optionsService.rawOptions.cursorStyle,Y=this._optionsService.rawOptions.cursorInactiveStyle;for(let te=P;te<=B;++te){const W=te+R.ydisp,L=this._rowElements[te],G=R.lines.get(W);if(!L||!G)break;L.replaceChildren(...this._rowFactory.createRow(G,W,W===F,q,Y,M,z,this.dimensions.css.cell.width,this._widthCache,$?te===P?A:0:-1,$?(te===B?O:U)-1:-1))}}};o.DomRenderer=I=f([v(7,b.IInstantiationService),v(8,m.ICharSizeService),v(9,b.IOptionsService),v(10,b.IBufferService),v(11,m.ICoreBrowserService),v(12,m.IThemeService)],I)},3787:function(c,o,l){var f=this&&this.__decorate||function(C,k,w,N){var D,T=arguments.length,I=T<3?k:N===null?N=Object.getOwnPropertyDescriptor(k,w):N;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(C,k,w,N);else for(var A=C.length-1;A>=0;A--)(D=C[A])&&(I=(T<3?D(I):T>3?D(k,w,I):D(k,w))||I);return T>3&&I&&Object.defineProperty(k,w,I),I},v=this&&this.__param||function(C,k){return function(w,N){k(w,N,C)}};Object.defineProperty(o,"__esModule",{value:!0}),o.DomRendererRowFactory=void 0;const h=l(2223),g=l(643),y=l(511),_=l(2585),x=l(8055),m=l(4725),d=l(4269),u=l(6171),p=l(3734);let b=o.DomRendererRowFactory=class{constructor(C,k,w,N,D,T,I){this._document=C,this._characterJoinerService=k,this._optionsService=w,this._coreBrowserService=N,this._coreService=D,this._decorationService=T,this._themeService=I,this._workCell=new y.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(C,k,w){this._selectionStart=C,this._selectionEnd=k,this._columnSelectMode=w}createRow(C,k,w,N,D,T,I,A,O,P,B){const U=[],$=this._characterJoinerService.getJoinedCharacters(k),E=this._themeService.colors;let R,F=C.getNoBgTrimmedLength();w&&F<T+1&&(F=T+1);let M=0,z="",q=0,Y=0,te=0,W=!1,L=0,G=!1,V=0;const J=[],X=P!==-1&&B!==-1;for(let ce=0;ce<F;ce++){C.loadCell(ce,this._workCell);let xe=this._workCell.getWidth();if(xe===0)continue;let we=!1,Be=ce,le=this._workCell;if($.length>0&&ce===$[0][0]){we=!0;const je=$.shift();le=new d.JoinedCellData(this._workCell,C.translateToString(!0,je[0],je[1]),je[1]-je[0]),Be=je[1]-1,xe=le.getWidth()}const ks=this._isCellInSelection(ce,k),mr=w&&ce===T,js=X&&ce>=P&&ce<=B;let zc=!1;this._decorationService.forEachDecorationAtCell(ce,k,void 0,je=>{zc=!0});let ca=le.getChars()||g.WHITESPACE_CELL_CHAR;if(ca===" "&&(le.isUnderline()||le.isOverline())&&(ca=""),V=xe*A-O.get(ca,le.isBold(),le.isItalic()),R){if(M&&(ks&&G||!ks&&!G&&le.bg===q)&&(ks&&G&&E.selectionForeground||le.fg===Y)&&le.extended.ext===te&&js===W&&V===L&&!mr&&!we&&!zc){le.isInvisible()?z+=g.WHITESPACE_CELL_CHAR:z+=ca,M++;continue}M&&(R.textContent=z),R=this._document.createElement("span"),M=0,z=""}else R=this._document.createElement("span");if(q=le.bg,Y=le.fg,te=le.extended.ext,W=js,L=V,G=ks,we&&T>=ce&&T<=Be&&(T=ce),!this._coreService.isCursorHidden&&mr&&this._coreService.isCursorInitialized){if(J.push("xterm-cursor"),this._coreBrowserService.isFocused)I&&J.push("xterm-cursor-blink"),J.push(N==="bar"?"xterm-cursor-bar":N==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(D)switch(D){case"outline":J.push("xterm-cursor-outline");break;case"block":J.push("xterm-cursor-block");break;case"bar":J.push("xterm-cursor-bar");break;case"underline":J.push("xterm-cursor-underline")}}if(le.isBold()&&J.push("xterm-bold"),le.isItalic()&&J.push("xterm-italic"),le.isDim()&&J.push("xterm-dim"),z=le.isInvisible()?g.WHITESPACE_CELL_CHAR:le.getChars()||g.WHITESPACE_CELL_CHAR,le.isUnderline()&&(J.push(`xterm-underline-${le.extended.underlineStyle}`),z===" "&&(z=""),!le.isUnderlineColorDefault()))if(le.isUnderlineColorRGB())R.style.textDecorationColor=`rgb(${p.AttributeData.toColorRGB(le.getUnderlineColor()).join(",")})`;else{let je=le.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&le.isBold()&&je<8&&(je+=8),R.style.textDecorationColor=E.ansi[je].css}le.isOverline()&&(J.push("xterm-overline"),z===" "&&(z="")),le.isStrikethrough()&&J.push("xterm-strikethrough"),js&&(R.style.textDecoration="underline");let Et=le.getFgColor(),ui=le.getFgColorMode(),sr=le.getBgColor(),hi=le.getBgColorMode();const Vc=!!le.isInverse();if(Vc){const je=Et;Et=sr,sr=je;const Bb=ui;ui=hi,hi=Bb}let Pr,da,Rr,fi=!1;switch(this._decorationService.forEachDecorationAtCell(ce,k,void 0,je=>{je.options.layer!=="top"&&fi||(je.backgroundColorRGB&&(hi=50331648,sr=je.backgroundColorRGB.rgba>>8&16777215,Pr=je.backgroundColorRGB),je.foregroundColorRGB&&(ui=50331648,Et=je.foregroundColorRGB.rgba>>8&16777215,da=je.foregroundColorRGB),fi=je.options.layer==="top")}),!fi&&ks&&(Pr=this._coreBrowserService.isFocused?E.selectionBackgroundOpaque:E.selectionInactiveBackgroundOpaque,sr=Pr.rgba>>8&16777215,hi=50331648,fi=!0,E.selectionForeground&&(ui=50331648,Et=E.selectionForeground.rgba>>8&16777215,da=E.selectionForeground)),fi&&J.push("xterm-decoration-top"),hi){case 16777216:case 33554432:Rr=E.ansi[sr],J.push(`xterm-bg-${sr}`);break;case 50331648:Rr=x.channels.toColor(sr>>16,sr>>8&255,255&sr),this._addStyle(R,`background-color:#${S((sr>>>0).toString(16),"0",6)}`);break;default:Vc?(Rr=E.foreground,J.push(`xterm-bg-${h.INVERTED_DEFAULT_COLOR}`)):Rr=E.background}switch(Pr||le.isDim()&&(Pr=x.color.multiplyOpacity(Rr,.5)),ui){case 16777216:case 33554432:le.isBold()&&Et<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Et+=8),this._applyMinimumContrast(R,Rr,E.ansi[Et],le,Pr,void 0)||J.push(`xterm-fg-${Et}`);break;case 50331648:const je=x.channels.toColor(Et>>16&255,Et>>8&255,255&Et);this._applyMinimumContrast(R,Rr,je,le,Pr,da)||this._addStyle(R,`color:#${S(Et.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(R,Rr,E.foreground,le,Pr,da)||Vc&&J.push(`xterm-fg-${h.INVERTED_DEFAULT_COLOR}`)}J.length&&(R.className=J.join(" "),J.length=0),mr||we||zc?R.textContent=z:M++,V!==this.defaultSpacing&&(R.style.letterSpacing=`${V}px`),U.push(R),ce=Be}return R&&M&&(R.textContent=z),U}_applyMinimumContrast(C,k,w,N,D,T){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,u.treatGlyphAsBackgroundColor)(N.getCode()))return!1;const I=this._getContrastCache(N);let A;if(D||T||(A=I.getColor(k.rgba,w.rgba)),A===void 0){const O=this._optionsService.rawOptions.minimumContrastRatio/(N.isDim()?2:1);A=x.color.ensureContrastRatio(D||k,T||w,O),I.setColor((D||k).rgba,(T||w).rgba,A??null)}return!!A&&(this._addStyle(C,`color:${A.css}`),!0)}_getContrastCache(C){return C.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(C,k){C.setAttribute("style",`${C.getAttribute("style")||""}${k};`)}_isCellInSelection(C,k){const w=this._selectionStart,N=this._selectionEnd;return!(!w||!N)&&(this._columnSelectMode?w[0]<=N[0]?C>=w[0]&&k>=w[1]&&C<N[0]&&k<=N[1]:C<w[0]&&k>=w[1]&&C>=N[0]&&k<=N[1]:k>w[1]&&k<N[1]||w[1]===N[1]&&k===w[1]&&C>=w[0]&&C<N[0]||w[1]<N[1]&&k===N[1]&&C<N[0]||w[1]<N[1]&&k===w[1]&&C>=w[0])}};function S(C,k,w){for(;C.length<w;)C=k+C;return C}o.DomRendererRowFactory=b=f([v(1,m.ICharacterJoinerService),v(2,_.IOptionsService),v(3,m.ICoreBrowserService),v(4,_.ICoreService),v(5,_.IDecorationService),v(6,m.IThemeService)],b)},2550:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WidthCache=void 0,o.WidthCache=class{constructor(l,f){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=l.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const v=l.createElement("span");v.classList.add("xterm-char-measure-element");const h=l.createElement("span");h.classList.add("xterm-char-measure-element"),h.style.fontWeight="bold";const g=l.createElement("span");g.classList.add("xterm-char-measure-element"),g.style.fontStyle="italic";const y=l.createElement("span");y.classList.add("xterm-char-measure-element"),y.style.fontWeight="bold",y.style.fontStyle="italic",this._measureElements=[v,h,g,y],this._container.appendChild(v),this._container.appendChild(h),this._container.appendChild(g),this._container.appendChild(y),f.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(l,f,v,h){l===this._font&&f===this._fontSize&&v===this._weight&&h===this._weightBold||(this._font=l,this._fontSize=f,this._weight=v,this._weightBold=h,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${v}`,this._measureElements[1].style.fontWeight=`${h}`,this._measureElements[2].style.fontWeight=`${v}`,this._measureElements[3].style.fontWeight=`${h}`,this.clear())}get(l,f,v){let h=0;if(!f&&!v&&l.length===1&&(h=l.charCodeAt(0))<256){if(this._flat[h]!==-9999)return this._flat[h];const _=this._measure(l,0);return _>0&&(this._flat[h]=_),_}let g=l;f&&(g+="B"),v&&(g+="I");let y=this._holey.get(g);if(y===void 0){let _=0;f&&(_|=1),v&&(_|=2),y=this._measure(l,_),y>0&&this._holey.set(g,y)}return y}_measure(l,f){const v=this._measureElements[f];return v.textContent=l.repeat(32),v.offsetWidth/32}}},2223:(c,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TEXT_BASELINE=o.DIM_OPACITY=o.INVERTED_DEFAULT_COLOR=void 0;const f=l(6114);o.INVERTED_DEFAULT_COLOR=257,o.DIM_OPACITY=.5,o.TEXT_BASELINE=f.isFirefox||f.isLegacyEdge?"bottom":"ideographic"},6171:(c,o)=>{function l(v){return 57508<=v&&v<=57558}function f(v){return v>=128512&&v<=128591||v>=127744&&v<=128511||v>=128640&&v<=128767||v>=9728&&v<=9983||v>=9984&&v<=10175||v>=65024&&v<=65039||v>=129280&&v<=129535||v>=127462&&v<=127487}Object.defineProperty(o,"__esModule",{value:!0}),o.computeNextVariantOffset=o.createRenderDimensions=o.treatGlyphAsBackgroundColor=o.allowRescaling=o.isEmoji=o.isRestrictedPowerlineGlyph=o.isPowerlineGlyph=o.throwIfFalsy=void 0,o.throwIfFalsy=function(v){if(!v)throw new Error("value must not be falsy");return v},o.isPowerlineGlyph=l,o.isRestrictedPowerlineGlyph=function(v){return 57520<=v&&v<=57527},o.isEmoji=f,o.allowRescaling=function(v,h,g,y){return h===1&&g>Math.ceil(1.5*y)&&v!==void 0&&v>255&&!f(v)&&!l(v)&&!function(_){return 57344<=_&&_<=63743}(v)},o.treatGlyphAsBackgroundColor=function(v){return l(v)||function(h){return 9472<=h&&h<=9631}(v)},o.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},o.computeNextVariantOffset=function(v,h,g=0){return(v-(2*Math.round(h)-g))%(2*Math.round(h))}},6052:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createSelectionRenderModel=void 0;class l{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(v,h,g,y=!1){if(this.selectionStart=h,this.selectionEnd=g,!h||!g||h[0]===g[0]&&h[1]===g[1])return void this.clear();const _=v.buffers.active.ydisp,x=h[1]-_,m=g[1]-_,d=Math.max(x,0),u=Math.min(m,v.rows-1);d>=v.rows||u<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=y,this.viewportStartRow=x,this.viewportEndRow=m,this.viewportCappedStartRow=d,this.viewportCappedEndRow=u,this.startCol=h[0],this.endCol=g[0])}isCellSelected(v,h,g){return!!this.hasSelection&&(g-=v.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?h>=this.startCol&&g>=this.viewportCappedStartRow&&h<this.endCol&&g<=this.viewportCappedEndRow:h<this.startCol&&g>=this.viewportCappedStartRow&&h>=this.endCol&&g<=this.viewportCappedEndRow:g>this.viewportStartRow&&g<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&g===this.viewportStartRow&&h>=this.startCol&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&g===this.viewportEndRow&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&g===this.viewportStartRow&&h>=this.startCol)}}o.createSelectionRenderModel=function(){return new l}},456:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SelectionModel=void 0,o.SelectionModel=class{constructor(l){this._bufferService=l,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const l=this.selectionStart[0]+this.selectionStartLength;return l>this._bufferService.cols?l%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)-1]:[l%this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)]:[l,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const l=this.selectionStart[0]+this.selectionStartLength;return l>this._bufferService.cols?[l%this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)]:[Math.max(l,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const l=this.selectionStart,f=this.selectionEnd;return!(!l||!f)&&(l[1]>f[1]||l[1]===f[1]&&l[0]>f[0])}handleTrim(l){return this.selectionStart&&(this.selectionStart[1]-=l),this.selectionEnd&&(this.selectionEnd[1]-=l),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(c,o,l){var f=this&&this.__decorate||function(u,p,b,S){var C,k=arguments.length,w=k<3?p:S===null?S=Object.getOwnPropertyDescriptor(p,b):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(u,p,b,S);else for(var N=u.length-1;N>=0;N--)(C=u[N])&&(w=(k<3?C(w):k>3?C(p,b,w):C(p,b))||w);return k>3&&w&&Object.defineProperty(p,b,w),w},v=this&&this.__param||function(u,p){return function(b,S){p(b,S,u)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CharSizeService=void 0;const h=l(2585),g=l(8460),y=l(844);let _=o.CharSizeService=class extends y.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(u,p,b){super(),this._optionsService=b,this.width=0,this.height=0,this._onCharSizeChange=this.register(new g.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new d(this._optionsService))}catch{this._measureStrategy=this.register(new m(u,p,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const u=this._measureStrategy.measure();u.width===this.width&&u.height===this.height||(this.width=u.width,this.height=u.height,this._onCharSizeChange.fire())}};o.CharSizeService=_=f([v(2,h.IOptionsService)],_);class x extends y.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(p,b){p!==void 0&&p>0&&b!==void 0&&b>0&&(this._result.width=p,this._result.height=b)}}class m extends x{constructor(p,b,S){super(),this._document=p,this._parentElement=b,this._optionsService=S,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class d extends x{constructor(p){super(),this._optionsService=p,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const b=this._ctx.measureText("W");if(!("width"in b&&"fontBoundingBoxAscent"in b&&"fontBoundingBoxDescent"in b))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const p=this._ctx.measureText("W");return this._validateAndSet(p.width,p.fontBoundingBoxAscent+p.fontBoundingBoxDescent),this._result}}},4269:function(c,o,l){var f=this&&this.__decorate||function(d,u,p,b){var S,C=arguments.length,k=C<3?u:b===null?b=Object.getOwnPropertyDescriptor(u,p):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(d,u,p,b);else for(var w=d.length-1;w>=0;w--)(S=d[w])&&(k=(C<3?S(k):C>3?S(u,p,k):S(u,p))||k);return C>3&&k&&Object.defineProperty(u,p,k),k},v=this&&this.__param||function(d,u){return function(p,b){u(p,b,d)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CharacterJoinerService=o.JoinedCellData=void 0;const h=l(3734),g=l(643),y=l(511),_=l(2585);class x extends h.AttributeData{constructor(u,p,b){super(),this.content=0,this.combinedData="",this.fg=u.fg,this.bg=u.bg,this.combinedData=p,this._width=b}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(u){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}o.JoinedCellData=x;let m=o.CharacterJoinerService=class sy{constructor(u){this._bufferService=u,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new y.CellData}register(u){const p={id:this._nextCharacterJoinerId++,handler:u};return this._characterJoiners.push(p),p.id}deregister(u){for(let p=0;p<this._characterJoiners.length;p++)if(this._characterJoiners[p].id===u)return this._characterJoiners.splice(p,1),!0;return!1}getJoinedCharacters(u){if(this._characterJoiners.length===0)return[];const p=this._bufferService.buffer.lines.get(u);if(!p||p.length===0)return[];const b=[],S=p.translateToString(!0);let C=0,k=0,w=0,N=p.getFg(0),D=p.getBg(0);for(let T=0;T<p.getTrimmedLength();T++)if(p.loadCell(T,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==N||this._workCell.bg!==D){if(T-C>1){const I=this._getJoinedRanges(S,w,k,p,C);for(let A=0;A<I.length;A++)b.push(I[A])}C=T,w=k,N=this._workCell.fg,D=this._workCell.bg}k+=this._workCell.getChars().length||g.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-C>1){const T=this._getJoinedRanges(S,w,k,p,C);for(let I=0;I<T.length;I++)b.push(T[I])}return b}_getJoinedRanges(u,p,b,S,C){const k=u.substring(p,b);let w=[];try{w=this._characterJoiners[0].handler(k)}catch(N){console.error(N)}for(let N=1;N<this._characterJoiners.length;N++)try{const D=this._characterJoiners[N].handler(k);for(let T=0;T<D.length;T++)sy._mergeRanges(w,D[T])}catch(D){console.error(D)}return this._stringRangesToCellRanges(w,S,C),w}_stringRangesToCellRanges(u,p,b){let S=0,C=!1,k=0,w=u[S];if(w){for(let N=b;N<this._bufferService.cols;N++){const D=p.getWidth(N),T=p.getString(N).length||g.WHITESPACE_CELL_CHAR.length;if(D!==0){if(!C&&w[0]<=k&&(w[0]=N,C=!0),w[1]<=k){if(w[1]=N,w=u[++S],!w)break;w[0]<=k?(w[0]=N,C=!0):C=!1}k+=T}}w&&(w[1]=this._bufferService.cols)}}static _mergeRanges(u,p){let b=!1;for(let S=0;S<u.length;S++){const C=u[S];if(b){if(p[1]<=C[0])return u[S-1][1]=p[1],u;if(p[1]<=C[1])return u[S-1][1]=Math.max(p[1],C[1]),u.splice(S,1),u;u.splice(S,1),S--}else{if(p[1]<=C[0])return u.splice(S,0,p),u;if(p[1]<=C[1])return C[0]=Math.min(p[0],C[0]),u;p[0]<C[1]&&(C[0]=Math.min(p[0],C[0]),b=!0)}}return b?u[u.length-1][1]=p[1]:u.push(p),u}};o.CharacterJoinerService=m=f([v(0,_.IBufferService)],m)},5114:(c,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CoreBrowserService=void 0;const f=l(844),v=l(8460),h=l(3656);class g extends f.Disposable{constructor(x,m,d){super(),this._textarea=x,this._window=m,this.mainDocument=d,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new y(this._window),this._onDprChange=this.register(new v.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new v.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(u=>this._screenDprMonitor.setWindow(u))),this.register((0,v.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(x){this._window!==x&&(this._window=x,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}o.CoreBrowserService=g;class y extends f.Disposable{constructor(x){super(),this._parentWindow=x,this._windowResizeListener=this.register(new f.MutableDisposable),this._onDprChange=this.register(new v.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,f.toDisposable)(()=>this.clearListener()))}setWindow(x){this._parentWindow=x,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,h.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var x;this._outerListener&&((x=this._resolutionMediaMatchList)==null||x.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(c,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.LinkProviderService=void 0;const f=l(844);class v extends f.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,f.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(g){return this.linkProviders.push(g),{dispose:()=>{const y=this.linkProviders.indexOf(g);y!==-1&&this.linkProviders.splice(y,1)}}}}o.LinkProviderService=v},8934:function(c,o,l){var f=this&&this.__decorate||function(_,x,m,d){var u,p=arguments.length,b=p<3?x:d===null?d=Object.getOwnPropertyDescriptor(x,m):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(_,x,m,d);else for(var S=_.length-1;S>=0;S--)(u=_[S])&&(b=(p<3?u(b):p>3?u(x,m,b):u(x,m))||b);return p>3&&b&&Object.defineProperty(x,m,b),b},v=this&&this.__param||function(_,x){return function(m,d){x(m,d,_)}};Object.defineProperty(o,"__esModule",{value:!0}),o.MouseService=void 0;const h=l(4725),g=l(9806);let y=o.MouseService=class{constructor(_,x){this._renderService=_,this._charSizeService=x}getCoords(_,x,m,d,u){return(0,g.getCoords)(window,_,x,m,d,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,u)}getMouseReportCoords(_,x){const m=(0,g.getCoordsRelativeToElement)(window,_,x);if(this._charSizeService.hasValidSize)return m[0]=Math.min(Math.max(m[0],0),this._renderService.dimensions.css.canvas.width-1),m[1]=Math.min(Math.max(m[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(m[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(m[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(m[0]),y:Math.floor(m[1])}}};o.MouseService=y=f([v(0,h.IRenderService),v(1,h.ICharSizeService)],y)},3230:function(c,o,l){var f=this&&this.__decorate||function(u,p,b,S){var C,k=arguments.length,w=k<3?p:S===null?S=Object.getOwnPropertyDescriptor(p,b):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(u,p,b,S);else for(var N=u.length-1;N>=0;N--)(C=u[N])&&(w=(k<3?C(w):k>3?C(p,b,w):C(p,b))||w);return k>3&&w&&Object.defineProperty(p,b,w),w},v=this&&this.__param||function(u,p){return function(b,S){p(b,S,u)}};Object.defineProperty(o,"__esModule",{value:!0}),o.RenderService=void 0;const h=l(6193),g=l(4725),y=l(8460),_=l(844),x=l(7226),m=l(2585);let d=o.RenderService=class extends _.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(u,p,b,S,C,k,w,N){super(),this._rowCount=u,this._charSizeService=S,this._renderer=this.register(new _.MutableDisposable),this._pausedResizeTask=new x.DebouncedIdleTask,this._observerDisposable=this.register(new _.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new y.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new y.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new y.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new y.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new h.RenderDebouncer((D,T)=>this._renderRows(D,T),w),this.register(this._renderDebouncer),this.register(w.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(k.onResize(()=>this._fullRefresh())),this.register(k.buffers.onBufferActivate(()=>{var D;return(D=this._renderer.value)==null?void 0:D.clear()})),this.register(b.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(C.onDecorationRegistered(()=>this._fullRefresh())),this.register(C.onDecorationRemoved(()=>this._fullRefresh())),this.register(b.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(k.cols,k.rows),this._fullRefresh()})),this.register(b.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(k.buffer.y,k.buffer.y,!0))),this.register(N.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(w.window,p),this.register(w.onWindowChange(D=>this._registerIntersectionObserver(D,p)))}_registerIntersectionObserver(u,p){if("IntersectionObserver"in u){const b=new u.IntersectionObserver(S=>this._handleIntersectionChange(S[S.length-1]),{threshold:0});b.observe(p),this._observerDisposable.value=(0,_.toDisposable)(()=>b.disconnect())}}_handleIntersectionChange(u){this._isPaused=u.isIntersecting===void 0?u.intersectionRatio===0:!u.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(u,p,b=!1){this._isPaused?this._needsFullRefresh=!0:(b||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(u,p,this._rowCount))}_renderRows(u,p){this._renderer.value&&(u=Math.min(u,this._rowCount-1),p=Math.min(p,this._rowCount-1),this._renderer.value.renderRows(u,p),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:u,end:p}),this._onRender.fire({start:u,end:p}),this._isNextRenderRedrawOnly=!0)}resize(u,p){this._rowCount=p,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(u){this._renderer.value=u,this._renderer.value&&(this._renderer.value.onRequestRedraw(p=>this.refreshRows(p.start,p.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(u){return this._renderDebouncer.addRefreshCallback(u)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var u,p;this._renderer.value&&((p=(u=this._renderer.value).clearTextureAtlas)==null||p.call(u),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(u,p){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>{var b;return(b=this._renderer.value)==null?void 0:b.handleResize(u,p)}):this._renderer.value.handleResize(u,p),this._fullRefresh())}handleCharSizeChanged(){var u;(u=this._renderer.value)==null||u.handleCharSizeChanged()}handleBlur(){var u;(u=this._renderer.value)==null||u.handleBlur()}handleFocus(){var u;(u=this._renderer.value)==null||u.handleFocus()}handleSelectionChanged(u,p,b){var S;this._selectionState.start=u,this._selectionState.end=p,this._selectionState.columnSelectMode=b,(S=this._renderer.value)==null||S.handleSelectionChanged(u,p,b)}handleCursorMove(){var u;(u=this._renderer.value)==null||u.handleCursorMove()}clear(){var u;(u=this._renderer.value)==null||u.clear()}};o.RenderService=d=f([v(2,m.IOptionsService),v(3,g.ICharSizeService),v(4,m.IDecorationService),v(5,m.IBufferService),v(6,g.ICoreBrowserService),v(7,g.IThemeService)],d)},9312:function(c,o,l){var f=this&&this.__decorate||function(w,N,D,T){var I,A=arguments.length,O=A<3?N:T===null?T=Object.getOwnPropertyDescriptor(N,D):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(w,N,D,T);else for(var P=w.length-1;P>=0;P--)(I=w[P])&&(O=(A<3?I(O):A>3?I(N,D,O):I(N,D))||O);return A>3&&O&&Object.defineProperty(N,D,O),O},v=this&&this.__param||function(w,N){return function(D,T){N(D,T,w)}};Object.defineProperty(o,"__esModule",{value:!0}),o.SelectionService=void 0;const h=l(9806),g=l(9504),y=l(456),_=l(4725),x=l(8460),m=l(844),d=l(6114),u=l(4841),p=l(511),b=l(2585),S=String.fromCharCode(160),C=new RegExp(S,"g");let k=o.SelectionService=class extends m.Disposable{constructor(w,N,D,T,I,A,O,P,B){super(),this._element=w,this._screenElement=N,this._linkifier=D,this._bufferService=T,this._coreService=I,this._mouseService=A,this._optionsService=O,this._renderService=P,this._coreBrowserService=B,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new p.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new x.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new x.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new x.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new x.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=U=>this._handleMouseMove(U),this._mouseUpListener=U=>this._handleMouseUp(U),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(U=>this._handleTrim(U)),this.register(this._bufferService.buffers.onBufferActivate(U=>this._handleBufferActivate(U))),this.enable(),this._model=new y.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,m.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const w=this._model.finalSelectionStart,N=this._model.finalSelectionEnd;return!(!w||!N||w[0]===N[0]&&w[1]===N[1])}get selectionText(){const w=this._model.finalSelectionStart,N=this._model.finalSelectionEnd;if(!w||!N)return"";const D=this._bufferService.buffer,T=[];if(this._activeSelectionMode===3){if(w[0]===N[0])return"";const I=w[0]<N[0]?w[0]:N[0],A=w[0]<N[0]?N[0]:w[0];for(let O=w[1];O<=N[1];O++){const P=D.translateBufferLineToString(O,!0,I,A);T.push(P)}}else{const I=w[1]===N[1]?N[0]:void 0;T.push(D.translateBufferLineToString(w[1],!0,w[0],I));for(let A=w[1]+1;A<=N[1]-1;A++){const O=D.lines.get(A),P=D.translateBufferLineToString(A,!0);O!=null&&O.isWrapped?T[T.length-1]+=P:T.push(P)}if(w[1]!==N[1]){const A=D.lines.get(N[1]),O=D.translateBufferLineToString(N[1],!0,0,N[0]);A&&A.isWrapped?T[T.length-1]+=O:T.push(O)}}return T.map(I=>I.replace(C," ")).join(d.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(w){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),d.isLinux&&w&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(w){const N=this._getMouseBufferCoords(w),D=this._model.finalSelectionStart,T=this._model.finalSelectionEnd;return!!(D&&T&&N)&&this._areCoordsInSelection(N,D,T)}isCellInSelection(w,N){const D=this._model.finalSelectionStart,T=this._model.finalSelectionEnd;return!(!D||!T)&&this._areCoordsInSelection([w,N],D,T)}_areCoordsInSelection(w,N,D){return w[1]>N[1]&&w[1]<D[1]||N[1]===D[1]&&w[1]===N[1]&&w[0]>=N[0]&&w[0]<D[0]||N[1]<D[1]&&w[1]===D[1]&&w[0]<D[0]||N[1]<D[1]&&w[1]===N[1]&&w[0]>=N[0]}_selectWordAtCursor(w,N){var I,A;const D=(A=(I=this._linkifier.currentLink)==null?void 0:I.link)==null?void 0:A.range;if(D)return this._model.selectionStart=[D.start.x-1,D.start.y-1],this._model.selectionStartLength=(0,u.getRangeLength)(D,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const T=this._getMouseBufferCoords(w);return!!T&&(this._selectWordAt(T,N),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(w,N){this._model.clearSelection(),w=Math.max(w,0),N=Math.min(N,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,w],this._model.selectionEnd=[this._bufferService.cols,N],this.refresh(),this._onSelectionChange.fire()}_handleTrim(w){this._model.handleTrim(w)&&this.refresh()}_getMouseBufferCoords(w){const N=this._mouseService.getCoords(w,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(N)return N[0]--,N[1]--,N[1]+=this._bufferService.buffer.ydisp,N}_getMouseEventScrollAmount(w){let N=(0,h.getCoordsRelativeToElement)(this._coreBrowserService.window,w,this._screenElement)[1];const D=this._renderService.dimensions.css.canvas.height;return N>=0&&N<=D?0:(N>D&&(N-=D),N=Math.min(Math.max(N,-50),50),N/=50,N/Math.abs(N)+Math.round(14*N))}shouldForceSelection(w){return d.isMac?w.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:w.shiftKey}handleMouseDown(w){if(this._mouseDownTimeStamp=w.timeStamp,(w.button!==2||!this.hasSelection)&&w.button===0){if(!this._enabled){if(!this.shouldForceSelection(w))return;w.stopPropagation()}w.preventDefault(),this._dragScrollAmount=0,this._enabled&&w.shiftKey?this._handleIncrementalClick(w):w.detail===1?this._handleSingleClick(w):w.detail===2?this._handleDoubleClick(w):w.detail===3&&this._handleTripleClick(w),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(w){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(w))}_handleSingleClick(w){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(w)?3:0,this._model.selectionStart=this._getMouseBufferCoords(w),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const N=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);N&&N.length!==this._model.selectionStart[0]&&N.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(w){this._selectWordAtCursor(w,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(w){const N=this._getMouseBufferCoords(w);N&&(this._activeSelectionMode=2,this._selectLineAt(N[1]))}shouldColumnSelect(w){return w.altKey&&!(d.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(w){if(w.stopImmediatePropagation(),!this._model.selectionStart)return;const N=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(w),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(w),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const D=this._bufferService.buffer;if(this._model.selectionEnd[1]<D.lines.length){const T=D.lines.get(this._model.selectionEnd[1]);T&&T.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}N&&N[0]===this._model.selectionEnd[0]&&N[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const w=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(w.ydisp+this._bufferService.rows,w.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=w.ydisp),this.refresh()}}_handleMouseUp(w){const N=w.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&N<500&&w.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const D=this._mouseService.getCoords(w,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(D&&D[0]!==void 0&&D[1]!==void 0){const T=(0,g.moveToCellSequence)(D[0]-1,D[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(T,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const w=this._model.finalSelectionStart,N=this._model.finalSelectionEnd,D=!(!w||!N||w[0]===N[0]&&w[1]===N[1]);D?w&&N&&(this._oldSelectionStart&&this._oldSelectionEnd&&w[0]===this._oldSelectionStart[0]&&w[1]===this._oldSelectionStart[1]&&N[0]===this._oldSelectionEnd[0]&&N[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(w,N,D)):this._oldHasSelection&&this._fireOnSelectionChange(w,N,D)}_fireOnSelectionChange(w,N,D){this._oldSelectionStart=w,this._oldSelectionEnd=N,this._oldHasSelection=D,this._onSelectionChange.fire()}_handleBufferActivate(w){this.clearSelection(),this._trimListener.dispose(),this._trimListener=w.activeBuffer.lines.onTrim(N=>this._handleTrim(N))}_convertViewportColToCharacterIndex(w,N){let D=N;for(let T=0;N>=T;T++){const I=w.loadCell(T,this._workCell).getChars().length;this._workCell.getWidth()===0?D--:I>1&&N!==T&&(D+=I-1)}return D}setSelection(w,N,D){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[w,N],this._model.selectionStartLength=D,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(w){this._isClickInSelection(w)||(this._selectWordAtCursor(w,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(w,N,D=!0,T=!0){if(w[0]>=this._bufferService.cols)return;const I=this._bufferService.buffer,A=I.lines.get(w[1]);if(!A)return;const O=I.translateBufferLineToString(w[1],!1);let P=this._convertViewportColToCharacterIndex(A,w[0]),B=P;const U=w[0]-P;let $=0,E=0,R=0,F=0;if(O.charAt(P)===" "){for(;P>0&&O.charAt(P-1)===" ";)P--;for(;B<O.length&&O.charAt(B+1)===" ";)B++}else{let q=w[0],Y=w[0];A.getWidth(q)===0&&($++,q--),A.getWidth(Y)===2&&(E++,Y++);const te=A.getString(Y).length;for(te>1&&(F+=te-1,B+=te-1);q>0&&P>0&&!this._isCharWordSeparator(A.loadCell(q-1,this._workCell));){A.loadCell(q-1,this._workCell);const W=this._workCell.getChars().length;this._workCell.getWidth()===0?($++,q--):W>1&&(R+=W-1,P-=W-1),P--,q--}for(;Y<A.length&&B+1<O.length&&!this._isCharWordSeparator(A.loadCell(Y+1,this._workCell));){A.loadCell(Y+1,this._workCell);const W=this._workCell.getChars().length;this._workCell.getWidth()===2?(E++,Y++):W>1&&(F+=W-1,B+=W-1),B++,Y++}}B++;let M=P+U-$+R,z=Math.min(this._bufferService.cols,B-P+$+E-R-F);if(N||O.slice(P,B).trim()!==""){if(D&&M===0&&A.getCodePoint(0)!==32){const q=I.lines.get(w[1]-1);if(q&&A.isWrapped&&q.getCodePoint(this._bufferService.cols-1)!==32){const Y=this._getWordAt([this._bufferService.cols-1,w[1]-1],!1,!0,!1);if(Y){const te=this._bufferService.cols-Y.start;M-=te,z+=te}}}if(T&&M+z===this._bufferService.cols&&A.getCodePoint(this._bufferService.cols-1)!==32){const q=I.lines.get(w[1]+1);if(q!=null&&q.isWrapped&&q.getCodePoint(0)!==32){const Y=this._getWordAt([0,w[1]+1],!1,!1,!0);Y&&(z+=Y.length)}}return{start:M,length:z}}}_selectWordAt(w,N){const D=this._getWordAt(w,N);if(D){for(;D.start<0;)D.start+=this._bufferService.cols,w[1]--;this._model.selectionStart=[D.start,w[1]],this._model.selectionStartLength=D.length}}_selectToWordAt(w){const N=this._getWordAt(w,!0);if(N){let D=w[1];for(;N.start<0;)N.start+=this._bufferService.cols,D--;if(!this._model.areSelectionValuesReversed())for(;N.start+N.length>this._bufferService.cols;)N.length-=this._bufferService.cols,D++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?N.start:N.start+N.length,D]}}_isCharWordSeparator(w){return w.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(w.getChars())>=0}_selectLineAt(w){const N=this._bufferService.buffer.getWrappedRangeForLine(w),D={start:{x:0,y:N.first},end:{x:this._bufferService.cols-1,y:N.last}};this._model.selectionStart=[0,N.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,u.getRangeLength)(D,this._bufferService.cols)}};o.SelectionService=k=f([v(3,b.IBufferService),v(4,b.ICoreService),v(5,_.IMouseService),v(6,b.IOptionsService),v(7,_.IRenderService),v(8,_.ICoreBrowserService)],k)},4725:(c,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ILinkProviderService=o.IThemeService=o.ICharacterJoinerService=o.ISelectionService=o.IRenderService=o.IMouseService=o.ICoreBrowserService=o.ICharSizeService=void 0;const f=l(8343);o.ICharSizeService=(0,f.createDecorator)("CharSizeService"),o.ICoreBrowserService=(0,f.createDecorator)("CoreBrowserService"),o.IMouseService=(0,f.createDecorator)("MouseService"),o.IRenderService=(0,f.createDecorator)("RenderService"),o.ISelectionService=(0,f.createDecorator)("SelectionService"),o.ICharacterJoinerService=(0,f.createDecorator)("CharacterJoinerService"),o.IThemeService=(0,f.createDecorator)("ThemeService"),o.ILinkProviderService=(0,f.createDecorator)("LinkProviderService")},6731:function(c,o,l){var f=this&&this.__decorate||function(k,w,N,D){var T,I=arguments.length,A=I<3?w:D===null?D=Object.getOwnPropertyDescriptor(w,N):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(k,w,N,D);else for(var O=k.length-1;O>=0;O--)(T=k[O])&&(A=(I<3?T(A):I>3?T(w,N,A):T(w,N))||A);return I>3&&A&&Object.defineProperty(w,N,A),A},v=this&&this.__param||function(k,w){return function(N,D){w(N,D,k)}};Object.defineProperty(o,"__esModule",{value:!0}),o.ThemeService=o.DEFAULT_ANSI_COLORS=void 0;const h=l(7239),g=l(8055),y=l(8460),_=l(844),x=l(2585),m=g.css.toColor("#ffffff"),d=g.css.toColor("#000000"),u=g.css.toColor("#ffffff"),p=g.css.toColor("#000000"),b={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};o.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const k=[g.css.toColor("#2e3436"),g.css.toColor("#cc0000"),g.css.toColor("#4e9a06"),g.css.toColor("#c4a000"),g.css.toColor("#3465a4"),g.css.toColor("#75507b"),g.css.toColor("#06989a"),g.css.toColor("#d3d7cf"),g.css.toColor("#555753"),g.css.toColor("#ef2929"),g.css.toColor("#8ae234"),g.css.toColor("#fce94f"),g.css.toColor("#729fcf"),g.css.toColor("#ad7fa8"),g.css.toColor("#34e2e2"),g.css.toColor("#eeeeec")],w=[0,95,135,175,215,255];for(let N=0;N<216;N++){const D=w[N/36%6|0],T=w[N/6%6|0],I=w[N%6];k.push({css:g.channels.toCss(D,T,I),rgba:g.channels.toRgba(D,T,I)})}for(let N=0;N<24;N++){const D=8+10*N;k.push({css:g.channels.toCss(D,D,D),rgba:g.channels.toRgba(D,D,D)})}return k})());let S=o.ThemeService=class extends _.Disposable{get colors(){return this._colors}constructor(k){super(),this._optionsService=k,this._contrastCache=new h.ColorContrastCache,this._halfContrastCache=new h.ColorContrastCache,this._onChangeColors=this.register(new y.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:m,background:d,cursor:u,cursorAccent:p,selectionForeground:void 0,selectionBackgroundTransparent:b,selectionBackgroundOpaque:g.color.blend(d,b),selectionInactiveBackgroundTransparent:b,selectionInactiveBackgroundOpaque:g.color.blend(d,b),ansi:o.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(k={}){const w=this._colors;if(w.foreground=C(k.foreground,m),w.background=C(k.background,d),w.cursor=C(k.cursor,u),w.cursorAccent=C(k.cursorAccent,p),w.selectionBackgroundTransparent=C(k.selectionBackground,b),w.selectionBackgroundOpaque=g.color.blend(w.background,w.selectionBackgroundTransparent),w.selectionInactiveBackgroundTransparent=C(k.selectionInactiveBackground,w.selectionBackgroundTransparent),w.selectionInactiveBackgroundOpaque=g.color.blend(w.background,w.selectionInactiveBackgroundTransparent),w.selectionForeground=k.selectionForeground?C(k.selectionForeground,g.NULL_COLOR):void 0,w.selectionForeground===g.NULL_COLOR&&(w.selectionForeground=void 0),g.color.isOpaque(w.selectionBackgroundTransparent)&&(w.selectionBackgroundTransparent=g.color.opacity(w.selectionBackgroundTransparent,.3)),g.color.isOpaque(w.selectionInactiveBackgroundTransparent)&&(w.selectionInactiveBackgroundTransparent=g.color.opacity(w.selectionInactiveBackgroundTransparent,.3)),w.ansi=o.DEFAULT_ANSI_COLORS.slice(),w.ansi[0]=C(k.black,o.DEFAULT_ANSI_COLORS[0]),w.ansi[1]=C(k.red,o.DEFAULT_ANSI_COLORS[1]),w.ansi[2]=C(k.green,o.DEFAULT_ANSI_COLORS[2]),w.ansi[3]=C(k.yellow,o.DEFAULT_ANSI_COLORS[3]),w.ansi[4]=C(k.blue,o.DEFAULT_ANSI_COLORS[4]),w.ansi[5]=C(k.magenta,o.DEFAULT_ANSI_COLORS[5]),w.ansi[6]=C(k.cyan,o.DEFAULT_ANSI_COLORS[6]),w.ansi[7]=C(k.white,o.DEFAULT_ANSI_COLORS[7]),w.ansi[8]=C(k.brightBlack,o.DEFAULT_ANSI_COLORS[8]),w.ansi[9]=C(k.brightRed,o.DEFAULT_ANSI_COLORS[9]),w.ansi[10]=C(k.brightGreen,o.DEFAULT_ANSI_COLORS[10]),w.ansi[11]=C(k.brightYellow,o.DEFAULT_ANSI_COLORS[11]),w.ansi[12]=C(k.brightBlue,o.DEFAULT_ANSI_COLORS[12]),w.ansi[13]=C(k.brightMagenta,o.DEFAULT_ANSI_COLORS[13]),w.ansi[14]=C(k.brightCyan,o.DEFAULT_ANSI_COLORS[14]),w.ansi[15]=C(k.brightWhite,o.DEFAULT_ANSI_COLORS[15]),k.extendedAnsi){const N=Math.min(w.ansi.length-16,k.extendedAnsi.length);for(let D=0;D<N;D++)w.ansi[D+16]=C(k.extendedAnsi[D],o.DEFAULT_ANSI_COLORS[D+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(k){this._restoreColor(k),this._onChangeColors.fire(this.colors)}_restoreColor(k){if(k!==void 0)switch(k){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[k]=this._restoreColors.ansi[k]}else for(let w=0;w<this._restoreColors.ansi.length;++w)this._colors.ansi[w]=this._restoreColors.ansi[w]}modifyColors(k){k(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function C(k,w){if(k!==void 0)try{return g.css.toColor(k)}catch{}return w}o.ThemeService=S=f([v(0,x.IOptionsService)],S)},6349:(c,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CircularList=void 0;const f=l(8460),v=l(844);class h extends v.Disposable{constructor(y){super(),this._maxLength=y,this.onDeleteEmitter=this.register(new f.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new f.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new f.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(y){if(this._maxLength===y)return;const _=new Array(y);for(let x=0;x<Math.min(y,this.length);x++)_[x]=this._array[this._getCyclicIndex(x)];this._array=_,this._maxLength=y,this._startIndex=0}get length(){return this._length}set length(y){if(y>this._length)for(let _=this._length;_<y;_++)this._array[_]=void 0;this._length=y}get(y){return this._array[this._getCyclicIndex(y)]}set(y,_){this._array[this._getCyclicIndex(y)]=_}push(y){this._array[this._getCyclicIndex(this._length)]=y,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(y,_,...x){if(_){for(let m=y;m<this._length-_;m++)this._array[this._getCyclicIndex(m)]=this._array[this._getCyclicIndex(m+_)];this._length-=_,this.onDeleteEmitter.fire({index:y,amount:_})}for(let m=this._length-1;m>=y;m--)this._array[this._getCyclicIndex(m+x.length)]=this._array[this._getCyclicIndex(m)];for(let m=0;m<x.length;m++)this._array[this._getCyclicIndex(y+m)]=x[m];if(x.length&&this.onInsertEmitter.fire({index:y,amount:x.length}),this._length+x.length>this._maxLength){const m=this._length+x.length-this._maxLength;this._startIndex+=m,this._length=this._maxLength,this.onTrimEmitter.fire(m)}else this._length+=x.length}trimStart(y){y>this._length&&(y=this._length),this._startIndex+=y,this._length-=y,this.onTrimEmitter.fire(y)}shiftElements(y,_,x){if(!(_<=0)){if(y<0||y>=this._length)throw new Error("start argument out of range");if(y+x<0)throw new Error("Cannot shift elements in list beyond index 0");if(x>0){for(let d=_-1;d>=0;d--)this.set(y+d+x,this.get(y+d));const m=y+_+x-this._length;if(m>0)for(this._length+=m;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let m=0;m<_;m++)this.set(y+m+x,this.get(y+m))}}_getCyclicIndex(y){return(this._startIndex+y)%this._maxLength}}o.CircularList=h},1439:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.clone=void 0,o.clone=function l(f,v=5){if(typeof f!="object")return f;const h=Array.isArray(f)?[]:{};for(const g in f)h[g]=v<=1?f[g]:f[g]&&l(f[g],v-1);return h}},8055:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.contrastRatio=o.toPaddedHex=o.rgba=o.rgb=o.css=o.color=o.channels=o.NULL_COLOR=void 0;let l=0,f=0,v=0,h=0;var g,y,_,x,m;function d(p){const b=p.toString(16);return b.length<2?"0"+b:b}function u(p,b){return p<b?(b+.05)/(p+.05):(p+.05)/(b+.05)}o.NULL_COLOR={css:"#00000000",rgba:0},function(p){p.toCss=function(b,S,C,k){return k!==void 0?`#${d(b)}${d(S)}${d(C)}${d(k)}`:`#${d(b)}${d(S)}${d(C)}`},p.toRgba=function(b,S,C,k=255){return(b<<24|S<<16|C<<8|k)>>>0},p.toColor=function(b,S,C,k){return{css:p.toCss(b,S,C,k),rgba:p.toRgba(b,S,C,k)}}}(g||(o.channels=g={})),function(p){function b(S,C){return h=Math.round(255*C),[l,f,v]=m.toChannels(S.rgba),{css:g.toCss(l,f,v,h),rgba:g.toRgba(l,f,v,h)}}p.blend=function(S,C){if(h=(255&C.rgba)/255,h===1)return{css:C.css,rgba:C.rgba};const k=C.rgba>>24&255,w=C.rgba>>16&255,N=C.rgba>>8&255,D=S.rgba>>24&255,T=S.rgba>>16&255,I=S.rgba>>8&255;return l=D+Math.round((k-D)*h),f=T+Math.round((w-T)*h),v=I+Math.round((N-I)*h),{css:g.toCss(l,f,v),rgba:g.toRgba(l,f,v)}},p.isOpaque=function(S){return(255&S.rgba)==255},p.ensureContrastRatio=function(S,C,k){const w=m.ensureContrastRatio(S.rgba,C.rgba,k);if(w)return g.toColor(w>>24&255,w>>16&255,w>>8&255)},p.opaque=function(S){const C=(255|S.rgba)>>>0;return[l,f,v]=m.toChannels(C),{css:g.toCss(l,f,v),rgba:C}},p.opacity=b,p.multiplyOpacity=function(S,C){return h=255&S.rgba,b(S,h*C/255)},p.toColorRGB=function(S){return[S.rgba>>24&255,S.rgba>>16&255,S.rgba>>8&255]}}(y||(o.color=y={})),function(p){let b,S;try{const C=document.createElement("canvas");C.width=1,C.height=1;const k=C.getContext("2d",{willReadFrequently:!0});k&&(b=k,b.globalCompositeOperation="copy",S=b.createLinearGradient(0,0,1,1))}catch{}p.toColor=function(C){if(C.match(/#[\da-f]{3,8}/i))switch(C.length){case 4:return l=parseInt(C.slice(1,2).repeat(2),16),f=parseInt(C.slice(2,3).repeat(2),16),v=parseInt(C.slice(3,4).repeat(2),16),g.toColor(l,f,v);case 5:return l=parseInt(C.slice(1,2).repeat(2),16),f=parseInt(C.slice(2,3).repeat(2),16),v=parseInt(C.slice(3,4).repeat(2),16),h=parseInt(C.slice(4,5).repeat(2),16),g.toColor(l,f,v,h);case 7:return{css:C,rgba:(parseInt(C.slice(1),16)<<8|255)>>>0};case 9:return{css:C,rgba:parseInt(C.slice(1),16)>>>0}}const k=C.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(k)return l=parseInt(k[1]),f=parseInt(k[2]),v=parseInt(k[3]),h=Math.round(255*(k[5]===void 0?1:parseFloat(k[5]))),g.toColor(l,f,v,h);if(!b||!S)throw new Error("css.toColor: Unsupported css format");if(b.fillStyle=S,b.fillStyle=C,typeof b.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(b.fillRect(0,0,1,1),[l,f,v,h]=b.getImageData(0,0,1,1).data,h!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:g.toRgba(l,f,v,h),css:C}}}(_||(o.css=_={})),function(p){function b(S,C,k){const w=S/255,N=C/255,D=k/255;return .2126*(w<=.03928?w/12.92:Math.pow((w+.055)/1.055,2.4))+.7152*(N<=.03928?N/12.92:Math.pow((N+.055)/1.055,2.4))+.0722*(D<=.03928?D/12.92:Math.pow((D+.055)/1.055,2.4))}p.relativeLuminance=function(S){return b(S>>16&255,S>>8&255,255&S)},p.relativeLuminance2=b}(x||(o.rgb=x={})),function(p){function b(C,k,w){const N=C>>24&255,D=C>>16&255,T=C>>8&255;let I=k>>24&255,A=k>>16&255,O=k>>8&255,P=u(x.relativeLuminance2(I,A,O),x.relativeLuminance2(N,D,T));for(;P<w&&(I>0||A>0||O>0);)I-=Math.max(0,Math.ceil(.1*I)),A-=Math.max(0,Math.ceil(.1*A)),O-=Math.max(0,Math.ceil(.1*O)),P=u(x.relativeLuminance2(I,A,O),x.relativeLuminance2(N,D,T));return(I<<24|A<<16|O<<8|255)>>>0}function S(C,k,w){const N=C>>24&255,D=C>>16&255,T=C>>8&255;let I=k>>24&255,A=k>>16&255,O=k>>8&255,P=u(x.relativeLuminance2(I,A,O),x.relativeLuminance2(N,D,T));for(;P<w&&(I<255||A<255||O<255);)I=Math.min(255,I+Math.ceil(.1*(255-I))),A=Math.min(255,A+Math.ceil(.1*(255-A))),O=Math.min(255,O+Math.ceil(.1*(255-O))),P=u(x.relativeLuminance2(I,A,O),x.relativeLuminance2(N,D,T));return(I<<24|A<<16|O<<8|255)>>>0}p.blend=function(C,k){if(h=(255&k)/255,h===1)return k;const w=k>>24&255,N=k>>16&255,D=k>>8&255,T=C>>24&255,I=C>>16&255,A=C>>8&255;return l=T+Math.round((w-T)*h),f=I+Math.round((N-I)*h),v=A+Math.round((D-A)*h),g.toRgba(l,f,v)},p.ensureContrastRatio=function(C,k,w){const N=x.relativeLuminance(C>>8),D=x.relativeLuminance(k>>8);if(u(N,D)<w){if(D<N){const A=b(C,k,w),O=u(N,x.relativeLuminance(A>>8));if(O<w){const P=S(C,k,w);return O>u(N,x.relativeLuminance(P>>8))?A:P}return A}const T=S(C,k,w),I=u(N,x.relativeLuminance(T>>8));if(I<w){const A=b(C,k,w);return I>u(N,x.relativeLuminance(A>>8))?T:A}return T}},p.reduceLuminance=b,p.increaseLuminance=S,p.toChannels=function(C){return[C>>24&255,C>>16&255,C>>8&255,255&C]}}(m||(o.rgba=m={})),o.toPaddedHex=d,o.contrastRatio=u},8969:(c,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CoreTerminal=void 0;const f=l(844),v=l(2585),h=l(4348),g=l(7866),y=l(744),_=l(7302),x=l(6975),m=l(8460),d=l(1753),u=l(1480),p=l(7994),b=l(9282),S=l(5435),C=l(5981),k=l(2660);let w=!1;class N extends f.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new m.EventEmitter),this._onScroll.event(T=>{var I;(I=this._onScrollApi)==null||I.fire(T.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(T){for(const I in T)this.optionsService.options[I]=T[I]}constructor(T){super(),this._windowsWrappingHeuristics=this.register(new f.MutableDisposable),this._onBinary=this.register(new m.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new m.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new m.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new m.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new m.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new m.EventEmitter),this._instantiationService=new h.InstantiationService,this.optionsService=this.register(new _.OptionsService(T)),this._instantiationService.setService(v.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(y.BufferService)),this._instantiationService.setService(v.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(g.LogService)),this._instantiationService.setService(v.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(x.CoreService)),this._instantiationService.setService(v.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(d.CoreMouseService)),this._instantiationService.setService(v.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(u.UnicodeService)),this._instantiationService.setService(v.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(p.CharsetService),this._instantiationService.setService(v.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(k.OscLinkService),this._instantiationService.setService(v.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new S.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,m.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,m.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,m.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,m.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(I=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(I=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new C.WriteBuffer((I,A)=>this._inputHandler.parse(I,A))),this.register((0,m.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(T,I){this._writeBuffer.write(T,I)}writeSync(T,I){this._logService.logLevel<=v.LogLevelEnum.WARN&&!w&&(this._logService.warn("writeSync is unreliable and will be removed soon."),w=!0),this._writeBuffer.writeSync(T,I)}input(T,I=!0){this.coreService.triggerDataEvent(T,I)}resize(T,I){isNaN(T)||isNaN(I)||(T=Math.max(T,y.MINIMUM_COLS),I=Math.max(I,y.MINIMUM_ROWS),this._bufferService.resize(T,I))}scroll(T,I=!1){this._bufferService.scroll(T,I)}scrollLines(T,I,A){this._bufferService.scrollLines(T,I,A)}scrollPages(T){this.scrollLines(T*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(T){const I=T-this._bufferService.buffer.ydisp;I!==0&&this.scrollLines(I)}registerEscHandler(T,I){return this._inputHandler.registerEscHandler(T,I)}registerDcsHandler(T,I){return this._inputHandler.registerDcsHandler(T,I)}registerCsiHandler(T,I){return this._inputHandler.registerCsiHandler(T,I)}registerOscHandler(T,I){return this._inputHandler.registerOscHandler(T,I)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let T=!1;const I=this.optionsService.rawOptions.windowsPty;I&&I.buildNumber!==void 0&&I.buildNumber!==void 0?T=I.backend==="conpty"&&I.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(T=!0),T?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const T=[];T.push(this.onLineFeed(b.updateWindowsModeWrappedState.bind(null,this._bufferService))),T.push(this.registerCsiHandler({final:"H"},()=>((0,b.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,f.toDisposable)(()=>{for(const I of T)I.dispose()})}}}o.CoreTerminal=N},8460:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.runAndSubscribe=o.forwardEvent=o.EventEmitter=void 0,o.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=l=>(this._listeners.push(l),{dispose:()=>{if(!this._disposed){for(let f=0;f<this._listeners.length;f++)if(this._listeners[f]===l)return void this._listeners.splice(f,1)}}})),this._event}fire(l,f){const v=[];for(let h=0;h<this._listeners.length;h++)v.push(this._listeners[h]);for(let h=0;h<v.length;h++)v[h].call(void 0,l,f)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},o.forwardEvent=function(l,f){return l(v=>f.fire(v))},o.runAndSubscribe=function(l,f){return f(void 0),l(v=>f(v))}},5435:function(c,o,l){var f=this&&this.__decorate||function($,E,R,F){var M,z=arguments.length,q=z<3?E:F===null?F=Object.getOwnPropertyDescriptor(E,R):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")q=Reflect.decorate($,E,R,F);else for(var Y=$.length-1;Y>=0;Y--)(M=$[Y])&&(q=(z<3?M(q):z>3?M(E,R,q):M(E,R))||q);return z>3&&q&&Object.defineProperty(E,R,q),q},v=this&&this.__param||function($,E){return function(R,F){E(R,F,$)}};Object.defineProperty(o,"__esModule",{value:!0}),o.InputHandler=o.WindowsOptionsReportType=void 0;const h=l(2584),g=l(7116),y=l(2015),_=l(844),x=l(482),m=l(8437),d=l(8460),u=l(643),p=l(511),b=l(3734),S=l(2585),C=l(1480),k=l(6242),w=l(6351),N=l(5941),D={"(":0,")":1,"*":2,"+":3,"-":1,".":2},T=131072;function I($,E){if($>24)return E.setWinLines||!1;switch($){case 1:return!!E.restoreWin;case 2:return!!E.minimizeWin;case 3:return!!E.setWinPosition;case 4:return!!E.setWinSizePixels;case 5:return!!E.raiseWin;case 6:return!!E.lowerWin;case 7:return!!E.refreshWin;case 8:return!!E.setWinSizeChars;case 9:return!!E.maximizeWin;case 10:return!!E.fullscreenWin;case 11:return!!E.getWinState;case 13:return!!E.getWinPosition;case 14:return!!E.getWinSizePixels;case 15:return!!E.getScreenSizePixels;case 16:return!!E.getCellSizePixels;case 18:return!!E.getWinSizeChars;case 19:return!!E.getScreenSizeChars;case 20:return!!E.getIconTitle;case 21:return!!E.getWinTitle;case 22:return!!E.pushTitle;case 23:return!!E.popTitle;case 24:return!!E.setWinLines}return!1}var A;(function($){$[$.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",$[$.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(A||(o.WindowsOptionsReportType=A={}));let O=0;class P extends _.Disposable{getAttrData(){return this._curAttrData}constructor(E,R,F,M,z,q,Y,te,W=new y.EscapeSequenceParser){super(),this._bufferService=E,this._charsetService=R,this._coreService=F,this._logService=M,this._optionsService=z,this._oscLinkService=q,this._coreMouseService=Y,this._unicodeService=te,this._parser=W,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new x.StringToUtf32,this._utf8Decoder=new x.Utf8ToUtf32,this._workCell=new p.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=m.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=m.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new d.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new d.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new d.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new d.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new d.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new d.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new d.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new d.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new d.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new d.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new d.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new d.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new d.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new B(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(L=>this._activeBuffer=L.activeBuffer)),this._parser.setCsiHandlerFallback((L,G)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(L),params:G.toArray()})}),this._parser.setEscHandlerFallback(L=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(L)})}),this._parser.setExecuteHandlerFallback(L=>{this._logService.debug("Unknown EXECUTE code: ",{code:L})}),this._parser.setOscHandlerFallback((L,G,V)=>{this._logService.debug("Unknown OSC code: ",{identifier:L,action:G,data:V})}),this._parser.setDcsHandlerFallback((L,G,V)=>{G==="HOOK"&&(V=V.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(L),action:G,payload:V})}),this._parser.setPrintHandler((L,G,V)=>this.print(L,G,V)),this._parser.registerCsiHandler({final:"@"},L=>this.insertChars(L)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},L=>this.scrollLeft(L)),this._parser.registerCsiHandler({final:"A"},L=>this.cursorUp(L)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},L=>this.scrollRight(L)),this._parser.registerCsiHandler({final:"B"},L=>this.cursorDown(L)),this._parser.registerCsiHandler({final:"C"},L=>this.cursorForward(L)),this._parser.registerCsiHandler({final:"D"},L=>this.cursorBackward(L)),this._parser.registerCsiHandler({final:"E"},L=>this.cursorNextLine(L)),this._parser.registerCsiHandler({final:"F"},L=>this.cursorPrecedingLine(L)),this._parser.registerCsiHandler({final:"G"},L=>this.cursorCharAbsolute(L)),this._parser.registerCsiHandler({final:"H"},L=>this.cursorPosition(L)),this._parser.registerCsiHandler({final:"I"},L=>this.cursorForwardTab(L)),this._parser.registerCsiHandler({final:"J"},L=>this.eraseInDisplay(L,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},L=>this.eraseInDisplay(L,!0)),this._parser.registerCsiHandler({final:"K"},L=>this.eraseInLine(L,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},L=>this.eraseInLine(L,!0)),this._parser.registerCsiHandler({final:"L"},L=>this.insertLines(L)),this._parser.registerCsiHandler({final:"M"},L=>this.deleteLines(L)),this._parser.registerCsiHandler({final:"P"},L=>this.deleteChars(L)),this._parser.registerCsiHandler({final:"S"},L=>this.scrollUp(L)),this._parser.registerCsiHandler({final:"T"},L=>this.scrollDown(L)),this._parser.registerCsiHandler({final:"X"},L=>this.eraseChars(L)),this._parser.registerCsiHandler({final:"Z"},L=>this.cursorBackwardTab(L)),this._parser.registerCsiHandler({final:"`"},L=>this.charPosAbsolute(L)),this._parser.registerCsiHandler({final:"a"},L=>this.hPositionRelative(L)),this._parser.registerCsiHandler({final:"b"},L=>this.repeatPrecedingCharacter(L)),this._parser.registerCsiHandler({final:"c"},L=>this.sendDeviceAttributesPrimary(L)),this._parser.registerCsiHandler({prefix:">",final:"c"},L=>this.sendDeviceAttributesSecondary(L)),this._parser.registerCsiHandler({final:"d"},L=>this.linePosAbsolute(L)),this._parser.registerCsiHandler({final:"e"},L=>this.vPositionRelative(L)),this._parser.registerCsiHandler({final:"f"},L=>this.hVPosition(L)),this._parser.registerCsiHandler({final:"g"},L=>this.tabClear(L)),this._parser.registerCsiHandler({final:"h"},L=>this.setMode(L)),this._parser.registerCsiHandler({prefix:"?",final:"h"},L=>this.setModePrivate(L)),this._parser.registerCsiHandler({final:"l"},L=>this.resetMode(L)),this._parser.registerCsiHandler({prefix:"?",final:"l"},L=>this.resetModePrivate(L)),this._parser.registerCsiHandler({final:"m"},L=>this.charAttributes(L)),this._parser.registerCsiHandler({final:"n"},L=>this.deviceStatus(L)),this._parser.registerCsiHandler({prefix:"?",final:"n"},L=>this.deviceStatusPrivate(L)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},L=>this.softReset(L)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},L=>this.setCursorStyle(L)),this._parser.registerCsiHandler({final:"r"},L=>this.setScrollRegion(L)),this._parser.registerCsiHandler({final:"s"},L=>this.saveCursor(L)),this._parser.registerCsiHandler({final:"t"},L=>this.windowOptions(L)),this._parser.registerCsiHandler({final:"u"},L=>this.restoreCursor(L)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},L=>this.insertColumns(L)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},L=>this.deleteColumns(L)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},L=>this.selectProtected(L)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},L=>this.requestMode(L,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},L=>this.requestMode(L,!1)),this._parser.setExecuteHandler(h.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(h.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(h.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(h.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(h.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(h.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(h.C1.IND,()=>this.index()),this._parser.setExecuteHandler(h.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(h.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new k.OscHandler(L=>(this.setTitle(L),this.setIconName(L),!0))),this._parser.registerOscHandler(1,new k.OscHandler(L=>this.setIconName(L))),this._parser.registerOscHandler(2,new k.OscHandler(L=>this.setTitle(L))),this._parser.registerOscHandler(4,new k.OscHandler(L=>this.setOrReportIndexedColor(L))),this._parser.registerOscHandler(8,new k.OscHandler(L=>this.setHyperlink(L))),this._parser.registerOscHandler(10,new k.OscHandler(L=>this.setOrReportFgColor(L))),this._parser.registerOscHandler(11,new k.OscHandler(L=>this.setOrReportBgColor(L))),this._parser.registerOscHandler(12,new k.OscHandler(L=>this.setOrReportCursorColor(L))),this._parser.registerOscHandler(104,new k.OscHandler(L=>this.restoreIndexedColor(L))),this._parser.registerOscHandler(110,new k.OscHandler(L=>this.restoreFgColor(L))),this._parser.registerOscHandler(111,new k.OscHandler(L=>this.restoreBgColor(L))),this._parser.registerOscHandler(112,new k.OscHandler(L=>this.restoreCursorColor(L))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const L in g.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:L},()=>this.selectCharset("("+L)),this._parser.registerEscHandler({intermediates:")",final:L},()=>this.selectCharset(")"+L)),this._parser.registerEscHandler({intermediates:"*",final:L},()=>this.selectCharset("*"+L)),this._parser.registerEscHandler({intermediates:"+",final:L},()=>this.selectCharset("+"+L)),this._parser.registerEscHandler({intermediates:"-",final:L},()=>this.selectCharset("-"+L)),this._parser.registerEscHandler({intermediates:".",final:L},()=>this.selectCharset("."+L)),this._parser.registerEscHandler({intermediates:"/",final:L},()=>this.selectCharset("/"+L));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(L=>(this._logService.error("Parsing error: ",L),L)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new w.DcsHandler((L,G)=>this.requestStatusString(L,G)))}_preserveStack(E,R,F,M){this._parseStack.paused=!0,this._parseStack.cursorStartX=E,this._parseStack.cursorStartY=R,this._parseStack.decodedLength=F,this._parseStack.position=M}_logSlowResolvingAsync(E){this._logService.logLevel<=S.LogLevelEnum.WARN&&Promise.race([E,new Promise((R,F)=>setTimeout(()=>F("#SLOW_TIMEOUT"),5e3))]).catch(R=>{if(R!=="#SLOW_TIMEOUT")throw R;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(E,R){let F,M=this._activeBuffer.x,z=this._activeBuffer.y,q=0;const Y=this._parseStack.paused;if(Y){if(F=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,R))return this._logSlowResolvingAsync(F),F;M=this._parseStack.cursorStartX,z=this._parseStack.cursorStartY,this._parseStack.paused=!1,E.length>T&&(q=this._parseStack.position+T)}if(this._logService.logLevel<=S.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof E=="string"?` "${E}"`:` "${Array.prototype.map.call(E,L=>String.fromCharCode(L)).join("")}"`),typeof E=="string"?E.split("").map(L=>L.charCodeAt(0)):E),this._parseBuffer.length<E.length&&this._parseBuffer.length<T&&(this._parseBuffer=new Uint32Array(Math.min(E.length,T))),Y||this._dirtyRowTracker.clearRange(),E.length>T)for(let L=q;L<E.length;L+=T){const G=L+T<E.length?L+T:E.length,V=typeof E=="string"?this._stringDecoder.decode(E.substring(L,G),this._parseBuffer):this._utf8Decoder.decode(E.subarray(L,G),this._parseBuffer);if(F=this._parser.parse(this._parseBuffer,V))return this._preserveStack(M,z,V,L),this._logSlowResolvingAsync(F),F}else if(!Y){const L=typeof E=="string"?this._stringDecoder.decode(E,this._parseBuffer):this._utf8Decoder.decode(E,this._parseBuffer);if(F=this._parser.parse(this._parseBuffer,L))return this._preserveStack(M,z,L,0),this._logSlowResolvingAsync(F),F}this._activeBuffer.x===M&&this._activeBuffer.y===z||this._onCursorMove.fire();const te=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),W=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);W<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(W,this._bufferService.rows-1),Math.min(te,this._bufferService.rows-1))}print(E,R,F){let M,z;const q=this._charsetService.charset,Y=this._optionsService.rawOptions.screenReaderMode,te=this._bufferService.cols,W=this._coreService.decPrivateModes.wraparound,L=this._coreService.modes.insertMode,G=this._curAttrData;let V=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&F-R>0&&V.getWidth(this._activeBuffer.x-1)===2&&V.setCellFromCodepoint(this._activeBuffer.x-1,0,1,G);let J=this._parser.precedingJoinState;for(let X=R;X<F;++X){if(M=E[X],M<127&&q){const Be=q[String.fromCharCode(M)];Be&&(M=Be.charCodeAt(0))}const ce=this._unicodeService.charProperties(M,J);z=C.UnicodeService.extractWidth(ce);const xe=C.UnicodeService.extractShouldJoin(ce),we=xe?C.UnicodeService.extractWidth(J):0;if(J=ce,Y&&this._onA11yChar.fire((0,x.stringFromCodePoint)(M)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+z-we>te){if(W){const Be=V;let le=this._activeBuffer.x-we;for(this._activeBuffer.x=we,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),V=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),we>0&&V instanceof m.BufferLine&&V.copyCellsFrom(Be,le,0,we,!1);le<te;)Be.setCellFromCodepoint(le++,0,1,G)}else if(this._activeBuffer.x=te-1,z===2)continue}if(xe&&this._activeBuffer.x){const Be=V.getWidth(this._activeBuffer.x-1)?1:2;V.addCodepointToCell(this._activeBuffer.x-Be,M,z);for(let le=z-we;--le>=0;)V.setCellFromCodepoint(this._activeBuffer.x++,0,0,G)}else if(L&&(V.insertCells(this._activeBuffer.x,z-we,this._activeBuffer.getNullCell(G)),V.getWidth(te-1)===2&&V.setCellFromCodepoint(te-1,u.NULL_CELL_CODE,u.NULL_CELL_WIDTH,G)),V.setCellFromCodepoint(this._activeBuffer.x++,M,z,G),z>0)for(;--z;)V.setCellFromCodepoint(this._activeBuffer.x++,0,0,G)}this._parser.precedingJoinState=J,this._activeBuffer.x<te&&F-R>0&&V.getWidth(this._activeBuffer.x)===0&&!V.hasContent(this._activeBuffer.x)&&V.setCellFromCodepoint(this._activeBuffer.x,0,1,G),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(E,R){return E.final!=="t"||E.prefix||E.intermediates?this._parser.registerCsiHandler(E,R):this._parser.registerCsiHandler(E,F=>!I(F.params[0],this._optionsService.rawOptions.windowOptions)||R(F))}registerDcsHandler(E,R){return this._parser.registerDcsHandler(E,new w.DcsHandler(R))}registerEscHandler(E,R){return this._parser.registerEscHandler(E,R)}registerOscHandler(E,R){return this._parser.registerOscHandler(E,new k.OscHandler(R))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var E;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((E=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&E.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);R.hasWidth(this._activeBuffer.x)&&!R.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const E=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-E),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(E=this._bufferService.cols-1){this._activeBuffer.x=Math.min(E,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(E,R){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=E,this._activeBuffer.y=this._activeBuffer.scrollTop+R):(this._activeBuffer.x=E,this._activeBuffer.y=R),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(E,R){this._restrictCursor(),this._setCursor(this._activeBuffer.x+E,this._activeBuffer.y+R)}cursorUp(E){const R=this._activeBuffer.y-this._activeBuffer.scrollTop;return R>=0?this._moveCursor(0,-Math.min(R,E.params[0]||1)):this._moveCursor(0,-(E.params[0]||1)),!0}cursorDown(E){const R=this._activeBuffer.scrollBottom-this._activeBuffer.y;return R>=0?this._moveCursor(0,Math.min(R,E.params[0]||1)):this._moveCursor(0,E.params[0]||1),!0}cursorForward(E){return this._moveCursor(E.params[0]||1,0),!0}cursorBackward(E){return this._moveCursor(-(E.params[0]||1),0),!0}cursorNextLine(E){return this.cursorDown(E),this._activeBuffer.x=0,!0}cursorPrecedingLine(E){return this.cursorUp(E),this._activeBuffer.x=0,!0}cursorCharAbsolute(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(E){return this._setCursor(E.length>=2?(E.params[1]||1)-1:0,(E.params[0]||1)-1),!0}charPosAbsolute(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(E){return this._moveCursor(E.params[0]||1,0),!0}linePosAbsolute(E){return this._setCursor(this._activeBuffer.x,(E.params[0]||1)-1),!0}vPositionRelative(E){return this._moveCursor(0,E.params[0]||1),!0}hVPosition(E){return this.cursorPosition(E),!0}tabClear(E){const R=E.params[0];return R===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:R===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let R=E.params[0]||1;for(;R--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let R=E.params[0]||1;for(;R--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(E){const R=E.params[0];return R===1&&(this._curAttrData.bg|=536870912),R!==2&&R!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(E,R,F,M=!1,z=!1){const q=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);q.replaceCells(R,F,this._activeBuffer.getNullCell(this._eraseAttrData()),z),M&&(q.isWrapped=!1)}_resetBufferLine(E,R=!1){const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);F&&(F.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),R),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+E),F.isWrapped=!1)}eraseInDisplay(E,R=!1){let F;switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:for(F=this._activeBuffer.y,this._dirtyRowTracker.markDirty(F),this._eraseInBufferLine(F++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,R);F<this._bufferService.rows;F++)this._resetBufferLine(F,R);this._dirtyRowTracker.markDirty(F);break;case 1:for(F=this._activeBuffer.y,this._dirtyRowTracker.markDirty(F),this._eraseInBufferLine(F,0,this._activeBuffer.x+1,!0,R),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(F+1).isWrapped=!1);F--;)this._resetBufferLine(F,R);this._dirtyRowTracker.markDirty(0);break;case 2:for(F=this._bufferService.rows,this._dirtyRowTracker.markDirty(F-1);F--;)this._resetBufferLine(F,R);this._dirtyRowTracker.markDirty(0);break;case 3:const M=this._activeBuffer.lines.length-this._bufferService.rows;M>0&&(this._activeBuffer.lines.trimStart(M),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-M,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-M,0),this._onScroll.fire(0))}return!0}eraseInLine(E,R=!1){switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,R);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,R);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,R)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(E){this._restrictCursor();let R=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=this._activeBuffer.ybase+this._activeBuffer.y,M=this._bufferService.rows-1-this._activeBuffer.scrollBottom,z=this._bufferService.rows-1+this._activeBuffer.ybase-M+1;for(;R--;)this._activeBuffer.lines.splice(z-1,1),this._activeBuffer.lines.splice(F,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(E){this._restrictCursor();let R=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=this._activeBuffer.ybase+this._activeBuffer.y;let M;for(M=this._bufferService.rows-1-this._activeBuffer.scrollBottom,M=this._bufferService.rows-1+this._activeBuffer.ybase-M;R--;)this._activeBuffer.lines.splice(F,1),this._activeBuffer.lines.splice(M,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(E){this._restrictCursor();const R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return R&&(R.insertCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(E){this._restrictCursor();const R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return R&&(R.deleteCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(E){let R=E.params[0]||1;for(;R--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(E){let R=E.params[0]||1;for(;R--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(m.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const R=E.params[0]||1;for(let F=this._activeBuffer.scrollTop;F<=this._activeBuffer.scrollBottom;++F){const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);M.deleteCells(0,R,this._activeBuffer.getNullCell(this._eraseAttrData())),M.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const R=E.params[0]||1;for(let F=this._activeBuffer.scrollTop;F<=this._activeBuffer.scrollBottom;++F){const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);M.insertCells(0,R,this._activeBuffer.getNullCell(this._eraseAttrData())),M.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const R=E.params[0]||1;for(let F=this._activeBuffer.scrollTop;F<=this._activeBuffer.scrollBottom;++F){const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);M.insertCells(this._activeBuffer.x,R,this._activeBuffer.getNullCell(this._eraseAttrData())),M.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const R=E.params[0]||1;for(let F=this._activeBuffer.scrollTop;F<=this._activeBuffer.scrollBottom;++F){const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);M.deleteCells(this._activeBuffer.x,R,this._activeBuffer.getNullCell(this._eraseAttrData())),M.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(E){this._restrictCursor();const R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return R&&(R.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(E.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(E){const R=this._parser.precedingJoinState;if(!R)return!0;const F=E.params[0]||1,M=C.UnicodeService.extractWidth(R),z=this._activeBuffer.x-M,q=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(z),Y=new Uint32Array(q.length*F);let te=0;for(let L=0;L<q.length;){const G=q.codePointAt(L)||0;Y[te++]=G,L+=G>65535?2:1}let W=te;for(let L=1;L<F;++L)Y.copyWithin(W,0,te),W+=te;return this.print(Y,0,W),!0}sendDeviceAttributesPrimary(E){return E.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(h.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(h.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(E){return E.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(h.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(h.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(E.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(h.C0.ESC+"[>83;40003;0c")),!0}_is(E){return(this._optionsService.rawOptions.termName+"").indexOf(E)===0}setMode(E){for(let R=0;R<E.length;R++)switch(E.params[R]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(E){for(let R=0;R<E.length;R++)switch(E.params[R]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),this._charsetService.setgCharset(1,g.DEFAULT_CHARSET),this._charsetService.setgCharset(2,g.DEFAULT_CHARSET),this._charsetService.setgCharset(3,g.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(E){for(let R=0;R<E.length;R++)switch(E.params[R]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(E){for(let R=0;R<E.length;R++)switch(E.params[R]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),E.params[R]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(E,R){const F=this._coreService.decPrivateModes,{activeProtocol:M,activeEncoding:z}=this._coreMouseService,q=this._coreService,{buffers:Y,cols:te}=this._bufferService,{active:W,alt:L}=Y,G=this._optionsService.rawOptions,V=xe=>xe?1:2,J=E.params[0];return X=J,ce=R?J===2?4:J===4?V(q.modes.insertMode):J===12?3:J===20?V(G.convertEol):0:J===1?V(F.applicationCursorKeys):J===3?G.windowOptions.setWinLines?te===80?2:te===132?1:0:0:J===6?V(F.origin):J===7?V(F.wraparound):J===8?3:J===9?V(M==="X10"):J===12?V(G.cursorBlink):J===25?V(!q.isCursorHidden):J===45?V(F.reverseWraparound):J===66?V(F.applicationKeypad):J===67?4:J===1e3?V(M==="VT200"):J===1002?V(M==="DRAG"):J===1003?V(M==="ANY"):J===1004?V(F.sendFocus):J===1005?4:J===1006?V(z==="SGR"):J===1015?4:J===1016?V(z==="SGR_PIXELS"):J===1048?1:J===47||J===1047||J===1049?V(W===L):J===2004?V(F.bracketedPasteMode):0,q.triggerDataEvent(`${h.C0.ESC}[${R?"":"?"}${X};${ce}$y`),!0;var X,ce}_updateAttrColor(E,R,F,M,z){return R===2?(E|=50331648,E&=-16777216,E|=b.AttributeData.fromColorRGB([F,M,z])):R===5&&(E&=-50331904,E|=33554432|255&F),E}_extractColor(E,R,F){const M=[0,0,-1,0,0,0];let z=0,q=0;do{if(M[q+z]=E.params[R+q],E.hasSubParams(R+q)){const Y=E.getSubParams(R+q);let te=0;do M[1]===5&&(z=1),M[q+te+1+z]=Y[te];while(++te<Y.length&&te+q+1+z<M.length);break}if(M[1]===5&&q+z>=2||M[1]===2&&q+z>=5)break;M[1]&&(z=1)}while(++q+R<E.length&&q+z<M.length);for(let Y=2;Y<M.length;++Y)M[Y]===-1&&(M[Y]=0);switch(M[0]){case 38:F.fg=this._updateAttrColor(F.fg,M[1],M[3],M[4],M[5]);break;case 48:F.bg=this._updateAttrColor(F.bg,M[1],M[3],M[4],M[5]);break;case 58:F.extended=F.extended.clone(),F.extended.underlineColor=this._updateAttrColor(F.extended.underlineColor,M[1],M[3],M[4],M[5])}return q}_processUnderline(E,R){R.extended=R.extended.clone(),(!~E||E>5)&&(E=1),R.extended.underlineStyle=E,R.fg|=268435456,E===0&&(R.fg&=-268435457),R.updateExtended()}_processSGR0(E){E.fg=m.DEFAULT_ATTR_DATA.fg,E.bg=m.DEFAULT_ATTR_DATA.bg,E.extended=E.extended.clone(),E.extended.underlineStyle=0,E.extended.underlineColor&=-67108864,E.updateExtended()}charAttributes(E){if(E.length===1&&E.params[0]===0)return this._processSGR0(this._curAttrData),!0;const R=E.length;let F;const M=this._curAttrData;for(let z=0;z<R;z++)F=E.params[z],F>=30&&F<=37?(M.fg&=-50331904,M.fg|=16777216|F-30):F>=40&&F<=47?(M.bg&=-50331904,M.bg|=16777216|F-40):F>=90&&F<=97?(M.fg&=-50331904,M.fg|=16777224|F-90):F>=100&&F<=107?(M.bg&=-50331904,M.bg|=16777224|F-100):F===0?this._processSGR0(M):F===1?M.fg|=134217728:F===3?M.bg|=67108864:F===4?(M.fg|=268435456,this._processUnderline(E.hasSubParams(z)?E.getSubParams(z)[0]:1,M)):F===5?M.fg|=536870912:F===7?M.fg|=67108864:F===8?M.fg|=1073741824:F===9?M.fg|=2147483648:F===2?M.bg|=134217728:F===21?this._processUnderline(2,M):F===22?(M.fg&=-134217729,M.bg&=-134217729):F===23?M.bg&=-67108865:F===24?(M.fg&=-268435457,this._processUnderline(0,M)):F===25?M.fg&=-536870913:F===27?M.fg&=-67108865:F===28?M.fg&=-1073741825:F===29?M.fg&=2147483647:F===39?(M.fg&=-67108864,M.fg|=16777215&m.DEFAULT_ATTR_DATA.fg):F===49?(M.bg&=-67108864,M.bg|=16777215&m.DEFAULT_ATTR_DATA.bg):F===38||F===48||F===58?z+=this._extractColor(E,z,M):F===53?M.bg|=1073741824:F===55?M.bg&=-1073741825:F===59?(M.extended=M.extended.clone(),M.extended.underlineColor=-1,M.updateExtended()):F===100?(M.fg&=-67108864,M.fg|=16777215&m.DEFAULT_ATTR_DATA.fg,M.bg&=-67108864,M.bg|=16777215&m.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",F);return!0}deviceStatus(E){switch(E.params[0]){case 5:this._coreService.triggerDataEvent(`${h.C0.ESC}[0n`);break;case 6:const R=this._activeBuffer.y+1,F=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[${R};${F}R`)}return!0}deviceStatusPrivate(E){if(E.params[0]===6){const R=this._activeBuffer.y+1,F=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[?${R};${F}R`)}return!0}softReset(E){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=m.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(E){const R=E.params[0]||1;switch(R){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const F=R%2==1;return this._optionsService.options.cursorBlink=F,!0}setScrollRegion(E){const R=E.params[0]||1;let F;return(E.length<2||(F=E.params[1])>this._bufferService.rows||F===0)&&(F=this._bufferService.rows),F>R&&(this._activeBuffer.scrollTop=R-1,this._activeBuffer.scrollBottom=F-1,this._setCursor(0,0)),!0}windowOptions(E){if(!I(E.params[0],this._optionsService.rawOptions.windowOptions))return!0;const R=E.length>1?E.params[1]:0;switch(E.params[0]){case 14:R!==2&&this._onRequestWindowsOptionsReport.fire(A.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(A.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${h.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:R!==0&&R!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),R!==0&&R!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:R!==0&&R!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),R!==0&&R!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(E){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(E){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(E){return this._windowTitle=E,this._onTitleChange.fire(E),!0}setIconName(E){return this._iconName=E,!0}setOrReportIndexedColor(E){const R=[],F=E.split(";");for(;F.length>1;){const M=F.shift(),z=F.shift();if(/^\d+$/.exec(M)){const q=parseInt(M);if(U(q))if(z==="?")R.push({type:0,index:q});else{const Y=(0,N.parseColor)(z);Y&&R.push({type:1,index:q,color:Y})}}}return R.length&&this._onColor.fire(R),!0}setHyperlink(E){const R=E.split(";");return!(R.length<2)&&(R[1]?this._createHyperlink(R[0],R[1]):!R[0]&&this._finishHyperlink())}_createHyperlink(E,R){this._getCurrentLinkId()&&this._finishHyperlink();const F=E.split(":");let M;const z=F.findIndex(q=>q.startsWith("id="));return z!==-1&&(M=F[z].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:M,uri:R}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(E,R){const F=E.split(";");for(let M=0;M<F.length&&!(R>=this._specialColors.length);++M,++R)if(F[M]==="?")this._onColor.fire([{type:0,index:this._specialColors[R]}]);else{const z=(0,N.parseColor)(F[M]);z&&this._onColor.fire([{type:1,index:this._specialColors[R],color:z}])}return!0}setOrReportFgColor(E){return this._setOrReportSpecialColor(E,0)}setOrReportBgColor(E){return this._setOrReportSpecialColor(E,1)}setOrReportCursorColor(E){return this._setOrReportSpecialColor(E,2)}restoreIndexedColor(E){if(!E)return this._onColor.fire([{type:2}]),!0;const R=[],F=E.split(";");for(let M=0;M<F.length;++M)if(/^\d+$/.exec(F[M])){const z=parseInt(F[M]);U(z)&&R.push({type:2,index:z})}return R.length&&this._onColor.fire(R),!0}restoreFgColor(E){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(E){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(E){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),!0}selectCharset(E){return E.length!==2?(this.selectDefaultCharset(),!0):(E[0]==="/"||this._charsetService.setgCharset(D[E[0]],g.CHARSETS[E[1]]||g.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const E=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,E,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=m.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=m.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(E){return this._charsetService.setgLevel(E),!0}screenAlignmentPattern(){const E=new p.CellData;E.content=4194304|"E".charCodeAt(0),E.fg=this._curAttrData.fg,E.bg=this._curAttrData.bg,this._setCursor(0,0);for(let R=0;R<this._bufferService.rows;++R){const F=this._activeBuffer.ybase+this._activeBuffer.y+R,M=this._activeBuffer.lines.get(F);M&&(M.fill(E),M.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(E,R){const F=this._bufferService.buffer,M=this._optionsService.rawOptions;return(z=>(this._coreService.triggerDataEvent(`${h.C0.ESC}${z}${h.C0.ESC}\\`),!0))(E==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:E==='"p'?'P1$r61;1"p':E==="r"?`P1$r${F.scrollTop+1};${F.scrollBottom+1}r`:E==="m"?"P1$r0m":E===" q"?`P1$r${{block:2,underline:4,bar:6}[M.cursorStyle]-(M.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(E,R){this._dirtyRowTracker.markRangeDirty(E,R)}}o.InputHandler=P;let B=class{constructor($){this._bufferService=$,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty($){$<this.start?this.start=$:$>this.end&&(this.end=$)}markRangeDirty($,E){$>E&&(O=$,$=E,E=O),$<this.start&&(this.start=$),E>this.end&&(this.end=E)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function U($){return 0<=$&&$<256}B=f([v(0,S.IBufferService)],B)},844:(c,o)=>{function l(f){for(const v of f)v.dispose();f.length=0}Object.defineProperty(o,"__esModule",{value:!0}),o.getDisposeArrayDisposable=o.disposeArray=o.toDisposable=o.MutableDisposable=o.Disposable=void 0,o.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const f of this._disposables)f.dispose();this._disposables.length=0}register(f){return this._disposables.push(f),f}unregister(f){const v=this._disposables.indexOf(f);v!==-1&&this._disposables.splice(v,1)}},o.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(f){var v;this._isDisposed||f===this._value||((v=this._value)==null||v.dispose(),this._value=f)}clear(){this.value=void 0}dispose(){var f;this._isDisposed=!0,(f=this._value)==null||f.dispose(),this._value=void 0}},o.toDisposable=function(f){return{dispose:f}},o.disposeArray=l,o.getDisposeArrayDisposable=function(f){return{dispose:()=>l(f)}}},1505:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.FourKeyMap=o.TwoKeyMap=void 0;class l{constructor(){this._data={}}set(v,h,g){this._data[v]||(this._data[v]={}),this._data[v][h]=g}get(v,h){return this._data[v]?this._data[v][h]:void 0}clear(){this._data={}}}o.TwoKeyMap=l,o.FourKeyMap=class{constructor(){this._data=new l}set(f,v,h,g,y){this._data.get(f,v)||this._data.set(f,v,new l),this._data.get(f,v).set(h,g,y)}get(f,v,h,g){var y;return(y=this._data.get(f,v))==null?void 0:y.get(h,g)}clear(){this._data.clear()}}},6114:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.isChromeOS=o.isLinux=o.isWindows=o.isIphone=o.isIpad=o.isMac=o.getSafariVersion=o.isSafari=o.isLegacyEdge=o.isFirefox=o.isNode=void 0,o.isNode=typeof process<"u"&&"title"in process;const l=o.isNode?"node":navigator.userAgent,f=o.isNode?"node":navigator.platform;o.isFirefox=l.includes("Firefox"),o.isLegacyEdge=l.includes("Edge"),o.isSafari=/^((?!chrome|android).)*safari/i.test(l),o.getSafariVersion=function(){if(!o.isSafari)return 0;const v=l.match(/Version\/(\d+)/);return v===null||v.length<2?0:parseInt(v[1])},o.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(f),o.isIpad=f==="iPad",o.isIphone=f==="iPhone",o.isWindows=["Windows","Win16","Win32","WinCE"].includes(f),o.isLinux=f.indexOf("Linux")>=0,o.isChromeOS=/\bCrOS\b/.test(l)},6106:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SortedList=void 0;let l=0;o.SortedList=class{constructor(f){this._getKey=f,this._array=[]}clear(){this._array.length=0}insert(f){this._array.length!==0?(l=this._search(this._getKey(f)),this._array.splice(l,0,f)):this._array.push(f)}delete(f){if(this._array.length===0)return!1;const v=this._getKey(f);if(v===void 0||(l=this._search(v),l===-1)||this._getKey(this._array[l])!==v)return!1;do if(this._array[l]===f)return this._array.splice(l,1),!0;while(++l<this._array.length&&this._getKey(this._array[l])===v);return!1}*getKeyIterator(f){if(this._array.length!==0&&(l=this._search(f),!(l<0||l>=this._array.length)&&this._getKey(this._array[l])===f))do yield this._array[l];while(++l<this._array.length&&this._getKey(this._array[l])===f)}forEachByKey(f,v){if(this._array.length!==0&&(l=this._search(f),!(l<0||l>=this._array.length)&&this._getKey(this._array[l])===f))do v(this._array[l]);while(++l<this._array.length&&this._getKey(this._array[l])===f)}values(){return[...this._array].values()}_search(f){let v=0,h=this._array.length-1;for(;h>=v;){let g=v+h>>1;const y=this._getKey(this._array[g]);if(y>f)h=g-1;else{if(!(y<f)){for(;g>0&&this._getKey(this._array[g-1])===f;)g--;return g}v=g+1}}return v}}},7226:(c,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DebouncedIdleTask=o.IdleTaskQueue=o.PriorityTaskQueue=void 0;const f=l(6114);class v{constructor(){this._tasks=[],this._i=0}enqueue(y){this._tasks.push(y),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(y){this._idleCallback=void 0;let _=0,x=0,m=y.timeRemaining(),d=0;for(;this._i<this._tasks.length;){if(_=Date.now(),this._tasks[this._i]()||this._i++,_=Math.max(1,Date.now()-_),x=Math.max(_,x),d=y.timeRemaining(),1.5*x>d)return m-_<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(m-_))}ms`),void this._start();m=d}this.clear()}}class h extends v{_requestCallback(y){return setTimeout(()=>y(this._createDeadline(16)))}_cancelCallback(y){clearTimeout(y)}_createDeadline(y){const _=Date.now()+y;return{timeRemaining:()=>Math.max(0,_-Date.now())}}}o.PriorityTaskQueue=h,o.IdleTaskQueue=!f.isNode&&"requestIdleCallback"in window?class extends v{_requestCallback(g){return requestIdleCallback(g)}_cancelCallback(g){cancelIdleCallback(g)}}:h,o.DebouncedIdleTask=class{constructor(){this._queue=new o.IdleTaskQueue}set(g){this._queue.clear(),this._queue.enqueue(g)}flush(){this._queue.flush()}}},9282:(c,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.updateWindowsModeWrappedState=void 0;const f=l(643);o.updateWindowsModeWrappedState=function(v){const h=v.buffer.lines.get(v.buffer.ybase+v.buffer.y-1),g=h==null?void 0:h.get(v.cols-1),y=v.buffer.lines.get(v.buffer.ybase+v.buffer.y);y&&g&&(y.isWrapped=g[f.CHAR_DATA_CODE_INDEX]!==f.NULL_CELL_CODE&&g[f.CHAR_DATA_CODE_INDEX]!==f.WHITESPACE_CELL_CODE)}},3734:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ExtendedAttrs=o.AttributeData=void 0;class l{constructor(){this.fg=0,this.bg=0,this.extended=new f}static toColorRGB(h){return[h>>>16&255,h>>>8&255,255&h]}static fromColorRGB(h){return(255&h[0])<<16|(255&h[1])<<8|255&h[2]}clone(){const h=new l;return h.fg=this.fg,h.bg=this.bg,h.extended=this.extended.clone(),h}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}o.AttributeData=l;class f{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(h){this._ext=h}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(h){this._ext&=-469762049,this._ext|=h<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(h){this._ext&=-67108864,this._ext|=67108863&h}get urlId(){return this._urlId}set urlId(h){this._urlId=h}get underlineVariantOffset(){const h=(3758096384&this._ext)>>29;return h<0?4294967288^h:h}set underlineVariantOffset(h){this._ext&=536870911,this._ext|=h<<29&3758096384}constructor(h=0,g=0){this._ext=0,this._urlId=0,this._ext=h,this._urlId=g}clone(){return new f(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}o.ExtendedAttrs=f},9092:(c,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Buffer=o.MAX_BUFFER_SIZE=void 0;const f=l(6349),v=l(7226),h=l(3734),g=l(8437),y=l(4634),_=l(511),x=l(643),m=l(4863),d=l(7116);o.MAX_BUFFER_SIZE=4294967295,o.Buffer=class{constructor(u,p,b){this._hasScrollback=u,this._optionsService=p,this._bufferService=b,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=g.DEFAULT_ATTR_DATA.clone(),this.savedCharset=d.DEFAULT_CHARSET,this.markers=[],this._nullCell=_.CellData.fromCharData([0,x.NULL_CELL_CHAR,x.NULL_CELL_WIDTH,x.NULL_CELL_CODE]),this._whitespaceCell=_.CellData.fromCharData([0,x.WHITESPACE_CELL_CHAR,x.WHITESPACE_CELL_WIDTH,x.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new v.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(u){return u?(this._nullCell.fg=u.fg,this._nullCell.bg=u.bg,this._nullCell.extended=u.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new h.ExtendedAttrs),this._nullCell}getWhitespaceCell(u){return u?(this._whitespaceCell.fg=u.fg,this._whitespaceCell.bg=u.bg,this._whitespaceCell.extended=u.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new h.ExtendedAttrs),this._whitespaceCell}getBlankLine(u,p){return new g.BufferLine(this._bufferService.cols,this.getNullCell(u),p)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const u=this.ybase+this.y-this.ydisp;return u>=0&&u<this._rows}_getCorrectBufferLength(u){if(!this._hasScrollback)return u;const p=u+this._optionsService.rawOptions.scrollback;return p>o.MAX_BUFFER_SIZE?o.MAX_BUFFER_SIZE:p}fillViewportRows(u){if(this.lines.length===0){u===void 0&&(u=g.DEFAULT_ATTR_DATA);let p=this._rows;for(;p--;)this.lines.push(this.getBlankLine(u))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(u,p){const b=this.getNullCell(g.DEFAULT_ATTR_DATA);let S=0;const C=this._getCorrectBufferLength(p);if(C>this.lines.maxLength&&(this.lines.maxLength=C),this.lines.length>0){if(this._cols<u)for(let w=0;w<this.lines.length;w++)S+=+this.lines.get(w).resize(u,b);let k=0;if(this._rows<p)for(let w=this._rows;w<p;w++)this.lines.length<p+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new g.BufferLine(u,b)):this.ybase>0&&this.lines.length<=this.ybase+this.y+k+1?(this.ybase--,k++,this.ydisp>0&&this.ydisp--):this.lines.push(new g.BufferLine(u,b)));else for(let w=this._rows;w>p;w--)this.lines.length>p+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(C<this.lines.maxLength){const w=this.lines.length-C;w>0&&(this.lines.trimStart(w),this.ybase=Math.max(this.ybase-w,0),this.ydisp=Math.max(this.ydisp-w,0),this.savedY=Math.max(this.savedY-w,0)),this.lines.maxLength=C}this.x=Math.min(this.x,u-1),this.y=Math.min(this.y,p-1),k&&(this.y+=k),this.savedX=Math.min(this.savedX,u-1),this.scrollTop=0}if(this.scrollBottom=p-1,this._isReflowEnabled&&(this._reflow(u,p),this._cols>u))for(let k=0;k<this.lines.length;k++)S+=+this.lines.get(k).resize(u,b);this._cols=u,this._rows=p,this._memoryCleanupQueue.clear(),S>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let u=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,u=!1);let p=0;for(;this._memoryCleanupPosition<this.lines.length;)if(p+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),p>100)return!0;return u}get _isReflowEnabled(){const u=this._optionsService.rawOptions.windowsPty;return u&&u.buildNumber?this._hasScrollback&&u.backend==="conpty"&&u.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(u,p){this._cols!==u&&(u>this._cols?this._reflowLarger(u,p):this._reflowSmaller(u,p))}_reflowLarger(u,p){const b=(0,y.reflowLargerGetLinesToRemove)(this.lines,this._cols,u,this.ybase+this.y,this.getNullCell(g.DEFAULT_ATTR_DATA));if(b.length>0){const S=(0,y.reflowLargerCreateNewLayout)(this.lines,b);(0,y.reflowLargerApplyNewLayout)(this.lines,S.layout),this._reflowLargerAdjustViewport(u,p,S.countRemoved)}}_reflowLargerAdjustViewport(u,p,b){const S=this.getNullCell(g.DEFAULT_ATTR_DATA);let C=b;for(;C-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<p&&this.lines.push(new g.BufferLine(u,S))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-b,0)}_reflowSmaller(u,p){const b=this.getNullCell(g.DEFAULT_ATTR_DATA),S=[];let C=0;for(let k=this.lines.length-1;k>=0;k--){let w=this.lines.get(k);if(!w||!w.isWrapped&&w.getTrimmedLength()<=u)continue;const N=[w];for(;w.isWrapped&&k>0;)w=this.lines.get(--k),N.unshift(w);const D=this.ybase+this.y;if(D>=k&&D<k+N.length)continue;const T=N[N.length-1].getTrimmedLength(),I=(0,y.reflowSmallerGetNewLineLengths)(N,this._cols,u),A=I.length-N.length;let O;O=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+A):Math.max(0,this.lines.length-this.lines.maxLength+A);const P=[];for(let F=0;F<A;F++){const M=this.getBlankLine(g.DEFAULT_ATTR_DATA,!0);P.push(M)}P.length>0&&(S.push({start:k+N.length+C,newLines:P}),C+=P.length),N.push(...P);let B=I.length-1,U=I[B];U===0&&(B--,U=I[B]);let $=N.length-A-1,E=T;for(;$>=0;){const F=Math.min(E,U);if(N[B]===void 0)break;if(N[B].copyCellsFrom(N[$],E-F,U-F,F,!0),U-=F,U===0&&(B--,U=I[B]),E-=F,E===0){$--;const M=Math.max($,0);E=(0,y.getWrappedLineTrimmedLength)(N,M,this._cols)}}for(let F=0;F<N.length;F++)I[F]<u&&N[F].setCell(I[F],b);let R=A-O;for(;R-- >0;)this.ybase===0?this.y<p-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+C)-p&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+A,this.ybase+p-1)}if(S.length>0){const k=[],w=[];for(let B=0;B<this.lines.length;B++)w.push(this.lines.get(B));const N=this.lines.length;let D=N-1,T=0,I=S[T];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+C);let A=0;for(let B=Math.min(this.lines.maxLength-1,N+C-1);B>=0;B--)if(I&&I.start>D+A){for(let U=I.newLines.length-1;U>=0;U--)this.lines.set(B--,I.newLines[U]);B++,k.push({index:D+1,amount:I.newLines.length}),A+=I.newLines.length,I=S[++T]}else this.lines.set(B,w[D--]);let O=0;for(let B=k.length-1;B>=0;B--)k[B].index+=O,this.lines.onInsertEmitter.fire(k[B]),O+=k[B].amount;const P=Math.max(0,N+C-this.lines.maxLength);P>0&&this.lines.onTrimEmitter.fire(P)}}translateBufferLineToString(u,p,b=0,S){const C=this.lines.get(u);return C?C.translateToString(p,b,S):""}getWrappedRangeForLine(u){let p=u,b=u;for(;p>0&&this.lines.get(p).isWrapped;)p--;for(;b+1<this.lines.length&&this.lines.get(b+1).isWrapped;)b++;return{first:p,last:b}}setupTabStops(u){for(u!=null?this.tabs[u]||(u=this.prevStop(u)):(this.tabs={},u=0);u<this._cols;u+=this._optionsService.rawOptions.tabStopWidth)this.tabs[u]=!0}prevStop(u){for(u==null&&(u=this.x);!this.tabs[--u]&&u>0;);return u>=this._cols?this._cols-1:u<0?0:u}nextStop(u){for(u==null&&(u=this.x);!this.tabs[++u]&&u<this._cols;);return u>=this._cols?this._cols-1:u<0?0:u}clearMarkers(u){this._isClearing=!0;for(let p=0;p<this.markers.length;p++)this.markers[p].line===u&&(this.markers[p].dispose(),this.markers.splice(p--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let u=0;u<this.markers.length;u++)this.markers[u].dispose(),this.markers.splice(u--,1);this._isClearing=!1}addMarker(u){const p=new m.Marker(u);return this.markers.push(p),p.register(this.lines.onTrim(b=>{p.line-=b,p.line<0&&p.dispose()})),p.register(this.lines.onInsert(b=>{p.line>=b.index&&(p.line+=b.amount)})),p.register(this.lines.onDelete(b=>{p.line>=b.index&&p.line<b.index+b.amount&&p.dispose(),p.line>b.index&&(p.line-=b.amount)})),p.register(p.onDispose(()=>this._removeMarker(p))),p}_removeMarker(u){this._isClearing||this.markers.splice(this.markers.indexOf(u),1)}}},8437:(c,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferLine=o.DEFAULT_ATTR_DATA=void 0;const f=l(3734),v=l(511),h=l(643),g=l(482);o.DEFAULT_ATTR_DATA=Object.freeze(new f.AttributeData);let y=0;class _{constructor(m,d,u=!1){this.isWrapped=u,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*m);const p=d||v.CellData.fromCharData([0,h.NULL_CELL_CHAR,h.NULL_CELL_WIDTH,h.NULL_CELL_CODE]);for(let b=0;b<m;++b)this.setCell(b,p);this.length=m}get(m){const d=this._data[3*m+0],u=2097151&d;return[this._data[3*m+1],2097152&d?this._combined[m]:u?(0,g.stringFromCodePoint)(u):"",d>>22,2097152&d?this._combined[m].charCodeAt(this._combined[m].length-1):u]}set(m,d){this._data[3*m+1]=d[h.CHAR_DATA_ATTR_INDEX],d[h.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[m]=d[1],this._data[3*m+0]=2097152|m|d[h.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*m+0]=d[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|d[h.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(m){return this._data[3*m+0]>>22}hasWidth(m){return 12582912&this._data[3*m+0]}getFg(m){return this._data[3*m+1]}getBg(m){return this._data[3*m+2]}hasContent(m){return 4194303&this._data[3*m+0]}getCodePoint(m){const d=this._data[3*m+0];return 2097152&d?this._combined[m].charCodeAt(this._combined[m].length-1):2097151&d}isCombined(m){return 2097152&this._data[3*m+0]}getString(m){const d=this._data[3*m+0];return 2097152&d?this._combined[m]:2097151&d?(0,g.stringFromCodePoint)(2097151&d):""}isProtected(m){return 536870912&this._data[3*m+2]}loadCell(m,d){return y=3*m,d.content=this._data[y+0],d.fg=this._data[y+1],d.bg=this._data[y+2],2097152&d.content&&(d.combinedData=this._combined[m]),268435456&d.bg&&(d.extended=this._extendedAttrs[m]),d}setCell(m,d){2097152&d.content&&(this._combined[m]=d.combinedData),268435456&d.bg&&(this._extendedAttrs[m]=d.extended),this._data[3*m+0]=d.content,this._data[3*m+1]=d.fg,this._data[3*m+2]=d.bg}setCellFromCodepoint(m,d,u,p){268435456&p.bg&&(this._extendedAttrs[m]=p.extended),this._data[3*m+0]=d|u<<22,this._data[3*m+1]=p.fg,this._data[3*m+2]=p.bg}addCodepointToCell(m,d,u){let p=this._data[3*m+0];2097152&p?this._combined[m]+=(0,g.stringFromCodePoint)(d):2097151&p?(this._combined[m]=(0,g.stringFromCodePoint)(2097151&p)+(0,g.stringFromCodePoint)(d),p&=-2097152,p|=2097152):p=d|4194304,u&&(p&=-12582913,p|=u<<22),this._data[3*m+0]=p}insertCells(m,d,u){if((m%=this.length)&&this.getWidth(m-1)===2&&this.setCellFromCodepoint(m-1,0,1,u),d<this.length-m){const p=new v.CellData;for(let b=this.length-m-d-1;b>=0;--b)this.setCell(m+d+b,this.loadCell(m+b,p));for(let b=0;b<d;++b)this.setCell(m+b,u)}else for(let p=m;p<this.length;++p)this.setCell(p,u);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,u)}deleteCells(m,d,u){if(m%=this.length,d<this.length-m){const p=new v.CellData;for(let b=0;b<this.length-m-d;++b)this.setCell(m+b,this.loadCell(m+d+b,p));for(let b=this.length-d;b<this.length;++b)this.setCell(b,u)}else for(let p=m;p<this.length;++p)this.setCell(p,u);m&&this.getWidth(m-1)===2&&this.setCellFromCodepoint(m-1,0,1,u),this.getWidth(m)!==0||this.hasContent(m)||this.setCellFromCodepoint(m,0,1,u)}replaceCells(m,d,u,p=!1){if(p)for(m&&this.getWidth(m-1)===2&&!this.isProtected(m-1)&&this.setCellFromCodepoint(m-1,0,1,u),d<this.length&&this.getWidth(d-1)===2&&!this.isProtected(d)&&this.setCellFromCodepoint(d,0,1,u);m<d&&m<this.length;)this.isProtected(m)||this.setCell(m,u),m++;else for(m&&this.getWidth(m-1)===2&&this.setCellFromCodepoint(m-1,0,1,u),d<this.length&&this.getWidth(d-1)===2&&this.setCellFromCodepoint(d,0,1,u);m<d&&m<this.length;)this.setCell(m++,u)}resize(m,d){if(m===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const u=3*m;if(m>this.length){if(this._data.buffer.byteLength>=4*u)this._data=new Uint32Array(this._data.buffer,0,u);else{const p=new Uint32Array(u);p.set(this._data),this._data=p}for(let p=this.length;p<m;++p)this.setCell(p,d)}else{this._data=this._data.subarray(0,u);const p=Object.keys(this._combined);for(let S=0;S<p.length;S++){const C=parseInt(p[S],10);C>=m&&delete this._combined[C]}const b=Object.keys(this._extendedAttrs);for(let S=0;S<b.length;S++){const C=parseInt(b[S],10);C>=m&&delete this._extendedAttrs[C]}}return this.length=m,4*u*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const m=new Uint32Array(this._data.length);return m.set(this._data),this._data=m,1}return 0}fill(m,d=!1){if(d)for(let u=0;u<this.length;++u)this.isProtected(u)||this.setCell(u,m);else{this._combined={},this._extendedAttrs={};for(let u=0;u<this.length;++u)this.setCell(u,m)}}copyFrom(m){this.length!==m.length?this._data=new Uint32Array(m._data):this._data.set(m._data),this.length=m.length,this._combined={};for(const d in m._combined)this._combined[d]=m._combined[d];this._extendedAttrs={};for(const d in m._extendedAttrs)this._extendedAttrs[d]=m._extendedAttrs[d];this.isWrapped=m.isWrapped}clone(){const m=new _(0);m._data=new Uint32Array(this._data),m.length=this.length;for(const d in this._combined)m._combined[d]=this._combined[d];for(const d in this._extendedAttrs)m._extendedAttrs[d]=this._extendedAttrs[d];return m.isWrapped=this.isWrapped,m}getTrimmedLength(){for(let m=this.length-1;m>=0;--m)if(4194303&this._data[3*m+0])return m+(this._data[3*m+0]>>22);return 0}getNoBgTrimmedLength(){for(let m=this.length-1;m>=0;--m)if(4194303&this._data[3*m+0]||50331648&this._data[3*m+2])return m+(this._data[3*m+0]>>22);return 0}copyCellsFrom(m,d,u,p,b){const S=m._data;if(b)for(let k=p-1;k>=0;k--){for(let w=0;w<3;w++)this._data[3*(u+k)+w]=S[3*(d+k)+w];268435456&S[3*(d+k)+2]&&(this._extendedAttrs[u+k]=m._extendedAttrs[d+k])}else for(let k=0;k<p;k++){for(let w=0;w<3;w++)this._data[3*(u+k)+w]=S[3*(d+k)+w];268435456&S[3*(d+k)+2]&&(this._extendedAttrs[u+k]=m._extendedAttrs[d+k])}const C=Object.keys(m._combined);for(let k=0;k<C.length;k++){const w=parseInt(C[k],10);w>=d&&(this._combined[w-d+u]=m._combined[w])}}translateToString(m,d,u,p){d=d??0,u=u??this.length,m&&(u=Math.min(u,this.getTrimmedLength())),p&&(p.length=0);let b="";for(;d<u;){const S=this._data[3*d+0],C=2097151&S,k=2097152&S?this._combined[d]:C?(0,g.stringFromCodePoint)(C):h.WHITESPACE_CELL_CHAR;if(b+=k,p)for(let w=0;w<k.length;++w)p.push(d);d+=S>>22||1}return p&&p.push(d),b}}o.BufferLine=_},4841:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.getRangeLength=void 0,o.getRangeLength=function(l,f){if(l.start.y>l.end.y)throw new Error(`Buffer range end (${l.end.x}, ${l.end.y}) cannot be before start (${l.start.x}, ${l.start.y})`);return f*(l.end.y-l.start.y)+(l.end.x-l.start.x+1)}},4634:(c,o)=>{function l(f,v,h){if(v===f.length-1)return f[v].getTrimmedLength();const g=!f[v].hasContent(h-1)&&f[v].getWidth(h-1)===1,y=f[v+1].getWidth(0)===2;return g&&y?h-1:h}Object.defineProperty(o,"__esModule",{value:!0}),o.getWrappedLineTrimmedLength=o.reflowSmallerGetNewLineLengths=o.reflowLargerApplyNewLayout=o.reflowLargerCreateNewLayout=o.reflowLargerGetLinesToRemove=void 0,o.reflowLargerGetLinesToRemove=function(f,v,h,g,y){const _=[];for(let x=0;x<f.length-1;x++){let m=x,d=f.get(++m);if(!d.isWrapped)continue;const u=[f.get(x)];for(;m<f.length&&d.isWrapped;)u.push(d),d=f.get(++m);if(g>=x&&g<m){x+=u.length-1;continue}let p=0,b=l(u,p,v),S=1,C=0;for(;S<u.length;){const w=l(u,S,v),N=w-C,D=h-b,T=Math.min(N,D);u[p].copyCellsFrom(u[S],C,b,T,!1),b+=T,b===h&&(p++,b=0),C+=T,C===w&&(S++,C=0),b===0&&p!==0&&u[p-1].getWidth(h-1)===2&&(u[p].copyCellsFrom(u[p-1],h-1,b++,1,!1),u[p-1].setCell(h-1,y))}u[p].replaceCells(b,h,y);let k=0;for(let w=u.length-1;w>0&&(w>p||u[w].getTrimmedLength()===0);w--)k++;k>0&&(_.push(x+u.length-k),_.push(k)),x+=u.length-1}return _},o.reflowLargerCreateNewLayout=function(f,v){const h=[];let g=0,y=v[g],_=0;for(let x=0;x<f.length;x++)if(y===x){const m=v[++g];f.onDeleteEmitter.fire({index:x-_,amount:m}),x+=m-1,_+=m,y=v[++g]}else h.push(x);return{layout:h,countRemoved:_}},o.reflowLargerApplyNewLayout=function(f,v){const h=[];for(let g=0;g<v.length;g++)h.push(f.get(v[g]));for(let g=0;g<h.length;g++)f.set(g,h[g]);f.length=v.length},o.reflowSmallerGetNewLineLengths=function(f,v,h){const g=[],y=f.map((d,u)=>l(f,u,v)).reduce((d,u)=>d+u);let _=0,x=0,m=0;for(;m<y;){if(y-m<h){g.push(y-m);break}_+=h;const d=l(f,x,v);_>d&&(_-=d,x++);const u=f[x].getWidth(_-1)===2;u&&_--;const p=u?h-1:h;g.push(p),m+=p}return g},o.getWrappedLineTrimmedLength=l},5295:(c,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferSet=void 0;const f=l(8460),v=l(844),h=l(9092);class g extends v.Disposable{constructor(_,x){super(),this._optionsService=_,this._bufferService=x,this._onBufferActivate=this.register(new f.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new h.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new h.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(_){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(_),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(_,x){this._normal.resize(_,x),this._alt.resize(_,x),this.setupTabStops(_)}setupTabStops(_){this._normal.setupTabStops(_),this._alt.setupTabStops(_)}}o.BufferSet=g},511:(c,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CellData=void 0;const f=l(482),v=l(643),h=l(3734);class g extends h.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new h.ExtendedAttrs,this.combinedData=""}static fromCharData(_){const x=new g;return x.setFromCharData(_),x}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(_){this.fg=_[v.CHAR_DATA_ATTR_INDEX],this.bg=0;let x=!1;if(_[v.CHAR_DATA_CHAR_INDEX].length>2)x=!0;else if(_[v.CHAR_DATA_CHAR_INDEX].length===2){const m=_[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=m&&m<=56319){const d=_[v.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=d&&d<=57343?this.content=1024*(m-55296)+d-56320+65536|_[v.CHAR_DATA_WIDTH_INDEX]<<22:x=!0}else x=!0}else this.content=_[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|_[v.CHAR_DATA_WIDTH_INDEX]<<22;x&&(this.combinedData=_[v.CHAR_DATA_CHAR_INDEX],this.content=2097152|_[v.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}o.CellData=g},643:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WHITESPACE_CELL_CODE=o.WHITESPACE_CELL_WIDTH=o.WHITESPACE_CELL_CHAR=o.NULL_CELL_CODE=o.NULL_CELL_WIDTH=o.NULL_CELL_CHAR=o.CHAR_DATA_CODE_INDEX=o.CHAR_DATA_WIDTH_INDEX=o.CHAR_DATA_CHAR_INDEX=o.CHAR_DATA_ATTR_INDEX=o.DEFAULT_EXT=o.DEFAULT_ATTR=o.DEFAULT_COLOR=void 0,o.DEFAULT_COLOR=0,o.DEFAULT_ATTR=256|o.DEFAULT_COLOR<<9,o.DEFAULT_EXT=0,o.CHAR_DATA_ATTR_INDEX=0,o.CHAR_DATA_CHAR_INDEX=1,o.CHAR_DATA_WIDTH_INDEX=2,o.CHAR_DATA_CODE_INDEX=3,o.NULL_CELL_CHAR="",o.NULL_CELL_WIDTH=1,o.NULL_CELL_CODE=0,o.WHITESPACE_CELL_CHAR=" ",o.WHITESPACE_CELL_WIDTH=1,o.WHITESPACE_CELL_CODE=32},4863:(c,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Marker=void 0;const f=l(8460),v=l(844);class h{get id(){return this._id}constructor(y){this.line=y,this.isDisposed=!1,this._disposables=[],this._id=h._nextId++,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,v.disposeArray)(this._disposables),this._disposables.length=0)}register(y){return this._disposables.push(y),y}}o.Marker=h,h._nextId=1},7116:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DEFAULT_CHARSET=o.CHARSETS=void 0,o.CHARSETS={},o.DEFAULT_CHARSET=o.CHARSETS.B,o.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},o.CHARSETS.A={"#":""},o.CHARSETS.B=void 0,o.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},o.CHARSETS.C=o.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},o.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},o.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},o.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},o.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},o.CHARSETS.E=o.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},o.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},o.CHARSETS.H=o.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},o.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(c,o)=>{var l,f,v;Object.defineProperty(o,"__esModule",{value:!0}),o.C1_ESCAPED=o.C1=o.C0=void 0,function(h){h.NUL="\0",h.SOH="",h.STX="",h.ETX="",h.EOT="",h.ENQ="",h.ACK="",h.BEL="\x07",h.BS="\b",h.HT="	",h.LF=`
`,h.VT="\v",h.FF="\f",h.CR="\r",h.SO="",h.SI="",h.DLE="",h.DC1="",h.DC2="",h.DC3="",h.DC4="",h.NAK="",h.SYN="",h.ETB="",h.CAN="",h.EM="",h.SUB="",h.ESC="\x1B",h.FS="",h.GS="",h.RS="",h.US="",h.SP=" ",h.DEL=""}(l||(o.C0=l={})),function(h){h.PAD="",h.HOP="",h.BPH="",h.NBH="",h.IND="",h.NEL="",h.SSA="",h.ESA="",h.HTS="",h.HTJ="",h.VTS="",h.PLD="",h.PLU="",h.RI="",h.SS2="",h.SS3="",h.DCS="",h.PU1="",h.PU2="",h.STS="",h.CCH="",h.MW="",h.SPA="",h.EPA="",h.SOS="",h.SGCI="",h.SCI="",h.CSI="",h.ST="",h.OSC="",h.PM="",h.APC=""}(f||(o.C1=f={})),function(h){h.ST=`${l.ESC}\\`}(v||(o.C1_ESCAPED=v={}))},7399:(c,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.evaluateKeyboardEvent=void 0;const f=l(2584),v={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};o.evaluateKeyboardEvent=function(h,g,y,_){const x={type:0,cancel:!1,key:void 0},m=(h.shiftKey?1:0)|(h.altKey?2:0)|(h.ctrlKey?4:0)|(h.metaKey?8:0);switch(h.keyCode){case 0:h.key==="UIKeyInputUpArrow"?x.key=g?f.C0.ESC+"OA":f.C0.ESC+"[A":h.key==="UIKeyInputLeftArrow"?x.key=g?f.C0.ESC+"OD":f.C0.ESC+"[D":h.key==="UIKeyInputRightArrow"?x.key=g?f.C0.ESC+"OC":f.C0.ESC+"[C":h.key==="UIKeyInputDownArrow"&&(x.key=g?f.C0.ESC+"OB":f.C0.ESC+"[B");break;case 8:x.key=h.ctrlKey?"\b":f.C0.DEL,h.altKey&&(x.key=f.C0.ESC+x.key);break;case 9:if(h.shiftKey){x.key=f.C0.ESC+"[Z";break}x.key=f.C0.HT,x.cancel=!0;break;case 13:x.key=h.altKey?f.C0.ESC+f.C0.CR:f.C0.CR,x.cancel=!0;break;case 27:x.key=f.C0.ESC,h.altKey&&(x.key=f.C0.ESC+f.C0.ESC),x.cancel=!0;break;case 37:if(h.metaKey)break;m?(x.key=f.C0.ESC+"[1;"+(m+1)+"D",x.key===f.C0.ESC+"[1;3D"&&(x.key=f.C0.ESC+(y?"b":"[1;5D"))):x.key=g?f.C0.ESC+"OD":f.C0.ESC+"[D";break;case 39:if(h.metaKey)break;m?(x.key=f.C0.ESC+"[1;"+(m+1)+"C",x.key===f.C0.ESC+"[1;3C"&&(x.key=f.C0.ESC+(y?"f":"[1;5C"))):x.key=g?f.C0.ESC+"OC":f.C0.ESC+"[C";break;case 38:if(h.metaKey)break;m?(x.key=f.C0.ESC+"[1;"+(m+1)+"A",y||x.key!==f.C0.ESC+"[1;3A"||(x.key=f.C0.ESC+"[1;5A")):x.key=g?f.C0.ESC+"OA":f.C0.ESC+"[A";break;case 40:if(h.metaKey)break;m?(x.key=f.C0.ESC+"[1;"+(m+1)+"B",y||x.key!==f.C0.ESC+"[1;3B"||(x.key=f.C0.ESC+"[1;5B")):x.key=g?f.C0.ESC+"OB":f.C0.ESC+"[B";break;case 45:h.shiftKey||h.ctrlKey||(x.key=f.C0.ESC+"[2~");break;case 46:x.key=m?f.C0.ESC+"[3;"+(m+1)+"~":f.C0.ESC+"[3~";break;case 36:x.key=m?f.C0.ESC+"[1;"+(m+1)+"H":g?f.C0.ESC+"OH":f.C0.ESC+"[H";break;case 35:x.key=m?f.C0.ESC+"[1;"+(m+1)+"F":g?f.C0.ESC+"OF":f.C0.ESC+"[F";break;case 33:h.shiftKey?x.type=2:h.ctrlKey?x.key=f.C0.ESC+"[5;"+(m+1)+"~":x.key=f.C0.ESC+"[5~";break;case 34:h.shiftKey?x.type=3:h.ctrlKey?x.key=f.C0.ESC+"[6;"+(m+1)+"~":x.key=f.C0.ESC+"[6~";break;case 112:x.key=m?f.C0.ESC+"[1;"+(m+1)+"P":f.C0.ESC+"OP";break;case 113:x.key=m?f.C0.ESC+"[1;"+(m+1)+"Q":f.C0.ESC+"OQ";break;case 114:x.key=m?f.C0.ESC+"[1;"+(m+1)+"R":f.C0.ESC+"OR";break;case 115:x.key=m?f.C0.ESC+"[1;"+(m+1)+"S":f.C0.ESC+"OS";break;case 116:x.key=m?f.C0.ESC+"[15;"+(m+1)+"~":f.C0.ESC+"[15~";break;case 117:x.key=m?f.C0.ESC+"[17;"+(m+1)+"~":f.C0.ESC+"[17~";break;case 118:x.key=m?f.C0.ESC+"[18;"+(m+1)+"~":f.C0.ESC+"[18~";break;case 119:x.key=m?f.C0.ESC+"[19;"+(m+1)+"~":f.C0.ESC+"[19~";break;case 120:x.key=m?f.C0.ESC+"[20;"+(m+1)+"~":f.C0.ESC+"[20~";break;case 121:x.key=m?f.C0.ESC+"[21;"+(m+1)+"~":f.C0.ESC+"[21~";break;case 122:x.key=m?f.C0.ESC+"[23;"+(m+1)+"~":f.C0.ESC+"[23~";break;case 123:x.key=m?f.C0.ESC+"[24;"+(m+1)+"~":f.C0.ESC+"[24~";break;default:if(!h.ctrlKey||h.shiftKey||h.altKey||h.metaKey)if(y&&!_||!h.altKey||h.metaKey)!y||h.altKey||h.ctrlKey||h.shiftKey||!h.metaKey?h.key&&!h.ctrlKey&&!h.altKey&&!h.metaKey&&h.keyCode>=48&&h.key.length===1?x.key=h.key:h.key&&h.ctrlKey&&(h.key==="_"&&(x.key=f.C0.US),h.key==="@"&&(x.key=f.C0.NUL)):h.keyCode===65&&(x.type=1);else{const d=v[h.keyCode],u=d==null?void 0:d[h.shiftKey?1:0];if(u)x.key=f.C0.ESC+u;else if(h.keyCode>=65&&h.keyCode<=90){const p=h.ctrlKey?h.keyCode-64:h.keyCode+32;let b=String.fromCharCode(p);h.shiftKey&&(b=b.toUpperCase()),x.key=f.C0.ESC+b}else if(h.keyCode===32)x.key=f.C0.ESC+(h.ctrlKey?f.C0.NUL:" ");else if(h.key==="Dead"&&h.code.startsWith("Key")){let p=h.code.slice(3,4);h.shiftKey||(p=p.toLowerCase()),x.key=f.C0.ESC+p,x.cancel=!0}}else h.keyCode>=65&&h.keyCode<=90?x.key=String.fromCharCode(h.keyCode-64):h.keyCode===32?x.key=f.C0.NUL:h.keyCode>=51&&h.keyCode<=55?x.key=String.fromCharCode(h.keyCode-51+27):h.keyCode===56?x.key=f.C0.DEL:h.keyCode===219?x.key=f.C0.ESC:h.keyCode===220?x.key=f.C0.FS:h.keyCode===221&&(x.key=f.C0.GS)}return x}},482:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Utf8ToUtf32=o.StringToUtf32=o.utf32ToString=o.stringFromCodePoint=void 0,o.stringFromCodePoint=function(l){return l>65535?(l-=65536,String.fromCharCode(55296+(l>>10))+String.fromCharCode(l%1024+56320)):String.fromCharCode(l)},o.utf32ToString=function(l,f=0,v=l.length){let h="";for(let g=f;g<v;++g){let y=l[g];y>65535?(y-=65536,h+=String.fromCharCode(55296+(y>>10))+String.fromCharCode(y%1024+56320)):h+=String.fromCharCode(y)}return h},o.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(l,f){const v=l.length;if(!v)return 0;let h=0,g=0;if(this._interim){const y=l.charCodeAt(g++);56320<=y&&y<=57343?f[h++]=1024*(this._interim-55296)+y-56320+65536:(f[h++]=this._interim,f[h++]=y),this._interim=0}for(let y=g;y<v;++y){const _=l.charCodeAt(y);if(55296<=_&&_<=56319){if(++y>=v)return this._interim=_,h;const x=l.charCodeAt(y);56320<=x&&x<=57343?f[h++]=1024*(_-55296)+x-56320+65536:(f[h++]=_,f[h++]=x)}else _!==65279&&(f[h++]=_)}return h}},o.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(l,f){const v=l.length;if(!v)return 0;let h,g,y,_,x=0,m=0,d=0;if(this.interim[0]){let b=!1,S=this.interim[0];S&=(224&S)==192?31:(240&S)==224?15:7;let C,k=0;for(;(C=63&this.interim[++k])&&k<4;)S<<=6,S|=C;const w=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,N=w-k;for(;d<N;){if(d>=v)return 0;if(C=l[d++],(192&C)!=128){d--,b=!0;break}this.interim[k++]=C,S<<=6,S|=63&C}b||(w===2?S<128?d--:f[x++]=S:w===3?S<2048||S>=55296&&S<=57343||S===65279||(f[x++]=S):S<65536||S>1114111||(f[x++]=S)),this.interim.fill(0)}const u=v-4;let p=d;for(;p<v;){for(;!(!(p<u)||128&(h=l[p])||128&(g=l[p+1])||128&(y=l[p+2])||128&(_=l[p+3]));)f[x++]=h,f[x++]=g,f[x++]=y,f[x++]=_,p+=4;if(h=l[p++],h<128)f[x++]=h;else if((224&h)==192){if(p>=v)return this.interim[0]=h,x;if(g=l[p++],(192&g)!=128){p--;continue}if(m=(31&h)<<6|63&g,m<128){p--;continue}f[x++]=m}else if((240&h)==224){if(p>=v)return this.interim[0]=h,x;if(g=l[p++],(192&g)!=128){p--;continue}if(p>=v)return this.interim[0]=h,this.interim[1]=g,x;if(y=l[p++],(192&y)!=128){p--;continue}if(m=(15&h)<<12|(63&g)<<6|63&y,m<2048||m>=55296&&m<=57343||m===65279)continue;f[x++]=m}else if((248&h)==240){if(p>=v)return this.interim[0]=h,x;if(g=l[p++],(192&g)!=128){p--;continue}if(p>=v)return this.interim[0]=h,this.interim[1]=g,x;if(y=l[p++],(192&y)!=128){p--;continue}if(p>=v)return this.interim[0]=h,this.interim[1]=g,this.interim[2]=y,x;if(_=l[p++],(192&_)!=128){p--;continue}if(m=(7&h)<<18|(63&g)<<12|(63&y)<<6|63&_,m<65536||m>1114111)continue;f[x++]=m}}return x}}},225:(c,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeV6=void 0;const f=l(1480),v=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],h=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let g;o.UnicodeV6=class{constructor(){if(this.version="6",!g){g=new Uint8Array(65536),g.fill(1),g[0]=0,g.fill(0,1,32),g.fill(0,127,160),g.fill(2,4352,4448),g[9001]=2,g[9002]=2,g.fill(2,11904,42192),g[12351]=1,g.fill(2,44032,55204),g.fill(2,63744,64256),g.fill(2,65040,65050),g.fill(2,65072,65136),g.fill(2,65280,65377),g.fill(2,65504,65511);for(let y=0;y<v.length;++y)g.fill(0,v[y][0],v[y][1]+1)}}wcwidth(y){return y<32?0:y<127?1:y<65536?g[y]:function(_,x){let m,d=0,u=x.length-1;if(_<x[0][0]||_>x[u][1])return!1;for(;u>=d;)if(m=d+u>>1,_>x[m][1])d=m+1;else{if(!(_<x[m][0]))return!0;u=m-1}return!1}(y,h)?0:y>=131072&&y<=196605||y>=196608&&y<=262141?2:1}charProperties(y,_){let x=this.wcwidth(y),m=x===0&&_!==0;if(m){const d=f.UnicodeService.extractWidth(_);d===0?m=!1:d>x&&(x=d)}return f.UnicodeService.createPropertyValue(0,x,m)}}},5981:(c,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WriteBuffer=void 0;const f=l(8460),v=l(844);class h extends v.Disposable{constructor(y){super(),this._action=y,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new f.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(y,_){if(_!==void 0&&this._syncCalls>_)return void(this._syncCalls=0);if(this._pendingData+=y.length,this._writeBuffer.push(y),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let x;for(this._isSyncWriting=!0;x=this._writeBuffer.shift();){this._action(x);const m=this._callbacks.shift();m&&m()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(y,_){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=y.length,this._writeBuffer.push(y),this._callbacks.push(_),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=y.length,this._writeBuffer.push(y),this._callbacks.push(_)}_innerWrite(y=0,_=!0){const x=y||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const m=this._writeBuffer[this._bufferOffset],d=this._action(m,_);if(d){const p=b=>Date.now()-x>=12?setTimeout(()=>this._innerWrite(0,b)):this._innerWrite(x,b);return void d.catch(b=>(queueMicrotask(()=>{throw b}),Promise.resolve(!1))).then(p)}const u=this._callbacks[this._bufferOffset];if(u&&u(),this._bufferOffset++,this._pendingData-=m.length,Date.now()-x>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}o.WriteBuffer=h},5941:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.toRgbString=o.parseColor=void 0;const l=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,f=/^[\da-f]+$/;function v(h,g){const y=h.toString(16),_=y.length<2?"0"+y:y;switch(g){case 4:return y[0];case 8:return _;case 12:return(_+_).slice(0,3);default:return _+_}}o.parseColor=function(h){if(!h)return;let g=h.toLowerCase();if(g.indexOf("rgb:")===0){g=g.slice(4);const y=l.exec(g);if(y){const _=y[1]?15:y[4]?255:y[7]?4095:65535;return[Math.round(parseInt(y[1]||y[4]||y[7]||y[10],16)/_*255),Math.round(parseInt(y[2]||y[5]||y[8]||y[11],16)/_*255),Math.round(parseInt(y[3]||y[6]||y[9]||y[12],16)/_*255)]}}else if(g.indexOf("#")===0&&(g=g.slice(1),f.exec(g)&&[3,6,9,12].includes(g.length))){const y=g.length/3,_=[0,0,0];for(let x=0;x<3;++x){const m=parseInt(g.slice(y*x,y*x+y),16);_[x]=y===1?m<<4:y===2?m:y===3?m>>4:m>>8}return _}},o.toRgbString=function(h,g=16){const[y,_,x]=h;return`rgb:${v(y,g)}/${v(_,g)}/${v(x,g)}`}},5770:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PAYLOAD_LIMIT=void 0,o.PAYLOAD_LIMIT=1e7},6351:(c,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DcsHandler=o.DcsParser=void 0;const f=l(482),v=l(8742),h=l(5770),g=[];o.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=g,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=g}registerHandler(_,x){this._handlers[_]===void 0&&(this._handlers[_]=[]);const m=this._handlers[_];return m.push(x),{dispose:()=>{const d=m.indexOf(x);d!==-1&&m.splice(d,1)}}}clearHandler(_){this._handlers[_]&&delete this._handlers[_]}setHandlerFallback(_){this._handlerFb=_}reset(){if(this._active.length)for(let _=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;_>=0;--_)this._active[_].unhook(!1);this._stack.paused=!1,this._active=g,this._ident=0}hook(_,x){if(this.reset(),this._ident=_,this._active=this._handlers[_]||g,this._active.length)for(let m=this._active.length-1;m>=0;m--)this._active[m].hook(x);else this._handlerFb(this._ident,"HOOK",x)}put(_,x,m){if(this._active.length)for(let d=this._active.length-1;d>=0;d--)this._active[d].put(_,x,m);else this._handlerFb(this._ident,"PUT",(0,f.utf32ToString)(_,x,m))}unhook(_,x=!0){if(this._active.length){let m=!1,d=this._active.length-1,u=!1;if(this._stack.paused&&(d=this._stack.loopPosition-1,m=x,u=this._stack.fallThrough,this._stack.paused=!1),!u&&m===!1){for(;d>=0&&(m=this._active[d].unhook(_),m!==!0);d--)if(m instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!1,m;d--}for(;d>=0;d--)if(m=this._active[d].unhook(!1),m instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!0,m}else this._handlerFb(this._ident,"UNHOOK",_);this._active=g,this._ident=0}};const y=new v.Params;y.addParam(0),o.DcsHandler=class{constructor(_){this._handler=_,this._data="",this._params=y,this._hitLimit=!1}hook(_){this._params=_.length>1||_.params[0]?_.clone():y,this._data="",this._hitLimit=!1}put(_,x,m){this._hitLimit||(this._data+=(0,f.utf32ToString)(_,x,m),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(_){let x=!1;if(this._hitLimit)x=!1;else if(_&&(x=this._handler(this._data,this._params),x instanceof Promise))return x.then(m=>(this._params=y,this._data="",this._hitLimit=!1,m));return this._params=y,this._data="",this._hitLimit=!1,x}}},2015:(c,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.EscapeSequenceParser=o.VT500_TRANSITION_TABLE=o.TransitionTable=void 0;const f=l(844),v=l(8742),h=l(6242),g=l(6351);class y{constructor(d){this.table=new Uint8Array(d)}setDefault(d,u){this.table.fill(d<<4|u)}add(d,u,p,b){this.table[u<<8|d]=p<<4|b}addMany(d,u,p,b){for(let S=0;S<d.length;S++)this.table[u<<8|d[S]]=p<<4|b}}o.TransitionTable=y;const _=160;o.VT500_TRANSITION_TABLE=function(){const m=new y(4095),d=Array.apply(null,Array(256)).map((k,w)=>w),u=(k,w)=>d.slice(k,w),p=u(32,127),b=u(0,24);b.push(25),b.push.apply(b,u(28,32));const S=u(0,14);let C;for(C in m.setDefault(1,0),m.addMany(p,0,2,0),S)m.addMany([24,26,153,154],C,3,0),m.addMany(u(128,144),C,3,0),m.addMany(u(144,152),C,3,0),m.add(156,C,0,0),m.add(27,C,11,1),m.add(157,C,4,8),m.addMany([152,158,159],C,0,7),m.add(155,C,11,3),m.add(144,C,11,9);return m.addMany(b,0,3,0),m.addMany(b,1,3,1),m.add(127,1,0,1),m.addMany(b,8,0,8),m.addMany(b,3,3,3),m.add(127,3,0,3),m.addMany(b,4,3,4),m.add(127,4,0,4),m.addMany(b,6,3,6),m.addMany(b,5,3,5),m.add(127,5,0,5),m.addMany(b,2,3,2),m.add(127,2,0,2),m.add(93,1,4,8),m.addMany(p,8,5,8),m.add(127,8,5,8),m.addMany([156,27,24,26,7],8,6,0),m.addMany(u(28,32),8,0,8),m.addMany([88,94,95],1,0,7),m.addMany(p,7,0,7),m.addMany(b,7,0,7),m.add(156,7,0,0),m.add(127,7,0,7),m.add(91,1,11,3),m.addMany(u(64,127),3,7,0),m.addMany(u(48,60),3,8,4),m.addMany([60,61,62,63],3,9,4),m.addMany(u(48,60),4,8,4),m.addMany(u(64,127),4,7,0),m.addMany([60,61,62,63],4,0,6),m.addMany(u(32,64),6,0,6),m.add(127,6,0,6),m.addMany(u(64,127),6,0,0),m.addMany(u(32,48),3,9,5),m.addMany(u(32,48),5,9,5),m.addMany(u(48,64),5,0,6),m.addMany(u(64,127),5,7,0),m.addMany(u(32,48),4,9,5),m.addMany(u(32,48),1,9,2),m.addMany(u(32,48),2,9,2),m.addMany(u(48,127),2,10,0),m.addMany(u(48,80),1,10,0),m.addMany(u(81,88),1,10,0),m.addMany([89,90,92],1,10,0),m.addMany(u(96,127),1,10,0),m.add(80,1,11,9),m.addMany(b,9,0,9),m.add(127,9,0,9),m.addMany(u(28,32),9,0,9),m.addMany(u(32,48),9,9,12),m.addMany(u(48,60),9,8,10),m.addMany([60,61,62,63],9,9,10),m.addMany(b,11,0,11),m.addMany(u(32,128),11,0,11),m.addMany(u(28,32),11,0,11),m.addMany(b,10,0,10),m.add(127,10,0,10),m.addMany(u(28,32),10,0,10),m.addMany(u(48,60),10,8,10),m.addMany([60,61,62,63],10,0,11),m.addMany(u(32,48),10,9,12),m.addMany(b,12,0,12),m.add(127,12,0,12),m.addMany(u(28,32),12,0,12),m.addMany(u(32,48),12,9,12),m.addMany(u(48,64),12,0,11),m.addMany(u(64,127),12,12,13),m.addMany(u(64,127),10,12,13),m.addMany(u(64,127),9,12,13),m.addMany(b,13,13,13),m.addMany(p,13,13,13),m.add(127,13,0,13),m.addMany([27,156,24,26],13,14,0),m.add(_,0,2,0),m.add(_,8,5,8),m.add(_,6,0,6),m.add(_,11,0,11),m.add(_,13,13,13),m}();class x extends f.Disposable{constructor(d=o.VT500_TRANSITION_TABLE){super(),this._transitions=d,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new v.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(u,p,b)=>{},this._executeHandlerFb=u=>{},this._csiHandlerFb=(u,p)=>{},this._escHandlerFb=u=>{},this._errorHandlerFb=u=>u,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,f.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new h.OscParser),this._dcsParser=this.register(new g.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(d,u=[64,126]){let p=0;if(d.prefix){if(d.prefix.length>1)throw new Error("only one byte as prefix supported");if(p=d.prefix.charCodeAt(0),p&&60>p||p>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(d.intermediates){if(d.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let S=0;S<d.intermediates.length;++S){const C=d.intermediates.charCodeAt(S);if(32>C||C>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");p<<=8,p|=C}}if(d.final.length!==1)throw new Error("final must be a single byte");const b=d.final.charCodeAt(0);if(u[0]>b||b>u[1])throw new Error(`final must be in range ${u[0]} .. ${u[1]}`);return p<<=8,p|=b,p}identToString(d){const u=[];for(;d;)u.push(String.fromCharCode(255&d)),d>>=8;return u.reverse().join("")}setPrintHandler(d){this._printHandler=d}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(d,u){const p=this._identifier(d,[48,126]);this._escHandlers[p]===void 0&&(this._escHandlers[p]=[]);const b=this._escHandlers[p];return b.push(u),{dispose:()=>{const S=b.indexOf(u);S!==-1&&b.splice(S,1)}}}clearEscHandler(d){this._escHandlers[this._identifier(d,[48,126])]&&delete this._escHandlers[this._identifier(d,[48,126])]}setEscHandlerFallback(d){this._escHandlerFb=d}setExecuteHandler(d,u){this._executeHandlers[d.charCodeAt(0)]=u}clearExecuteHandler(d){this._executeHandlers[d.charCodeAt(0)]&&delete this._executeHandlers[d.charCodeAt(0)]}setExecuteHandlerFallback(d){this._executeHandlerFb=d}registerCsiHandler(d,u){const p=this._identifier(d);this._csiHandlers[p]===void 0&&(this._csiHandlers[p]=[]);const b=this._csiHandlers[p];return b.push(u),{dispose:()=>{const S=b.indexOf(u);S!==-1&&b.splice(S,1)}}}clearCsiHandler(d){this._csiHandlers[this._identifier(d)]&&delete this._csiHandlers[this._identifier(d)]}setCsiHandlerFallback(d){this._csiHandlerFb=d}registerDcsHandler(d,u){return this._dcsParser.registerHandler(this._identifier(d),u)}clearDcsHandler(d){this._dcsParser.clearHandler(this._identifier(d))}setDcsHandlerFallback(d){this._dcsParser.setHandlerFallback(d)}registerOscHandler(d,u){return this._oscParser.registerHandler(d,u)}clearOscHandler(d){this._oscParser.clearHandler(d)}setOscHandlerFallback(d){this._oscParser.setHandlerFallback(d)}setErrorHandler(d){this._errorHandler=d}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(d,u,p,b,S){this._parseStack.state=d,this._parseStack.handlers=u,this._parseStack.handlerPos=p,this._parseStack.transition=b,this._parseStack.chunkPos=S}parse(d,u,p){let b,S=0,C=0,k=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,k=this._parseStack.chunkPos+1;else{if(p===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const w=this._parseStack.handlers;let N=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(p===!1&&N>-1){for(;N>=0&&(b=w[N](this._params),b!==!0);N--)if(b instanceof Promise)return this._parseStack.handlerPos=N,b}this._parseStack.handlers=[];break;case 4:if(p===!1&&N>-1){for(;N>=0&&(b=w[N](),b!==!0);N--)if(b instanceof Promise)return this._parseStack.handlerPos=N,b}this._parseStack.handlers=[];break;case 6:if(S=d[this._parseStack.chunkPos],b=this._dcsParser.unhook(S!==24&&S!==26,p),b)return b;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(S=d[this._parseStack.chunkPos],b=this._oscParser.end(S!==24&&S!==26,p),b)return b;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,k=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let w=k;w<u;++w){switch(S=d[w],C=this._transitions.table[this.currentState<<8|(S<160?S:_)],C>>4){case 2:for(let A=w+1;;++A){if(A>=u||(S=d[A])<32||S>126&&S<_){this._printHandler(d,w,A),w=A-1;break}if(++A>=u||(S=d[A])<32||S>126&&S<_){this._printHandler(d,w,A),w=A-1;break}if(++A>=u||(S=d[A])<32||S>126&&S<_){this._printHandler(d,w,A),w=A-1;break}if(++A>=u||(S=d[A])<32||S>126&&S<_){this._printHandler(d,w,A),w=A-1;break}}break;case 3:this._executeHandlers[S]?this._executeHandlers[S]():this._executeHandlerFb(S),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:w,code:S,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const N=this._csiHandlers[this._collect<<8|S];let D=N?N.length-1:-1;for(;D>=0&&(b=N[D](this._params),b!==!0);D--)if(b instanceof Promise)return this._preserveStack(3,N,D,C,w),b;D<0&&this._csiHandlerFb(this._collect<<8|S,this._params),this.precedingJoinState=0;break;case 8:do switch(S){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(S-48)}while(++w<u&&(S=d[w])>47&&S<60);w--;break;case 9:this._collect<<=8,this._collect|=S;break;case 10:const T=this._escHandlers[this._collect<<8|S];let I=T?T.length-1:-1;for(;I>=0&&(b=T[I](),b!==!0);I--)if(b instanceof Promise)return this._preserveStack(4,T,I,C,w),b;I<0&&this._escHandlerFb(this._collect<<8|S),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|S,this._params);break;case 13:for(let A=w+1;;++A)if(A>=u||(S=d[A])===24||S===26||S===27||S>127&&S<_){this._dcsParser.put(d,w,A),w=A-1;break}break;case 14:if(b=this._dcsParser.unhook(S!==24&&S!==26),b)return this._preserveStack(6,[],0,C,w),b;S===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let A=w+1;;A++)if(A>=u||(S=d[A])<32||S>127&&S<_){this._oscParser.put(d,w,A),w=A-1;break}break;case 6:if(b=this._oscParser.end(S!==24&&S!==26),b)return this._preserveStack(5,[],0,C,w),b;S===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&C}}}o.EscapeSequenceParser=x},6242:(c,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.OscHandler=o.OscParser=void 0;const f=l(5770),v=l(482),h=[];o.OscParser=class{constructor(){this._state=0,this._active=h,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(g,y){this._handlers[g]===void 0&&(this._handlers[g]=[]);const _=this._handlers[g];return _.push(y),{dispose:()=>{const x=_.indexOf(y);x!==-1&&_.splice(x,1)}}}clearHandler(g){this._handlers[g]&&delete this._handlers[g]}setHandlerFallback(g){this._handlerFb=g}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=h}reset(){if(this._state===2)for(let g=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;g>=0;--g)this._active[g].end(!1);this._stack.paused=!1,this._active=h,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||h,this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].start();else this._handlerFb(this._id,"START")}_put(g,y,_){if(this._active.length)for(let x=this._active.length-1;x>=0;x--)this._active[x].put(g,y,_);else this._handlerFb(this._id,"PUT",(0,v.utf32ToString)(g,y,_))}start(){this.reset(),this._state=1}put(g,y,_){if(this._state!==3){if(this._state===1)for(;y<_;){const x=g[y++];if(x===59){this._state=2,this._start();break}if(x<48||57<x)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+x-48}this._state===2&&_-y>0&&this._put(g,y,_)}}end(g,y=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let _=!1,x=this._active.length-1,m=!1;if(this._stack.paused&&(x=this._stack.loopPosition-1,_=y,m=this._stack.fallThrough,this._stack.paused=!1),!m&&_===!1){for(;x>=0&&(_=this._active[x].end(g),_!==!0);x--)if(_ instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=x,this._stack.fallThrough=!1,_;x--}for(;x>=0;x--)if(_=this._active[x].end(!1),_ instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=x,this._stack.fallThrough=!0,_}else this._handlerFb(this._id,"END",g);this._active=h,this._id=-1,this._state=0}}},o.OscHandler=class{constructor(g){this._handler=g,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(g,y,_){this._hitLimit||(this._data+=(0,v.utf32ToString)(g,y,_),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(g){let y=!1;if(this._hitLimit)y=!1;else if(g&&(y=this._handler(this._data),y instanceof Promise))return y.then(_=>(this._data="",this._hitLimit=!1,_));return this._data="",this._hitLimit=!1,y}}},8742:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Params=void 0;const l=2147483647;class f{static fromArray(h){const g=new f;if(!h.length)return g;for(let y=Array.isArray(h[0])?1:0;y<h.length;++y){const _=h[y];if(Array.isArray(_))for(let x=0;x<_.length;++x)g.addSubParam(_[x]);else g.addParam(_)}return g}constructor(h=32,g=32){if(this.maxLength=h,this.maxSubParamsLength=g,g>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(h),this.length=0,this._subParams=new Int32Array(g),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(h),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const h=new f(this.maxLength,this.maxSubParamsLength);return h.params.set(this.params),h.length=this.length,h._subParams.set(this._subParams),h._subParamsLength=this._subParamsLength,h._subParamsIdx.set(this._subParamsIdx),h._rejectDigits=this._rejectDigits,h._rejectSubDigits=this._rejectSubDigits,h._digitIsSub=this._digitIsSub,h}toArray(){const h=[];for(let g=0;g<this.length;++g){h.push(this.params[g]);const y=this._subParamsIdx[g]>>8,_=255&this._subParamsIdx[g];_-y>0&&h.push(Array.prototype.slice.call(this._subParams,y,_))}return h}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(h){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=h>l?l:h}}addSubParam(h){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=h>l?l:h,this._subParamsIdx[this.length-1]++}}hasSubParams(h){return(255&this._subParamsIdx[h])-(this._subParamsIdx[h]>>8)>0}getSubParams(h){const g=this._subParamsIdx[h]>>8,y=255&this._subParamsIdx[h];return y-g>0?this._subParams.subarray(g,y):null}getSubParamsAll(){const h={};for(let g=0;g<this.length;++g){const y=this._subParamsIdx[g]>>8,_=255&this._subParamsIdx[g];_-y>0&&(h[g]=this._subParams.slice(y,_))}return h}addDigit(h){let g;if(this._rejectDigits||!(g=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const y=this._digitIsSub?this._subParams:this.params,_=y[g-1];y[g-1]=~_?Math.min(10*_+h,l):h}}o.Params=f},5741:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.AddonManager=void 0,o.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let l=this._addons.length-1;l>=0;l--)this._addons[l].instance.dispose()}loadAddon(l,f){const v={instance:f,dispose:f.dispose,isDisposed:!1};this._addons.push(v),f.dispose=()=>this._wrappedAddonDispose(v),f.activate(l)}_wrappedAddonDispose(l){if(l.isDisposed)return;let f=-1;for(let v=0;v<this._addons.length;v++)if(this._addons[v]===l){f=v;break}if(f===-1)throw new Error("Could not dispose an addon that has not been loaded");l.isDisposed=!0,l.dispose.apply(l.instance),this._addons.splice(f,1)}}},8771:(c,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferApiView=void 0;const f=l(3785),v=l(511);o.BufferApiView=class{constructor(h,g){this._buffer=h,this.type=g}init(h){return this._buffer=h,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(h){const g=this._buffer.lines.get(h);if(g)return new f.BufferLineApiView(g)}getNullCell(){return new v.CellData}}},3785:(c,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferLineApiView=void 0;const f=l(511);o.BufferLineApiView=class{constructor(v){this._line=v}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(v,h){if(!(v<0||v>=this._line.length))return h?(this._line.loadCell(v,h),h):this._line.loadCell(v,new f.CellData)}translateToString(v,h,g){return this._line.translateToString(v,h,g)}}},8285:(c,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferNamespaceApi=void 0;const f=l(8771),v=l(8460),h=l(844);class g extends h.Disposable{constructor(_){super(),this._core=_,this._onBufferChange=this.register(new v.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new f.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new f.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}o.BufferNamespaceApi=g},7975:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ParserApi=void 0,o.ParserApi=class{constructor(l){this._core=l}registerCsiHandler(l,f){return this._core.registerCsiHandler(l,v=>f(v.toArray()))}addCsiHandler(l,f){return this.registerCsiHandler(l,f)}registerDcsHandler(l,f){return this._core.registerDcsHandler(l,(v,h)=>f(v,h.toArray()))}addDcsHandler(l,f){return this.registerDcsHandler(l,f)}registerEscHandler(l,f){return this._core.registerEscHandler(l,f)}addEscHandler(l,f){return this.registerEscHandler(l,f)}registerOscHandler(l,f){return this._core.registerOscHandler(l,f)}addOscHandler(l,f){return this.registerOscHandler(l,f)}}},7090:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeApi=void 0,o.UnicodeApi=class{constructor(l){this._core=l}register(l){this._core.unicodeService.register(l)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(l){this._core.unicodeService.activeVersion=l}}},744:function(c,o,l){var f=this&&this.__decorate||function(m,d,u,p){var b,S=arguments.length,C=S<3?d:p===null?p=Object.getOwnPropertyDescriptor(d,u):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(m,d,u,p);else for(var k=m.length-1;k>=0;k--)(b=m[k])&&(C=(S<3?b(C):S>3?b(d,u,C):b(d,u))||C);return S>3&&C&&Object.defineProperty(d,u,C),C},v=this&&this.__param||function(m,d){return function(u,p){d(u,p,m)}};Object.defineProperty(o,"__esModule",{value:!0}),o.BufferService=o.MINIMUM_ROWS=o.MINIMUM_COLS=void 0;const h=l(8460),g=l(844),y=l(5295),_=l(2585);o.MINIMUM_COLS=2,o.MINIMUM_ROWS=1;let x=o.BufferService=class extends g.Disposable{get buffer(){return this.buffers.active}constructor(m){super(),this.isUserScrolling=!1,this._onResize=this.register(new h.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new h.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(m.rawOptions.cols||0,o.MINIMUM_COLS),this.rows=Math.max(m.rawOptions.rows||0,o.MINIMUM_ROWS),this.buffers=this.register(new y.BufferSet(m,this))}resize(m,d){this.cols=m,this.rows=d,this.buffers.resize(m,d),this._onResize.fire({cols:m,rows:d})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(m,d=!1){const u=this.buffer;let p;p=this._cachedBlankLine,p&&p.length===this.cols&&p.getFg(0)===m.fg&&p.getBg(0)===m.bg||(p=u.getBlankLine(m,d),this._cachedBlankLine=p),p.isWrapped=d;const b=u.ybase+u.scrollTop,S=u.ybase+u.scrollBottom;if(u.scrollTop===0){const C=u.lines.isFull;S===u.lines.length-1?C?u.lines.recycle().copyFrom(p):u.lines.push(p.clone()):u.lines.splice(S+1,0,p.clone()),C?this.isUserScrolling&&(u.ydisp=Math.max(u.ydisp-1,0)):(u.ybase++,this.isUserScrolling||u.ydisp++)}else{const C=S-b+1;u.lines.shiftElements(b+1,C-1,-1),u.lines.set(S,p.clone())}this.isUserScrolling||(u.ydisp=u.ybase),this._onScroll.fire(u.ydisp)}scrollLines(m,d,u){const p=this.buffer;if(m<0){if(p.ydisp===0)return;this.isUserScrolling=!0}else m+p.ydisp>=p.ybase&&(this.isUserScrolling=!1);const b=p.ydisp;p.ydisp=Math.max(Math.min(p.ydisp+m,p.ybase),0),b!==p.ydisp&&(d||this._onScroll.fire(p.ydisp))}};o.BufferService=x=f([v(0,_.IOptionsService)],x)},7994:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CharsetService=void 0,o.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(l){this.glevel=l,this.charset=this._charsets[l]}setgCharset(l,f){this._charsets[l]=f,this.glevel===l&&(this.charset=f)}}},1753:function(c,o,l){var f=this&&this.__decorate||function(p,b,S,C){var k,w=arguments.length,N=w<3?b:C===null?C=Object.getOwnPropertyDescriptor(b,S):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(p,b,S,C);else for(var D=p.length-1;D>=0;D--)(k=p[D])&&(N=(w<3?k(N):w>3?k(b,S,N):k(b,S))||N);return w>3&&N&&Object.defineProperty(b,S,N),N},v=this&&this.__param||function(p,b){return function(S,C){b(S,C,p)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CoreMouseService=void 0;const h=l(2585),g=l(8460),y=l(844),_={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:p=>p.button!==4&&p.action===1&&(p.ctrl=!1,p.alt=!1,p.shift=!1,!0)},VT200:{events:19,restrict:p=>p.action!==32},DRAG:{events:23,restrict:p=>p.action!==32||p.button!==3},ANY:{events:31,restrict:p=>!0}};function x(p,b){let S=(p.ctrl?16:0)|(p.shift?4:0)|(p.alt?8:0);return p.button===4?(S|=64,S|=p.action):(S|=3&p.button,4&p.button&&(S|=64),8&p.button&&(S|=128),p.action===32?S|=32:p.action!==0||b||(S|=3)),S}const m=String.fromCharCode,d={DEFAULT:p=>{const b=[x(p,!1)+32,p.col+32,p.row+32];return b[0]>255||b[1]>255||b[2]>255?"":`\x1B[M${m(b[0])}${m(b[1])}${m(b[2])}`},SGR:p=>{const b=p.action===0&&p.button!==4?"m":"M";return`\x1B[<${x(p,!0)};${p.col};${p.row}${b}`},SGR_PIXELS:p=>{const b=p.action===0&&p.button!==4?"m":"M";return`\x1B[<${x(p,!0)};${p.x};${p.y}${b}`}};let u=o.CoreMouseService=class extends y.Disposable{constructor(p,b){super(),this._bufferService=p,this._coreService=b,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new g.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const S of Object.keys(_))this.addProtocol(S,_[S]);for(const S of Object.keys(d))this.addEncoding(S,d[S]);this.reset()}addProtocol(p,b){this._protocols[p]=b}addEncoding(p,b){this._encodings[p]=b}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(p){if(!this._protocols[p])throw new Error(`unknown protocol "${p}"`);this._activeProtocol=p,this._onProtocolChange.fire(this._protocols[p].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(p){if(!this._encodings[p])throw new Error(`unknown encoding "${p}"`);this._activeEncoding=p}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(p){if(p.col<0||p.col>=this._bufferService.cols||p.row<0||p.row>=this._bufferService.rows||p.button===4&&p.action===32||p.button===3&&p.action!==32||p.button!==4&&(p.action===2||p.action===3)||(p.col++,p.row++,p.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,p,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(p))return!1;const b=this._encodings[this._activeEncoding](p);return b&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(b):this._coreService.triggerDataEvent(b,!0)),this._lastEvent=p,!0}explainEvents(p){return{down:!!(1&p),up:!!(2&p),drag:!!(4&p),move:!!(8&p),wheel:!!(16&p)}}_equalEvents(p,b,S){if(S){if(p.x!==b.x||p.y!==b.y)return!1}else if(p.col!==b.col||p.row!==b.row)return!1;return p.button===b.button&&p.action===b.action&&p.ctrl===b.ctrl&&p.alt===b.alt&&p.shift===b.shift}};o.CoreMouseService=u=f([v(0,h.IBufferService),v(1,h.ICoreService)],u)},6975:function(c,o,l){var f=this&&this.__decorate||function(u,p,b,S){var C,k=arguments.length,w=k<3?p:S===null?S=Object.getOwnPropertyDescriptor(p,b):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(u,p,b,S);else for(var N=u.length-1;N>=0;N--)(C=u[N])&&(w=(k<3?C(w):k>3?C(p,b,w):C(p,b))||w);return k>3&&w&&Object.defineProperty(p,b,w),w},v=this&&this.__param||function(u,p){return function(b,S){p(b,S,u)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CoreService=void 0;const h=l(1439),g=l(8460),y=l(844),_=l(2585),x=Object.freeze({insertMode:!1}),m=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let d=o.CoreService=class extends y.Disposable{constructor(u,p,b){super(),this._bufferService=u,this._logService=p,this._optionsService=b,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new g.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new g.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new g.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new g.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,h.clone)(x),this.decPrivateModes=(0,h.clone)(m)}reset(){this.modes=(0,h.clone)(x),this.decPrivateModes=(0,h.clone)(m)}triggerDataEvent(u,p=!1){if(this._optionsService.rawOptions.disableStdin)return;const b=this._bufferService.buffer;p&&this._optionsService.rawOptions.scrollOnUserInput&&b.ybase!==b.ydisp&&this._onRequestScrollToBottom.fire(),p&&this._onUserInput.fire(),this._logService.debug(`sending data "${u}"`,()=>u.split("").map(S=>S.charCodeAt(0))),this._onData.fire(u)}triggerBinaryEvent(u){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${u}"`,()=>u.split("").map(p=>p.charCodeAt(0))),this._onBinary.fire(u))}};o.CoreService=d=f([v(0,_.IBufferService),v(1,_.ILogService),v(2,_.IOptionsService)],d)},9074:(c,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DecorationService=void 0;const f=l(8055),v=l(8460),h=l(844),g=l(6106);let y=0,_=0;class x extends h.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new g.SortedList(u=>u==null?void 0:u.marker.line),this._onDecorationRegistered=this.register(new v.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new v.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,h.toDisposable)(()=>this.reset()))}registerDecoration(u){if(u.marker.isDisposed)return;const p=new m(u);if(p){const b=p.marker.onDispose(()=>p.dispose());p.onDispose(()=>{p&&(this._decorations.delete(p)&&this._onDecorationRemoved.fire(p),b.dispose())}),this._decorations.insert(p),this._onDecorationRegistered.fire(p)}return p}reset(){for(const u of this._decorations.values())u.dispose();this._decorations.clear()}*getDecorationsAtCell(u,p,b){let S=0,C=0;for(const k of this._decorations.getKeyIterator(p))S=k.options.x??0,C=S+(k.options.width??1),u>=S&&u<C&&(!b||(k.options.layer??"bottom")===b)&&(yield k)}forEachDecorationAtCell(u,p,b,S){this._decorations.forEachByKey(p,C=>{y=C.options.x??0,_=y+(C.options.width??1),u>=y&&u<_&&(!b||(C.options.layer??"bottom")===b)&&S(C)})}}o.DecorationService=x;class m extends h.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=f.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=f.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(u){super(),this.options=u,this.onRenderEmitter=this.register(new v.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new v.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=u.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(c,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.InstantiationService=o.ServiceCollection=void 0;const f=l(2585),v=l(8343);class h{constructor(...y){this._entries=new Map;for(const[_,x]of y)this.set(_,x)}set(y,_){const x=this._entries.get(y);return this._entries.set(y,_),x}forEach(y){for(const[_,x]of this._entries.entries())y(_,x)}has(y){return this._entries.has(y)}get(y){return this._entries.get(y)}}o.ServiceCollection=h,o.InstantiationService=class{constructor(){this._services=new h,this._services.set(f.IInstantiationService,this)}setService(g,y){this._services.set(g,y)}getService(g){return this._services.get(g)}createInstance(g,...y){const _=(0,v.getServiceDependencies)(g).sort((d,u)=>d.index-u.index),x=[];for(const d of _){const u=this._services.get(d.id);if(!u)throw new Error(`[createInstance] ${g.name} depends on UNKNOWN service ${d.id}.`);x.push(u)}const m=_.length>0?_[0].index:y.length;if(y.length!==m)throw new Error(`[createInstance] First service dependency of ${g.name} at position ${m+1} conflicts with ${y.length} static arguments`);return new g(...y,...x)}}},7866:function(c,o,l){var f=this&&this.__decorate||function(m,d,u,p){var b,S=arguments.length,C=S<3?d:p===null?p=Object.getOwnPropertyDescriptor(d,u):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(m,d,u,p);else for(var k=m.length-1;k>=0;k--)(b=m[k])&&(C=(S<3?b(C):S>3?b(d,u,C):b(d,u))||C);return S>3&&C&&Object.defineProperty(d,u,C),C},v=this&&this.__param||function(m,d){return function(u,p){d(u,p,m)}};Object.defineProperty(o,"__esModule",{value:!0}),o.traceCall=o.setTraceLogger=o.LogService=void 0;const h=l(844),g=l(2585),y={trace:g.LogLevelEnum.TRACE,debug:g.LogLevelEnum.DEBUG,info:g.LogLevelEnum.INFO,warn:g.LogLevelEnum.WARN,error:g.LogLevelEnum.ERROR,off:g.LogLevelEnum.OFF};let _,x=o.LogService=class extends h.Disposable{get logLevel(){return this._logLevel}constructor(m){super(),this._optionsService=m,this._logLevel=g.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),_=this}_updateLogLevel(){this._logLevel=y[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(m){for(let d=0;d<m.length;d++)typeof m[d]=="function"&&(m[d]=m[d]())}_log(m,d,u){this._evalLazyOptionalParams(u),m.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+d,...u)}trace(m,...d){var u;this._logLevel<=g.LogLevelEnum.TRACE&&this._log(((u=this._optionsService.options.logger)==null?void 0:u.trace.bind(this._optionsService.options.logger))??console.log,m,d)}debug(m,...d){var u;this._logLevel<=g.LogLevelEnum.DEBUG&&this._log(((u=this._optionsService.options.logger)==null?void 0:u.debug.bind(this._optionsService.options.logger))??console.log,m,d)}info(m,...d){var u;this._logLevel<=g.LogLevelEnum.INFO&&this._log(((u=this._optionsService.options.logger)==null?void 0:u.info.bind(this._optionsService.options.logger))??console.info,m,d)}warn(m,...d){var u;this._logLevel<=g.LogLevelEnum.WARN&&this._log(((u=this._optionsService.options.logger)==null?void 0:u.warn.bind(this._optionsService.options.logger))??console.warn,m,d)}error(m,...d){var u;this._logLevel<=g.LogLevelEnum.ERROR&&this._log(((u=this._optionsService.options.logger)==null?void 0:u.error.bind(this._optionsService.options.logger))??console.error,m,d)}};o.LogService=x=f([v(0,g.IOptionsService)],x),o.setTraceLogger=function(m){_=m},o.traceCall=function(m,d,u){if(typeof u.value!="function")throw new Error("not supported");const p=u.value;u.value=function(...b){if(_.logLevel!==g.LogLevelEnum.TRACE)return p.apply(this,b);_.trace(`GlyphRenderer#${p.name}(${b.map(C=>JSON.stringify(C)).join(", ")})`);const S=p.apply(this,b);return _.trace(`GlyphRenderer#${p.name} return`,S),S}}},7302:(c,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.OptionsService=o.DEFAULT_OPTIONS=void 0;const f=l(8460),v=l(844),h=l(6114);o.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:h.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const g=["normal","bold","100","200","300","400","500","600","700","800","900"];class y extends v.Disposable{constructor(x){super(),this._onOptionChange=this.register(new f.EventEmitter),this.onOptionChange=this._onOptionChange.event;const m={...o.DEFAULT_OPTIONS};for(const d in x)if(d in m)try{const u=x[d];m[d]=this._sanitizeAndValidateOption(d,u)}catch(u){console.error(u)}this.rawOptions=m,this.options={...m},this._setupOptions(),this.register((0,v.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(x,m){return this.onOptionChange(d=>{d===x&&m(this.rawOptions[x])})}onMultipleOptionChange(x,m){return this.onOptionChange(d=>{x.indexOf(d)!==-1&&m()})}_setupOptions(){const x=d=>{if(!(d in o.DEFAULT_OPTIONS))throw new Error(`No option with key "${d}"`);return this.rawOptions[d]},m=(d,u)=>{if(!(d in o.DEFAULT_OPTIONS))throw new Error(`No option with key "${d}"`);u=this._sanitizeAndValidateOption(d,u),this.rawOptions[d]!==u&&(this.rawOptions[d]=u,this._onOptionChange.fire(d))};for(const d in this.rawOptions){const u={get:x.bind(this,d),set:m.bind(this,d)};Object.defineProperty(this.options,d,u)}}_sanitizeAndValidateOption(x,m){switch(x){case"cursorStyle":if(m||(m=o.DEFAULT_OPTIONS[x]),!function(d){return d==="block"||d==="underline"||d==="bar"}(m))throw new Error(`"${m}" is not a valid value for ${x}`);break;case"wordSeparator":m||(m=o.DEFAULT_OPTIONS[x]);break;case"fontWeight":case"fontWeightBold":if(typeof m=="number"&&1<=m&&m<=1e3)break;m=g.includes(m)?m:o.DEFAULT_OPTIONS[x];break;case"cursorWidth":m=Math.floor(m);case"lineHeight":case"tabStopWidth":if(m<1)throw new Error(`${x} cannot be less than 1, value: ${m}`);break;case"minimumContrastRatio":m=Math.max(1,Math.min(21,Math.round(10*m)/10));break;case"scrollback":if((m=Math.min(m,4294967295))<0)throw new Error(`${x} cannot be less than 0, value: ${m}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(m<=0)throw new Error(`${x} cannot be less than or equal to 0, value: ${m}`);break;case"rows":case"cols":if(!m&&m!==0)throw new Error(`${x} must be numeric, value: ${m}`);break;case"windowsPty":m=m??{}}return m}}o.OptionsService=y},2660:function(c,o,l){var f=this&&this.__decorate||function(y,_,x,m){var d,u=arguments.length,p=u<3?_:m===null?m=Object.getOwnPropertyDescriptor(_,x):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(y,_,x,m);else for(var b=y.length-1;b>=0;b--)(d=y[b])&&(p=(u<3?d(p):u>3?d(_,x,p):d(_,x))||p);return u>3&&p&&Object.defineProperty(_,x,p),p},v=this&&this.__param||function(y,_){return function(x,m){_(x,m,y)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OscLinkService=void 0;const h=l(2585);let g=o.OscLinkService=class{constructor(y){this._bufferService=y,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(y){const _=this._bufferService.buffer;if(y.id===void 0){const b=_.addMarker(_.ybase+_.y),S={data:y,id:this._nextId++,lines:[b]};return b.onDispose(()=>this._removeMarkerFromLink(S,b)),this._dataByLinkId.set(S.id,S),S.id}const x=y,m=this._getEntryIdKey(x),d=this._entriesWithId.get(m);if(d)return this.addLineToLink(d.id,_.ybase+_.y),d.id;const u=_.addMarker(_.ybase+_.y),p={id:this._nextId++,key:this._getEntryIdKey(x),data:x,lines:[u]};return u.onDispose(()=>this._removeMarkerFromLink(p,u)),this._entriesWithId.set(p.key,p),this._dataByLinkId.set(p.id,p),p.id}addLineToLink(y,_){const x=this._dataByLinkId.get(y);if(x&&x.lines.every(m=>m.line!==_)){const m=this._bufferService.buffer.addMarker(_);x.lines.push(m),m.onDispose(()=>this._removeMarkerFromLink(x,m))}}getLinkData(y){var _;return(_=this._dataByLinkId.get(y))==null?void 0:_.data}_getEntryIdKey(y){return`${y.id};;${y.uri}`}_removeMarkerFromLink(y,_){const x=y.lines.indexOf(_);x!==-1&&(y.lines.splice(x,1),y.lines.length===0&&(y.data.id!==void 0&&this._entriesWithId.delete(y.key),this._dataByLinkId.delete(y.id)))}};o.OscLinkService=g=f([v(0,h.IBufferService)],g)},8343:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createDecorator=o.getServiceDependencies=o.serviceRegistry=void 0;const l="di$target",f="di$dependencies";o.serviceRegistry=new Map,o.getServiceDependencies=function(v){return v[f]||[]},o.createDecorator=function(v){if(o.serviceRegistry.has(v))return o.serviceRegistry.get(v);const h=function(g,y,_){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(x,m,d){m[l]===m?m[f].push({id:x,index:d}):(m[f]=[{id:x,index:d}],m[l]=m)})(h,g,_)};return h.toString=()=>v,o.serviceRegistry.set(v,h),h}},2585:(c,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.IDecorationService=o.IUnicodeService=o.IOscLinkService=o.IOptionsService=o.ILogService=o.LogLevelEnum=o.IInstantiationService=o.ICharsetService=o.ICoreService=o.ICoreMouseService=o.IBufferService=void 0;const f=l(8343);var v;o.IBufferService=(0,f.createDecorator)("BufferService"),o.ICoreMouseService=(0,f.createDecorator)("CoreMouseService"),o.ICoreService=(0,f.createDecorator)("CoreService"),o.ICharsetService=(0,f.createDecorator)("CharsetService"),o.IInstantiationService=(0,f.createDecorator)("InstantiationService"),function(h){h[h.TRACE=0]="TRACE",h[h.DEBUG=1]="DEBUG",h[h.INFO=2]="INFO",h[h.WARN=3]="WARN",h[h.ERROR=4]="ERROR",h[h.OFF=5]="OFF"}(v||(o.LogLevelEnum=v={})),o.ILogService=(0,f.createDecorator)("LogService"),o.IOptionsService=(0,f.createDecorator)("OptionsService"),o.IOscLinkService=(0,f.createDecorator)("OscLinkService"),o.IUnicodeService=(0,f.createDecorator)("UnicodeService"),o.IDecorationService=(0,f.createDecorator)("DecorationService")},1480:(c,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeService=void 0;const f=l(8460),v=l(225);class h{static extractShouldJoin(y){return(1&y)!=0}static extractWidth(y){return y>>1&3}static extractCharKind(y){return y>>3}static createPropertyValue(y,_,x=!1){return(16777215&y)<<3|(3&_)<<1|(x?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new f.EventEmitter,this.onChange=this._onChange.event;const y=new v.UnicodeV6;this.register(y),this._active=y.version,this._activeProvider=y}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(y){if(!this._providers[y])throw new Error(`unknown Unicode version "${y}"`);this._active=y,this._activeProvider=this._providers[y],this._onChange.fire(y)}register(y){this._providers[y.version]=y}wcwidth(y){return this._activeProvider.wcwidth(y)}getStringCellWidth(y){let _=0,x=0;const m=y.length;for(let d=0;d<m;++d){let u=y.charCodeAt(d);if(55296<=u&&u<=56319){if(++d>=m)return _+this.wcwidth(u);const S=y.charCodeAt(d);56320<=S&&S<=57343?u=1024*(u-55296)+S-56320+65536:_+=this.wcwidth(S)}const p=this.charProperties(u,x);let b=h.extractWidth(p);h.extractShouldJoin(p)&&(b-=h.extractWidth(x)),_+=b,x=p}return _}charProperties(y,_){return this._activeProvider.charProperties(y,_)}}o.UnicodeService=h}},s={};function i(c){var o=s[c];if(o!==void 0)return o.exports;var l=s[c]={exports:{}};return r[c].call(l.exports,l,l.exports,i),l.exports}var a={};return(()=>{var c=a;Object.defineProperty(c,"__esModule",{value:!0}),c.Terminal=void 0;const o=i(9042),l=i(3236),f=i(844),v=i(5741),h=i(8285),g=i(7975),y=i(7090),_=["cols","rows"];class x extends f.Disposable{constructor(d){super(),this._core=this.register(new l.Terminal(d)),this._addonManager=this.register(new v.AddonManager),this._publicOptions={...this._core.options};const u=b=>this._core.options[b],p=(b,S)=>{this._checkReadonlyOptions(b),this._core.options[b]=S};for(const b in this._core.options){const S={get:u.bind(this,b),set:p.bind(this,b)};Object.defineProperty(this._publicOptions,b,S)}}_checkReadonlyOptions(d){if(_.includes(d))throw new Error(`Option "${d}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new g.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new y.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new h.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const d=this._core.coreService.decPrivateModes;let u="none";switch(this._core.coreMouseService.activeProtocol){case"X10":u="x10";break;case"VT200":u="vt200";break;case"DRAG":u="drag";break;case"ANY":u="any"}return{applicationCursorKeysMode:d.applicationCursorKeys,applicationKeypadMode:d.applicationKeypad,bracketedPasteMode:d.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:u,originMode:d.origin,reverseWraparoundMode:d.reverseWraparound,sendFocusMode:d.sendFocus,wraparoundMode:d.wraparound}}get options(){return this._publicOptions}set options(d){for(const u in d)this._publicOptions[u]=d[u]}blur(){this._core.blur()}focus(){this._core.focus()}input(d,u=!0){this._core.input(d,u)}resize(d,u){this._verifyIntegers(d,u),this._core.resize(d,u)}open(d){this._core.open(d)}attachCustomKeyEventHandler(d){this._core.attachCustomKeyEventHandler(d)}attachCustomWheelEventHandler(d){this._core.attachCustomWheelEventHandler(d)}registerLinkProvider(d){return this._core.registerLinkProvider(d)}registerCharacterJoiner(d){return this._checkProposedApi(),this._core.registerCharacterJoiner(d)}deregisterCharacterJoiner(d){this._checkProposedApi(),this._core.deregisterCharacterJoiner(d)}registerMarker(d=0){return this._verifyIntegers(d),this._core.registerMarker(d)}registerDecoration(d){return this._checkProposedApi(),this._verifyPositiveIntegers(d.x??0,d.width??0,d.height??0),this._core.registerDecoration(d)}hasSelection(){return this._core.hasSelection()}select(d,u,p){this._verifyIntegers(d,u,p),this._core.select(d,u,p)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(d,u){this._verifyIntegers(d,u),this._core.selectLines(d,u)}dispose(){super.dispose()}scrollLines(d){this._verifyIntegers(d),this._core.scrollLines(d)}scrollPages(d){this._verifyIntegers(d),this._core.scrollPages(d)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(d){this._verifyIntegers(d),this._core.scrollToLine(d)}clear(){this._core.clear()}write(d,u){this._core.write(d,u)}writeln(d,u){this._core.write(d),this._core.write(`\r
`,u)}paste(d){this._core.paste(d)}refresh(d,u){this._verifyIntegers(d,u),this._core.refresh(d,u)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(d){this._addonManager.loadAddon(this,d)}static get strings(){return o}_verifyIntegers(...d){for(const u of d)if(u===1/0||isNaN(u)||u%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...d){for(const u of d)if(u&&(u===1/0||isNaN(u)||u%1!=0||u<0))throw new Error("This API only accepts positive integers")}}c.Terminal=x})(),a})())})(ry);var Gk=ry.exports,ny={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(self,()=>(()=>{var r={};return(()=>{var s=r;Object.defineProperty(s,"__esModule",{value:!0}),s.FitAddon=void 0,s.FitAddon=class{activate(i){this._terminal=i}dispose(){}fit(){const i=this.proposeDimensions();if(!i||!this._terminal||isNaN(i.cols)||isNaN(i.rows))return;const a=this._terminal._core;this._terminal.rows===i.rows&&this._terminal.cols===i.cols||(a._renderService.clear(),this._terminal.resize(i.cols,i.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const i=this._terminal._core,a=i._renderService.dimensions;if(a.css.cell.width===0||a.css.cell.height===0)return;const c=this._terminal.options.scrollback===0?0:i.viewport.scrollBarWidth,o=window.getComputedStyle(this._terminal.element.parentElement),l=parseInt(o.getPropertyValue("height")),f=Math.max(0,parseInt(o.getPropertyValue("width"))),v=window.getComputedStyle(this._terminal.element),h=l-(parseInt(v.getPropertyValue("padding-top"))+parseInt(v.getPropertyValue("padding-bottom"))),g=f-(parseInt(v.getPropertyValue("padding-right"))+parseInt(v.getPropertyValue("padding-left")))-c;return{cols:Math.max(2,Math.floor(g/a.css.cell.width)),rows:Math.max(1,Math.floor(h/a.css.cell.height))}}}})(),r})())})(ny);var Kk=ny.exports,iy={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(self,()=>(()=>{var r={6:(c,o)=>{function l(v){try{const h=new URL(v),g=h.password&&h.username?`${h.protocol}//${h.username}:${h.password}@${h.host}`:h.username?`${h.protocol}//${h.username}@${h.host}`:`${h.protocol}//${h.host}`;return v.toLocaleLowerCase().startsWith(g.toLocaleLowerCase())}catch{return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.LinkComputer=o.WebLinkProvider=void 0,o.WebLinkProvider=class{constructor(v,h,g,y={}){this._terminal=v,this._regex=h,this._handler=g,this._options=y}provideLinks(v,h){const g=f.computeLink(v,this._regex,this._terminal,this._handler);h(this._addCallbacks(g))}_addCallbacks(v){return v.map(h=>(h.leave=this._options.leave,h.hover=(g,y)=>{if(this._options.hover){const{range:_}=h;this._options.hover(g,y,_)}},h))}};class f{static computeLink(h,g,y,_){const x=new RegExp(g.source,(g.flags||"")+"g"),[m,d]=f._getWindowedLineStrings(h-1,y),u=m.join("");let p;const b=[];for(;p=x.exec(u);){const S=p[0];if(!l(S))continue;const[C,k]=f._mapStrIdx(y,d,0,p.index),[w,N]=f._mapStrIdx(y,C,k,S.length);if(C===-1||k===-1||w===-1||N===-1)continue;const D={start:{x:k+1,y:C+1},end:{x:N,y:w+1}};b.push({range:D,text:S,activate:_})}return b}static _getWindowedLineStrings(h,g){let y,_=h,x=h,m=0,d="";const u=[];if(y=g.buffer.active.getLine(h)){const p=y.translateToString(!0);if(y.isWrapped&&p[0]!==" "){for(m=0;(y=g.buffer.active.getLine(--_))&&m<2048&&(d=y.translateToString(!0),m+=d.length,u.push(d),y.isWrapped&&d.indexOf(" ")===-1););u.reverse()}for(u.push(p),m=0;(y=g.buffer.active.getLine(++x))&&y.isWrapped&&m<2048&&(d=y.translateToString(!0),m+=d.length,u.push(d),d.indexOf(" ")===-1););}return[u,_]}static _mapStrIdx(h,g,y,_){const x=h.buffer.active,m=x.getNullCell();let d=y;for(;_;){const u=x.getLine(g);if(!u)return[-1,-1];for(let p=d;p<u.length;++p){u.getCell(p,m);const b=m.getChars();if(m.getWidth()&&(_-=b.length||1,p===u.length-1&&b==="")){const S=x.getLine(g+1);S&&S.isWrapped&&(S.getCell(0,m),m.getWidth()===2&&(_+=1))}if(_<0)return[g,p]}g++,d=0}return[g,d]}}o.LinkComputer=f}},s={};function i(c){var o=s[c];if(o!==void 0)return o.exports;var l=s[c]={exports:{}};return r[c](l,l.exports,i),l.exports}var a={};return(()=>{var c=a;Object.defineProperty(c,"__esModule",{value:!0}),c.WebLinksAddon=void 0;const o=i(6),l=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function f(v,h){const g=window.open();if(g){try{g.opener=null}catch{}g.location.href=h}else console.warn("Opening link blocked as opener could not be cleared")}c.WebLinksAddon=class{constructor(v=f,h={}){this._handler=v,this._options=h}activate(v){this._terminal=v;const h=this._options,g=h.urlRegex||l;this._linkProvider=this._terminal.registerLinkProvider(new o.WebLinkProvider(this._terminal,g,this._handler,h))}dispose(){var v;(v=this._linkProvider)==null||v.dispose()}}})(),a})())})(iy);var Qk=iy.exports;const Yk=(e={})=>{const{agentId:t,isSystemTerminal:r,onData:s,onConnect:i,onDisconnect:a,onError:c}=e,[o,l]=j.useState(null),[f,v]=j.useState(!1),[h,g]=j.useState(!1),[y,_]=j.useState(null),x=j.useRef(e);x.current=e;const m=p=>{o!=null&&o.connected&&d(),g(!0),_(null);const b=x.current.isSystemTerminal?"/system-terminal":"/terminal",C=Vi(`http://localhost:3001${b}`,{query:p?{agentId:p}:{},transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3});C.on("connect",()=>{var k,w;console.log(`Terminal connected to ${b}`),v(!0),g(!1),(w=(k=x.current).onConnect)==null||w.call(k)}),C.on("disconnect",()=>{var k,w;console.log(`Terminal disconnected from ${b}`),v(!1),g(!1),(w=(k=x.current).onDisconnect)==null||w.call(k)}),C.on("data",k=>{var w,N;(N=(w=x.current).onData)==null||N.call(w,k)}),C.on("error",k=>{var N,D;console.error(`Terminal error on ${b}:`,k);const w=(k==null?void 0:k.message)||"Connection error";_(w),g(!1),(D=(N=x.current).onError)==null||D.call(N,w)}),C.on("connect_error",k=>{var N,D;console.error(`Terminal connection error on ${b}:`,k);const w=(k==null?void 0:k.message)||"Failed to connect";_(w),g(!1),(D=(N=x.current).onError)==null||D.call(N,w)}),l(C)},d=()=>{o&&(o.disconnect(),l(null)),v(!1),g(!1),_(null)},u=p=>{o!=null&&o.connected&&o.emit("input",p)};return j.useEffect(()=>(t?m(t):x.current.isSystemTerminal&&m(),()=>{d()}),[t]),j.useEffect(()=>()=>{d()},[]),{socket:o,isConnected:f,isConnecting:h,error:y,sendData:u,connect:m,disconnect:d}};const Bl=({agentId:e,isSystemTerminal:t=!1,isFullscreen:r=!1,onToggleFullscreen:s,onClose:i,className:a=""})=>{const c=j.useRef(null),o=j.useRef(null),l=j.useRef(null),{isConnected:f,isConnecting:v,error:h,sendData:g,connect:y,disconnect:_}=Yk({agentId:e,isSystemTerminal:t,onData:d=>{o.current&&o.current.write(d)},onConnect:()=>{o.current&&(o.current.clear(),t?(o.current.writeln("\x1B[32m Connected to system terminal\x1B[0m"),o.current.writeln("\x1B[36mSystem terminal session active.\x1B[0m")):e&&(o.current.writeln("\x1B[32m Connected to agent "+e+"\x1B[0m"),o.current.writeln("\x1B[36mAgent terminal session active.\x1B[0m")),o.current.writeln(""))},onDisconnect:()=>{o.current&&o.current.writeln(`\r
\x1B[33m Connection closed\x1B[0m`)},onError:d=>{o.current&&o.current.writeln(`\r
\x1B[31m Error: `+d+"\x1B[0m")}});j.useEffect(()=>{if(!c.current)return;const d=new Gk.Terminal({cursorBlink:!0,fontSize:14,fontFamily:'Menlo, Monaco, "Courier New", monospace',theme:{background:"#1a1b26",foreground:"#a9b1d6",cursor:"#f7768e",selectionBackground:"#364a82",black:"#32344a",red:"#f7768e",green:"#9ece6a",yellow:"#e0af68",blue:"#7aa2f7",magenta:"#ad8ee6",cyan:"#449dab",white:"#9699a3",brightBlack:"#444b6a",brightRed:"#ff7a93",brightGreen:"#b9f27c",brightYellow:"#ff9e64",brightBlue:"#7da6ff",brightMagenta:"#bb9af7",brightCyan:"#0db9d7",brightWhite:"#acb0d0"},scrollback:1e3}),u=new Kk.FitAddon,p=new Qk.WebLinksAddon;return d.loadAddon(u),d.loadAddon(p),d.open(c.current),o.current=d,l.current=u,setTimeout(()=>{u.fit()},100),d.onData(b=>{f&&g(b)}),t?v?d.writeln("\x1B[32m Connecting to system terminal...\x1B[0m"):f||(d.writeln("\x1B[33m  Not connected to system terminal\x1B[0m"),d.writeln("\x1B[90mWaiting for connection...\x1B[0m")):e?v?d.writeln("\x1B[32m Connecting to agent "+e+"...\x1B[0m"):f||(d.writeln("\x1B[33m  Not connected to agent "+e+"\x1B[0m"),d.writeln("\x1B[90mWaiting for connection...\x1B[0m")):x(d),()=>{d.dispose()}},[e,t,f,v,g]),j.useEffect(()=>{const d=()=>{l.current&&setTimeout(()=>{var u;(u=l.current)==null||u.fit()},100)};return window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]),j.useEffect(()=>{l.current&&setTimeout(()=>{var d;(d=l.current)==null||d.fit()},100)},[r]);const x=d=>{d.clear(),d.writeln("\x1B[36m\x1B[0m"),d.writeln("\x1B[36m               \x1B[1mMagents Terminal\x1B[0m\x1B[36m                \x1B[0m"),d.writeln("\x1B[36m\x1B[0m"),d.writeln(""),d.writeln("\x1B[33mWelcome to the Magents integrated terminal!\x1B[0m"),d.writeln(""),d.writeln("\x1B[32m \x1B[0mConnect to an agent to start interacting"),d.writeln("\x1B[32m \x1B[0mUse the agent cards to attach to running agents"),d.writeln("\x1B[32m \x1B[0mAll terminal sessions are isolated per agent"),d.writeln(""),d.writeln("\x1B[90mSelect an agent from the dashboard to get started.\x1B[0m")},m=()=>{_(),o.current&&(o.current.clear(),x(o.current))};return n.jsxs("div",{className:`bg-background-card border border-border rounded-lg overflow-hidden ${a}`,children:[n.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-background-tertiary border-b border-border",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Nr,{className:"w-4 h-4 text-foreground-secondary"}),n.jsx("span",{className:"text-sm font-medium text-foreground",children:e?`Agent ${e}`:"Terminal"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${v?"bg-yellow-500 animate-pulse":f?"bg-status-success":"bg-foreground-tertiary"}`}),n.jsx("span",{className:"text-xs text-foreground-secondary",children:v?"Connecting...":f?"Connected":"Disconnected"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[e&&f&&n.jsx("button",{onClick:m,className:"p-1.5 text-foreground-secondary hover:text-foreground hover:bg-background-card rounded transition-colors",title:"Disconnect",children:n.jsx(Qn,{className:"w-4 h-4"})}),s&&n.jsx("button",{onClick:s,className:"p-1.5 text-foreground-secondary hover:text-foreground hover:bg-background-card rounded transition-colors",title:r?"Exit fullscreen":"Enter fullscreen",children:r?n.jsx(v2,{className:"w-4 h-4"}):n.jsx(Zu,{className:"w-4 h-4"})}),i&&n.jsx("button",{onClick:i,className:"p-1.5 text-foreground-secondary hover:text-status-error hover:bg-status-error/20 rounded transition-colors",title:"Close terminal",children:n.jsx(Qn,{className:"w-4 h-4"})})]})]}),n.jsx("div",{className:"relative",children:n.jsx("div",{ref:c,className:`w-full ${r?"h-[calc(100vh-4rem)]":"h-80"}`,style:{minHeight:r?"calc(100vh - 4rem)":"20rem"}})})]})},Xk=({isOpen:e,height:t,onHeightChange:r,onClose:s})=>{const[i,a]=j.useState(!1),[c,o]=j.useState(!1),l=j.useRef(null),f=g=>{g.preventDefault(),o(!0);const y=g.clientY,_=t,x=d=>{const u=y-d.clientY,p=Math.max(200,Math.min(800,_+u));r(p)},m=()=>{o(!1),document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",m),document.body.style.cursor="",document.body.style.userSelect=""};document.addEventListener("mousemove",x),document.addEventListener("mouseup",m),document.body.style.cursor="row-resize",document.body.style.userSelect="none"},v=()=>{a(!i)},h=i?40:t;return e?n.jsxs("div",{className:"bg-background-card border-t border-border",style:{height:`${h}px`},children:[!i&&n.jsx("div",{ref:l,className:`h-1 bg-border hover:bg-brand/50 cursor-row-resize transition-colors ${c?"bg-brand/70":""}`,onMouseDown:f}),n.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-background-tertiary border-b border-border min-h-[40px]",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Nr,{className:"w-4 h-4 text-brand"}),n.jsx("span",{className:"text-sm font-medium text-foreground",children:"Terminal"}),n.jsxs("div",{className:"flex items-center gap-1 text-xs text-foreground-secondary",children:[n.jsx("span",{children:"zsh"}),n.jsx("span",{children:""}),n.jsx("span",{children:"~"})]})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("button",{onClick:v,className:"p-1.5 text-foreground-secondary hover:text-foreground hover:bg-background-card rounded transition-colors",title:i?"Maximize":"Minimize",children:i?n.jsx(B0,{className:"w-4 h-4"}):n.jsx(vf,{className:"w-4 h-4"})}),n.jsx("button",{onClick:s,className:"p-1.5 text-foreground-secondary hover:text-status-error hover:bg-status-error/20 rounded transition-colors",title:"Close terminal",children:n.jsx(Qn,{className:"w-4 h-4"})})]})]}),!i&&n.jsx("div",{className:"h-full",style:{height:`${t-40}px`},children:n.jsx(Bl,{isSystemTerminal:!0,isFullscreen:!1,className:"h-full border-0 rounded-none"})})]}):null},oy=({className:e=""})=>{const[t,r]=j.useState(!1),[s,i]=j.useState(!1),[a,c]=j.useState(void 0);j.useEffect(()=>{const f=v=>{const{agentId:h}=v.detail;c(h),r(!0),i(!1)};return window.addEventListener("open-terminal",f),()=>{window.removeEventListener("open-terminal",f)}},[]);const o=()=>{r(!1),c(void 0),i(!1)},l=()=>{i(!s)};return t?s?n.jsxs("div",{className:"fixed inset-0 bg-background z-50 flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between px-6 py-4 bg-background-card border-b border-border",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Nr,{className:"w-5 h-5 text-brand"}),n.jsxs("h1",{className:"text-lg font-semibold text-foreground",children:["Terminal ",a&&`- Agent ${a}`]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:l,className:"p-2 text-foreground-secondary hover:text-foreground hover:bg-background-tertiary rounded-lg transition-colors",title:"Exit fullscreen",children:n.jsx(Zu,{className:"w-5 h-5"})}),n.jsx("button",{onClick:o,className:"p-2 text-foreground-secondary hover:text-status-error hover:bg-status-error/20 rounded-lg transition-colors",title:"Close terminal",children:n.jsx(Qn,{className:"w-5 h-5"})})]})]}),n.jsx("div",{className:"flex-1",children:n.jsx(Bl,{agentId:a,isFullscreen:!0,onToggleFullscreen:l,onClose:o,className:"h-full border-0 rounded-none"})})]}):n.jsx("div",{className:`fixed bottom-6 right-6 w-96 lg:w-[40rem] xl:w-[50rem] z-40 ${e}`,children:n.jsxs("div",{className:"bg-background-card border border-border rounded-lg shadow-2xl",children:[n.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-background-tertiary border-b border-border rounded-t-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Nr,{className:"w-4 h-4 text-brand"}),n.jsxs("span",{className:"text-sm font-medium text-foreground",children:["Terminal ",a&&`- Agent ${a}`]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:l,className:"p-1.5 text-foreground-secondary hover:text-foreground hover:bg-background-card rounded transition-colors",title:"Fullscreen",children:n.jsx(Zu,{className:"w-4 h-4"})}),n.jsx("button",{onClick:o,className:"p-1.5 text-foreground-secondary hover:text-status-error hover:bg-status-error/20 rounded transition-colors",title:"Close",children:n.jsx(Qn,{className:"w-4 h-4"})})]})]}),n.jsx(Bl,{agentId:a,isFullscreen:!1,onToggleFullscreen:l,onClose:o,className:"border-0 rounded-b-lg h-80"})]})}):null},Jk=({children:e})=>{const[t,r]=j.useState(!1),[s,i]=j.useState(!1),[a,c]=j.useState(300),o=()=>{r(!t)},l=()=>{i(!s)};return n.jsxs("div",{className:"flex h-screen bg-background overflow-hidden",children:[n.jsx(YC,{isCollapsed:t,onToggle:o,onTerminalToggle:l}),n.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[n.jsx(qk,{onToggleSidebar:o,isSidebarCollapsed:t}),n.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[n.jsx("main",{className:"flex-1 overflow-y-auto bg-background p-6",style:{height:s?`calc(100% - ${a}px)`:"100%"},children:e}),n.jsx(Xk,{isOpen:s,height:a,onHeightChange:c,onClose:()=>i(!1)})]})]}),n.jsx(oy,{})]})},Zk={}.VITE_API_URL||"http://localhost:3001";class ej{async request(t,r){const s=await fetch(`${Zk}${t}`,{headers:{"Content-Type":"application/json",...r==null?void 0:r.headers},...r});if(!s.ok){const a=await s.json().catch(()=>({message:"Request failed"}));if(a.error&&typeof a.error=="object"){const c=new Error(a.error.userMessage||a.message||"Request failed");throw c.code=a.error.code,c.severity=a.error.severity,c.suggestions=a.error.suggestions||[],c.recoverable=a.error.recoverable,c.autoFixAttempted=a.error.autoFixAttempted,c.autoFixSuggestions=a.error.autoFixSuggestions,c.learnMoreUrl=a.error.learnMoreUrl,c.requestId=a.error.requestId,c}throw new Error(a.message||`HTTP ${s.status}`)}const i=await s.json();if(!i.success)throw new Error(i.error||i.message||"Request failed");return i.data}formatError(t){let r=t.message;return t.suggestions&&t.suggestions.length>0&&(r+=`

Suggestions:
`,t.suggestions.forEach((s,i)=>{r+=`${i+1}. ${s}
`})),t.autoFixSuggestions&&(r+=`
Auto-fix suggestions:
`,Object.entries(t.autoFixSuggestions).forEach(([s,i])=>{r+=` ${s}: ${i}
`})),t.learnMoreUrl&&(r+=`
Learn more: ${t.learnMoreUrl}`),r}async getHealth(){return this.request("/api/health")}async getAgents(t){const r=t?"?"+new URLSearchParams(t).toString():"",s=await this.request(`/api/agents${r}`);return Array.isArray(s)?s:[]}async getAgent(t){return this.request(`/api/agents/${t}`)}async createAgent(t){console.log("Creating agent with options:",t);try{const r=await this.request("/api/agents",{method:"POST",body:JSON.stringify(t)});return console.log("Agent created successfully:",r),r}catch(r){throw console.error("Failed to create agent:",r),r instanceof Error?r.message.includes("already exists")?new Error(`Agent with ID "${t.agentId||t.branch}" already exists. Please use a different ID or branch name.`):r.message.includes("branch")?new Error(`Invalid branch name "${t.branch}". Please check that the branch exists or can be created.`):r.message.includes("network")||r.message.includes("fetch")?new Error("Network error: Please check your connection and try again."):r.message.includes("validation")?new Error("Validation error: Please check your input and try again."):r:new Error("Unknown error occurred while creating agent")}}async updateAgentStatus(t,r){return this.request(`/api/agents/${t}/status`,{method:"PUT",body:JSON.stringify({status:r})})}async startAgent(t){return this.request(`/api/agents/${t}/start`,{method:"POST"})}async stopAgent(t){return this.request(`/api/agents/${t}/stop`,{method:"POST"})}async deleteAgent(t,r=!1){return this.request(`/api/agents/${t}?removeWorktree=${r}`,{method:"DELETE"})}async assignAgentToProject(t,r){return this.request(`/api/agents/${t}/project`,{method:"PUT",body:JSON.stringify({projectId:r})})}async unassignAgentFromProject(t){return this.request(`/api/agents/${t}/project`,{method:"DELETE"})}async getAgentsByProject(t){const r=await this.request(`/api/agents/project/${t}`);return Array.isArray(r)?r:[]}async getProjects(){const t=await this.request("/api/projects");return Array.isArray(t)?t:[]}async getProject(t){return this.request(`/api/projects/${t}`)}async createProject(t){return this.request("/api/projects",{method:"POST",body:JSON.stringify(t)})}async updateProject(t,r){return this.request(`/api/projects/${t}`,{method:"PUT",body:JSON.stringify(r)})}async deleteProject(t){return this.request(`/api/projects/${t}`,{method:"DELETE"})}async addAgentToProject(t,r){return this.request(`/api/projects/${t}/agents/${r}`,{method:"POST"})}async removeAgentFromProject(t,r){return this.request(`/api/projects/${t}/agents/${r}`,{method:"DELETE"})}async getProjectStats(t){return this.request(`/api/projects/${t}/stats`)}async searchProjects(t){const r=await this.request(`/api/projects/search/${encodeURIComponent(t)}`);return Array.isArray(r)?r:[]}async getProjectsByStatus(t){const r=await this.request(`/api/projects/status/${t}`);return Array.isArray(r)?r:[]}async discoverProjects(t){const r=new URLSearchParams({path:t.path,...t.maxDepth&&{maxDepth:t.maxDepth.toString()},...t.includeHidden&&{includeHidden:"true"}});return this.request(`/api/projects/discover?${r}`)}async validateProject(t){const r=new URLSearchParams({path:t});return this.request(`/api/projects/validate?${r}`)}async getProjectMetadata(t){const r=new URLSearchParams({path:t});return this.request(`/api/projects/metadata?${r}`)}async getConfig(){return this.request("/api/config")}async updateConfig(t){return this.request("/api/config",{method:"PUT",body:JSON.stringify(t)})}async resetConfig(){return this.request("/api/config/reset",{method:"POST"})}async detectTaskMaster(t){const r=new URLSearchParams({path:t});return this.request(`/api/taskmaster/detect?${r}`)}async getTaskMasterTasks(t){const r=new URLSearchParams({path:t});return this.request(`/api/taskmaster/tasks?${r}`)}async getTaskMasterTask(t,r){const s=new URLSearchParams({path:t});return this.request(`/api/taskmaster/tasks/${r}?${s}`)}async createTaskMasterTask(t,r,s,i){return this.request("/api/taskmaster/tasks",{method:"POST",body:JSON.stringify({path:t,title:r,description:s,priority:i})})}async updateTaskMasterStatus(t,r,s){const i=new URLSearchParams({path:t});return this.request(`/api/taskmaster/tasks/${r}/status?${i}`,{method:"PUT",body:JSON.stringify({status:s})})}async assignTaskToAgent(t,r,s){return this.request(`/api/agents/${t}/assign-task`,{method:"POST",body:JSON.stringify({taskId:r,projectPath:s})})}async getTaskMasterStatistics(t){const r=new URLSearchParams({path:t});return this.request(`/api/taskmaster/statistics?${r}`)}}const ye=new ej,Wt=[{id:"demo-agent-1",branch:"feature/dashboard",worktreePath:"/tmp/magents-demo-agent-1",tmuxSession:"magent-demo-agent-1",status:"RUNNING",createdAt:new Date(Date.now()-864e5),updatedAt:new Date(Date.now()-36e5),projectId:"demo-project"},{id:"demo-agent-2",branch:"main",worktreePath:"/tmp/magents-demo-agent-2",tmuxSession:"magent-demo-agent-2",status:"STOPPED",createdAt:new Date(Date.now()-1728e5),updatedAt:new Date(Date.now()-72e5),projectId:"demo-project"},{id:"demo-agent-3",branch:"hotfix/urgent-fix",worktreePath:"/tmp/magents-demo-agent-3",tmuxSession:"magent-demo-agent-3",status:"ERROR",createdAt:new Date(Date.now()-2592e5),updatedAt:new Date(Date.now()-18e5),projectId:"demo-project-2"}],on=[{id:"demo-project",name:"Magents Dashboard",path:"/Users/dev/magents",agents:["demo-agent-1","demo-agent-2"],status:"ACTIVE",createdAt:new Date(Date.now()-6048e5),description:"Multi-agent development workflow manager"},{id:"demo-project-2",name:"Claude Integration",path:"/Users/dev/claude-integration",agents:["demo-agent-3"],status:"ACTIVE",createdAt:new Date(Date.now()-12096e5),description:"Claude Code integration and automation"}],La={DEFAULT_BASE_BRANCH:"main",TMUX_SESSION_PREFIX:"magent",WORKTREE_PREFIX:"magent",MAX_AGENTS:10,CLAUDE_CODE_PATH:"claude",CLAUDE_AUTO_ACCEPT:!0,DOCKER_ENABLED:!1,DOCKER_IMAGE:"node:18-alpine"};class tj{delay(t=500){return new Promise(r=>setTimeout(r,t))}success(t){return t}async getHealth(){return await this.delay(100),this.success({status:"ok",timestamp:Date.now()})}async getAgents(){return await this.delay(300),this.success(Wt)}async getAgent(t){await this.delay(200);const r=Wt.find(s=>s.id===t);if(!r)throw new Error(`Agent ${t} not found`);return this.success(r)}async startAgent(t){await this.delay(1e3);const r=Wt.find(s=>s.id===t);if(!r)throw new Error(`Agent ${t} not found`);return r.status="RUNNING",r.updatedAt=new Date,this.success(r)}async stopAgent(t){await this.delay(800);const r=Wt.find(s=>s.id===t);if(!r)throw new Error(`Agent ${t} not found`);return r.status="STOPPED",r.updatedAt=new Date,this.success(r)}async deleteAgent(t){await this.delay(600);const r=Wt.findIndex(s=>s.id===t);if(r===-1)throw new Error(`Agent ${t} not found`);return Wt.splice(r,1),this.success(void 0)}async getProjects(){return await this.delay(400),this.success(on)}async getProject(t){await this.delay(200);const r=on.find(s=>s.id===t);if(!r)throw new Error(`Project ${t} not found`);return this.success(r)}async getConfig(){return await this.delay(150),this.success(La)}async createAgent(t){await this.delay(2e3);const r={id:t.agentId||`agent-${Date.now()}`,branch:t.branch,worktreePath:`/tmp/magents-${t.agentId||Date.now()}`,tmuxSession:`magent-${t.agentId||Date.now()}`,status:"STOPPED",createdAt:new Date,projectId:t.projectId};return Wt.push(r),this.success(r)}async updateAgentStatus(t,r){await this.delay(300);const s=Wt.find(i=>i.id===t);if(!s)throw new Error(`Agent ${t} not found`);return s.status=r,s.updatedAt=new Date,this.success(s)}async assignAgentToProject(t,r){await this.delay(400);const s=Wt.find(i=>i.id===t);if(!s)throw new Error(`Agent ${t} not found`);return s.projectId=r,this.success(s)}async unassignAgentFromProject(t){await this.delay(400);const r=Wt.find(s=>s.id===t);if(!r)throw new Error(`Agent ${t} not found`);return delete r.projectId,this.success(r)}async getAgentsByProject(t){return await this.delay(300),this.success(Wt.filter(r=>r.projectId===t))}async createProject(t){await this.delay(1500);const r={id:`project-${Date.now()}`,name:t.name||"New Project",path:t.path||"/tmp/new-project",agents:[],status:"ACTIVE",createdAt:new Date,description:t.description};return on.push(r),this.success(r)}async updateProject(t,r){await this.delay(400);const s=on.find(i=>i.id===t);if(!s)throw new Error(`Project ${t} not found`);return Object.assign(s,r),this.success(s)}async deleteProject(t){await this.delay(500);const r=on.findIndex(s=>s.id===t);if(r===-1)throw new Error(`Project ${t} not found`);return on.splice(r,1),this.success(void 0)}async updateConfig(t){return await this.delay(300),Object.assign(La,t),this.success(La)}async resetConfig(){return await this.delay(500),this.success(La)}async addAgentToProject(){return this.success({})}async removeAgentFromProject(){return this.success({})}async getProjectStats(){return this.success({})}async searchProjects(){return this.success([])}async getProjectsByStatus(){return this.success([])}async discoverProjects(){return this.success([])}async validateProject(){return this.success({})}async getProjectMetadata(){return this.success({})}async detectTaskMaster(){return this.success({})}async getTaskMasterTasks(){return this.success([])}async getTaskMasterTask(){return this.success({})}async createTaskMasterTask(){return this.success({})}async updateTaskMasterStatus(){return this.success({})}async assignTaskToAgent(){return this.success({})}async getTaskMasterStatistics(){return this.success({})}}const Sf=new tj,ay=j.createContext(null),rj=({children:e})=>{const[t,r]=j.useState(!1);j.useEffect(()=>{(async()=>{try{const a=await fetch("/api/health",{method:"GET",timeout:2e3});r(!a.ok)}catch{r(!0),console.log(" Demo mode enabled - API not available")}})()},[]);const s=i=>{r(i),console.log(i?" Demo mode enabled manually":" Demo mode disabled - using real API")};return n.jsx(ay.Provider,{value:{isDemoMode:t,setDemoMode:s},children:e})},bc=()=>{const e=j.useContext(ay);if(!e)throw new Error("useDemoMode must be used within a DemoModeProvider");return e},Nd=({agent:e,viewMode:t,onRefresh:r})=>{const[s,i]=j.useState(!1),[a,c]=j.useState(!1),{isDemoMode:o}=bc(),l=o?Sf:ye,f=async()=>{c(!0);try{await l.startAgent(e.id),se.success(`Agent ${e.id} started successfully`),r==null||r()}catch(m){se.error(`Failed to start agent ${e.id}`),console.error("Failed to start agent:",m)}finally{c(!1)}},v=async()=>{c(!0);try{await l.stopAgent(e.id),se.success(`Agent ${e.id} stopped successfully`),r==null||r()}catch(m){se.error(`Failed to stop agent ${e.id}`),console.error("Failed to stop agent:",m)}finally{c(!1)}},h=()=>{window.innerWidth>=1024?window.dispatchEvent(new CustomEvent("open-terminal",{detail:{agentId:e.id}})):window.open(`/terminal?agent=${e.id}`,"_blank")},g=async()=>{if(confirm(`Are you sure you want to delete agent ${e.id}?`)){c(!0);try{await l.deleteAgent(e.id),se.success(`Agent ${e.id} deleted successfully`),r==null||r()}catch(m){se.error(`Failed to delete agent ${e.id}`),console.error("Failed to delete agent:",m)}finally{c(!1)}}},y=m=>{switch(m){case"RUNNING":return"text-status-success bg-status-success/20";case"ERROR":return"text-status-error bg-status-error/20";default:return"text-foreground-tertiary bg-foreground-tertiary/20"}},_=m=>{switch(m){case"RUNNING":return n.jsx(Il,{className:"w-4 h-4"});case"ERROR":return n.jsx(Ol,{className:"w-4 h-4"});default:return n.jsx(en,{className:"w-4 h-4"})}},x=m=>{if(!m)return"Never";const d=m instanceof Date?m:new Date(m),p=new Date().getTime()-d.getTime();return p<6e4?"Just now":p<36e5?`${Math.floor(p/6e4)}m ago`:p<864e5?`${Math.floor(p/36e5)}h ago`:d.toLocaleDateString()};return t==="list"?n.jsx("div",{className:"bg-background-card border border-border rounded-lg p-4 hover:bg-background-card-hover transition-colors",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`w-3 h-3 rounded-full ${e.status==="RUNNING"?"bg-status-success":e.status==="ERROR"?"bg-status-error":"bg-foreground-tertiary"}`}),n.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${y(e.status)}`,children:e.status})]}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:"font-medium text-foreground",children:e.id}),n.jsx(vo,{className:"w-4 h-4 text-foreground-secondary"}),n.jsx("span",{className:"text-sm text-foreground-secondary",children:e.branch})]}),n.jsxs("div",{className:"flex items-center gap-4 mt-1 text-xs text-foreground-tertiary",children:[n.jsxs("span",{children:["Last: ",x(e.lastActivity)]}),e.cpuUsage&&n.jsxs("span",{children:["CPU: ",e.cpuUsage.toFixed(1),"%"]}),e.memoryUsage&&n.jsxs("span",{children:["Memory: ",e.memoryUsage.toFixed(1),"%"]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[e.status==="RUNNING"?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:h,className:"p-2 text-brand hover:bg-brand/20 rounded-lg transition-colors",title:"Attach to agent",disabled:a,children:n.jsx(eC,{className:"w-4 h-4"})}),n.jsx("button",{onClick:v,className:"p-2 text-foreground-secondary hover:bg-background-tertiary rounded-lg transition-colors disabled:opacity-50",title:"Stop agent",disabled:a,children:n.jsx(yo,{className:`w-4 h-4 ${a?"animate-spin":""}`})})]}):n.jsx("button",{onClick:f,className:"p-2 text-status-success hover:bg-status-success/20 rounded-lg transition-colors disabled:opacity-50",title:"Start agent",disabled:a,children:n.jsx(Kn,{className:`w-4 h-4 ${a?"animate-spin":""}`})}),n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:()=>i(!s),className:"p-2 text-foreground-secondary hover:bg-background-tertiary rounded-lg transition-colors",children:n.jsx(Lm,{className:"w-4 h-4"})}),s&&n.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-background-card border border-border rounded-lg shadow-lg py-1 z-10 min-w-[120px]",children:[n.jsx("button",{className:"w-full px-3 py-2 text-left text-sm text-foreground hover:bg-background-tertiary transition-colors",children:"View Details"}),n.jsx("button",{className:"w-full px-3 py-2 text-left text-sm text-foreground hover:bg-background-tertiary transition-colors",children:"View Logs"}),n.jsx("button",{className:"w-full px-3 py-2 text-left text-sm text-foreground hover:bg-background-tertiary transition-colors",children:"Clone Agent"}),n.jsx("hr",{className:"my-1 border-border"}),n.jsx("button",{onClick:g,className:"w-full px-3 py-2 text-left text-sm text-status-error hover:bg-status-error/20 transition-colors disabled:opacity-50",disabled:a,children:a?"Deleting...":"Delete Agent"})]})]})]})]})}):n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-4 hover:bg-background-card-hover transition-colors relative",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[_(e.status),n.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${y(e.status)}`,children:e.status})]}),n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:()=>i(!s),className:"p-1 text-foreground-secondary hover:bg-background-tertiary rounded transition-colors",children:n.jsx(Lm,{className:"w-4 h-4"})}),s&&n.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-background-card border border-border rounded-lg shadow-lg py-1 z-10 min-w-[120px]",children:[n.jsx("button",{className:"w-full px-3 py-2 text-left text-sm text-foreground hover:bg-background-tertiary transition-colors",children:"View Details"}),n.jsx("button",{className:"w-full px-3 py-2 text-left text-sm text-foreground hover:bg-background-tertiary transition-colors",children:"View Logs"}),n.jsx("button",{className:"w-full px-3 py-2 text-left text-sm text-foreground hover:bg-background-tertiary transition-colors",children:"Clone Agent"}),n.jsx("hr",{className:"my-1 border-border"}),n.jsx("button",{onClick:g,className:"w-full px-3 py-2 text-left text-sm text-status-error hover:bg-status-error/20 transition-colors disabled:opacity-50",disabled:a,children:a?"Deleting...":"Delete Agent"})]})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("h3",{className:"font-medium text-foreground mb-1 truncate",title:e.id,children:e.id}),n.jsxs("div",{className:"flex items-center gap-1 text-sm text-foreground-secondary mb-2",children:[n.jsx(vo,{className:"w-3 h-3"}),n.jsx("span",{className:"truncate",title:e.branch,children:e.branch})]}),(e.cpuUsage||e.memoryUsage)&&n.jsxs("div",{className:"flex items-center gap-3 text-xs text-foreground-tertiary",children:[e.cpuUsage&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(F0,{className:"w-3 h-3"}),n.jsxs("span",{children:[e.cpuUsage.toFixed(1),"%"]})]}),e.memoryUsage&&n.jsx("div",{className:"flex items-center gap-1",children:n.jsxs("span",{children:["RAM: ",e.memoryUsage.toFixed(1),"%"]})})]})]}),n.jsxs("div",{className:"text-xs text-foreground-tertiary mb-4",children:[n.jsxs("div",{children:["Last activity: ",x(e.lastActivity)]}),n.jsxs("div",{children:["Created: ",x(e.createdAt)]})]}),n.jsx("div",{className:"flex gap-2",children:e.status==="RUNNING"?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:h,className:"flex-1 px-3 py-2 bg-brand text-white rounded-lg hover:bg-brand-hover transition-colors text-sm font-medium disabled:opacity-50",disabled:a,children:"Attach"}),n.jsx("button",{onClick:v,className:"px-3 py-2 bg-background-tertiary text-foreground-secondary rounded-lg hover:bg-background-card-hover transition-colors text-sm disabled:opacity-50",disabled:a,children:a?"Stopping...":"Stop"})]}):n.jsxs("button",{onClick:f,className:"w-full px-3 py-2 bg-status-success text-white rounded-lg hover:bg-status-success/80 transition-colors text-sm font-medium flex items-center justify-center gap-2 disabled:opacity-50",disabled:a,children:[n.jsx(Kn,{className:`w-4 h-4 ${a?"animate-spin":""}`}),a?"Starting...":"Start"]})})]})},sj=({agents:e,onRefresh:t})=>{const r=Ss(),[s,i]=j.useState(!1),[a,c]=j.useState({}),{isDemoMode:o}=bc(),l=o?Sf:ye,f=e.filter(b=>b.status==="RUNNING"),v=e.filter(b=>b.status==="STOPPED"),h=(b,S)=>{c(C=>({...C,[b]:S}))},g=()=>{r("/agents/new")},y=()=>{r("/tasks/assign")},_=async()=>{h("start-all",!0);try{const b=v.map(S=>l.startAgent(S.id));await Promise.all(b),se.success(`Started ${v.length} agents`),t==null||t()}catch(b){se.error("Failed to start some agents"),console.error("Failed to start agents:",b)}finally{h("start-all",!1)}},x=async()=>{h("stop-all",!0);try{const b=f.map(S=>l.stopAgent(S.id));await Promise.all(b),se.success(`Stopped ${f.length} agents`),t==null||t()}catch(b){se.error("Failed to stop some agents"),console.error("Failed to stop agents:",b)}finally{h("stop-all",!1)}},m=async()=>{h("restart-all",!0);try{const b=f.map(C=>l.stopAgent(C.id));await Promise.all(b),await new Promise(C=>setTimeout(C,2e3));const S=e.map(C=>l.startAgent(C.id));await Promise.all(S),se.success(`Restarted ${e.length} agents`),t==null||t()}catch(b){se.error("Failed to restart agents"),console.error("Failed to restart agents:",b)}finally{h("restart-all",!1)}},d=async()=>{h("cleanup",!0);try{const b=v.map(S=>l.deleteAgent(S.id));await Promise.all(b),se.success(`Cleaned up ${v.length} stopped agents`),t==null||t()}catch(b){se.error("Failed to clean up stopped agents"),console.error("Failed to clean up agents:",b)}finally{h("cleanup",!1)}},u=()=>{r("/terminal")},p=()=>{r("/settings")};return n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Quick Actions"}),n.jsxs("button",{onClick:()=>i(!s),className:"text-sm text-brand hover:text-brand-hover",children:[s?"Hide":"Show"," Bulk Actions"]})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3",children:[n.jsxs("button",{onClick:g,className:"flex flex-col items-center gap-2 p-4 bg-brand text-white rounded-lg hover:bg-brand-hover transition-colors group",children:[n.jsx(xo,{className:"w-6 h-6"}),n.jsx("span",{className:"text-sm font-medium",children:"Create Agent"})]}),n.jsxs("button",{onClick:y,className:"flex flex-col items-center gap-2 p-4 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors group",children:[n.jsx(eh,{className:"w-6 h-6"}),n.jsx("span",{className:"text-sm font-medium",children:"Assign Tasks"})]}),n.jsxs("button",{onClick:u,className:"flex flex-col items-center gap-2 p-4 bg-background-tertiary text-foreground rounded-lg hover:bg-background-card-hover transition-colors border border-border",children:[n.jsx(Nr,{className:"w-6 h-6"}),n.jsx("span",{className:"text-sm font-medium",children:"Terminal"})]}),n.jsxs("button",{onClick:p,className:"flex flex-col items-center gap-2 p-4 bg-background-tertiary text-foreground rounded-lg hover:bg-background-card-hover transition-colors border border-border",children:[n.jsx(Ml,{className:"w-6 h-6"}),n.jsx("span",{className:"text-sm font-medium",children:"Settings"})]}),v.length>0&&n.jsxs("button",{onClick:_,disabled:a["start-all"],className:"flex flex-col items-center gap-2 p-4 bg-status-success text-white rounded-lg hover:bg-status-success/80 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(Kn,{className:`w-6 h-6 ${a["start-all"]?"animate-spin":""}`}),n.jsx("span",{className:"text-sm font-medium",children:a["start-all"]?"Starting...":`Start (${v.length})`})]}),f.length>0&&n.jsxs("button",{onClick:x,disabled:a["stop-all"],className:"flex flex-col items-center gap-2 p-4 bg-foreground-tertiary text-white rounded-lg hover:bg-foreground-secondary transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(yo,{className:`w-6 h-6 ${a["stop-all"]?"animate-spin":""}`}),n.jsx("span",{className:"text-sm font-medium",children:a["stop-all"]?"Stopping...":`Stop (${f.length})`})]})]}),s&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-border",children:[n.jsx("h3",{className:"text-sm font-medium text-foreground mb-3",children:"Bulk Operations"}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[v.length>0&&n.jsxs("button",{onClick:_,className:"px-3 py-2 bg-status-success text-white rounded-lg hover:bg-status-success/80 transition-colors text-sm flex items-center gap-2",children:[n.jsx(Kn,{className:"w-4 h-4"}),"Start All Stopped (",v.length,")"]}),f.length>0&&n.jsxs("button",{onClick:x,className:"px-3 py-2 bg-foreground-tertiary text-white rounded-lg hover:bg-foreground-secondary transition-colors text-sm flex items-center gap-2",children:[n.jsx(yo,{className:"w-4 h-4"}),"Stop All Running (",f.length,")"]}),n.jsxs("button",{onClick:m,disabled:a["restart-all"],className:"px-3 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors text-sm flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(RC,{className:`w-4 h-4 ${a["restart-all"]?"animate-spin":""}`}),a["restart-all"]?"Restarting...":"Restart All"]}),n.jsx("button",{onClick:d,disabled:a.cleanup||v.length===0,className:"px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:a.cleanup?"Cleaning...":"Clean Up Stopped"})]})]}),n.jsx("div",{className:"mt-4 pt-4 border-t border-border",children:n.jsxs("div",{className:"text-xs text-foreground-tertiary space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{children:" Use keyboard shortcuts for faster access"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("kbd",{className:"px-2 py-1 bg-background-tertiary rounded border border-border text-foreground-secondary",children:"Ctrl+?"}),n.jsx("span",{children:"Show all shortcuts"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("kbd",{className:"px-1.5 py-0.5 bg-background-tertiary rounded border border-border text-foreground-secondary",children:"Ctrl+N"}),n.jsx("span",{children:"Create Agent"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("kbd",{className:"px-1.5 py-0.5 bg-background-tertiary rounded border border-border text-foreground-secondary",children:"Ctrl+T"}),n.jsx("span",{children:"Open Terminal"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("kbd",{className:"px-1.5 py-0.5 bg-background-tertiary rounded border border-border text-foreground-secondary",children:"Ctrl+V"}),n.jsx("span",{children:"Toggle View"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("kbd",{className:"px-1.5 py-0.5 bg-background-tertiary rounded border border-border text-foreground-secondary",children:"Ctrl+R"}),n.jsx("span",{children:"Refresh"})]})]})]})})]})},Ia=({title:e,children:t,isExpanded:r,onToggle:s,className:i="",headerActions:a})=>n.jsxs("div",{className:`bg-background-card border border-border rounded-lg ${i}`,children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[n.jsxs("button",{onClick:s,className:"flex items-center gap-2 text-left flex-1 group",children:[n.jsx("h2",{className:"text-lg font-semibold text-foreground group-hover:text-brand transition-colors",children:e}),r?n.jsx(B0,{className:"w-5 h-5 text-foreground-secondary group-hover:text-brand transition-colors"}):n.jsx(vf,{className:"w-5 h-5 text-foreground-secondary group-hover:text-brand transition-colors"})]}),a&&n.jsx("div",{className:"flex items-center gap-2",children:a})]}),r&&n.jsx("div",{className:"p-4",children:t})]}),ly=(e,t={})=>{const{onEvent:r,onError:s,onOpen:i,onClose:a,reconnectInterval:c=3e3,maxReconnectAttempts:o=5}=t,[l,f]=j.useState(!1),[v,h]=j.useState(!1),[g,y]=j.useState(null),[_,x]=j.useState([]),m=j.useRef(null),d=j.useRef(0),u=j.useRef(null),p=j.useRef(t);p.current=t;const b=()=>{var k;if(((k=m.current)==null?void 0:k.readyState)!==EventSource.OPEN){h(!0),y(null);try{const w=new EventSource(e);m.current=w,w.onopen=()=>{var N,D;f(!0),h(!1),y(null),d.current=0,(D=(N=p.current).onOpen)==null||D.call(N)},w.onmessage=N=>{var D,T;try{const I={type:"message",data:JSON.parse(N.data),timestamp:new Date().toISOString()};x(A=>[...A.slice(-99),I]),(T=(D=p.current).onEvent)==null||T.call(D,I)}catch(I){console.error("Failed to parse SSE event data:",I)}},w.onerror=N=>{var T,I;f(!1),h(!1),y("SSE connection error"),(I=(T=p.current).onError)==null||I.call(T,N),d.current<o&&(d.current++,u.current=setTimeout(()=>{b()},c))},w.addEventListener("agent-status-changed",N=>{var T,I;const D={type:"agent-status-changed",data:JSON.parse(N.data),timestamp:new Date().toISOString()};x(A=>[...A.slice(-99),D]),(I=(T=p.current).onEvent)==null||I.call(T,D)}),w.addEventListener("agent-created",N=>{var T,I;const D={type:"agent-created",data:JSON.parse(N.data),timestamp:new Date().toISOString()};x(A=>[...A.slice(-99),D]),(I=(T=p.current).onEvent)==null||I.call(T,D)}),w.addEventListener("agent-deleted",N=>{var T,I;const D={type:"agent-deleted",data:JSON.parse(N.data),timestamp:new Date().toISOString()};x(A=>[...A.slice(-99),D]),(I=(T=p.current).onEvent)==null||I.call(T,D)}),w.addEventListener("system-metrics",N=>{var T,I;const D={type:"system-metrics",data:JSON.parse(N.data),timestamp:new Date().toISOString()};x(A=>[...A.slice(-99),D]),(I=(T=p.current).onEvent)==null||I.call(T,D)})}catch(w){h(!1),y(w.message)}}},S=()=>{var k,w;u.current&&(clearTimeout(u.current),u.current=null),m.current&&(m.current.close(),m.current=null),f(!1),h(!1),d.current=0,(w=(k=p.current).onClose)==null||w.call(k)},C=()=>{S(),setTimeout(b,100)};return j.useEffect(()=>(b(),()=>{S()}),[e]),j.useEffect(()=>()=>{S()},[]),{isConnected:l,isConnecting:v,error:g,events:_,reconnect:C,disconnect:S}},nj=({className:e=""})=>{const[t,r]=j.useState(null),[s,i]=j.useState([]),{isConnected:a,error:c}=ly("/api/metrics",{onEvent:y=>{if(y.type==="system-metrics"){const _=y.data;r(_),i(x=>[...x.slice(-29),_])}}}),o=y=>{const _=Math.floor(y/3600),x=Math.floor(y%3600/60);return`${_}h ${x}m`},l=y=>{const _=["B","KB","MB","GB"];let x=y,m=0;for(;x>=1024&&m<_.length-1;)x/=1024,m++;return`${x.toFixed(1)} ${_[m]}`},f=y=>{if(y.length<2)return"stable";const _=y.slice(-3),x=_.reduce((u,p)=>u+p,0)/_.length,m=y.slice(-6,-3),d=m.reduce((u,p)=>u+p,0)/m.length;return x>d*1.1?"increasing":x<d*.9?"decreasing":"stable"},v=y=>{switch(y){case"increasing":return"text-status-error";case"decreasing":return"text-status-success";default:return"text-foreground-secondary"}},h=s.map(y=>y.cpu),g=s.map(y=>y.memory);return n.jsxs("div",{className:`grid grid-cols-2 lg:grid-cols-4 gap-4 ${e}`,children:[n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("div",{className:"p-2 rounded-lg bg-blue-500/20",children:n.jsx(F0,{className:"w-4 h-4 text-blue-500"})}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${a?"bg-status-success":"bg-status-error"}`}),n.jsx("span",{className:"text-xs text-foreground-tertiary",children:a?"Live":"Offline"})]})]}),n.jsxs("div",{className:"mb-2",children:[n.jsx("div",{className:"text-lg font-semibold text-foreground",children:t?`${t.cpu.toFixed(1)}%`:"--"}),n.jsx("div",{className:"text-xs text-foreground-secondary",children:"CPU Usage"})]}),s.length>1&&n.jsxs("div",{className:`text-xs ${v(f(h))}`,children:["Trend: ",f(h)]})]}),n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("div",{className:"p-2 rounded-lg bg-purple-500/20",children:n.jsx(gf,{className:"w-4 h-4 text-purple-500"})}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${a?"bg-status-success":"bg-status-error"}`}),n.jsx("span",{className:"text-xs text-foreground-tertiary",children:a?"Live":"Offline"})]})]}),n.jsxs("div",{className:"mb-2",children:[n.jsx("div",{className:"text-lg font-semibold text-foreground",children:t?`${t.memory.toFixed(1)}%`:"--"}),n.jsx("div",{className:"text-xs text-foreground-secondary",children:"Memory Usage"})]}),s.length>1&&n.jsxs("div",{className:`text-xs ${v(f(g))}`,children:["Trend: ",f(g)]})]}),n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("div",{className:"p-2 rounded-lg bg-green-500/20",children:n.jsx(MC,{className:"w-4 h-4 text-green-500"})}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${a?"bg-status-success":"bg-status-error"}`}),n.jsx("span",{className:"text-xs text-foreground-tertiary",children:a?"Live":"Offline"})]})]}),n.jsxs("div",{className:"mb-1",children:[n.jsxs("div",{className:"text-sm font-medium text-foreground",children:[" ",t?l(t.networkIn):"--"]}),n.jsxs("div",{className:"text-sm font-medium text-foreground",children:[" ",t?l(t.networkOut):"--"]})]}),n.jsx("div",{className:"text-xs text-foreground-secondary",children:"Network I/O"})]}),n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("div",{className:"p-2 rounded-lg bg-yellow-500/20",children:n.jsx(en,{className:"w-4 h-4 text-yellow-500"})}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${a?"bg-status-success":"bg-status-error"}`}),n.jsx("span",{className:"text-xs text-foreground-tertiary",children:a?"Live":"Offline"})]})]}),n.jsxs("div",{className:"mb-2",children:[n.jsx("div",{className:"text-lg font-semibold text-foreground",children:t?o(t.uptime):"--"}),n.jsx("div",{className:"text-xs text-foreground-secondary",children:"System Uptime"})]}),t&&n.jsxs("div",{className:"text-xs text-foreground-tertiary",children:["Since ",new Date(Date.now()-t.uptime*1e3).toLocaleDateString()]})]}),c&&n.jsx("div",{className:"col-span-full bg-status-error/20 border border-status-error rounded-lg p-3",children:n.jsxs("div",{className:"text-sm text-status-error",children:["Connection Error: ",c]})})]})},ij=({agents:e,projects:t,isLoading:r})=>{const s=e.filter(l=>l.status==="RUNNING");e.filter(l=>l.status==="STOPPED");const i=e.filter(l=>l.status==="ERROR");s.length>0&&s.reduce((l,f)=>l+(f.cpuUsage||0),0)/s.length,s.length>0&&s.reduce((l,f)=>l+(f.memoryUsage||0),0)/s.length;const a=e.length>0?Math.round((e.length-i.length)/e.length*100):100,c=l=>l>=90?"text-status-success":l>=70?"text-yellow-500":"text-status-error",o=l=>l>=90?n.jsx(Il,{className:"w-6 h-6"}):l>=70?n.jsx(Ol,{className:"w-6 h-6"}):n.jsx(Ol,{className:"w-6 h-6"});return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-background-tertiary rounded-lg p-4 border border-border",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("div",{className:"p-2 rounded-lg bg-status-success/20",children:n.jsx(fs,{className:"h-5 w-5 text-status-success"})}),n.jsx("div",{className:`w-2 h-2 rounded-full ${s.length>0?"bg-status-success":"bg-foreground-tertiary"}`})]}),n.jsx("p",{className:"text-sm font-medium text-foreground-secondary mb-1",children:"Active Agents"}),n.jsx("p",{className:"text-2xl font-bold text-foreground",children:r?"...":s.length}),n.jsxs("p",{className:"text-xs text-foreground-tertiary mt-1",children:[e.length," total"]})]}),n.jsxs("div",{className:"bg-background-tertiary rounded-lg p-4 border border-border",children:[n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsx("div",{className:"p-2 rounded-lg bg-brand/20",children:n.jsx(zi,{className:"h-5 w-5 text-brand"})})}),n.jsx("p",{className:"text-sm font-medium text-foreground-secondary mb-1",children:"Projects"}),n.jsx("p",{className:"text-2xl font-bold text-foreground",children:r?"...":t.length}),n.jsx("p",{className:"text-xs text-foreground-tertiary mt-1",children:"Active workspaces"})]}),n.jsxs("div",{className:"bg-background-tertiary rounded-lg p-4 border border-border",children:[n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsx("div",{className:`p-2 rounded-lg ${c(a)}/20`,children:o(a)})}),n.jsx("p",{className:"text-sm font-medium text-foreground-secondary mb-1",children:"System Health"}),n.jsx("p",{className:`text-2xl font-bold ${c(a)}`,children:r?"...":`${a}%`}),n.jsxs("p",{className:"text-xs text-foreground-tertiary mt-1",children:[i.length," error",i.length!==1?"s":""]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-foreground-secondary mb-3",children:"Live System Metrics"}),n.jsx(nj,{})]})]})},oj=({isOpen:e,onClose:t,shortcuts:r})=>{if(!e)return null;const s=r.reduce((a,c)=>{const o=c.category||"General";return a[o]||(a[o]=[]),a[o].push(c),a},{}),i=({shortcut:a})=>{const c=[];a.ctrlKey&&c.push("Ctrl"),a.metaKey&&c.push(""),a.shiftKey&&c.push("Shift"),a.altKey&&c.push("Alt");const o=a.key===" "?"Space":a.key.toUpperCase();return c.push(o),n.jsx("div",{className:"flex items-center gap-1",children:c.map((l,f)=>n.jsxs(oe.Fragment,{children:[f>0&&n.jsx("span",{className:"text-foreground-tertiary",children:"+"}),n.jsx("kbd",{className:"px-2 py-1 bg-background-tertiary border border-border rounded text-xs font-mono text-foreground-secondary",children:l})]},l))})};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-background-card border border-border rounded-lg max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(vC,{className:"w-5 h-5 text-brand"}),n.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Keyboard Shortcuts"})]}),n.jsx("button",{onClick:t,className:"p-2 text-foreground-secondary hover:text-foreground hover:bg-background-tertiary rounded-lg transition-colors",children:n.jsx(Qn,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"overflow-y-auto max-h-[60vh]",children:n.jsxs("div",{className:"p-6 space-y-6",children:[Object.entries(s).map(([a,c])=>n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium text-foreground-secondary mb-3 flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 bg-brand rounded-full"}),a]}),n.jsx("div",{className:"space-y-3",children:c.map((o,l)=>n.jsxs("div",{className:"flex items-center justify-between py-2",children:[n.jsx("span",{className:"text-sm text-foreground",children:o.description}),n.jsx(i,{shortcut:o})]},l))})]},a)),r.length===0&&n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Nr,{className:"w-12 h-12 text-foreground-tertiary mx-auto mb-3"}),n.jsx("p",{className:"text-foreground-secondary",children:"No keyboard shortcuts available"})]})]})}),n.jsx("div",{className:"border-t border-border px-6 py-4 bg-background-tertiary",children:n.jsxs("div",{className:"flex items-center justify-between text-xs text-foreground-tertiary",children:[n.jsxs("span",{children:["Press ",n.jsx("kbd",{className:"px-1 py-0.5 bg-background-card border border-border rounded",children:"Ctrl + ?"})," to toggle this help"]}),n.jsxs("span",{children:[r.length," shortcuts available"]})]})})]})})},aj=({isOpen:e,onClose:t,onCommandExecuted:r})=>{const[s,i]=j.useState(""),[a,c]=j.useState(0),[o,l]=j.useState(!1),[f,v]=j.useState(null),h=j.useRef(null),{isDemoMode:g}=bc(),y=[{name:"list-agents",description:"List all agents",category:"agent",requiredParams:[],optionalParams:["status","project"],execute:async d=>({success:!0,data:[]})},{name:"create-agent",description:"Create a new agent",category:"agent",requiredParams:["branch"],optionalParams:["project","mode"],execute:async d=>({success:!0,data:{id:"new-agent"}})},{name:"start-agent",description:"Start an agent",category:"agent",requiredParams:["agentId"],optionalParams:[],execute:async d=>({success:!0,data:{status:"RUNNING"}})},{name:"stop-agent",description:"Stop an agent",category:"agent",requiredParams:["agentId"],optionalParams:[],execute:async d=>({success:!0,data:{status:"STOPPED"}})},{name:"list-projects",description:"List all projects",category:"project",requiredParams:[],optionalParams:[],execute:async d=>({success:!0,data:[]})},{name:"system-status",description:"Get system status",category:"system",requiredParams:[],optionalParams:[],execute:async d=>({success:!0,data:{status:"healthy"}})}],_=j.useMemo(()=>y.map(u=>({...u,shortcut:lj(u.name),icon:cj(u.category)})),[]),x=j.useMemo(()=>{if(!s.trim())return _;const d=s.toLowerCase();return _.filter(u=>u.name.toLowerCase().includes(d)||u.description.toLowerCase().includes(d)||u.category.toLowerCase().includes(d)).sort((u,p)=>{const b=u.name.toLowerCase().startsWith(d),S=p.name.toLowerCase().startsWith(d);if(b&&!S)return-1;if(!b&&S)return 1;const C={agent:0,project:1,system:2,config:3};return(C[u.category]||999)-(C[p.category]||999)})},[s,_]);j.useEffect(()=>{e&&(i(""),c(0),v(null),l(!1),setTimeout(()=>{var d;return(d=h.current)==null?void 0:d.focus()},50))},[e]),j.useEffect(()=>{c(0)},[x]),j.useEffect(()=>{const d=u=>{if(e)switch(u.key){case"Escape":u.preventDefault(),t();break;case"ArrowDown":u.preventDefault(),c(p=>Math.min(p+1,x.length-1));break;case"ArrowUp":u.preventDefault(),c(p=>Math.max(p-1,0));break;case"Enter":u.preventDefault(),x[a]&&!o&&m(x[a]);break}};return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[e,a,x,o,t]);const m=async d=>{if(!o){l(!0),v(null);try{const u=`session_${Date.now()}`,p={};if(g)for(const S of d.requiredParams)switch(S){case"agentId":p[S]="demo-agent-1";break;case"projectId":p[S]="demo-project-1";break;case"name":p[S]="Demo Item";break;case"path":p[S]="/demo/path";break;case"key":p[S]="DEMO_CONFIG";break;case"value":p[S]="demo-value";break;default:p[S]=`demo-${S}`}const b=await d.execute(p);v(b),r==null||r(b),b.success&&setTimeout(()=>{t()},1500)}catch(u){console.error("Command execution failed:",u),v({success:!1,error:u,executionTime:0,commandId:"",source:"GUI",timestamp:new Date})}finally{l(!1)}}};return e?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:t}),n.jsx("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 w-full max-w-lg",children:n.jsxs("div",{className:"bg-background-card border border-border rounded-lg shadow-xl overflow-hidden",children:[n.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-border",children:[n.jsx(vc,{className:"w-5 h-5 text-foreground-secondary mr-3"}),n.jsx("input",{ref:h,type:"text",placeholder:"Type a command...",value:s,onChange:d=>i(d.target.value),className:"flex-1 bg-transparent text-foreground placeholder-foreground-tertiary focus:outline-none"}),g&&n.jsx("span",{className:"text-xs text-purple-400 font-medium",children:"DEMO"})]}),n.jsx("div",{className:"max-h-80 overflow-y-auto",children:x.length===0?n.jsxs("div",{className:"px-4 py-8 text-center",children:[n.jsx("p",{className:"text-foreground-secondary",children:"No commands found"}),n.jsx("p",{className:"text-sm text-foreground-tertiary mt-1",children:"Try a different search term"})]}):n.jsx("div",{className:"py-2",children:x.map((d,u)=>n.jsx("button",{onClick:()=>m(d),disabled:o,className:`w-full px-4 py-3 text-left hover:bg-background-tertiary transition-colors ${u===a?"bg-background-tertiary":""} ${o?"opacity-50 cursor-not-allowed":""}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[d.icon,n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-foreground",children:d.name}),n.jsx("div",{className:"text-sm text-foreground-secondary",children:d.description})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${dj(d.category)}`,children:d.category}),d.shortcut&&n.jsx("kbd",{className:"px-2 py-1 text-xs bg-background-tertiary text-foreground-secondary rounded",children:d.shortcut})]})]})},d.name))})}),f&&n.jsxs("div",{className:"border-t border-border px-4 py-3",children:[n.jsxs("div",{className:`flex items-center gap-2 ${f.success?"text-status-success":"text-status-error"}`,children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${f.success?"bg-status-success":"bg-status-error"}`}),n.jsx("span",{className:"text-sm font-medium",children:f.success?"Command executed successfully":"Command failed"}),n.jsxs("span",{className:"text-xs text-foreground-tertiary",children:["(",f.executionTime,"ms)"]})]}),f.data&&n.jsx("div",{className:"mt-2 text-xs text-foreground-secondary",children:n.jsx("pre",{className:"whitespace-pre-wrap",children:JSON.stringify(f.data,null,2)})}),f.error&&n.jsx("div",{className:"mt-2 text-xs text-status-error",children:f.error.userMessage||f.error.message})]}),o&&n.jsx("div",{className:"border-t border-border px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-2 text-foreground-secondary",children:[n.jsx("div",{className:"w-4 h-4 border-2 border-brand border-t-transparent rounded-full animate-spin"}),n.jsx("span",{className:"text-sm",children:"Executing command..."})]})}),n.jsx("div",{className:"border-t border-border px-4 py-2 bg-background-tertiary",children:n.jsxs("div",{className:"flex items-center justify-between text-xs text-foreground-tertiary",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("span",{children:" navigate"}),n.jsx("span",{children:" execute"}),n.jsx("span",{children:"esc close"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Nr,{className:"w-3 h-3"}),n.jsx("span",{children:"GUI-CLI Bridge"})]})]})})]})})]}):null};function lj(e){return{"create-agent":"Ctrl+N","list-agents":"Ctrl+L","system-status":"Ctrl+I",cleanup:"Ctrl+Shift+C"}[e]}function cj(e){return{agent:n.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-full"}),project:n.jsx("div",{className:"w-4 h-4 bg-green-500 rounded-full"}),system:n.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded-full"}),config:n.jsx("div",{className:"w-4 h-4 bg-purple-500 rounded-full"})}[e]||n.jsx("div",{className:"w-4 h-4 bg-gray-500 rounded-full"})}function dj(e){return{agent:"bg-blue-100 text-blue-800",project:"bg-green-100 text-green-800",system:"bg-orange-100 text-orange-800",config:"bg-purple-100 text-purple-800"}[e]||"bg-gray-100 text-gray-800"}const cy=j.createContext(null),uj=({children:e,preferredMethod:t="auto"})=>{const[r,s]=j.useState("none"),[i,a]=j.useState(null),[c,o]=j.useState(null),{socket:l,isConnected:f}=qo(),{isConnected:v}=ly("/api/events",{onEvent:_=>{a(new Date().toISOString()),["agent-status-changed","agent-created","agent-deleted"].includes(_.type)&&(c==null||c())},onOpen:()=>{(t==="sse"||t==="auto"&&!f)&&s("sse")}});j.useEffect(()=>{s(t==="websocket"&&f?"websocket":t==="sse"&&v?"sse":t==="auto"?f?"websocket":v?"sse":"none":"none")},[t,f,v]),j.useEffect(()=>{if(r==="websocket"&&l){const _=()=>{a(new Date().toISOString()),c==null||c()};return l.on("agent-status-changed",_),l.on("agent-created",_),l.on("agent-deleted",_),()=>{l.off("agent-status-changed",_),l.off("agent-created",_),l.off("agent-deleted",_)}}},[r,l,c]);const y={isConnected:f||v,connectionType:r,lastUpdate:i,onAgentUpdate:()=>{a(new Date().toISOString()),c==null||c()},setRefreshCallback:_=>{o(()=>_)}};return n.jsx(cy.Provider,{value:y,children:e})},hj=()=>{const e=j.useContext(cy);if(!e)throw new Error("useRealTime must be used within a RealTimeProvider");return e},fj=(e,t={})=>{const{enabled:r=!0,preventDefault:s=!0}=t,i=j.useRef(e);i.current=e;const a=j.useCallback(c=>{if(!r)return;const o=c.target;if(o.tagName==="INPUT"||o.tagName==="TEXTAREA"||o.contentEditable==="true")return;const l=i.current.find(f=>{const v=c.key.toLowerCase()===f.key.toLowerCase(),h=!!c.ctrlKey==!!f.ctrlKey,g=!!c.metaKey==!!f.metaKey,y=!!c.shiftKey==!!f.shiftKey,_=!!c.altKey==!!f.altKey;return v&&h&&g&&y&&_});l&&(s&&(c.preventDefault(),c.stopPropagation()),l.action())},[r,s]);return j.useEffect(()=>(document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)}),[a]),{shortcuts:i.current}},pj=e=>{const t=[];return e.createAgent&&t.push({key:"n",ctrlKey:!0,action:e.createAgent,description:"Create new agent",category:"Navigation"}),e.openTerminal&&t.push({key:"t",ctrlKey:!0,action:e.openTerminal,description:"Open terminal",category:"Navigation"}),e.toggleSearch&&t.push({key:"k",ctrlKey:!0,action:e.toggleSearch,description:"Toggle search",category:"Navigation"}),e.toggleSettings&&t.push({key:",",ctrlKey:!0,action:e.toggleSettings,description:"Open settings",category:"Navigation"}),e.refreshData&&t.push({key:"r",ctrlKey:!0,action:e.refreshData,description:"Refresh data",category:"Actions"}),e.toggleViewMode&&t.push({key:"v",ctrlKey:!0,action:e.toggleViewMode,description:"Toggle view mode",category:"View"}),e.toggleFullscreen&&t.push({key:"f",ctrlKey:!0,action:e.toggleFullscreen,description:"Toggle fullscreen",category:"View"}),e.closeModal&&t.push({key:"Escape",action:e.closeModal,description:"Close modal/dialog",category:"Navigation"}),e.showHelp&&t.push({key:"?",ctrlKey:!0,action:e.showHelp,description:"Show keyboard shortcuts",category:"Help"}),e.startAllAgents&&t.push({key:"s",ctrlKey:!0,shiftKey:!0,action:e.startAllAgents,description:"Start all agents",category:"Agent Control"}),e.stopAllAgents&&t.push({key:"x",ctrlKey:!0,shiftKey:!0,action:e.stopAllAgents,description:"Stop all agents",category:"Agent Control"}),e.openCommandPalette&&t.push({key:"p",ctrlKey:!0,shiftKey:!0,action:e.openCommandPalette,description:"Open command palette",category:"Navigation"}),t},mj=()=>{const[e,t]=j.useState("grid"),[r,s]=j.useState({overview:!0,agents:!0,projects:!1,advanced:!1}),[i,a]=j.useState(!1),[c,o]=j.useState(!1),{isDemoMode:l}=bc(),f=l?Sf:ye,{isConnected:v,connectionType:h,lastUpdate:g,setRefreshCallback:y}=hj(),_=B=>({...B,lastActivity:B.updatedAt||B.createdAt,cpuUsage:Math.random()*100,memoryUsage:Math.random()*100}),x=B=>({...B}),{data:m=[],isLoading:d,refetch:u}=fr({queryKey:["agents",l?"demo":"real"],queryFn:()=>f.getAgents(),refetchInterval:l?1e4:5e3}),{data:p=[],isLoading:b}=fr({queryKey:["projects",l?"demo":"real"],queryFn:()=>f.getProjects()}),S=m.map(_),C=p.map(x);j.useEffect(()=>{y(u)},[u,y]);const k=B=>{s(U=>({...U,[B]:!U[B]}))},w=S.filter(B=>B.status==="RUNNING"),N=S.filter(B=>B.status==="STOPPED"),D=S.filter(B=>B.status==="ERROR"),P=pj({createAgent:()=>{window.open("/agents/new","_blank")},openTerminal:()=>{window.dispatchEvent(new CustomEvent("open-terminal",{detail:{agentId:void 0}}))},refreshData:u,toggleViewMode:()=>t(B=>B==="grid"?"list":"grid"),showHelp:()=>a(!0),closeModal:()=>{a(!1),o(!1)},startAllAgents:()=>{N.forEach(B=>{window.dispatchEvent(new CustomEvent("start-agent",{detail:{agentId:B.id}}))})},stopAllAgents:()=>{w.forEach(B=>{window.dispatchEvent(new CustomEvent("stop-agent",{detail:{agentId:B.id}}))})},openCommandPalette:()=>o(!0)});return fj(P),n.jsxs("div",{className:"space-y-6 p-6 bg-background min-h-screen",children:[n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Development Dashboard"}),l&&n.jsx("span",{className:"px-3 py-1 bg-purple-600 text-white text-sm font-medium rounded-full",children:"Demo Mode"})]}),n.jsx("p",{className:"text-foreground-secondary mt-1",children:l?"Explore the dashboard with sample data":"Manage your multi-agent development workflow"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${v?"bg-status-success":"bg-status-error"}`}),n.jsx("span",{className:"text-sm text-foreground-secondary",children:v?`Connected (${h.toUpperCase()})`:"Disconnected"}),g&&n.jsxs("span",{className:"text-xs text-foreground-tertiary",children:[" Last update: ",new Date(g).toLocaleTimeString()]})]}),n.jsxs("div",{className:"flex bg-background-tertiary rounded-lg p-1",children:[n.jsx("button",{onClick:()=>t("grid"),className:`p-2 rounded-md transition-colors ${e==="grid"?"bg-background-card text-foreground":"text-foreground-secondary hover:text-foreground"}`,title:"Grid view (Ctrl+V)",children:n.jsx(H0,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>t("list"),className:`p-2 rounded-md transition-colors ${e==="list"?"bg-background-card text-foreground":"text-foreground-secondary hover:text-foreground"}`,title:"List view (Ctrl+V)",children:n.jsx($0,{className:"w-4 h-4"})})]}),n.jsx("button",{onClick:()=>a(!0),className:"p-2 text-foreground-secondary hover:text-foreground hover:bg-background-tertiary rounded-lg transition-colors",title:"Keyboard shortcuts (Ctrl+?)",children:n.jsx(EC,{className:"w-5 h-5"})})]})]}),n.jsx(Ia,{title:"System Overview",isExpanded:r.overview,onToggle:()=>k("overview"),children:n.jsx(ij,{agents:S,projects:C,isLoading:d||b})}),n.jsx(sj,{agents:S,onRefresh:u}),n.jsx(Ia,{title:`Active Agents (${S.length})`,isExpanded:r.agents,onToggle:()=>k("agents"),children:n.jsxs("div",{className:"space-y-4",children:[w.length>0&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium text-status-success mb-3 flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 bg-status-success rounded-full"}),"Running (",w.length,")"]}),n.jsx("div",{className:`grid gap-4 ${e==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1"}`,children:w.map(B=>n.jsx(Nd,{agent:B,viewMode:e,onRefresh:u},B.id))})]}),N.length>0&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium text-foreground-secondary mb-3 flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 bg-foreground-secondary rounded-full"}),"Stopped (",N.length,")"]}),n.jsx("div",{className:`grid gap-4 ${e==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1"}`,children:N.map(B=>n.jsx(Nd,{agent:B,viewMode:e,onRefresh:u},B.id))})]}),D.length>0&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium text-status-error mb-3 flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 bg-status-error rounded-full"}),"Errors (",D.length,")"]}),n.jsx("div",{className:`grid gap-4 ${e==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1"}`,children:D.map(B=>n.jsx(Nd,{agent:B,viewMode:e,onRefresh:u},B.id))})]}),S.length===0&&!d&&n.jsxs("div",{className:"text-center py-12 bg-background-card rounded-lg border border-border",children:[n.jsx("p",{className:"text-foreground-secondary mb-4",children:"No agents found"}),n.jsx("button",{className:"px-4 py-2 bg-brand text-white rounded-lg hover:bg-brand-hover transition-colors",children:"Create Your First Agent"})]})]})}),n.jsx(Ia,{title:`Projects (${C.length})`,isExpanded:r.projects,onToggle:()=>k("projects"),children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:C.map(B=>{var U;return n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-4 hover:bg-background-card-hover transition-colors",children:[n.jsx("h3",{className:"font-semibold text-foreground mb-2",children:B.name}),n.jsx("p",{className:"text-sm text-foreground-secondary mb-3",children:B.description||"No description"}),n.jsxs("div",{className:"flex items-center justify-between text-xs",children:[n.jsxs("span",{className:"text-foreground-tertiary",children:[((U=B.agents)==null?void 0:U.length)||0," agents"]}),n.jsx("button",{className:"text-brand hover:text-brand-hover font-medium",children:"Manage"})]})]},B.id)})})}),n.jsx(Ia,{title:"Advanced Options",isExpanded:r.advanced,onToggle:()=>k("advanced"),children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-4",children:[n.jsx("h3",{className:"font-medium text-foreground mb-2",children:"System Settings"}),n.jsx("p",{className:"text-sm text-foreground-secondary mb-3",children:"Configure global system preferences"}),n.jsx("button",{className:"text-sm text-brand hover:text-brand-hover",children:"Open Settings"})]}),n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-4",children:[n.jsx("h3",{className:"font-medium text-foreground mb-2",children:"Resource Monitor"}),n.jsx("p",{className:"text-sm text-foreground-secondary mb-3",children:"View system resource usage and performance"}),n.jsx("button",{className:"text-sm text-brand hover:text-brand-hover",children:"View Monitor"})]}),n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-4",children:[n.jsx("h3",{className:"font-medium text-foreground mb-2",children:"Logs & Debugging"}),n.jsx("p",{className:"text-sm text-foreground-secondary mb-3",children:"Access system logs and debugging tools"}),n.jsx("button",{className:"text-sm text-brand hover:text-brand-hover",children:"View Logs"})]})]})}),n.jsx(oy,{}),n.jsx(oj,{isOpen:i,onClose:()=>a(!1),shortcuts:P}),n.jsx(aj,{isOpen:c,onClose:()=>o(!1),onCommandExecuted:B=>{console.log("Command executed:",B),B.success&&u()}})]})},gj=()=>n.jsx(rj,{children:n.jsx(uj,{preferredMethod:"auto",children:n.jsx(mj,{})})}),vj=()=>{const e=Ss(),[t,r]=j.useState(""),[s,i]=j.useState("all"),[a,c]=j.useState("all"),{data:o=[],isLoading:l,refetch:f}=fr({queryKey:["agents"],queryFn:()=>ye.getAgents()}),{data:v=[]}=fr({queryKey:["projects"],queryFn:()=>ye.getProjects()}),h=o.filter(_=>{var u;const x=t===""||_.id.toLowerCase().includes(t.toLowerCase())||_.branch.toLowerCase().includes(t.toLowerCase())||((u=_.projectId)==null?void 0:u.toLowerCase().includes(t.toLowerCase())),m=s==="all"||_.status===s,d=a==="all"||_.projectId===a;return x&&m&&d}),g=_=>{const x={RUNNING:"bg-status-success/20 text-status-success",STOPPED:"bg-foreground-tertiary/20 text-foreground-tertiary",ERROR:"bg-status-error/20 text-status-error"};return n.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${x[_]||x.STOPPED}`,children:_})},y=({agent:_})=>{const x=v.find(m=>m.id===_.projectId);return n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-6 hover:bg-background-card-hover transition-all group",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`p-2 rounded-lg ${_.status==="RUNNING"?"bg-status-success/20":_.status==="ERROR"?"bg-status-error/20":"bg-foreground-tertiary/20"}`,children:n.jsx(fs,{className:`h-5 w-5 ${_.status==="RUNNING"?"text-status-success":_.status==="ERROR"?"text-status-error":"text-foreground-tertiary"}`})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-foreground",children:_.id}),n.jsx("p",{className:"text-sm text-foreground-tertiary",children:(x==null?void 0:x.name)||_.projectId})]})]}),g(_.status)]}),n.jsxs("div",{className:"space-y-3 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(vo,{className:"h-4 w-4 text-foreground-tertiary"}),n.jsx("span",{className:"text-foreground-secondary",children:_.branch})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx("span",{className:"text-foreground-tertiary",children:"Ports:"}),n.jsx("span",{className:"text-foreground-secondary font-mono text-xs",children:"3000, 3001"})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx("span",{className:"text-foreground-tertiary",children:"Environment:"}),n.jsx("span",{className:"text-foreground-secondary",children:"docker"})]})]}),n.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-border",children:[n.jsxs("div",{className:"flex items-center gap-2 text-xs text-foreground-tertiary",children:[n.jsx(en,{className:"h-3 w-3"}),n.jsxs("span",{children:["Last: ",_.createdAt?new Date(_.createdAt).toLocaleTimeString():"Never"]})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[_.status==="RUNNING"?n.jsx("button",{className:"p-1.5 text-status-error hover:bg-status-error/10 rounded transition-colors",title:"Stop Agent",children:n.jsx(yo,{className:"h-4 w-4"})}):n.jsx("button",{className:"p-1.5 text-status-success hover:bg-status-success/10 rounded transition-colors",title:"Start Agent",children:n.jsx(Kn,{className:"h-4 w-4"})}),n.jsx("button",{className:"p-1.5 text-foreground-secondary hover:text-foreground hover:bg-background-tertiary rounded transition-colors",title:"View Details",onClick:()=>e(`/agents/${_.id}`),children:n.jsx(iC,{className:"h-4 w-4"})})]})]})]})};return l?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(Ll,{className:"h-8 w-8 text-foreground-tertiary animate-spin"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Agents"}),n.jsx("p",{className:"text-foreground-secondary mt-1",children:"Manage your development agents"})]}),n.jsxs("button",{onClick:()=>e("/agents/new"),className:"px-4 py-2 bg-brand hover:bg-brand-hover text-white rounded-lg font-medium transition-colors flex items-center gap-2",children:[n.jsx(xo,{className:"h-4 w-4"}),"Create Agent"]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx("div",{className:"bg-background-card border border-border rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-foreground-secondary",children:"Running"}),n.jsx("p",{className:"text-2xl font-bold text-status-success",children:o.filter(_=>_.status==="RUNNING").length})]}),n.jsx("div",{className:"p-3 rounded-lg bg-status-success/20",children:n.jsx(Kn,{className:"h-5 w-5 text-status-success"})})]})}),n.jsx("div",{className:"bg-background-card border border-border rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-foreground-secondary",children:"Stopped"}),n.jsx("p",{className:"text-2xl font-bold text-foreground",children:o.filter(_=>_.status==="STOPPED").length})]}),n.jsx("div",{className:"p-3 rounded-lg bg-foreground-tertiary/20",children:n.jsx(yo,{className:"h-5 w-5 text-foreground-tertiary"})})]})}),n.jsx("div",{className:"bg-background-card border border-border rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-foreground-secondary",children:"Errors"}),n.jsx("p",{className:"text-2xl font-bold text-status-error",children:o.filter(_=>_.status==="ERROR").length})]}),n.jsx("div",{className:"p-3 rounded-lg bg-status-error/20",children:n.jsx(Ol,{className:"h-5 w-5 text-status-error"})})]})})]}),n.jsxs("div",{className:"flex items-center justify-between gap-4",children:[n.jsxs("div",{className:"relative flex-1 max-w-md",children:[n.jsx("input",{type:"text",placeholder:"Search agents, branches, or tasks...",value:t,onChange:_=>r(_.target.value),className:"w-full pl-10 pr-4 py-2 bg-background-tertiary border border-border rounded-lg text-sm text-foreground placeholder-foreground-tertiary focus:outline-none focus:border-brand focus:ring-1 focus:ring-brand"}),n.jsx(vc,{className:"absolute left-3 top-2.5 h-5 w-5 text-foreground-tertiary"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("select",{value:s,onChange:_=>i(_.target.value),className:"px-3 py-2 bg-background-tertiary border border-border rounded-lg text-sm text-foreground focus:outline-none focus:border-brand",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"RUNNING",children:"Running"}),n.jsx("option",{value:"STOPPED",children:"Stopped"}),n.jsx("option",{value:"ERROR",children:"Error"})]}),n.jsxs("select",{value:a,onChange:_=>c(_.target.value),className:"px-3 py-2 bg-background-tertiary border border-border rounded-lg text-sm text-foreground focus:outline-none focus:border-brand",children:[n.jsx("option",{value:"all",children:"All Projects"}),v.map(_=>n.jsx("option",{value:_.id,children:_.name},_.id))]}),n.jsx("button",{onClick:()=>f(),className:"p-2 text-foreground-secondary hover:text-foreground hover:bg-background-tertiary rounded-lg transition-colors",children:n.jsx(Ll,{className:"h-5 w-5"})})]})]}),h.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-16 bg-background-card border border-border rounded-lg",children:[n.jsx(fs,{className:"h-12 w-12 text-foreground-tertiary mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:t||s!=="all"||a!=="all"?"No agents found":"No agents yet"}),n.jsx("p",{className:"text-foreground-secondary text-center max-w-md mb-6",children:t||s!=="all"||a!=="all"?"Try adjusting your filters":"Create your first agent to start developing"}),!t&&s==="all"&&a==="all"&&n.jsxs("button",{onClick:()=>e("/agents/new"),className:"px-4 py-2 bg-brand hover:bg-brand-hover text-white rounded-lg font-medium transition-colors flex items-center gap-2",children:[n.jsx(xo,{className:"h-4 w-4"}),"Create Agent"]})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(_=>n.jsx(y,{agent:_},_.id))})]})};var xj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const yj=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),bj=(e,t)=>{const r=j.forwardRef(({color:s="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:c,children:o,...l},f)=>j.createElement("svg",{ref:f,...xj,width:i,height:i,stroke:s,strokeWidth:c?Number(a)*24/Number(i):a,className:`lucide lucide-${yj(e)}`,...l},[...t.map(([v,h])=>j.createElement(v,h)),...(Array.isArray(o)?o:[o])||[]]));return r.displayName=`${e}`,r};var re=bj;const _j=re("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),ot=re("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Yn=re("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),wj=re("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),Go=re("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Xn=re("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),bo=re("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),Sj=re("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),Cj=re("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]),kj=re("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Cf=re("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),jj=re("CheckSquare",[["polyline",{points:"9 11 12 14 22 4",key:"19ybtz"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),Ko=re("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),_c=re("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),wc=re("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),kf=re("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Sc=re("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Nj=re("Code2",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]),Hm=re("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),Ej=re("Command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]),Dj=re("Container",[["path",{d:"M22 7.7c0-.6-.4-1.2-.8-1.5l-6.3-3.9a1.72 1.72 0 0 0-1.7 0l-10.3 6c-.5.2-.9.8-.9 1.4v6.6c0 .5.4 1.2.8 1.5l6.3 3.9a1.72 1.72 0 0 0 1.7 0l10.3-6c.5-.3.9-1 .9-1.5Z",key:"1t2lqe"}],["path",{d:"M10 21.9V14L2.1 9.1",key:"o7czzq"}],["path",{d:"m10 14 11.9-6.9",key:"zm5e20"}],["path",{d:"M14 19.8v-8.1",key:"159ecu"}],["path",{d:"M18 17.5V9.4",key:"11uown"}]]),Pj=re("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),rl=re("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),dy=re("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),uy=re("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Rj=re("FolderOpen",[["path",{d:"m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H18a2 2 0 0 1 2 2v2",key:"1nmvlm"}]]),Aj=re("FolderSearch",[["path",{d:"M11 20H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H20a2 2 0 0 1 2 2v4",key:"1moo03"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["path",{d:"m21 21-1.5-1.5",key:"3sg1j"}]]),Jn=re("Folder",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}]]),ps=re("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]),jf=re("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),hy=re("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Nf=re("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Tj=re("Layers",[["polygon",{points:"12 2 2 7 12 12 22 7 12 2",key:"1b0ttc"}],["polyline",{points:"2 17 12 22 22 17",key:"imjtdl"}],["polyline",{points:"2 12 12 17 22 12",key:"5dexcv"}]]),Lj=re("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),fy=re("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),py=re("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),Ij=re("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),Mj=re("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]),Oj=re("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),ah=re("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),Yr=re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Bj=re("Power",[["path",{d:"M18.36 6.64a9 9 0 1 1-12.73 0",key:"phirl6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"12",key:"aemgbe"}]]),Er=re("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Fl=re("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Fj=re("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Qo=re("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),$j=re("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Hj=re("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),Cc=re("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),Yo=re("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),my=re("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),Um=re("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),_o=re("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),Uj=re("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),ms=re("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]),Wj=re("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]),qi=re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),zj=re("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),gy=re("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Nn=re("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),Zn=re("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),Xt=re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Xo=re("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Wm=e=>{switch(e){case"simple":return Xo;case"standard":return Cc;case"advanced":return Zn}},zm=e=>{switch(e){case"simple":return"text-green-600 bg-green-50 border-green-200";case"standard":return"text-blue-600 bg-blue-50 border-blue-200";case"advanced":return"text-purple-600 bg-purple-50 border-purple-200"}},Vm=[{mode:"simple",label:"Simple",description:"Essential options only"},{mode:"standard",label:"Standard",description:"Common configurations"},{mode:"advanced",label:"Advanced",description:"Full customization"}],Vj=({currentMode:e,onModeChange:t,showQuickSwitch:r=!0,onModeChangeRequest:s})=>{const[i,a]=j.useState(!1),c=Wm(e);Vm.find(l=>l.mode===e);const o=l=>{if(l===e){a(!1);return}a(!1),s?s(l):t(l)};return r?n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>a(!i),className:`inline-flex items-center px-3 py-1.5 rounded-md border text-sm font-medium transition-colors hover:opacity-80 ${zm(e)}`,children:[n.jsx(c,{className:"w-4 h-4 mr-2"}),n.jsxs("span",{className:"capitalize",children:[e," Mode"]}),n.jsx(_c,{className:"w-4 h-4 ml-2"})]}),i&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>a(!1)}),n.jsx("div",{className:"absolute top-full left-0 mt-1 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-20",children:n.jsxs("div",{className:"p-2",children:[n.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide px-2 py-1 mb-1",children:"Switch Complexity Mode"}),Vm.map(l=>{const f=Wm(l.mode),v=l.mode===e;return n.jsxs("button",{onClick:()=>o(l.mode),className:`w-full flex items-center px-2 py-2 rounded-md text-sm transition-colors ${v?"bg-brand text-white":"text-gray-700 hover:bg-gray-100"}`,children:[n.jsx(f,{className:"w-4 h-4 mr-3 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 text-left",children:[n.jsx("div",{className:"font-medium",children:l.label}),n.jsx("div",{className:`text-xs ${v?"text-brand-light":"text-gray-500"}`,children:l.description})]}),!v&&n.jsx(Xn,{className:"w-4 h-4 text-gray-400"}),v&&n.jsx("span",{className:"text-xs font-medium",children:"Current"})]},l.mode)})]})})]})]}):n.jsxs("div",{className:`inline-flex items-center px-3 py-1.5 rounded-md border text-sm font-medium ${zm(e)}`,children:[n.jsx(c,{className:"w-4 h-4 mr-2"}),n.jsxs("span",{className:"capitalize",children:[e," Mode"]})]})},qj=(e,t,r)=>{var a;const i=(a={mode:{simple:{id:"mode-simple",title:"Simple Mode - Quick Start",description:"Get started quickly with minimal configuration",content:["Simple Mode is perfect for getting started quickly without complex setup.","Your agent will be created with smart defaults that work for most common scenarios.","All you need to specify is which project to work on."],upgradePrompt:{targetMode:"standard",reason:"Need more control over your agent configuration?",benefits:["Custom branch naming","TaskMaster integration for organized workflows","Agent identification options"]},tips:["Perfect for quick prototyping and testing","All essential features are included","You can always upgrade to more advanced modes later"]},standard:{id:"mode-standard",title:"Standard Mode - Balanced Control",description:"Common configurations with practical customization options",content:["Standard Mode provides the most commonly needed configuration options.","You can customize branch names, integrate with TaskMaster, and set up basic agent identification.","This mode strikes a balance between simplicity and functionality."],upgradePrompt:{targetMode:"advanced",reason:"Working on complex projects that need Docker or MCP integration?",benefits:["Docker containerization","MCP server integration","Claude parameter tuning","Resource management"]},tips:["Ideal for most development workflows","TaskMaster integration helps organize complex projects","Custom branch names improve Git workflow organization"]},advanced:{id:"mode-advanced",title:"Advanced Mode - Complete Control",description:"Full access to all power-user features and customization",content:["Advanced Mode gives you complete control over every aspect of your agent configuration.","Configure Docker containers, MCP servers, Claude parameters, and resource limits.","Use configuration templates and export/import settings for team consistency."],tips:["Use configuration templates for common setups","Export configurations to share with your team","Docker containers provide better isolation and security","MCP servers extend agent capabilities significantly"]}},project:{simple:{id:"project-simple",title:"Project Selection - Simple",description:"Choose the project your agent will work on",content:["Select the project directory where your agent will operate.","The agent will automatically detect the project type and configure appropriate settings.","Browse your local directories or enter a path directly."],upgradePrompt:{targetMode:"standard",reason:"Want to organize work with multiple agents or custom branches?",benefits:["Branch management","TaskMaster integration","Better project organization"]},tips:["Choose a Git repository for best results","The agent will work within this directory","Project type detection helps optimize agent behavior"]},standard:{id:"project-standard",title:"Project Selection - Standard",description:"Choose your project and plan agent organization",content:["Select your project and consider how this agent fits into your workflow.","Think about branch naming conventions and whether you need TaskMaster integration.","Multiple agents can work on the same project with different branches."],upgradePrompt:{targetMode:"advanced",reason:"Need Docker isolation or MCP integrations for this project?",benefits:["Container isolation","Advanced integrations","Resource control"]},tips:["Use descriptive project organization","Consider your team's workflow patterns","TaskMaster can help manage complex feature development"]},advanced:{id:"project-advanced",title:"Project Selection - Advanced",description:"Strategic project setup with full configuration options",content:["Consider the full architecture for this agent including containerization and integrations.","Plan for Docker networking, MCP server requirements, and resource allocation.","Use configuration templates to maintain consistency across similar projects."],tips:["Plan container networking if using multiple agents","Consider MCP server requirements early","Use templates for consistent team setups","Export successful configurations for reuse"]}},branch:{simple:{id:"branch-simple",title:"Quick Branch Setup",description:"Create a branch for your agent to work on",content:["Choose a simple branch name for your work.","The agent will work in isolation on this branch.","You can merge changes back when ready."],tips:["Use descriptive branch names","Keep it simple and clear"]},standard:{id:"branch-standard",title:"Branch Management",description:"Configure Git branches and agent identification",content:["Create a new branch for this agent to work on.","Use descriptive branch names that reflect the work being done.","The agent ID helps identify this specific agent instance."],upgradePrompt:{targetMode:"advanced",reason:"Working with complex branching strategies or team workflows?",benefits:["Advanced Git integration","Container isolation","Enhanced automation"]},tips:["Use conventional branch naming (feature/, bugfix/, etc.)","Agent IDs should be unique and descriptive","Consider your Git workflow when naming branches"]},advanced:{id:"branch-advanced",title:"Branch Management - Advanced",description:"Strategic branch setup with automation in mind",content:["Plan branch strategy considering container isolation and automation.","Agent IDs become important for container naming and resource allocation.","Consider how this fits into CI/CD and deployment strategies."],tips:["Branch names affect Docker container naming","Consider automated deployment implications","Plan for multi-agent coordination","Use consistent naming conventions"]}},taskmaster:{simple:{id:"taskmaster-simple",title:"Task Selection",description:"Choose tasks for your agent",content:["Select one or more tasks for the agent to work on.","Tasks help organize and track work progress."],tips:["Start with a single task","You can assign more tasks later"]},standard:{id:"taskmaster-standard",title:"TaskMaster Integration",description:"Organize work with intelligent task management",content:["TaskMaster helps break down complex features into manageable tasks.","Select specific tasks for this agent to focus on.","Task assignment helps maintain project organization and progress tracking."],upgradePrompt:{targetMode:"advanced",reason:"Need sophisticated automation and integration capabilities?",benefits:["Docker-based task isolation","MCP integrations","Advanced automation"]},tips:["Start with high-priority tasks","TaskMaster integration works well with branch naming","Consider task dependencies when selecting","Regular task updates help track progress"]},advanced:{id:"taskmaster-advanced",title:"TaskMaster Integration - Advanced",description:"Enterprise-grade task management with full automation",content:["Combine TaskMaster with Docker containers for isolated task execution.","Use MCP servers to extend TaskMaster capabilities.","Plan for automated task assignment and completion tracking."],tips:["Container isolation improves task reliability","MCP servers can automate task reporting","Consider resource allocation per task type","Use templates for consistent task environments"]}},advanced:{simple:{id:"advanced-simple",title:"Basic Settings",description:"Essential configuration options",content:["These settings are configured automatically.","Focus on your branch name and task selection."],tips:["Default settings work well for most cases"]},standard:{id:"advanced-standard",title:"Standard Configuration",description:"Common configuration options",content:["Adjust Docker settings if needed.","Configure basic automation options.","Set up environment variables."],tips:["Use templates when available","Test configurations before committing"]},advanced:{id:"advanced-config",title:"Advanced Configuration",description:"Power-user features for sophisticated setups",content:["Configure Docker containers for isolation and consistency.","Set up MCP servers to extend agent capabilities.","Fine-tune Claude parameters for optimal performance.","Manage resources and networking for complex scenarios."],tips:["Start with configuration templates","Export working configurations for reuse","Test resource limits with simple tasks first","Document custom MCP server setups for your team"]}}}[t])==null?void 0:a[e];return i||{id:`${t}-${e}`,title:`${t.charAt(0).toUpperCase()+t.slice(1)} - ${e.charAt(0).toUpperCase()+e.slice(1)} Mode`,description:"Configuration guidance for this step",content:["Configure this step according to your project needs."],tips:["Take your time to configure this step properly"]}},Gj=(e,t)=>{var s,i;const r=[];return e==="simple"&&(t.projectPath&&t.projectPath.includes("enterprise")||t.branch&&t.branch!==`feature/agent-${Date.now()}`)&&r.push({reason:"Your project setup suggests you might benefit from more organizational features",targetMode:"standard",benefits:["TaskMaster integration for complex projects","Custom branch management","Better agent organization"],trigger:"Project complexity detected"}),e==="standard"&&(t.taskMasterEnabled||t.selectedTasks&&t.selectedTasks.length>3||(s=t.projectPath)!=null&&s.includes("microservice")||(i=t.projectPath)!=null&&i.includes("docker"))&&r.push({reason:"Your workflow suggests you might benefit from container isolation and advanced integrations",targetMode:"advanced",benefits:["Docker container isolation","MCP server integrations","Resource management","Configuration templates"],trigger:"Complex workflow detected"}),r},Kj=({currentMode:e,currentStep:t,formData:r,onUpgradeMode:s,onCloseHelp:i})=>{const[a,c]=j.useState(!1),[o,l]=j.useState(!1),[f,v]=j.useState("content"),h=qj(e,t),g=Gj(e,r);j.useEffect(()=>{const m=`help-seen-${t}-${e}`;!localStorage.getItem(m)&&(t==="mode"||t==="advanced")&&c(!0)},[t,e]);const y=()=>{const m=`help-seen-${t}-${e}`;localStorage.setItem(m,"true"),l(!0)},_=()=>{y(),c(!1),i==null||i()},x=m=>{s(m),_()};return a?n.jsxs("div",{className:"fixed bottom-6 right-6 w-96 bg-white border border-gray-200 rounded-lg shadow-2xl z-50",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(Sj,{className:"w-5 h-5 text-blue-600 mr-2"}),n.jsx("h3",{className:"font-semibold text-blue-900",children:h.title})]}),n.jsx("button",{onClick:_,className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(Xt,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"p-4 space-y-4 max-h-96 overflow-y-auto",children:[n.jsx("p",{className:"text-sm text-gray-600",children:h.description}),n.jsxs("div",{children:[n.jsxs("button",{onClick:()=>v(f==="content"?null:"content"),className:"flex items-center justify-between w-full text-left text-sm font-medium text-gray-700 hover:text-gray-900",children:[n.jsx("span",{children:"How this works"}),n.jsx(Xn,{className:`w-4 h-4 transition-transform ${f==="content"?"rotate-90":""}`})]}),f==="content"&&n.jsx("div",{className:"mt-2 space-y-2",children:h.content.map((m,d)=>n.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:m},d))})]}),n.jsxs("div",{children:[n.jsxs("button",{onClick:()=>v(f==="tips"?null:"tips"),className:"flex items-center justify-between w-full text-left text-sm font-medium text-gray-700 hover:text-gray-900",children:[n.jsxs("span",{className:"flex items-center",children:[n.jsx(Lj,{className:"w-4 h-4 mr-1"}),"Tips & Best Practices"]}),n.jsx(Xn,{className:`w-4 h-4 transition-transform ${f==="tips"?"rotate-90":""}`})]}),f==="tips"&&n.jsx("div",{className:"mt-2 space-y-1",children:h.tips.map((m,d)=>n.jsxs("div",{className:"flex items-start text-sm text-gray-600",children:[n.jsx("span",{className:"text-blue-500 mr-2 flex-shrink-0",children:""}),n.jsx("span",{children:m})]},d))})]}),g.length>0&&n.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[n.jsxs("div",{className:"flex items-center mb-3",children:[n.jsx(bo,{className:"w-4 h-4 text-green-600 mr-2"}),n.jsx("span",{className:"text-sm font-medium text-green-900",children:"Smart Suggestions"})]}),g.map((m,d)=>n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-md p-3 mb-3",children:[n.jsx("p",{className:"text-sm text-green-800 mb-2",children:m.reason}),n.jsx("div",{className:"space-y-1 mb-3",children:m.benefits.map((u,p)=>n.jsxs("div",{className:"flex items-center text-xs text-green-700",children:[n.jsx(Xo,{className:"w-3 h-3 mr-1"}),n.jsx("span",{children:u})]},p))}),n.jsxs("button",{onClick:()=>x(m.targetMode),className:"w-full bg-green-600 text-white text-sm py-2 rounded hover:bg-green-700 transition-colors",children:["Upgrade to ",m.targetMode.charAt(0).toUpperCase()+m.targetMode.slice(1)," Mode"]})]},d))]}),h.upgradePrompt&&!g.length&&n.jsx("div",{className:"border-t border-gray-200 pt-4",children:n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(bo,{className:"w-4 h-4 text-blue-600 mt-0.5 mr-2 flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-blue-900 mb-1",children:h.upgradePrompt.reason}),n.jsx("div",{className:"space-y-1 mb-3",children:h.upgradePrompt.benefits.map((m,d)=>n.jsxs("div",{className:"flex items-center text-xs text-blue-700",children:[n.jsx("span",{className:"w-1 h-1 bg-blue-600 rounded-full mr-2"}),n.jsx("span",{children:m})]},d))}),n.jsxs("button",{onClick:()=>x(h.upgradePrompt.targetMode),className:"text-sm text-blue-700 hover:text-blue-900 font-medium",children:["Try ",h.upgradePrompt.targetMode.charAt(0).toUpperCase()+h.upgradePrompt.targetMode.slice(1)," Mode "]})]})]})})})]}),n.jsx("div",{className:"p-3 border-t border-gray-200 bg-gray-50 text-center",children:n.jsx("button",{onClick:_,className:"text-xs text-gray-500 hover:text-gray-700",children:"Don't show this again for this step"})})]}):n.jsx("button",{onClick:()=>c(!0),className:"fixed bottom-6 right-6 bg-brand text-white p-3 rounded-full shadow-lg hover:bg-brand-hover transition-colors z-40",title:"Get contextual help",children:n.jsx(hy,{className:"w-6 h-6"})})},Qj=(e,t)=>{const r=[];return e==="simple"&&t==="standard"&&r.push({id:"branch-management",title:"Custom Branch Management",description:"You can now create custom branch names and manage agent identification for better organization.",feature:"Branch & Agent Control",benefits:["Create meaningful branch names","Better Git workflow organization","Unique agent identification"],actionText:"Try creating a custom branch name"},{id:"taskmaster-integration",title:"TaskMaster Integration",description:"Connect with TaskMaster to break down complex features into manageable tasks and track progress.",feature:"Intelligent Task Management",benefits:["Organized project workflow","Task progress tracking","Better feature planning"],actionText:"Explore TaskMaster integration"}),e==="simple"&&t==="advanced"&&r.push({id:"docker-power",title:"Docker Containerization",description:"Run your agents in isolated Docker containers for better security, consistency, and resource management.",feature:"Container Isolation",benefits:["Isolated execution environment","Consistent development experience","Resource control and limits"],actionText:"Configure Docker settings"},{id:"mcp-integration",title:"MCP Server Integration",description:"Connect to Model Context Protocol servers to extend your agent capabilities with external tools and services.",feature:"External Integrations",benefits:["Database connectivity","API integrations","Custom tool development"],actionText:"Set up MCP servers"},{id:"claude-tuning",title:"Claude Parameter Tuning",description:"Fine-tune Claude's behavior with model selection, temperature control, and custom instructions.",feature:"AI Optimization",benefits:["Optimized responses for your use case","Consistent AI behavior","Performance optimization"],actionText:"Customize Claude settings"}),e==="standard"&&t==="advanced"&&r.push({id:"docker-power",title:"Docker Containerization",description:"Upgrade your development workflow with Docker containers for isolation and consistency.",feature:"Professional Development",benefits:["Production-like environments","Team consistency","Advanced debugging capabilities"],actionText:"Enable Docker mode"},{id:"advanced-automation",title:"Advanced Automation",description:"Combine all features for sophisticated automation workflows with resource management.",feature:"Enterprise Features",benefits:["Resource limits and monitoring","Configuration templates","Team collaboration tools"],actionText:"Explore advanced features"}),r},Yj=({currentMode:e,previousMode:t,onComplete:r,onSkip:s})=>{const[i,a]=j.useState(0),[c,o]=j.useState(!1),l=Qj(t,e);j.useEffect(()=>{if(t&&l.length>0){const x=`tour-${t}-to-${e}`;localStorage.getItem(x)||o(!0)}},[t,e,l.length]);const f=()=>{i<l.length-1?a(i+1):h()},v=()=>{i>0&&a(i-1)},h=()=>{const x=`tour-${t}-to-${e}`;localStorage.setItem(x,"true"),o(!1),r()},g=()=>{const x=`tour-${t}-to-${e}`;localStorage.setItem(x,"true"),o(!1),s()};if(!c||l.length===0)return null;const y=l[i],_=i===l.length-1;return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full overflow-hidden",children:[n.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(Um,{className:"w-6 h-6 mr-3"}),n.jsxs("h2",{className:"text-xl font-bold",children:["Welcome to ",e.charAt(0).toUpperCase()+e.slice(1)," Mode!"]})]}),n.jsx("button",{onClick:g,className:"text-white/80 hover:text-white transition-colors",children:n.jsx(Xt,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"flex space-x-2",children:l.map((x,m)=>n.jsx("div",{className:`h-2 rounded-full flex-1 transition-colors ${m<=i?"bg-white":"bg-white/30"}`},m))}),n.jsxs("p",{className:"text-white/90 text-sm mt-2",children:["Step ",i+1," of ",l.length,": Discover new features"]})]}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-100 to-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(Um,{className:"w-8 h-8 text-purple-600"})}),n.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:y.title}),n.jsx("div",{className:"inline-flex items-center px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-medium",children:y.feature})]}),n.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:y.description}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[n.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Key Benefits:"}),n.jsx("div",{className:"space-y-2",children:y.benefits.map((x,m)=>n.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[n.jsx(Ko,{className:"w-4 h-4 text-green-600 mr-3 flex-shrink-0"}),n.jsx("span",{children:x})]},m))})]}),n.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-lg p-4 mb-6",children:[n.jsxs("p",{className:"text-sm text-purple-800 mb-2",children:[n.jsx("strong",{children:"Try it now:"})," ",y.actionText]}),n.jsx("p",{className:"text-xs text-purple-600",children:"You can explore this feature in the next steps of the wizard."})]})]}),n.jsxs("div",{className:"bg-gray-50 p-4 flex items-center justify-between",children:[n.jsxs("button",{onClick:v,disabled:i===0,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[n.jsx(Go,{className:"w-4 h-4 mr-2"}),"Previous"]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("button",{onClick:g,className:"text-sm text-gray-500 hover:text-gray-700 transition-colors",children:"Skip tour"}),n.jsxs("button",{onClick:f,className:"inline-flex items-center px-6 py-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white text-sm font-medium rounded-lg hover:from-purple-700 hover:to-indigo-700 transition-all",children:[_?"Get Started":"Next",n.jsx(Xn,{className:"w-4 h-4 ml-2"})]})]})]})]})})},qm=e=>{switch(e){case"simple":return n.jsx(Xo,{className:"w-5 h-5"});case"standard":return n.jsx(Cc,{className:"w-5 h-5"});case"advanced":return n.jsx(bo,{className:"w-5 h-5"})}},Gm=e=>{switch(e){case"simple":return"text-green-600";case"standard":return"text-blue-600";case"advanced":return"text-purple-600"}},Xj=({isOpen:e,currentMode:t,targetMode:r,onConfirm:s,onCancel:i,dataLoss:a,newFeatures:c})=>{if(!e)return null;const o=f(r)>f(t),l=f(r)<f(t);function f(v){switch(v){case"simple":return 1;case"standard":return 2;case"advanced":return 3}}return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-md w-full",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center",children:[o?n.jsx(bo,{className:"w-6 h-6 text-green-600 mr-3"}):l?n.jsx(wj,{className:"w-6 h-6 text-orange-600 mr-3"}):n.jsx(Yn,{className:"w-6 h-6 text-blue-600 mr-3"}),n.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:[o?"Upgrade":l?"Downgrade":"Switch"," Complexity Mode"]})]}),n.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(Xt,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"p-6",children:[n.jsx("div",{className:"flex items-center justify-center mb-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsxs("div",{className:`flex items-center ${Gm(t)}`,children:[qm(t),n.jsx("span",{className:"ml-2 font-medium capitalize",children:t})]}),n.jsx(bo,{className:"w-5 h-5 text-gray-400 mx-4"}),n.jsxs("div",{className:`flex items-center ${Gm(r)}`,children:[qm(r),n.jsx("span",{className:"ml-2 font-medium capitalize",children:r})]})]})}),a.length>0&&n.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(Yn,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-red-900 mb-2",children:"Settings Will Be Lost"}),n.jsxs("p",{className:"text-sm text-red-800 mb-2",children:["The following configurations will be removed when switching to ",r," mode:"]}),n.jsx("ul",{className:"text-sm text-red-800 space-y-1",children:a.map((v,h)=>n.jsxs("li",{className:"flex items-center",children:[n.jsx("span",{className:"w-1.5 h-1.5 bg-red-600 rounded-full mr-2 flex-shrink-0"}),v]},h))})]})]})}),c.length>0&&n.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(Ko,{className:"w-5 h-5 text-green-600 mt-0.5 mr-3 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"New Features Available"}),n.jsxs("p",{className:"text-sm text-green-800 mb-2",children:["You'll gain access to these additional features in ",r," mode:"]}),n.jsx("ul",{className:"text-sm text-green-800 space-y-1",children:c.map((v,h)=>n.jsxs("li",{className:"flex items-center",children:[n.jsx("span",{className:"w-1.5 h-1.5 bg-green-600 rounded-full mr-2 flex-shrink-0"}),v]},h))})]})]})}),n.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(Nf,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:o?"Upgrade Guidance":l?"Downgrade Notice":"Mode Switch"}),n.jsx("p",{className:"text-sm text-blue-800",children:o?"You can always return to a simpler mode later. Your current basic settings will be preserved.":l?"You can upgrade back to a more advanced mode at any time. Consider exporting your current configuration first.":"Your existing compatible settings will be preserved during this switch."})]})]})}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{onClick:i,className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsxs("button",{onClick:s,className:`flex-1 px-4 py-2 rounded-md text-sm font-medium text-white transition-colors ${a.length>0?"bg-red-600 hover:bg-red-700":o?"bg-green-600 hover:bg-green-700":"bg-blue-600 hover:bg-blue-700"}`,children:[o?"Upgrade":l?"Downgrade":"Switch"," Mode"]})]})]})]})})},Km=[{mode:"simple",title:"Simple Mode",description:"Quick setup with minimal configuration",features:["Select project and create agent","Automatic branch naming","Default settings","Perfect for getting started"],icon:Xo,recommended:!0},{mode:"standard",title:"Standard Mode",description:"Common configurations with some customization",features:["Custom branch naming","Agent ID customization","TaskMaster integration","Ideal for regular development"],icon:Cc},{mode:"advanced",title:"Advanced Mode",description:"Full control over all agent settings and power-user features",features:["All standard features","Complete Docker configuration","Environment variables & secrets","MCP server setup & management","Resource limits & isolation","Claude model & parameter tuning","Port allocation & networking","Configuration templates & export","Complete customization control"],icon:Zn}],Jj=({formData:e,updateFormData:t})=>{var _;const[r,s]=j.useState(!1),[i,a]=j.useState(null),c=()=>{var x,m;return e.useDocker||e.mcpEnabled||e.environment&&Object.keys(e.environment).length>0||e.claudeModel||e.claudeSettings.temperature!==void 0||e.claudeSettings.maxTokens||((x=e.resourceLimits)==null?void 0:x.memory)||((m=e.resourceLimits)==null?void 0:m.cpu)||e.dockerNetwork||e.dockerVolumes&&e.dockerVolumes.length>0||e.reservedPorts&&e.reservedPorts.length>0||e.portRange},o=()=>e.taskMasterEnabled||e.selectedTasks&&e.selectedTasks.length>0||e.branch!==`feature/agent-${Date.now()}`&&e.branch.trim()!=="",l=(x,m)=>{var u,p;const d=[];return x==="advanced"&&(m==="standard"||m==="simple")&&(e.useDocker&&d.push("Docker configuration"),e.mcpEnabled&&d.push("MCP server settings"),e.environment&&Object.keys(e.environment).length>0&&d.push("Environment variables"),e.claudeModel&&d.push("Claude model selection"),e.claudeSettings.temperature!==void 0&&d.push("Claude temperature settings"),e.claudeSettings.maxTokens&&d.push("Claude token limits"),((u=e.resourceLimits)!=null&&u.memory||(p=e.resourceLimits)!=null&&p.cpu)&&d.push("Resource limits"),e.dockerNetwork&&d.push("Docker network configuration"),e.dockerVolumes&&e.dockerVolumes.length>0&&d.push("Docker volume mounts"),(e.portRange||e.reservedPorts&&e.reservedPorts.length>0)&&d.push("Port management settings")),x==="standard"&&m==="simple"&&(e.taskMasterEnabled&&d.push("TaskMaster integration"),e.selectedTasks&&e.selectedTasks.length>0&&d.push("Selected tasks"),e.branch!==`feature/agent-${Date.now()}`&&d.push("Custom branch name")),d},f=(x,m)=>{const d=[];return x==="simple"&&(m==="standard"||m==="advanced")&&(d.push("Custom branch naming"),d.push("Agent ID customization"),d.push("TaskMaster integration")),(x==="simple"||x==="standard")&&m==="advanced"&&(d.push("Docker configuration"),d.push("Environment variables"),d.push("MCP server setup"),d.push("Claude model tuning"),d.push("Resource limits"),d.push("Port management"),d.push("Configuration templates")),d},v=(x,m=!0)=>{const d={complexityMode:x};x==="simple"?((!m||!o())&&(d.branch=`feature/agent-${Date.now()}`,d.taskMasterEnabled=!1,d.selectedTasks=[]),d.useDocker=!1,d.mcpEnabled=!1,d.environment=void 0,d.claudeModel=void 0,d.claudeSettings={},d.resourceLimits=void 0,d.dockerNetwork=void 0,d.dockerVolumes=void 0,d.portRange=void 0,d.reservedPorts=void 0,d.autoAccept=!0,d.isolationMode="none"):x==="standard"?(d.autoAccept=!0,d.useDocker=!1,d.mcpEnabled=!1,d.isolationMode="none",m||(d.environment=void 0,d.claudeModel=void 0,d.claudeSettings={},d.resourceLimits=void 0,d.dockerNetwork=void 0,d.dockerVolumes=void 0,d.portRange=void 0,d.reservedPorts=void 0)):x==="advanced"&&(m||(d.autoAccept=!1,d.useDocker=!0,d.mcpEnabled=!1,d.isolationMode="container")),t(d)},h=x=>{const m=!e.complexityMode||e.complexityMode===x,d=e.complexityMode;if(m){v(x,!1);return}const u=l(d,x);f(d,x),u.length>0||d!==x?(a(x),s(!0)):v(x,!0)},g=()=>{i&&(v(i,!0),s(!1),a(null))},y=()=>{s(!1),a(null)};return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Km.map(x=>{const m=x.icon,d=e.complexityMode===x.mode;return n.jsxs("button",{onClick:()=>h(x.mode),className:`
                relative p-6 rounded-lg border-2 transition-all text-left
                ${d?"border-brand bg-brand/10 shadow-lg":"border-border hover:border-brand/50 hover:bg-background-secondary"}
              `,children:[x.recommended&&n.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:n.jsx("span",{className:"bg-brand text-white text-xs px-2 py-1 rounded-full",children:"Recommended"})}),n.jsxs("div",{className:"flex items-center mb-3",children:[n.jsx(m,{className:`w-8 h-8 ${d?"text-brand":"text-foreground-secondary"}`}),n.jsx("h3",{className:`ml-3 text-lg font-semibold ${d?"text-brand":"text-foreground"}`,children:x.title})]}),n.jsx("p",{className:"text-sm text-foreground-secondary mb-4",children:x.description}),n.jsx("ul",{className:"space-y-2",children:x.features.map((u,p)=>n.jsxs("li",{className:"flex items-start text-sm",children:[n.jsx("span",{className:`mr-2 ${d?"text-brand":"text-status-success"}`,children:""}),n.jsx("span",{className:"text-foreground-secondary",children:u})]},p))})]},x.mode)})}),n.jsx("div",{className:"mt-8 border border-border rounded-lg overflow-hidden",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-background-secondary",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-foreground",children:"Feature"}),n.jsx("th",{className:"text-center px-4 py-3 text-sm font-medium text-foreground",children:"Simple"}),n.jsx("th",{className:"text-center px-4 py-3 text-sm font-medium text-foreground",children:"Standard"}),n.jsx("th",{className:"text-center px-4 py-3 text-sm font-medium text-foreground",children:"Advanced"})]})}),n.jsxs("tbody",{className:"divide-y divide-border",children:[n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-3 text-sm text-foreground-secondary",children:"Project Selection"}),n.jsx("td",{className:"text-center px-4 py-3",children:""}),n.jsx("td",{className:"text-center px-4 py-3",children:""}),n.jsx("td",{className:"text-center px-4 py-3",children:""})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-3 text-sm text-foreground-secondary",children:"Custom Branch Names"}),n.jsx("td",{className:"text-center px-4 py-3",children:""}),n.jsx("td",{className:"text-center px-4 py-3",children:""}),n.jsx("td",{className:"text-center px-4 py-3",children:""})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-3 text-sm text-foreground-secondary",children:"TaskMaster Integration"}),n.jsx("td",{className:"text-center px-4 py-3",children:""}),n.jsx("td",{className:"text-center px-4 py-3",children:""}),n.jsx("td",{className:"text-center px-4 py-3",children:""})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-3 text-sm text-foreground-secondary",children:"Docker Configuration"}),n.jsx("td",{className:"text-center px-4 py-3",children:""}),n.jsx("td",{className:"text-center px-4 py-3",children:""}),n.jsx("td",{className:"text-center px-4 py-3",children:""})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-3 text-sm text-foreground-secondary",children:"Environment Variables"}),n.jsx("td",{className:"text-center px-4 py-3",children:""}),n.jsx("td",{className:"text-center px-4 py-3",children:""}),n.jsx("td",{className:"text-center px-4 py-3",children:""})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-3 text-sm text-foreground-secondary",children:"MCP Servers"}),n.jsx("td",{className:"text-center px-4 py-3",children:""}),n.jsx("td",{className:"text-center px-4 py-3",children:""}),n.jsx("td",{className:"text-center px-4 py-3",children:""})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-3 text-sm text-foreground-secondary",children:"Claude Model Selection"}),n.jsx("td",{className:"text-center px-4 py-3",children:""}),n.jsx("td",{className:"text-center px-4 py-3",children:""}),n.jsx("td",{className:"text-center px-4 py-3",children:""})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-3 text-sm text-foreground-secondary",children:"Resource Limits"}),n.jsx("td",{className:"text-center px-4 py-3",children:""}),n.jsx("td",{className:"text-center px-4 py-3",children:""}),n.jsx("td",{className:"text-center px-4 py-3",children:""})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-3 text-sm text-foreground-secondary",children:"Port Management"}),n.jsx("td",{className:"text-center px-4 py-3",children:""}),n.jsx("td",{className:"text-center px-4 py-3",children:""}),n.jsx("td",{className:"text-center px-4 py-3",children:""})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-3 text-sm text-foreground-secondary",children:"Configuration Templates"}),n.jsx("td",{className:"text-center px-4 py-3",children:""}),n.jsx("td",{className:"text-center px-4 py-3",children:""}),n.jsx("td",{className:"text-center px-4 py-3",children:""})]})]})]})}),e.complexityMode==="advanced"&&n.jsxs("div",{className:"mt-6 bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-lg p-6",children:[n.jsxs("h4",{className:"text-lg font-semibold text-purple-900 mb-4 flex items-center",children:[n.jsx(Zn,{className:"w-5 h-5 mr-2"}),"Advanced Mode Features Preview"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2 mr-3 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h5",{className:"font-medium text-purple-900",children:"Docker Configuration"}),n.jsx("p",{className:"text-sm text-purple-700",children:"Choose from multiple Docker images, configure networks, volumes, and container settings"})]})]}),n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2 mr-3 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h5",{className:"font-medium text-purple-900",children:"Claude Model Tuning"}),n.jsx("p",{className:"text-sm text-purple-700",children:"Select specific Claude models and fine-tune parameters like temperature and token limits"})]})]}),n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2 mr-3 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h5",{className:"font-medium text-purple-900",children:"MCP Server Management"}),n.jsx("p",{className:"text-sm text-purple-700",children:"Connect to Model Context Protocol servers for extended functionality and integrations"})]})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2 mr-3 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h5",{className:"font-medium text-purple-900",children:"Resource Management"}),n.jsx("p",{className:"text-sm text-purple-700",children:"Set memory and CPU limits, configure port ranges, and manage system resources"})]})]}),n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2 mr-3 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h5",{className:"font-medium text-purple-900",children:"Configuration Templates"}),n.jsx("p",{className:"text-sm text-purple-700",children:"Use pre-built templates for different scenarios or create custom configurations"})]})]}),n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2 mr-3 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h5",{className:"font-medium text-purple-900",children:"Import/Export Settings"}),n.jsx("p",{className:"text-sm text-purple-700",children:"Save and share agent configurations across projects and teams"})]})]})]})]})]}),n.jsxs("div",{className:"mt-6 bg-background-tertiary border border-border rounded-lg p-4",children:[n.jsxs("p",{className:"text-sm text-foreground-secondary",children:[n.jsx("span",{className:"font-medium text-foreground",children:"Selected mode:"})," "," ",n.jsxs("span",{className:"text-brand font-medium capitalize",children:[e.complexityMode," Mode"]})]}),n.jsx("p",{className:"text-sm text-foreground-secondary mt-1",children:(_=Km.find(x=>x.mode===e.complexityMode))==null?void 0:_.description}),(c()||o())&&n.jsx("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-md",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(Nf,{className:"w-4 h-4 text-blue-600 mt-0.5 mr-2 flex-shrink-0"}),n.jsx("div",{children:n.jsx("p",{className:"text-xs text-blue-800",children:"You can switch to a different complexity mode at any time. Your compatible settings will be preserved, and you'll be notified if any configurations would be lost."})})]})})]}),r&&i&&n.jsx(Xj,{isOpen:r,currentMode:e.complexityMode,targetMode:i,onConfirm:g,onCancel:y,dataLoss:l(e.complexityMode,i),newFeatures:f(e.complexityMode,i)})]})},Zj=({formData:e,updateFormData:t,projects:r})=>{var u;const[s,i]=j.useState(""),[a,c]=j.useState(!1),[o,l]=j.useState(null),[f,v]=j.useState(!1),h=j.useRef(null),g=r.filter(p=>p.name.toLowerCase().includes(s.toLowerCase())||p.path.toLowerCase().includes(s.toLowerCase())),y=p=>{t({projectId:p.id,projectPath:p.path})},_=async p=>{t({projectId:void 0,projectPath:p}),p&&p.trim().length>0?await x(p):l(null)},x=async p=>{var b;v(!0);try{const S=await fetch(`/api/projects/validate?path=${encodeURIComponent(p)}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(S.ok){const C=await S.json();if(C.success&&C.data){const k=C.data,w=k.gitInfo;l({isGitRepo:(w==null?void 0:w.isValid)||!1,hasTaskMaster:(w==null?void 0:w.hasTaskMaster)||!1,gitBranch:w==null?void 0:w.currentBranch,taskCount:0,error:((b=k.errors)==null?void 0:b.length)>0?k.errors[0]:void 0})}else l({isGitRepo:!1,hasTaskMaster:!1,error:C.error||"Unable to validate path"})}else l({isGitRepo:!1,hasTaskMaster:!1,error:"Unable to validate path"})}catch(S){console.error("Path validation error:",S),l({isGitRepo:!1,hasTaskMaster:!1,error:"Failed to connect to server"})}finally{v(!1)}},m=()=>{h.current&&h.current.click()},d=p=>{const b=p.target.files;if(b&&b.length>0){const S=b[0];if("webkitRelativePath"in S&&S.webkitRelativePath){const C=S.webkitRelativePath.split("/");C.pop();const k=C.join("/");let w=k;k.startsWith("/")?k.startsWith("/")&&!k.includes("/Users")&&!k.includes("/home")&&(w=`${{}.HOME||"/Users"}${k}`):w=`${{}.HOME||"/Users"}/${k}`,_(w)}else p.target.value=""}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Qo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-foreground-tertiary w-4 h-4"}),n.jsx("input",{type:"text",placeholder:"Search projects...",value:s,onChange:p=>i(p.target.value),className:"w-full pl-10 pr-4 py-2 bg-background-secondary border border-border rounded-md focus:ring-2 focus:ring-brand focus:border-brand text-foreground placeholder-foreground-tertiary"})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[g.length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-foreground-secondary mb-3",children:"Existing Projects"}),n.jsx("div",{className:"space-y-2",children:g.map(p=>n.jsx("button",{onClick:()=>y(p),className:`w-full p-4 border rounded-lg text-left transition-all hover:border-brand hover:bg-brand/10 ${e.projectId===p.id?"border-brand bg-brand/20":"border-border bg-background-secondary"}`,children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx(Jn,{className:"w-5 h-5 text-foreground-tertiary mt-0.5"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"text-sm font-medium text-foreground",children:p.name}),n.jsx("p",{className:"text-sm text-foreground-secondary truncate",children:p.path}),p.description&&n.jsx("p",{className:"text-xs text-foreground-tertiary mt-1",children:p.description}),n.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[n.jsxs("span",{className:"text-xs text-foreground-tertiary",children:[p.agents.length," agent",p.agents.length!==1?"s":""]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${p.status==="ACTIVE"?"bg-status-success/20 text-status-success":"bg-background-tertiary text-foreground-secondary"}`,children:p.status}),p.tags&&p.tags.length>0&&n.jsxs("div",{className:"flex space-x-1",children:[p.tags.slice(0,2).map((b,S)=>n.jsx("span",{className:"text-xs bg-brand/20 text-brand px-2 py-1 rounded",children:b},S)),p.tags.length>2&&n.jsxs("span",{className:"text-xs text-foreground-tertiary",children:["+",p.tags.length-2," more"]})]})]})]})]})},p.id))})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"text-sm font-medium text-foreground-secondary",children:"Custom Project Path"}),n.jsxs("button",{onClick:()=>c(!a),className:"text-sm text-brand hover:text-brand-hover transition-colors",children:[a?"Hide":"Show"," Custom Path"]})]}),(a||!e.projectId)&&n.jsxs("div",{className:"space-y-3",children:[n.jsx("button",{onClick:()=>{c(!0),_("")},className:`w-full p-4 border rounded-lg text-left transition-all hover:border-brand hover:bg-brand/10 ${!e.projectId&&e.projectPath!==void 0?"border-brand bg-brand/20":"border-border border-dashed bg-background-secondary"}`,children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Yr,{className:"w-5 h-5 text-foreground-tertiary"}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium text-foreground",children:"New Project Path"}),n.jsx("p",{className:"text-sm text-foreground-secondary",children:"Specify a custom directory path"})]})]})}),(!e.projectId||a)&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Rj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-foreground-tertiary w-4 h-4"}),n.jsx("input",{type:"text",placeholder:`${{}.HOME||"/Users/username"}/path/to/your/project`,value:e.projectPath||"",onChange:p=>_(p.target.value),className:"w-full pl-10 pr-32 py-2 bg-background-secondary border border-border rounded-md focus:ring-2 focus:ring-brand focus:border-brand text-foreground placeholder-foreground-tertiary"}),n.jsxs("button",{onClick:m,type:"button",className:"absolute right-2 top-1/2 transform -translate-y-1/2 px-3 py-1 bg-brand hover:bg-brand-hover text-white text-sm rounded-md transition-colors flex items-center",children:[n.jsx(Aj,{className:"w-3 h-3 mr-1"}),"Browse"]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("p",{className:"text-xs text-foreground-tertiary flex items-start",children:[n.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-status-info mt-1 mr-2 flex-shrink-0"}),n.jsx("span",{children:"Select the root directory of your project. We'll check for Git configuration, TaskMaster setup, and project templates."})]}),n.jsxs("p",{className:"text-xs text-foreground-tertiary flex items-start",children:[n.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-status-success mt-1 mr-2 flex-shrink-0"}),n.jsx("span",{children:"The agent will operate from this directory - creating worktrees, running commands, and managing tasks."})]})]}),o&&e.projectPath&&n.jsxs("div",{className:"bg-background-tertiary border border-border rounded-md p-3 space-y-2",children:[n.jsx("h5",{className:"text-xs font-medium text-foreground mb-2",children:"Project Analysis"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${o.isGitRepo?"bg-status-success":"bg-status-warning"}`}),n.jsx("span",{className:"text-xs text-foreground-secondary",children:o.isGitRepo?`Git repository detected (branch: ${o.gitBranch||"main"})`:"Not a Git repository - worktrees will be created in a subdirectory"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${o.hasTaskMaster?"bg-status-success":"bg-status-warning"}`}),n.jsx("span",{className:"text-xs text-foreground-secondary",children:o.hasTaskMaster?`TaskMaster configured (${o.taskCount||0} tasks found)`:"TaskMaster not found - can be configured later"})]}),o.error&&n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-status-error"}),n.jsx("span",{className:"text-xs text-status-error",children:o.error})]})]}),f&&n.jsxs("div",{className:"text-xs text-foreground-tertiary flex items-center",children:[n.jsx("div",{className:"w-3 h-3 border-2 border-brand border-t-transparent rounded-full animate-spin mr-2"}),"Analyzing project directory..."]}),n.jsx("input",{ref:h,type:"file",onChange:d,style:{display:"none"},webkitdirectory:"",directory:"",multiple:!0})]})]})]})]}),r.length===0&&n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Jn,{className:"w-12 h-12 text-foreground-tertiary mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No Projects Found"}),n.jsx("p",{className:"text-foreground-secondary mb-4",children:"You don't have any registered projects yet. You can specify a custom project path below."}),n.jsxs("button",{onClick:()=>c(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-brand hover:bg-brand-hover transition-colors",children:[n.jsx(Yr,{className:"w-4 h-4 mr-2"}),"Add Custom Path"]})]}),(e.projectId||e.projectPath)&&n.jsxs("div",{className:"bg-brand/10 border border-brand/30 rounded-md p-4",children:[n.jsx("h4",{className:"text-sm font-medium text-foreground mb-2",children:"Selected Project"}),e.projectId?n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm text-foreground-secondary",children:[n.jsx("span",{className:"text-foreground",children:"Project:"})," ",(u=r.find(p=>p.id===e.projectId))==null?void 0:u.name]}),n.jsxs("p",{className:"text-sm text-foreground-secondary",children:[n.jsx("span",{className:"text-foreground",children:"Path:"})," ",e.projectPath]})]}):n.jsxs("p",{className:"text-sm text-foreground-secondary",children:[n.jsx("span",{className:"text-foreground",children:"Custom Path:"})," ",e.projectPath]})]})]})},eN=[{prefix:"feature/",description:"New feature development"},{prefix:"bugfix/",description:"Bug fixes"},{prefix:"hotfix/",description:"Critical fixes"},{prefix:"release/",description:"Release preparation"},{prefix:"experiment/",description:"Experimental work"},{prefix:"refactor/",description:"Code refactoring"}],tN=({formData:e,updateFormData:t})=>{const[r,s]=j.useState(""),[i,a]=j.useState(""),[c,o]=j.useState(""),[l,f]=j.useState("");j.useEffect(()=>{s(e.branch||""),a(e.agentId||"")},[e.branch,e.agentId]);const v=m=>m.trim()?m.length<3?"Branch name must be at least 3 characters":/^[a-zA-Z0-9/_-]+$/.test(m)?m.startsWith("/")||m.endsWith("/")?"Branch name cannot start or end with a forward slash":m.includes("//")?"Branch name cannot contain consecutive forward slashes":"":"Branch name can only contain letters, numbers, forward slashes, hyphens, and underscores":"Branch name is required",h=m=>m.trim()?m.length<3?"Agent ID must be at least 3 characters":m.length>50?"Agent ID must be less than 50 characters":/^[a-z0-9-]+$/.test(m)?m.startsWith("-")||m.endsWith("-")?"Agent ID cannot start or end with a hyphen":m.includes("--")?"Agent ID cannot contain consecutive hyphens":"":"Agent ID can only contain lowercase letters, numbers, and hyphens":"",g=m=>{const d=m;s(d);const u=v(d);o(u),t({branch:u?"":d})},y=m=>{s(m);const d=v(m);o(d),t({branch:d?"":m})},_=m=>{const d=m.toLowerCase().replace(/[^a-z0-9-]/g,"");a(d);const u=h(d);f(u),t({agentId:u?void 0:d||void 0})},x=()=>{if(r){const m=r.toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"").substring(0,40);if(m){a(m);const d=h(m);f(d),t({agentId:d?void 0:m})}}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Branch Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mb-4",children:eN.map(m=>n.jsxs("button",{onClick:()=>g(m.prefix),className:"p-3 text-left border border-gray-200 rounded-md hover:border-blue-500 hover:bg-blue-50 transition-colors",title:m.description,children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ps,{className:"w-4 h-4 text-gray-400"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:m.prefix})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:m.description})]},m.prefix))}),n.jsxs("div",{className:"relative",children:[n.jsx(ps,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),n.jsx("input",{type:"text",placeholder:"feature/my-new-feature",value:r,onChange:m=>y(m.target.value),className:`w-full pl-10 pr-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${c?"border-red-500":"border-gray-300"}`}),c&&n.jsxs("div",{className:"flex items-center mt-2 text-sm text-red-600",children:[n.jsx(ot,{className:"w-4 h-4 mr-1"}),c]})]}),n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"This will be the Git branch where your agent will work. If the branch doesn't exist, it will be created."})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Agent ID ",n.jsx("span",{className:"text-gray-400",children:"(optional)"})]}),n.jsxs("button",{onClick:x,disabled:!r,className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-700 disabled:text-gray-400 disabled:cursor-not-allowed",children:[n.jsx(Er,{className:"w-4 h-4 mr-1"}),"Generate from branch"]})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Uj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),n.jsx("input",{type:"text",placeholder:"my-agent-id",value:i,onChange:m=>_(m.target.value),className:`w-full pl-10 pr-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${l?"border-red-500":"border-gray-300"}`}),l&&n.jsxs("div",{className:"flex items-center mt-2 text-sm text-red-600",children:[n.jsx(ot,{className:"w-4 h-4 mr-1"}),l]})]}),n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"A unique identifier for your agent. If not provided, one will be generated automatically. Must be lowercase with only letters, numbers, and hyphens."})]}),e.branch&&n.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-md p-4",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Configuration Preview"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Branch:"}),n.jsx("span",{className:"font-medium text-gray-900",children:e.branch})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Agent ID:"}),n.jsx("span",{className:"font-medium text-gray-900",children:e.agentId||"(auto-generated)"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Tmux Session:"}),n.jsxs("span",{className:"font-medium text-gray-900",children:["magent-",e.agentId||"auto-id"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Worktree Path:"}),n.jsxs("span",{className:"font-medium text-gray-900",children:["./magent-",e.branch.replace(/[^a-zA-Z0-9]/g,"-")]})]})]})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[n.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Branch Naming Best Practices"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[n.jsx("li",{children:" Use descriptive names that reflect the work being done"}),n.jsx("li",{children:" Follow a consistent naming convention (e.g., feature/task-description)"}),n.jsx("li",{children:" Keep names concise but meaningful"}),n.jsx("li",{children:" Avoid special characters except forward slashes, hyphens, and underscores"}),n.jsx("li",{children:" Use lowercase for better compatibility across systems"})]})]})]})},rN={high:"bg-red-900 text-red-200",medium:"bg-yellow-900 text-yellow-200",low:"bg-green-900 text-green-200"},sN={pending:"bg-gray-700 text-gray-200","in-progress":"bg-blue-900 text-blue-200",done:"bg-green-900 text-green-200",blocked:"bg-red-900 text-red-200",cancelled:"bg-gray-700 text-gray-300"},nN=({formData:e,updateFormData:t,tasks:r})=>{const[s,i]=j.useState(""),[a,c]=j.useState("all"),[o,l]=j.useState("all"),f=r.filter(x=>{var p;const m=x.title.toLowerCase().includes(s.toLowerCase())||((p=x.description)==null?void 0:p.toLowerCase().includes(s.toLowerCase()))||x.id.toLowerCase().includes(s.toLowerCase()),d=a==="all"||x.status===a,u=o==="all"||x.priority===o;return m&&d&&u}),v=f.filter(x=>!["done","cancelled"].includes(x.status)),h=x=>{t({taskMasterEnabled:x,selectedTasks:x?e.selectedTasks:[]})},g=x=>{const m=e.selectedTasks||[],d=m.includes(x)?m.filter(u=>u!==x):[...m,x];t({selectedTasks:d})},y=()=>{const x=v.map(m=>m.id);t({selectedTasks:x})},_=()=>{t({selectedTasks:[]})};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("button",{onClick:()=>h(!e.taskMasterEnabled),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-900 ${e.taskMasterEnabled?"bg-blue-600":"bg-gray-600"}`,children:n.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${e.taskMasterEnabled?"translate-x-5":"translate-x-0"}`})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-foreground",children:"Enable TaskMaster Integration"}),n.jsx("p",{className:"text-sm text-foreground-secondary",children:"Assign specific tasks to this agent for automated tracking and execution"})]})]}),e.taskMasterEnabled?n.jsxs("div",{className:"space-y-4",children:[r.length===0?n.jsxs("div",{className:"text-center py-8 bg-status-warning/10 rounded-lg border border-status-warning/30",children:[n.jsx(Yn,{className:"w-12 h-12 text-status-warning mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No Tasks Available"}),n.jsx("p",{className:"text-foreground-secondary mb-4",children:"No TaskMaster tasks were found for this project. You can still create the agent and assign tasks later from the dashboard."}),n.jsxs("div",{className:"text-sm text-foreground-tertiary",children:[n.jsx("p",{children:"To add tasks, use TaskMaster CLI:"}),n.jsx("code",{className:"bg-background-tertiary px-2 py-1 rounded mt-1 inline-block text-foreground",children:'task-master add-task --prompt="Task description"'})]})]}):n.jsxs("div",{children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(Qo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-foreground-tertiary w-4 h-4"}),n.jsx("input",{type:"text",placeholder:"Search tasks...",value:s,onChange:x=>i(x.target.value),className:"w-full pl-10 pr-4 py-2 border border-border rounded-md focus:ring-2 focus:ring-brand focus:border-brand bg-background-secondary text-foreground placeholder-foreground-tertiary"})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs("select",{value:a,onChange:x=>c(x.target.value),className:"px-3 py-2 border border-border rounded-md focus:ring-2 focus:ring-brand focus:border-brand bg-background-secondary text-foreground",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"in-progress",children:"In Progress"}),n.jsx("option",{value:"blocked",children:"Blocked"})]}),n.jsxs("select",{value:o,onChange:x=>l(x.target.value),className:"px-3 py-2 border border-border rounded-md focus:ring-2 focus:ring-brand focus:border-brand bg-background-secondary text-foreground",children:[n.jsx("option",{value:"all",children:"All Priority"}),n.jsx("option",{value:"high",children:"High"}),n.jsx("option",{value:"medium",children:"Medium"}),n.jsx("option",{value:"low",children:"Low"})]})]})]}),v.length>0&&n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("span",{className:"text-sm text-foreground-secondary",children:[e.selectedTasks.length," of ",v.length," tasks selected"]}),n.jsxs("div",{className:"space-x-2",children:[n.jsx("button",{onClick:y,className:"text-sm text-brand hover:text-brand-hover",children:"Select All"}),n.jsx("button",{onClick:_,className:"text-sm text-foreground-secondary hover:text-foreground",children:"Clear All"})]})]}),n.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:f.length===0?n.jsxs("div",{className:"text-center py-8 text-foreground-tertiary",children:[n.jsx(uy,{className:"w-8 h-8 mx-auto mb-2"}),n.jsx("p",{children:"No tasks match your current filters"})]}):f.map(x=>{const m=e.selectedTasks.includes(x.id),d=!["done","cancelled"].includes(x.status);return n.jsx("button",{onClick:()=>d&&g(x.id),disabled:!d,className:`w-full p-4 border rounded-lg text-left transition-colors ${d?m?"border-brand bg-brand/10":"border-border hover:border-brand hover:bg-background-secondary":"border-border bg-background-secondary opacity-60 cursor-not-allowed"}`,children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"pt-1",children:d?m?n.jsx(jj,{className:"w-5 h-5 text-brand"}):n.jsx(_o,{className:"w-5 h-5 text-foreground-tertiary"}):n.jsx(_o,{className:"w-5 h-5 text-foreground-tertiary opacity-50"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("h4",{className:"text-sm font-medium text-foreground mb-1",children:[x.id,": ",x.title]}),x.description&&n.jsx("p",{className:"text-sm text-foreground-secondary mb-2 line-clamp-2",children:x.description})]}),n.jsxs("div",{className:"flex flex-col items-end space-y-1 ml-4",children:[n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${sN[x.status]}`,children:x.status}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${rN[x.priority]}`,children:x.priority})]})]}),x.dependencies&&x.dependencies.length>0&&n.jsx("div",{className:"mt-2",children:n.jsxs("span",{className:"text-xs text-foreground-tertiary",children:["Depends on: ",x.dependencies.join(", ")]})})]})]})},x.id)})})]}),e.selectedTasks.length>0&&n.jsxs("div",{className:"bg-brand/10 border border-brand/30 rounded-md p-4",children:[n.jsx("h4",{className:"text-sm font-medium text-foreground mb-2",children:"Selected Tasks Summary"}),n.jsxs("p",{className:"text-sm text-foreground-secondary mb-3",children:[e.selectedTasks.length," task",e.selectedTasks.length!==1?"s":""," will be assigned to this agent"]}),n.jsxs("div",{className:"space-y-1",children:[e.selectedTasks.slice(0,3).map(x=>{const m=r.find(d=>d.id===x);return m?n.jsxs("div",{className:"text-sm text-foreground-secondary",children:[" ",m.id,": ",m.title]},x):null}),e.selectedTasks.length>3&&n.jsxs("div",{className:"text-sm text-foreground-tertiary",children:["... and ",e.selectedTasks.length-3," more task",e.selectedTasks.length-3!==1?"s":""]})]})]})]}):n.jsxs("div",{className:"text-center py-8 bg-background-secondary rounded-lg border-2 border-dashed border-border",children:[n.jsx(Nn,{className:"w-12 h-12 text-foreground-tertiary mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"TaskMaster Integration Disabled"}),n.jsx("p",{className:"text-foreground-secondary mb-4",children:"Enable TaskMaster integration to assign specific tasks to your agent. This allows for automated task tracking and progress monitoring."}),n.jsxs("button",{onClick:()=>h(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-brand hover:bg-brand-hover",children:[n.jsx(Nn,{className:"w-4 h-4 mr-2"}),"Enable TaskMaster"]})]})]})},Qm=[{name:"node:18-alpine",description:"Lightweight Node.js 18 environment",category:"Node.js"},{name:"node:20-alpine",description:"Lightweight Node.js 20 environment",category:"Node.js"},{name:"python:3.11-alpine",description:"Lightweight Python 3.11 environment",category:"Python"},{name:"python:3.12-alpine",description:"Lightweight Python 3.12 environment",category:"Python"},{name:"ubuntu:22.04",description:"Full Ubuntu 22.04 environment",category:"Linux"},{name:"debian:bookworm-slim",description:"Lightweight Debian environment",category:"Linux"},{name:"alpine:latest",description:"Minimal Alpine Linux",category:"Linux"},{name:"rust:alpine",description:"Rust development environment",category:"Rust"},{name:"golang:alpine",description:"Go development environment",category:"Go"}],Ed={minimal:{name:"Minimal Configuration",description:"Basic agent with minimal overhead",config:{autoAccept:!1,useDocker:!0,dockerImage:"node:20-alpine",mcpEnabled:!1,isolationMode:"container",claudeSettings:{}}},development:{name:"Development Setup",description:"Full development environment with Docker",config:{autoAccept:!1,useDocker:!0,dockerImage:"node:20-alpine",portRange:"3000-3010",mcpEnabled:!0,isolationMode:"container",environment:{NODE_ENV:"development",DEBUG:"true"},claudeSettings:{temperature:.7,maxTokens:4e3}}},production:{name:"Production Ready",description:"Secure production environment",config:{autoAccept:!1,useDocker:!0,dockerImage:"node:18-alpine",dockerNetwork:"isolated",portRange:"8000-8010",mcpEnabled:!0,isolationMode:"container",environment:{NODE_ENV:"production"},resourceLimits:{memory:"512m",cpu:.5},claudeSettings:{temperature:.3,maxTokens:2e3}}},research:{name:"Research & Analysis",description:"Optimized for research tasks",config:{autoAccept:!0,useDocker:!0,dockerImage:"python:3.12-alpine",portRange:"5000-5010",mcpEnabled:!0,isolationMode:"container",environment:{PYTHONPATH:"/workspace",JUPYTER_ENABLE:"true"},claudeSettings:{temperature:.1,maxTokens:8e3,customInstructions:"Focus on thorough analysis and detailed explanations."}}}},iN=["claude-3-5-sonnet-20241022","claude-3-haiku-20240307","claude-3-opus-20240229"],oN=({config:e,onChange:t,readonly:r=!1,showTemplates:s=!0})=>{var D,T,I,A,O;const[i,a]=j.useState("security"),[c,o]=j.useState(""),[l,f]=j.useState(""),[v,h]=j.useState(""),[g,y]=j.useState({}),_=P=>{r||t({...e,...P})},x=P=>{if(!P.trim())return"";const B=P.match(/^(\d+)-(\d+)$/);if(!B)return"Port range must be in format: start-end (e.g., 3000-3010)";const U=parseInt(B[1]),$=parseInt(B[2]);return U<1024||$<1024?"Ports must be 1024 or higher":U>=$?"Start port must be less than end port":$-U>100?"Port range cannot exceed 100 ports":""},m=P=>{const B=x(P);o(B),B||_({portRange:P||void 0})},d=()=>{if(l.trim()&&v.trim()){const P=e.environment||{};_({environment:{...P,[l.trim()]:v.trim()}}),f(""),h("")}},u=P=>{if(e.environment){const{[P]:B,...U}=e.environment;_({environment:Object.keys(U).length>0?U:void 0})}},p=()=>{if(g.name&&g.command){const P=e.mcpServers||[];_({mcpServers:[...P,{name:g.name,command:g.command,args:g.args||[],env:g.env||{}}]}),y({})}},b=P=>{const U=(e.mcpServers||[]).filter(($,E)=>E!==P);_({mcpServers:U.length>0?U:void 0})},S=P=>{const B=Ed[P];_(B.config)},C=()=>{const P=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),B=URL.createObjectURL(P),U=document.createElement("a");U.href=B,U.download="agent-config.json",U.click(),URL.revokeObjectURL(B)},k=P=>{var U;const B=(U=P.target.files)==null?void 0:U[0];if(B){const $=new FileReader;$.onload=E=>{var R;try{const F=JSON.parse((R=E.target)==null?void 0:R.result);_(F)}catch{alert("Invalid configuration file")}},$.readAsText(B)}},w=()=>{_(Ed.minimal.config)},N=[{id:"security",label:"Security & Automation",icon:my},{id:"docker",label:"Docker",icon:Dj},{id:"ports",label:"Ports & Network",icon:Mj},{id:"environment",label:"Environment",icon:dy},{id:"mcp",label:"MCP Servers",icon:Nj},{id:"claude",label:"Claude Settings",icon:Yo},{id:"advanced",label:"Advanced",icon:ot}];return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[n.jsxs("div",{className:"border-b border-gray-200 p-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Advanced Agent Configuration"}),!r&&n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs("button",{onClick:C,className:"inline-flex items-center px-3 py-1.5 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",title:"Export Configuration",children:[n.jsx(Pj,{className:"w-4 h-4 mr-1"}),"Export"]}),n.jsxs("label",{className:"inline-flex items-center px-3 py-1.5 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 cursor-pointer",children:[n.jsx(zj,{className:"w-4 h-4 mr-1"}),"Import",n.jsx("input",{type:"file",accept:".json",onChange:k,className:"hidden"})]}),n.jsxs("button",{onClick:w,className:"inline-flex items-center px-3 py-1.5 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",title:"Reset to Default",children:[n.jsx(Fl,{className:"w-4 h-4 mr-1"}),"Reset"]})]})]}),s&&!r&&n.jsxs("div",{className:"mt-4",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Quick Templates"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:Object.entries(Ed).map(([P,B])=>n.jsxs("button",{onClick:()=>S(P),className:"p-3 text-left border border-gray-200 rounded-md hover:border-blue-500 hover:bg-blue-50 transition-colors",children:[n.jsx("h5",{className:"font-medium text-sm text-gray-900",children:B.name}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:B.description})]},P))})]})]}),n.jsx("div",{className:"border-b border-gray-200",children:n.jsx("nav",{className:"-mb-px flex space-x-8 px-4","aria-label":"Tabs",children:N.map(P=>{const B=P.icon,U=i===P.id;return n.jsxs("button",{onClick:()=>a(P.id),className:`group inline-flex items-center py-4 px-1 border-b-2 font-medium text-sm ${U?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[n.jsx(B,{className:`-ml-0.5 mr-2 h-5 w-5 ${U?"text-blue-500":"text-gray-400 group-hover:text-gray-500"}`}),P.label]},P.id)})})}),n.jsxs("div",{className:"p-6",children:[i==="security"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"flex h-6 items-center",children:n.jsx("input",{id:"auto-accept",type:"checkbox",checked:e.autoAccept,onChange:P=>_({autoAccept:P.target.checked}),disabled:r,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("label",{htmlFor:"auto-accept",className:"text-sm font-medium text-gray-900",children:"Auto-Accept Changes"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Automatically accept file changes without prompting. Recommended for routine tasks."})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"claude-model",className:"block text-sm font-medium text-gray-700 mb-2",children:"Claude Model"}),n.jsxs("select",{id:"claude-model",value:e.claudeModel||"",onChange:P=>_({claudeModel:P.target.value||void 0}),disabled:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"",children:"Default Model"}),iN.map(P=>n.jsx("option",{value:P,children:P},P))]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"isolation-mode",className:"block text-sm font-medium text-gray-700 mb-2",children:"Isolation Mode"}),n.jsxs("select",{id:"isolation-mode",value:e.isolationMode,onChange:P=>_({isolationMode:P.target.value}),disabled:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"none",children:"No Isolation"}),n.jsx("option",{value:"process",children:"Process Isolation"}),n.jsx("option",{value:"container",children:"Container Isolation"})]}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Choose the level of isolation for the agent environment."})]})]}),i==="docker"&&n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:n.jsxs("p",{className:"text-sm text-blue-800",children:[n.jsx("strong",{children:"Docker Mode:"})," All agents run in Docker containers for enhanced security and consistency."]})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"docker-image",className:"block text-sm font-medium text-gray-700 mb-2",children:"Docker Image"}),n.jsxs("select",{id:"docker-image",value:e.dockerImage||"",onChange:P=>_({dockerImage:P.target.value||void 0}),disabled:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"",children:"Select Docker image..."}),Qm.map(P=>n.jsx("optgroup",{label:P.category,children:n.jsxs("option",{value:P.name,children:[P.name," - ",P.description]})},P.category))]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"custom-docker-image",className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Docker Image"}),n.jsx("input",{id:"custom-docker-image",type:"text",placeholder:"custom/image:tag",value:e.dockerImage&&!Qm.find(P=>P.name===e.dockerImage)?e.dockerImage:"",onChange:P=>_({dockerImage:P.target.value||void 0}),disabled:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Or specify a custom Docker image from any registry."})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"docker-network",className:"block text-sm font-medium text-gray-700 mb-2",children:"Docker Network"}),n.jsx("input",{id:"docker-network",type:"text",placeholder:"bridge, host, or custom network name",value:e.dockerNetwork||"",onChange:P=>_({dockerNetwork:P.target.value||void 0}),disabled:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Specify the Docker network mode or custom network name."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Docker Volumes"}),n.jsxs("div",{className:"space-y-2",children:[(D=e.dockerVolumes)==null?void 0:D.map((P,B)=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"text",value:P,onChange:U=>{const $=[...e.dockerVolumes||[]];$[B]=U.target.value,_({dockerVolumes:$})},disabled:r,className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"/host/path:/container/path"}),n.jsx("button",{onClick:()=>{var $;const U=($=e.dockerVolumes)==null?void 0:$.filter((E,R)=>R!==B);_({dockerVolumes:U!=null&&U.length?U:void 0})},disabled:r,className:"text-red-600 hover:text-red-700",children:n.jsx(Xt,{className:"w-4 h-4"})})]},B)),n.jsxs("button",{onClick:()=>{const P=[...e.dockerVolumes||[],""];_({dockerVolumes:P})},disabled:r,className:"inline-flex items-center px-3 py-2 border border-dashed border-gray-300 rounded-md text-sm text-gray-600 hover:border-gray-400",children:[n.jsx(Yr,{className:"w-4 h-4 mr-1"}),"Add Volume Mount"]})]}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Mount host directories into the container. Format: /host/path:/container/path"})]})]})]}),i==="ports"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"port-range",className:"block text-sm font-medium text-gray-700 mb-2",children:"Port Range"}),n.jsx("input",{id:"port-range",type:"text",placeholder:"3000-3010",value:e.portRange||"",onChange:P=>m(P.target.value),disabled:r,className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${c?"border-red-500":"border-gray-300"}`}),c&&n.jsxs("div",{className:"flex items-center mt-2 text-sm text-red-600",children:[n.jsx(ot,{className:"w-4 h-4 mr-1"}),c]}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Reserve a range of ports for agent services. Format: start-end (e.g., 3000-3010)"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reserved Ports"}),n.jsxs("div",{className:"space-y-2",children:[(T=e.reservedPorts)==null?void 0:T.map((P,B)=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"number",min:"1024",max:"65535",value:P,onChange:U=>{const $=[...e.reservedPorts||[]];$[B]=parseInt(U.target.value),_({reservedPorts:$})},disabled:r,className:"w-24 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),n.jsx("button",{onClick:()=>{var $;const U=($=e.reservedPorts)==null?void 0:$.filter((E,R)=>R!==B);_({reservedPorts:U!=null&&U.length?U:void 0})},disabled:r,className:"text-red-600 hover:text-red-700",children:n.jsx(Xt,{className:"w-4 h-4"})})]},B)),n.jsxs("button",{onClick:()=>{const P=[...e.reservedPorts||[],3e3];_({reservedPorts:P})},disabled:r,className:"inline-flex items-center px-3 py-2 border border-dashed border-gray-300 rounded-md text-sm text-gray-600 hover:border-gray-400",children:[n.jsx(Yr,{className:"w-4 h-4 mr-1"}),"Reserve Port"]})]}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Specify individual ports to reserve and prevent conflicts."})]})]}),i==="environment"&&n.jsxs("div",{className:"space-y-6",children:[e.environment&&Object.keys(e.environment).length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Current Variables"}),Object.entries(e.environment).map(([P,B])=>n.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-md",children:[n.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-3",children:[n.jsx("div",{children:n.jsx("span",{className:"text-sm font-medium text-gray-700",children:P})}),n.jsx("div",{children:n.jsx("span",{className:"text-sm text-gray-600",children:B})})]}),n.jsx("button",{onClick:()=>u(P),disabled:r,className:"text-red-600 hover:text-red-700",children:n.jsx(Xt,{className:"w-4 h-4"})})]},P))]}),n.jsxs("div",{className:"border border-dashed border-gray-300 rounded-md p-4",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Add Environment Variable"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[n.jsx("input",{type:"text",placeholder:"Variable name (e.g., NODE_ENV)",value:l,onChange:P=>f(P.target.value),disabled:r,className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),n.jsx("input",{type:"text",placeholder:"Variable value",value:v,onChange:P=>h(P.target.value),disabled:r,className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("button",{onClick:d,disabled:r||!l.trim()||!v.trim(),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(Yr,{className:"w-4 h-4 mr-1"}),"Add Variable"]})]}),n.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-4",children:[n.jsx("h4",{className:"text-sm font-medium text-amber-900 mb-2",children:"Security Notice"}),n.jsx("p",{className:"text-sm text-amber-800",children:"Avoid storing sensitive information like API keys or passwords in environment variables. Use secure secret management instead."})]})]}),i==="mcp"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"flex h-6 items-center",children:n.jsx("input",{id:"mcp-enabled",type:"checkbox",checked:e.mcpEnabled,onChange:P=>_({mcpEnabled:P.target.checked}),disabled:r,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("label",{htmlFor:"mcp-enabled",className:"text-sm font-medium text-gray-900",children:"Enable MCP (Model Context Protocol)"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Allow agents to connect to MCP servers for extended functionality."})]})]}),e.mcpEnabled&&n.jsxs("div",{className:"ml-7 space-y-4",children:[e.mcpServers&&e.mcpServers.length>0&&n.jsxs("div",{className:"space-y-3",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Configured Servers"}),e.mcpServers.map((P,B)=>n.jsxs("div",{className:"border border-gray-200 rounded-md p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h5",{className:"font-medium text-gray-900",children:P.name}),n.jsx("button",{onClick:()=>b(B),disabled:r,className:"text-red-600 hover:text-red-700",children:n.jsx(Xt,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"text-sm text-gray-600",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Command:"})," ",P.command]}),P.args.length>0&&n.jsxs("p",{children:[n.jsx("strong",{children:"Args:"})," ",P.args.join(" ")]}),P.env&&Object.keys(P.env).length>0&&n.jsxs("p",{children:[n.jsx("strong",{children:"Environment:"})," ",Object.keys(P.env).length," variables"]})]})]},B))]}),n.jsxs("div",{className:"border border-dashed border-gray-300 rounded-md p-4",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Add MCP Server"}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("input",{type:"text",placeholder:"Server name",value:g.name||"",onChange:P=>y({...g,name:P.target.value}),disabled:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),n.jsx("input",{type:"text",placeholder:"Command (e.g., npx, python)",value:g.command||"",onChange:P=>y({...g,command:P.target.value}),disabled:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),n.jsx("input",{type:"text",placeholder:"Arguments (space-separated)",value:((I=g.args)==null?void 0:I.join(" "))||"",onChange:P=>y({...g,args:P.target.value.split(" ").filter(B=>B.trim())}),disabled:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),n.jsxs("button",{onClick:p,disabled:r||!g.name||!g.command,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(Yr,{className:"w-4 h-4 mr-1"}),"Add Server"]})]})]})]})]}),i==="claude"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"claude-max-tokens",className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Tokens"}),n.jsx("input",{id:"claude-max-tokens",type:"number",min:"100",max:"200000",value:e.claudeSettings.maxTokens||"",onChange:P=>_({claudeSettings:{...e.claudeSettings,maxTokens:P.target.value?parseInt(P.target.value):void 0}}),disabled:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"4000"}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Maximum number of tokens for Claude responses (100-200000)."})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"claude-temperature",className:"block text-sm font-medium text-gray-700 mb-2",children:"Temperature"}),n.jsx("input",{id:"claude-temperature",type:"number",min:"0",max:"1",step:"0.1",value:e.claudeSettings.temperature||"",onChange:P=>_({claudeSettings:{...e.claudeSettings,temperature:P.target.value?parseFloat(P.target.value):void 0}}),disabled:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.7"}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Controls randomness in responses (0.0 = deterministic, 1.0 = very random)."})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"claude-top-p",className:"block text-sm font-medium text-gray-700 mb-2",children:"Top P"}),n.jsx("input",{id:"claude-top-p",type:"number",min:"0",max:"1",step:"0.1",value:e.claudeSettings.topP||"",onChange:P=>_({claudeSettings:{...e.claudeSettings,topP:P.target.value?parseFloat(P.target.value):void 0}}),disabled:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.9"}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Nucleus sampling parameter for response diversity."})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"claude-instructions",className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Instructions"}),n.jsx("textarea",{id:"claude-instructions",rows:4,value:e.claudeSettings.customInstructions||"",onChange:P=>_({claudeSettings:{...e.claudeSettings,customInstructions:P.target.value||void 0}}),disabled:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Add custom instructions for Claude behavior..."}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Custom instructions to guide Claude's behavior for this agent."})]})]}),i==="advanced"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Resource Limits"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"memory-limit",className:"block text-xs font-medium text-gray-600 mb-1",children:"Memory Limit"}),n.jsx("input",{id:"memory-limit",type:"text",placeholder:"512m, 1g, 2g",value:((A=e.resourceLimits)==null?void 0:A.memory)||"",onChange:P=>_({resourceLimits:{...e.resourceLimits,memory:P.target.value||void 0}}),disabled:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"cpu-limit",className:"block text-xs font-medium text-gray-600 mb-1",children:"CPU Limit"}),n.jsx("input",{id:"cpu-limit",type:"number",min:"0.1",max:"8",step:"0.1",placeholder:"1.0",value:((O=e.resourceLimits)==null?void 0:O.cpu)||"",onChange:P=>_({resourceLimits:{...e.resourceLimits,cpu:P.target.value?parseFloat(P.target.value):void 0}}),disabled:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Set resource limits for container-based agents."})]}),n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:[n.jsx("h4",{className:"text-sm font-medium text-red-900 mb-2",children:"Advanced Configuration Warning"}),n.jsx("p",{className:"text-sm text-red-800",children:"These settings affect agent performance and security. Only modify if you understand the implications."})]})]})]})]})},aN=[{id:"docker",title:"Docker Configuration",icon:"",content:[{title:"Container Images",description:"Choose from pre-configured development environments or specify custom Docker images. Each image comes with specific tools and runtime environments optimized for different programming languages."},{title:"Volume Mounting",description:"Mount host directories into containers to persist data and share files between the host system and agent containers. Use format: /host/path:/container/path"},{title:"Network Configuration",description:"Configure container networking modes (bridge, host, custom networks) to control how agents communicate with external services and each other."}]},{id:"claude",title:"Claude Model Tuning",icon:"",content:[{title:"Model Selection",description:"Choose specific Claude models (Sonnet, Haiku, Opus) based on your performance and cost requirements. Different models excel at different types of tasks."},{title:"Temperature Settings",description:"Control response creativity and consistency. Lower values (0.1-0.3) for precise, deterministic responses. Higher values (0.7-1.0) for creative, varied outputs."},{title:"Token Limits",description:"Set maximum response length. Higher limits allow for more detailed responses but consume more resources. Optimize based on your specific use case."},{title:"Custom Instructions",description:"Provide agent-specific behavior guidelines and context that will be included with every request to Claude."}]},{id:"mcp",title:"MCP Server Integration",icon:"",content:[{title:"What is MCP?",description:"Model Context Protocol (MCP) allows agents to connect to external tools and services, extending their capabilities beyond basic text generation."},{title:"Server Configuration",description:"Configure MCP servers by specifying the command, arguments, and environment variables needed to start each server. Common examples include database connectors, API clients, and development tools."},{title:"Use Cases",description:"Connect agents to databases, file systems, APIs, development tools, version control systems, and custom business logic through MCP servers."}]},{id:"resources",title:"Resource Management",icon:"",content:[{title:"Memory Limits",description:'Set container memory limits to prevent agents from consuming excessive system resources. Use formats like "512m", "1g", "2g".'},{title:"CPU Allocation",description:"Limit CPU usage per agent to ensure fair resource distribution across multiple agents. Specify as decimal values (e.g., 0.5 = half a CPU core)."},{title:"Port Management",description:"Reserve port ranges for agent services and prevent conflicts. Useful when agents need to run web servers, APIs, or other network services."}]},{id:"templates",title:"Configuration Templates",icon:"",content:[{title:"Pre-built Templates",description:"Use tested configurations for common scenarios: Development (full debugging tools), Production (secure and optimized), Research (analysis-focused), Minimal (lightweight setup)."},{title:"Import/Export",description:"Save successful configurations and share them across projects or team members. Export configurations as JSON files for version control."},{title:"Custom Templates",description:"Create your own templates by configuring an agent and exporting the settings. Build a library of templates for different project types or team standards."}]}],lN=({isOpen:e,onClose:t})=>{const[r,s]=j.useState(null);if(!e)return null;const i=a=>{s(r===a?null:a)};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-indigo-50",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(Zn,{className:"w-6 h-6 text-purple-600 mr-3"}),n.jsx("h2",{className:"text-xl font-semibold text-purple-900",children:"Advanced Mode Guide"})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(Xt,{className:"w-6 h-6"})})]}),n.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[n.jsx("div",{className:"mb-6",children:n.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Advanced Mode gives you complete control over agent configuration, enabling fine-tuned setups for complex development workflows, production deployments, and specialized use cases. Explore the sections below to learn about each feature."})}),n.jsx("div",{className:"space-y-4",children:aN.map(a=>n.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[n.jsxs("button",{onClick:()=>i(a.id),className:"w-full flex items-center justify-between p-4 bg-gray-50 hover:bg-gray-100 transition-colors",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-2xl mr-3",children:a.icon}),n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:a.title})]}),r===a.id?n.jsx(_c,{className:"w-5 h-5 text-gray-500"}):n.jsx(wc,{className:"w-5 h-5 text-gray-500"})]}),r===a.id&&n.jsx("div",{className:"p-4 bg-white border-t border-gray-200",children:n.jsx("div",{className:"space-y-4",children:a.content.map((c,o)=>n.jsxs("div",{className:"border-l-4 border-purple-200 pl-4",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:c.title}),n.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:c.description})]},o))})})]},a.id))}),n.jsxs("div",{className:"mt-8 p-4 bg-gradient-to-r from-blue-50 to-cyan-50 border border-blue-200 rounded-lg",children:[n.jsxs("h3",{className:"font-medium text-blue-900 mb-3 flex items-center",children:[n.jsx(Cj,{className:"w-5 h-5 mr-2"}),"Quick Tips for Advanced Mode"]}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-2",children:[n.jsx("li",{children:" Start with a configuration template and customize from there"}),n.jsx("li",{children:" Use the export feature to backup working configurations"}),n.jsx("li",{children:" Test resource limits with simple tasks before applying to complex workflows"}),n.jsx("li",{children:" Enable MCP servers only when you need their specific functionality"}),n.jsx("li",{children:" Lower Claude temperature settings for coding tasks, higher for creative work"}),n.jsx("li",{children:" Use Docker for better isolation, especially in team environments"})]})]})]}),n.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end",children:n.jsx("button",{onClick:t,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:"Got it!"})})]})})},cN=({formData:e,updateFormData:t})=>{const[r,s]=j.useState(!1),i=j.useMemo(()=>({autoAccept:e.autoAccept,claudeModel:e.claudeModel,useDocker:e.useDocker,dockerImage:e.dockerImage,dockerNetwork:e.dockerNetwork,dockerVolumes:e.dockerVolumes,portRange:e.portRange,reservedPorts:e.reservedPorts,environment:e.environment,mcpEnabled:e.mcpEnabled,mcpServers:e.mcpServers,claudeSettings:e.claudeSettings,isolationMode:e.isolationMode,resourceLimits:e.resourceLimits}),[e]),a=c=>{t({autoAccept:c.autoAccept,claudeModel:c.claudeModel,useDocker:c.useDocker,dockerImage:c.dockerImage,dockerNetwork:c.dockerNetwork,dockerVolumes:c.dockerVolumes,portRange:c.portRange,reservedPorts:c.reservedPorts,environment:c.environment,mcpEnabled:c.mcpEnabled,mcpServers:c.mcpServers,claudeSettings:c.claudeSettings,isolationMode:c.isolationMode,resourceLimits:c.resourceLimits})};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[n.jsx(Yo,{className:"w-5 h-5 mr-2"}),"Advanced Agent Configuration"]}),n.jsxs("button",{onClick:()=>s(!0),className:"inline-flex items-center px-3 py-1.5 text-sm text-purple-600 hover:text-purple-700 hover:bg-purple-50 rounded-md transition-colors",children:[n.jsx(hy,{className:"w-4 h-4 mr-1"}),"Help"]})]}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Configure Docker settings, environment variables, Claude parameters, MCP servers, and advanced agent options."}),n.jsxs("div",{className:"mt-3 p-3 bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-md",children:[n.jsx("h4",{className:"text-sm font-medium text-purple-900 mb-2",children:" Advanced Mode Features"}),n.jsxs("ul",{className:"text-xs text-purple-800 space-y-1",children:[n.jsx("li",{children:" Use configuration templates for common setups (Development, Production, Research)"}),n.jsx("li",{children:" Export your configuration to share with team members or reuse across projects"}),n.jsx("li",{children:" Configure MCP servers to extend agent capabilities with external tools"}),n.jsx("li",{children:" Fine-tune Claude parameters for optimal performance in your specific use case"})]})]})]}),n.jsx(oN,{config:i,onChange:a,readonly:!1,showTemplates:!0}),n.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-md p-4",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Configuration Summary"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Auto-Accept:"}),n.jsx("span",{className:`ml-2 font-medium ${e.autoAccept?"text-green-600":"text-red-600"}`,children:e.autoAccept?"Enabled":"Disabled"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Docker:"}),n.jsx("span",{className:`ml-2 font-medium ${e.useDocker?"text-green-600":"text-gray-600"}`,children:e.useDocker?"Enabled":"Disabled"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"MCP:"}),n.jsx("span",{className:`ml-2 font-medium ${e.mcpEnabled?"text-green-600":"text-gray-600"}`,children:e.mcpEnabled?"Enabled":"Disabled"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Isolation:"}),n.jsx("span",{className:"ml-2 font-medium text-gray-900 capitalize",children:e.isolationMode})]})]}),e.useDocker&&e.dockerImage&&n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Docker Image:"}),n.jsx("span",{className:"ml-2 font-medium text-gray-900",children:e.dockerImage})]}),e.portRange&&n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Port Range:"}),n.jsx("span",{className:"ml-2 font-medium text-gray-900",children:e.portRange})]}),e.environment&&Object.keys(e.environment).length>0&&n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Environment Variables:"}),n.jsxs("span",{className:"ml-2 font-medium text-gray-900",children:[Object.keys(e.environment).length," variable",Object.keys(e.environment).length!==1?"s":""]})]}),e.mcpServers&&e.mcpServers.length>0&&n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"MCP Servers:"}),n.jsxs("span",{className:"ml-2 font-medium text-gray-900",children:[e.mcpServers.length," server",e.mcpServers.length!==1?"s":""]})]})]})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[n.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Configuration Best Practices"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[n.jsx("li",{children:" Enable Docker for better isolation and reproducibility"}),n.jsx("li",{children:" Use auto-accept for trusted, routine tasks only"}),n.jsx("li",{children:" Configure MCP servers to extend agent capabilities"}),n.jsx("li",{children:" Set appropriate resource limits for container-based agents"}),n.jsx("li",{children:" Use environment variables for configuration, not secrets"})]})]}),n.jsx(lN,{isOpen:r,onClose:()=>s(!1)})]})},dN=({formData:e,projects:t,tasks:r})=>{var f,v;const s=e.projectId?t.find(h=>h.id===e.projectId):null,i=e.selectedTasks.map(h=>r.find(g=>g.id===h)).filter(Boolean),a=e.agentId||e.branch.toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""),c=e.portRange?e.portRange.split("-").map(Number).reduce((h,g,y)=>y===0?g:g-h+1,0):0,l=(h=>{switch(h){case"simple":return Xo;case"standard":return Cc;case"advanced":return Zn}})(e.complexityMode);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx(rl,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Review Your Agent Configuration"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Please review all settings before creating your agent. You can go back to make changes if needed."})]}),n.jsx("div",{className:"bg-brand/10 border border-brand/20 rounded-lg p-4 mb-6",children:n.jsxs("div",{className:"flex items-center justify-center",children:[n.jsx(l,{className:"w-5 h-5 text-brand mr-2"}),n.jsxs("span",{className:"text-sm font-medium text-brand capitalize",children:[e.complexityMode," Mode Configuration"]})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(Jn,{className:"w-5 h-5 text-blue-600 mr-2"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Configuration"})]}),n.jsxs("div",{className:"space-y-3",children:[s?n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Project Name:"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:s.name})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Project ID:"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:s.id})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Status:"}),n.jsx("span",{className:`text-sm font-medium ${s.status==="ACTIVE"?"text-green-600":"text-gray-600"}`,children:s.status})]})]}):n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Project Type:"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Custom Path"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Project Path:"}),n.jsx("span",{className:"text-sm font-medium text-gray-900 break-all",children:e.projectPath})]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(ps,{className:"w-5 h-5 text-green-600 mr-2"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Branch & Agent"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Branch:"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.branch})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Agent ID:"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:a})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Tmux Session:"}),n.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["magents-",a]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Worktree Path:"}),n.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["./magents-",e.branch.replace(/[^a-zA-Z0-9]/g,"-")]})]})]})]}),e.complexityMode!=="simple"&&n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(Nn,{className:"w-5 h-5 text-purple-600 mr-2"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"TaskMaster Integration"})]}),e.taskMasterEnabled?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Status:"}),n.jsxs("span",{className:"flex items-center text-sm font-medium text-green-600",children:[n.jsx(Ko,{className:"w-4 h-4 mr-1"}),"Enabled"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Selected Tasks:"}),n.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[i.length," task",i.length!==1?"s":""]})]}),i.length>0&&n.jsxs("div",{className:"mt-4",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Tasks to Assign:"}),n.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:i.map(h=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[n.jsxs("span",{className:"text-sm text-gray-900",children:[h.id,": ",h.title]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${h.priority==="high"?"bg-red-100 text-red-800":h.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:h.priority})]},h.id))})]})]}):n.jsx("div",{className:"text-center py-4",children:n.jsx("span",{className:"text-sm text-gray-500",children:"Not enabled"})})]}),(e.complexityMode==="advanced"||e.useDocker||e.mcpEnabled||e.environment&&Object.keys(e.environment).length>0)&&n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.complexityMode==="advanced"&&n.jsx("div",{className:"mb-4 p-3 bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-md",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Zn,{className:"w-5 h-5 text-purple-600 mr-2"}),n.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Advanced Mode Configuration"})]})}),n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(Yo,{className:"w-5 h-5 text-gray-600 mr-2"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Advanced Settings"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Auto-Accept:"}),n.jsx("span",{className:`text-sm font-medium ${e.autoAccept?"text-green-600":"text-red-600"}`,children:e.autoAccept?"Enabled":"Disabled"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Docker:"}),n.jsx("span",{className:`text-sm font-medium ${e.useDocker?"text-green-600":"text-gray-600"}`,children:e.useDocker?"Enabled":"Disabled"})]}),e.useDocker&&e.dockerImage&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Docker Image:"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.dockerImage})]}),e.portRange&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Port Range:"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.portRange})]}),e.environment&&Object.keys(e.environment).length>0&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Environment Variables:"}),n.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[Object.keys(e.environment).length," variable",Object.keys(e.environment).length!==1?"s":""]})]}),e.complexityMode==="advanced"&&n.jsxs("div",{className:"mt-4 space-y-3",children:[e.claudeModel&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Claude Model:"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.claudeModel})]}),e.claudeSettings.temperature!==void 0&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Temperature:"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.claudeSettings.temperature})]}),e.claudeSettings.maxTokens&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Max Tokens:"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.claudeSettings.maxTokens})]}),((f=e.resourceLimits)==null?void 0:f.memory)&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Memory Limit:"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.resourceLimits.memory})]}),((v=e.resourceLimits)==null?void 0:v.cpu)&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"CPU Limit:"}),n.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[e.resourceLimits.cpu," cores"]})]}),e.dockerNetwork&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Docker Network:"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.dockerNetwork})]}),e.dockerVolumes&&e.dockerVolumes.length>0&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Volume Mounts:"}),n.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[e.dockerVolumes.length," configured"]})]})]})]})]})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Estimated Resource Usage"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"1"}),n.jsx("div",{className:"text-sm text-blue-800",children:"Git Worktree"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"1"}),n.jsx("div",{className:"text-sm text-blue-800",children:"Tmux Session"})]}),c>0&&n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:c}),n.jsx("div",{className:"text-sm text-blue-800",children:"Reserved Ports"})]}),e.useDocker&&n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"1"}),n.jsx("div",{className:"text-sm text-blue-800",children:"Docker Container"})]})]})]}),e.environment&&Object.keys(e.environment).length>0&&n.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Environment Variables"}),n.jsx("div",{className:"space-y-2",children:Object.entries(e.environment).map(([h,g])=>n.jsxs("div",{className:"flex justify-between items-center p-2 bg-white rounded border",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:h}),n.jsx("span",{className:"text-sm text-gray-600",children:g})]},h))})]}),n.jsxs("div",{className:"space-y-4",children:[!e.useDocker&&n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(Yn,{className:"w-5 h-5 text-yellow-600 mt-0.5 mr-3"}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium text-yellow-800",children:"Docker Not Enabled"}),n.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Consider enabling Docker for better isolation and reproducibility, especially for production environments."})]})]})}),e.autoAccept&&n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(Yn,{className:"w-5 h-5 text-yellow-600 mt-0.5 mr-3"}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium text-yellow-800",children:"Auto-Accept Enabled"}),n.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Auto-accept is enabled. The agent will automatically apply changes without confirmation. Make sure this is appropriate for your use case."})]})]})})]}),n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-green-900 mb-4",children:"Ready to Create Agent"}),n.jsx("p",{className:"text-sm text-green-800 mb-4",children:`Your agent configuration looks good! Click "Create Agent" to start the creation process. You'll see real-time progress updates as your agent is set up.`}),n.jsxs("div",{className:"text-sm text-green-700",children:[n.jsx("strong",{children:"What happens next:"}),n.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[n.jsxs("li",{children:['Git worktree will be created for branch "',e.branch,'"']}),n.jsxs("li",{children:['Tmux session "magent-',a,'" will be started']}),e.useDocker&&n.jsx("li",{children:"Docker container will be prepared and started"}),n.jsx("li",{children:"Claude Code will be launched in the agent environment"}),e.taskMasterEnabled&&i.length>0&&n.jsxs("li",{children:[i.length," task",i.length!==1?"s":""," will be assigned to the agent"]}),n.jsx("li",{children:"Agent will be registered and ready for use"})]})]})]})]})},uN=({onSubmit:e,onCancel:t,isLoading:r=!1,projects:s=[],tasks:i=[]})=>{var S,C,k,w,N,D,T,I,A,O,P;const[a,c]=j.useState(0),[o,l]=j.useState(null),[f,v]=j.useState({complexityMode:"simple",branch:`feature/agent-${Date.now()}`,taskMasterEnabled:!1,selectedTasks:[],autoAccept:!0,useDocker:!0,mcpEnabled:!1,claudeSettings:{},isolationMode:"none"}),h=B=>{const U=[{id:"mode",title:"Complexity Mode",description:"Choose your experience level",icon:Nn,isValid:!0},{id:"project",title:"Project Selection",description:"Choose or specify the project for your agent",icon:Jn,isValid:!!(f.projectId||f.projectPath&&f.projectPath.trim())}];return B==="simple"?[...U,{id:"preview",title:"Preview & Create",description:"Review settings and create your agent",icon:rl,isValid:!0}]:B==="standard"?[...U,{id:"branch",title:"Branch Management",description:"Configure branch and agent identification",icon:ps,isValid:!!f.branch.trim()&&f.branch.length>=3&&/^[a-zA-Z0-9/_-]+$/.test(f.branch)&&!f.branch.startsWith("/")&&!f.branch.endsWith("/")&&!f.branch.includes("//")},{id:"taskmaster",title:"TaskMaster Integration",description:"Optional task assignment and tracking",icon:Nn,isValid:!0,isOptional:!0},{id:"preview",title:"Preview & Create",description:"Review settings and create your agent",icon:rl,isValid:!0}]:[...U,{id:"branch",title:"Branch Management",description:"Configure branch and agent identification",icon:ps,isValid:!!f.branch.trim()&&f.branch.length>=3&&/^[a-zA-Z0-9/_-]+$/.test(f.branch)&&!f.branch.startsWith("/")&&!f.branch.endsWith("/")&&!f.branch.includes("//")},{id:"taskmaster",title:"TaskMaster Integration",description:"Optional task assignment and tracking",icon:Nn,isValid:!0,isOptional:!0},{id:"advanced",title:"Advanced Configuration",description:"Docker, ports, and environment settings",icon:Yo,isValid:!0,isOptional:!0},{id:"preview",title:"Preview & Create",description:"Review settings and create your agent",icon:rl,isValid:!0}]},g=h(f.complexityMode),_=((S=g[a])==null?void 0:S.isValid)||!1||((C=g[a])==null?void 0:C.isOptional),x=()=>{a<g.length-1&&_&&c(B=>B+1)},m=()=>{a>0&&c(B=>B-1)},d=B=>{B>=0&&B<g.length&&c(B)},u=async()=>{var B,U,$;if(a===g.length-1){const E={branch:f.branch,agentId:((B=f.agentId)==null?void 0:B.trim())||void 0,projectId:((U=f.projectId)==null?void 0:U.trim())||void 0,projectPath:(($=f.projectPath)==null?void 0:$.trim())||void 0,autoAccept:f.autoAccept,useDocker:f.useDocker,environment:f.environment&&Object.keys(f.environment).length>0?f.environment:void 0};await e(E),b()}else x()},p=B=>{v(U=>{var E;const $={...U,...B};if(B.complexityMode&&B.complexityMode!==U.complexityMode){l(U.complexityMode);const R=h(B.complexityMode),F=(E=g[a])==null?void 0:E.id;R.findIndex(z=>z.id===F)===-1&&setTimeout(()=>{const z=Math.min(a,R.length-1);c(z)},0)}return $})};j.useEffect(()=>{const B=localStorage.getItem("agentWizardFormData");if(B)try{const U=JSON.parse(B);(U.version||U.complexityMode)&&v($=>({...$,...U}))}catch(U){console.warn("Failed to parse saved wizard data:",U),localStorage.removeItem("agentWizardFormData")}},[]),j.useEffect(()=>{const B={...f,version:"1.0",lastModified:Date.now()};localStorage.setItem("agentWizardFormData",JSON.stringify(B))},[f]);const b=()=>{localStorage.removeItem("agentWizardFormData")};return n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Create New Agent"}),n.jsx("p",{className:"text-foreground-secondary mt-1",children:"Configure your agent with the right level of complexity"})]}),f.complexityMode&&n.jsx(Vj,{currentMode:f.complexityMode,onModeChange:B=>p({complexityMode:B}),onModeChangeRequest:B=>{c(0)},showQuickSwitch:!0})]}),n.jsx("div",{className:"mb-8",children:n.jsx("div",{className:"flex items-center justify-between",children:g.map((B,U)=>{const $=B.icon,E=U===a,R=U<a,F=B.isValid;return n.jsxs("div",{className:"flex flex-col items-center flex-1",children:[n.jsx("button",{onClick:()=>d(U),className:`w-12 h-12 rounded-full flex items-center justify-center transition-all ${E?"bg-brand text-white shadow-glow":R?"bg-status-success text-white":F?"bg-background-tertiary text-foreground-secondary hover:bg-background-secondary":"bg-status-error/20 text-status-error"}`,disabled:r,children:R?n.jsx(Ko,{className:"w-6 h-6"}):n.jsx($,{className:"w-6 h-6"})}),n.jsxs("div",{className:"mt-2 text-center",children:[n.jsx("p",{className:`text-sm font-medium ${E?"text-brand":R?"text-status-success":"text-foreground-secondary"}`,children:B.title}),n.jsx("p",{className:"text-xs text-foreground-tertiary max-w-24",children:B.description})]}),U<g.length-1&&n.jsx("div",{className:`h-px w-full mt-4 ${R?"bg-status-success":"bg-border"}`})]},B.id)})})}),n.jsx("div",{className:"bg-background-card rounded-lg shadow-sm border border-border p-6 min-h-[28rem]",children:n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:(k=g[a])==null?void 0:k.title}),n.jsx("p",{className:"text-foreground-secondary mb-6",children:(w=g[a])==null?void 0:w.description}),((N=g[a])==null?void 0:N.id)==="mode"&&n.jsx(Jj,{formData:f,updateFormData:p}),((D=g[a])==null?void 0:D.id)==="project"&&n.jsx(Zj,{formData:f,updateFormData:p,projects:s}),((T=g[a])==null?void 0:T.id)==="branch"&&n.jsx(tN,{formData:f,updateFormData:p}),((I=g[a])==null?void 0:I.id)==="taskmaster"&&n.jsx(nN,{formData:f,updateFormData:p,tasks:i}),((A=g[a])==null?void 0:A.id)==="advanced"&&n.jsx(cN,{formData:f,updateFormData:p}),((O=g[a])==null?void 0:O.id)==="preview"&&n.jsx(dN,{formData:f,projects:s,tasks:i})]})}),n.jsxs("div",{className:"flex justify-between items-center mt-6",children:[n.jsxs("button",{onClick:a===0?t:m,className:"inline-flex items-center px-4 py-2 border border-border rounded-md shadow-sm text-sm font-medium text-foreground bg-background-secondary hover:bg-background-tertiary disabled:opacity-50 transition-colors",disabled:r,children:[n.jsx(Go,{className:"w-4 h-4 mr-2"}),a===0?"Cancel":"Previous"]}),n.jsx("div",{className:"text-center",children:n.jsxs("span",{className:"text-sm text-foreground-secondary",children:["Step ",a+1," of ",g.length]})}),n.jsx("button",{onClick:u,disabled:!_||r,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-brand hover:bg-brand-hover disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:a===g.length-1?r?"Creating...":"Create Agent":n.jsxs(n.Fragment,{children:["Next",n.jsx(Xn,{className:"w-4 h-4 ml-2"})]})})]}),n.jsx(Kj,{currentMode:f.complexityMode,currentStep:((P=g[a])==null?void 0:P.id)||"mode",formData:f,onUpgradeMode:B=>{p({complexityMode:B}),c(0)}}),n.jsx(Yj,{currentMode:f.complexityMode,previousMode:o,onComplete:()=>l(null),onSkip:()=>l(null)})]})},hN=({step:e})=>{switch(e.status){case"completed":return n.jsx(kj,{className:"w-5 h-5 text-green-500"});case"in-progress":return n.jsx(fy,{className:"w-5 h-5 text-blue-500 animate-spin"});case"error":return n.jsx(ot,{className:"w-5 h-5 text-red-500"});default:return n.jsx(kf,{className:"w-5 h-5 text-gray-300"})}},fN=({progress:e,agentId:t})=>n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Creating Agent: ",t]}),n.jsxs("span",{className:"text-sm text-gray-500",children:[e.percentage,"%"]})]}),n.jsx("div",{className:"mt-2",children:n.jsx("div",{className:"bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${e.percentage}%`}})})}),n.jsx("p",{className:"mt-2 text-sm text-gray-600",children:e.message}),e.error&&n.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-md",children:n.jsx("p",{className:"text-sm text-red-700",children:e.error})})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Progress Steps"}),Array.from({length:e.totalSteps},(r,s)=>{const i=s+1,a=i===e.step,c=a?e.currentStep:{id:`step-${i}`,name:`Step ${i}`,description:`Step ${i}`,status:i<e.step?"completed":"pending"};return n.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-md transition-colors ${a?"bg-blue-50 border border-blue-200":c.status==="completed"?"bg-green-50":"bg-gray-50"}`,children:[n.jsx(hN,{step:c}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:`text-sm font-medium ${c.status==="error"?"text-red-700":c.status==="completed"?"text-green-700":c.status==="in-progress"?"text-blue-700":"text-gray-700"}`,children:c.name}),n.jsx("p",{className:"text-xs text-gray-500",children:c.description}),c.error&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:c.error})]}),c.startTime&&c.endTime&&n.jsxs("div",{className:"text-xs text-gray-400",children:[Math.round((c.endTime.getTime()-c.startTime.getTime())/1e3),"s"]})]},c.id)})]})]}),pN=()=>{const e=Ss(),t=T0(),{agentProgress:r,subscribe:s,unsubscribe:i}=qo(),[a,c]=j.useState(!1),[o,l]=j.useState(null),{data:f=[]}=fr({queryKey:["projects"],queryFn:ye.getProjects,staleTime:5*60*1e3}),{data:v=[]}=fr({queryKey:["taskmaster-tasks"],queryFn:async()=>{try{const y="/Users/santossafrao/Development/personal/magents";return await ye.getTaskMasterTasks(y)}catch(y){return console.warn("TaskMaster not available:",y),[]}},staleTime:5*60*1e3});j.useEffect(()=>(s("agents"),()=>i("agents")),[s,i]),j.useEffect(()=>{if(o&&r[o]){const y=r[o];y.percentage===100&&!y.error?setTimeout(()=>{c(!1),l(null),e("/agents")},1e3):y.error&&(c(!1),l(null))}},[o,r,e]);const h=async y=>{c(!0);try{const _=y.agentId||`agent-${Date.now()}`;l(_),await ye.createAgent(y),await t.invalidateQueries({queryKey:["agents"]})}catch(_){console.error("Failed to create agent:",_);const x=_ instanceof Error?_.message:"Failed to create agent. Please try again.";throw se.error(x,{position:"top-right",autoClose:7e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),c(!1),l(null),_}},g=()=>{e("/agents")};return n.jsxs("div",{className:"max-w-5xl mx-auto p-6",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("button",{onClick:()=>e("/agents"),className:"inline-flex items-center text-sm text-foreground-secondary hover:text-foreground mb-4 transition-colors",children:[n.jsx(Go,{className:"w-4 h-4 mr-1"}),"Back to Agents"]}),n.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Create New Agent"}),n.jsx("p",{className:"text-base text-foreground-secondary",children:"Create a new Claude Code agent with a dedicated Git worktree and tmux session. The agent will be able to work independently on the specified branch."})]}),a&&o&&r[o]&&n.jsx("div",{className:"mb-6",children:n.jsx(fN,{progress:r[o],agentId:o})}),n.jsx(uN,{onSubmit:h,onCancel:g,isLoading:a,projects:f,tasks:v}),n.jsxs("div",{className:"mt-8 bg-background-card border border-border rounded-lg p-6",children:[n.jsxs("h3",{className:"text-base font-semibold text-foreground mb-4 flex items-center",children:[n.jsx(Hj,{className:"w-5 h-5 mr-2 text-brand"}),"What happens when you create an agent?"]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-start",children:[n.jsx(ps,{className:"w-4 h-4 text-status-info mt-0.5 mr-3 flex-shrink-0"}),n.jsx("p",{className:"text-sm text-foreground-secondary",children:"A new Git worktree is created for the specified branch, providing an isolated workspace"})]}),n.jsxs("div",{className:"flex items-start",children:[n.jsx(ms,{className:"w-4 h-4 text-status-success mt-0.5 mr-3 flex-shrink-0"}),n.jsx("p",{className:"text-sm text-foreground-secondary",children:"A tmux session is started with the agent ID as the session name for easy management"})]}),n.jsxs("div",{className:"flex items-start",children:[n.jsx(my,{className:"w-4 h-4 text-status-warning mt-0.5 mr-3 flex-shrink-0"}),n.jsx("p",{className:"text-sm text-foreground-secondary",children:"If Docker mode is enabled, the agent runs in an isolated container with resource limits"})]}),n.jsxs("div",{className:"flex items-start",children:[n.jsx(py,{className:"w-4 h-4 text-brand mt-0.5 mr-3 flex-shrink-0"}),n.jsx("p",{className:"text-sm text-foreground-secondary",children:"Claude Code is launched within the environment and begins working independently"})]}),n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"w-4 h-4 rounded-full bg-status-success mt-0.5 mr-3 flex-shrink-0"}),n.jsx("p",{className:"text-sm text-foreground-secondary",children:"You can monitor, manage, and interact with the agent from the unified dashboard"})]})]})]}),n.jsxs("div",{className:"mt-6 bg-background-tertiary border border-border-light rounded-lg p-6",children:[n.jsx("h3",{className:"text-base font-semibold text-foreground mb-4",children:" Pro Tips"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-start",children:[n.jsx("span",{className:"text-brand mr-2",children:""}),n.jsx("p",{className:"text-sm text-foreground-secondary",children:"Use descriptive agent IDs that reflect the task or feature"})]}),n.jsxs("div",{className:"flex items-start",children:[n.jsx("span",{className:"text-brand mr-2",children:""}),n.jsx("p",{className:"text-sm text-foreground-secondary",children:"Create feature branches before creating agents for new features"})]}),n.jsxs("div",{className:"flex items-start",children:[n.jsx("span",{className:"text-brand mr-2",children:""}),n.jsx("p",{className:"text-sm text-foreground-secondary",children:"Enable Docker mode for better isolation and security"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-start",children:[n.jsx("span",{className:"text-brand mr-2",children:""}),n.jsx("p",{className:"text-sm text-foreground-secondary",children:"Enable auto-accept for routine tasks, disable for complex changes"})]}),n.jsxs("div",{className:"flex items-start",children:[n.jsx("span",{className:"text-brand mr-2",children:""}),n.jsx("p",{className:"text-sm text-foreground-secondary",children:"Use project IDs to group related agents together"})]}),n.jsxs("div",{className:"flex items-start",children:[n.jsx("span",{className:"text-brand mr-2",children:""}),n.jsx("p",{className:"text-sm text-foreground-secondary",children:"Monitor agent status regularly to ensure they're working correctly"})]})]})]})]})]})},mN=()=>{const e=Ss(),[t,r]=j.useState("grid"),[s,i]=j.useState(""),{data:a=[],isLoading:c,refetch:o}=fr({queryKey:["projects"],queryFn:()=>ye.getProjects()}),l=a.filter(g=>{var y;return g.name.toLowerCase().includes(s.toLowerCase())||((y=g.description)==null?void 0:y.toLowerCase().includes(s.toLowerCase()))}),f=g=>g>0?n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-status-success/20 text-status-success",children:"Active"}):n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-foreground-tertiary/20 text-foreground-tertiary",children:"Idle"}),v=({project:g})=>{var y,_;return n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-6 hover:bg-background-card-hover transition-all cursor-pointer group",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 rounded-lg bg-brand/20",children:n.jsx(zi,{className:"h-5 w-5 text-brand"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-foreground group-hover:text-brand transition-colors",children:g.name}),n.jsx("p",{className:"text-sm text-foreground-tertiary",children:"Web Application"})]})]}),f(((y=g.agents)==null?void 0:y.length)||0)]}),n.jsx("p",{className:"text-sm text-foreground-secondary mb-4 line-clamp-2",children:g.description||"No description available"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(fs,{className:"h-4 w-4 text-foreground-tertiary"}),n.jsxs("span",{className:"text-sm text-foreground-secondary",children:[((_=g.agents)==null?void 0:_.length)||0," agents"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(vo,{className:"h-4 w-4 text-foreground-tertiary"}),n.jsx("span",{className:"text-sm text-foreground-secondary",children:"8 branches"})]})]}),n.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-border",children:[n.jsxs("div",{className:"flex items-center gap-2 text-xs text-foreground-tertiary",children:[n.jsx(en,{className:"h-3 w-3"}),n.jsxs("span",{children:["Last: ",new Date(g.updatedAt||g.createdAt).toLocaleDateString()]})]}),n.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[n.jsx("button",{onClick:x=>{x.stopPropagation(),e(`/projects/${g.id}`)},className:"p-1.5 text-foreground-secondary hover:text-foreground hover:bg-background-tertiary rounded transition-colors",children:n.jsx(Ml,{className:"h-4 w-4"})}),n.jsx("button",{className:"p-1.5 text-foreground-secondary hover:text-status-error hover:bg-status-error/10 rounded transition-colors",onClick:x=>{x.stopPropagation()},children:n.jsx(Im,{className:"h-4 w-4"})})]})]})]})},h=({project:g})=>{var y,_;return n.jsx("div",{className:"bg-background-card border border-border rounded-lg p-4 hover:bg-background-card-hover transition-all cursor-pointer group",children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[n.jsx("div",{className:"p-2 rounded-lg bg-brand/20",children:n.jsx(zi,{className:"h-5 w-5 text-brand"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-foreground group-hover:text-brand transition-colors",children:g.name}),n.jsx("p",{className:"text-sm text-foreground-tertiary",children:g.description||"No description"})]}),n.jsxs("div",{className:"flex items-center gap-6 text-sm text-foreground-secondary",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(fs,{className:"h-4 w-4 text-foreground-tertiary"}),n.jsxs("span",{children:[((y=g.agents)==null?void 0:y.length)||0," agents"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(vo,{className:"h-4 w-4 text-foreground-tertiary"}),n.jsx("span",{children:"5 branches"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(en,{className:"h-4 w-4 text-foreground-tertiary"}),n.jsx("span",{children:new Date(g.updatedAt||g.createdAt).toLocaleDateString()})]})]}),f(((_=g.agents)==null?void 0:_.length)||0),n.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[n.jsx("button",{onClick:x=>{x.stopPropagation(),e(`/projects/${g.id}`)},className:"p-1.5 text-foreground-secondary hover:text-foreground hover:bg-background-tertiary rounded transition-colors",children:n.jsx(Ml,{className:"h-4 w-4"})}),n.jsx("button",{className:"p-1.5 text-foreground-secondary hover:text-status-error hover:bg-status-error/10 rounded transition-colors",onClick:x=>{x.stopPropagation()},children:n.jsx(Im,{className:"h-4 w-4"})})]})]})})})};return c?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(Ll,{className:"h-8 w-8 text-foreground-tertiary animate-spin"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Projects"}),n.jsx("p",{className:"text-foreground-secondary mt-1",children:"Manage your development projects and workspaces"})]}),n.jsxs("button",{onClick:()=>e("/projects/new"),className:"px-4 py-2 bg-brand hover:bg-brand-hover text-white rounded-lg font-medium transition-colors flex items-center gap-2",children:[n.jsx(xo,{className:"h-4 w-4"}),"New Project"]})]}),n.jsxs("div",{className:"flex items-center justify-between gap-4",children:[n.jsxs("div",{className:"relative flex-1 max-w-md",children:[n.jsx("input",{type:"text",placeholder:"Search projects...",value:s,onChange:g=>i(g.target.value),className:"w-full pl-10 pr-4 py-2 bg-background-tertiary border border-border rounded-lg text-sm text-foreground placeholder-foreground-tertiary focus:outline-none focus:border-brand focus:ring-1 focus:ring-brand"}),n.jsx(vc,{className:"absolute left-3 top-2.5 h-5 w-5 text-foreground-tertiary"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>o(),className:"p-2 text-foreground-secondary hover:text-foreground hover:bg-background-tertiary rounded-lg transition-colors",children:n.jsx(Ll,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex items-center bg-background-tertiary rounded-lg border border-border",children:[n.jsx("button",{onClick:()=>r("grid"),className:`p-2 rounded-l-lg transition-colors ${t==="grid"?"bg-background-card text-foreground":"text-foreground-secondary hover:text-foreground"}`,children:n.jsx(H0,{className:"h-5 w-5"})}),n.jsx("button",{onClick:()=>r("list"),className:`p-2 rounded-r-lg transition-colors ${t==="list"?"bg-background-card text-foreground":"text-foreground-secondary hover:text-foreground"}`,children:n.jsx($0,{className:"h-5 w-5"})})]})]})]}),l.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-16 bg-background-card border border-border rounded-lg",children:[n.jsx(zi,{className:"h-12 w-12 text-foreground-tertiary mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:s?"No projects found":"No projects yet"}),n.jsx("p",{className:"text-foreground-secondary text-center max-w-md mb-6",children:s?"Try adjusting your search terms":"Create your first project to get started with multi-agent development"}),!s&&n.jsxs("button",{onClick:()=>e("/projects/new"),className:"px-4 py-2 bg-brand hover:bg-brand-hover text-white rounded-lg font-medium transition-colors flex items-center gap-2",children:[n.jsx(xo,{className:"h-4 w-4"}),"Create New Project"]})]}):t==="grid"?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(g=>n.jsx(v,{project:g},g.id))}):n.jsx("div",{className:"space-y-3",children:l.map(g=>n.jsx(h,{project:g},g.id))})]})},gN=()=>n.jsxs("div",{className:"bg-background min-h-screen p-6",children:[n.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Settings"}),n.jsx("p",{className:"text-foreground-secondary mt-2",children:"Configure your Magents system"}),n.jsx("div",{className:"mt-8 bg-background-card border border-border p-6 rounded-lg shadow",children:n.jsx("p",{className:"text-foreground-tertiary",children:"Settings interface coming soon..."})})]}),Ym=({status:e,size:t="md",variant:r="badge",className:s="",showText:i=!0,isLoading:a=!1})=>{const c=h=>{switch(h){case"RUNNING":return{color:"text-green-700 bg-green-100 border-green-200",dotColor:"bg-green-500",icon:Cf,text:"Running"};case"STOPPED":return{color:"text-yellow-700 bg-yellow-100 border-yellow-200",dotColor:"bg-yellow-500",icon:Oj,text:"Stopped"};case"ERROR":return{color:"text-red-700 bg-red-100 border-red-200",dotColor:"bg-red-500",icon:ot,text:"Error"};default:return{color:"text-gray-700 bg-gray-100 border-gray-200",dotColor:"bg-gray-500",icon:Sc,text:"Unknown"}}},o=h=>{switch(h){case"sm":return{badge:"px-2 py-1 text-xs",icon:"w-3 h-3",dot:"w-2 h-2",text:"text-xs"};case"md":return{badge:"px-2.5 py-1.5 text-sm",icon:"w-4 h-4",dot:"w-3 h-3",text:"text-sm"};case"lg":return{badge:"px-3 py-2 text-base",icon:"w-5 h-5",dot:"w-4 h-4",text:"text-base"}}},l=c(e),f=o(t),v=l.icon;return a?n.jsxs("div",{className:`inline-flex items-center ${s}`,children:[n.jsx(fy,{className:`${f.icon} animate-spin text-gray-500`}),i&&r!=="dot"&&n.jsx("span",{className:`ml-1.5 ${f.text} text-gray-500`,children:"Loading..."})]}):r==="dot"?n.jsxs("div",{className:`inline-flex items-center ${s}`,children:[n.jsx("div",{className:`${f.dot} ${l.dotColor} rounded-full`}),i&&n.jsx("span",{className:`ml-2 ${f.text} text-gray-900`,children:l.text})]}):r==="full"?n.jsxs("div",{className:`inline-flex items-center space-x-2 ${s}`,children:[n.jsx(v,{className:`${f.icon} ${l.color.split(" ")[0]}`}),i&&n.jsx("span",{className:`${f.text} font-medium text-gray-900`,children:l.text})]}):n.jsxs("span",{className:`inline-flex items-center ${f.badge} font-semibold rounded-full border ${l.color} ${s}`,children:[n.jsx(v,{className:`${f.icon} mr-1.5`}),i&&l.text]})},Xm=({isOpen:e,onClose:t,onConfirm:r,title:s,message:i,confirmText:a,confirmStyle:c="danger"})=>{if(!e)return null;const o=()=>{switch(c){case"danger":return"bg-red-600 hover:bg-red-700 text-white";case"warning":return"bg-yellow-600 hover:bg-yellow-700 text-white";case"primary":return"bg-blue-600 hover:bg-blue-700 text-white"}};return n.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center",children:n.jsx("div",{className:"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(Yn,{className:"w-6 h-6 text-red-500 mr-3"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:s})]}),n.jsx("p",{className:"text-sm text-gray-500 mb-6",children:i}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{onClick:r,className:`px-4 py-2 text-sm font-medium rounded-md ${o()}`,children:a})]})]})})})},vN=({agent:e,onStart:t,onStop:r,onRestart:s,onDelete:i,variant:a="dropdown",size:c="md"})=>{const[o,l]=j.useState(!1),[f,v]=j.useState({isOpen:!1,action:null}),h=e.status==="STOPPED"||e.status==="ERROR",g=e.status==="RUNNING",y=e.status==="RUNNING"||e.status==="STOPPED",_=u=>{switch(l(!1),u){case"start":h&&t(e.id);break;case"stop":g&&r(e.id);break;case"restart":y&&s(e.id);break;case"delete":v({isOpen:!0,action:"delete"});break;case"deleteWithWorktree":v({isOpen:!0,action:"deleteWithWorktree"});break}},x=()=>{f.action==="delete"?i(e.id,!1):f.action==="deleteWithWorktree"&&i(e.id,!0),v({isOpen:!1,action:null})},m=()=>c==="sm"?"w-3 h-3":"w-4 h-4",d=()=>c==="sm"?"px-2 py-1 text-xs":"px-3 py-2 text-sm";return a==="inline"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center space-x-1",children:[h&&n.jsxs("button",{onClick:()=>_("start"),className:`inline-flex items-center ${d()} font-medium text-green-600 hover:text-green-700 disabled:opacity-50`,title:"Start agent",children:[n.jsx(ah,{className:`${m()} mr-1`}),"Start"]}),g&&n.jsxs("button",{onClick:()=>_("stop"),className:`inline-flex items-center ${d()} font-medium text-yellow-600 hover:text-yellow-700 disabled:opacity-50`,title:"Stop agent",children:[n.jsx(_o,{className:`${m()} mr-1`}),"Stop"]}),y&&n.jsxs("button",{onClick:()=>_("restart"),className:`inline-flex items-center ${d()} font-medium text-blue-600 hover:text-blue-700 disabled:opacity-50`,title:"Restart agent",children:[n.jsx(Fl,{className:`${m()} mr-1`}),"Restart"]}),n.jsxs("button",{onClick:()=>_("delete"),className:`inline-flex items-center ${d()} font-medium text-red-600 hover:text-red-700`,title:"Delete agent",children:[n.jsx(qi,{className:`${m()} mr-1`}),"Delete"]})]}),n.jsx(Xm,{isOpen:f.isOpen,onClose:()=>v({isOpen:!1,action:null}),onConfirm:x,title:"Delete Agent",message:f.action==="deleteWithWorktree"?`Are you sure you want to delete agent "${e.id}" and its worktree? This action cannot be undone.`:`Are you sure you want to delete agent "${e.id}"? The worktree will be preserved.`,confirmText:"Delete",confirmStyle:"danger"})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:()=>l(!o),className:`inline-flex items-center ${d()} font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50`,children:n.jsx(Ij,{className:m()})}),o&&n.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 z-10",children:n.jsxs("div",{className:"py-1",children:[h&&n.jsxs("button",{onClick:()=>_("start"),className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[n.jsx(ah,{className:"w-4 h-4 mr-3 text-green-500"}),"Start Agent"]}),g&&n.jsxs("button",{onClick:()=>_("stop"),className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[n.jsx(_o,{className:"w-4 h-4 mr-3 text-yellow-500"}),"Stop Agent"]}),y&&n.jsxs("button",{onClick:()=>_("restart"),className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[n.jsx(Fl,{className:"w-4 h-4 mr-3 text-blue-500"}),"Restart Agent"]}),n.jsx("div",{className:"border-t border-gray-100 my-1"}),n.jsxs("button",{onClick:()=>_("delete"),className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[n.jsx(qi,{className:"w-4 h-4 mr-3 text-red-500"}),"Delete Agent Only"]}),n.jsxs("button",{onClick:()=>_("deleteWithWorktree"),className:"flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:[n.jsx(qi,{className:"w-4 h-4 mr-3 text-red-500"}),"Delete Agent + Worktree"]})]})})]}),n.jsx(Xm,{isOpen:f.isOpen,onClose:()=>v({isOpen:!1,action:null}),onConfirm:x,title:"Delete Agent",message:f.action==="deleteWithWorktree"?`Are you sure you want to delete agent "${e.id}" and its worktree? This action cannot be undone.`:`Are you sure you want to delete agent "${e.id}"? The worktree will be preserved.`,confirmText:"Delete",confirmStyle:"danger"}),o&&n.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>l(!1)})]})},xN=({agent:e})=>{const[t,r]=j.useState(null),[s,i]=j.useState(null),[a,c]=j.useState(""),[o,l]=j.useState(100),[f,v]=j.useState(!1),[h,g]=j.useState(!1),[y,_]=j.useState(null),x=j.useRef(null),m=async()=>{try{const b=await(await fetch(`/api/tmux/sessions/${e.tmuxSession}/info`)).json();b.success?(r(b.data),!a&&b.data.windows.length>0&&c(b.data.activeWindow),_(null)):_(b.error||"Failed to fetch session info")}catch{_("Network error while fetching session info")}},d=async()=>{if(t){v(!0);try{const p=a?`?window=${a}&lines=${o}`:`?lines=${o}`,S=await(await fetch(`/api/tmux/sessions/${e.tmuxSession}/content${p}`)).json();S.success?(i(S.data),_(null)):_(S.error||"Failed to fetch session content")}catch{_("Network error while fetching content")}finally{v(!1)}}},u=async p=>{try{const S=await(await fetch(`/api/tmux/sessions/${e.tmuxSession}/command`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({command:p,window:a})})).json();S.success?setTimeout(d,500):_(S.error||"Failed to send command")}catch{_("Network error while sending command")}};return j.useEffect(()=>{m()},[e.tmuxSession]),j.useEffect(()=>{t&&d()},[t,a,o]),j.useEffect(()=>(h?x.current=setInterval(d,3e3):x.current&&(clearInterval(x.current),x.current=null),()=>{x.current&&clearInterval(x.current)}),[h,t,a,o]),y?n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(ms,{className:"h-5 w-5 text-red-400 mr-2"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Terminal Error"}),n.jsx("p",{className:"text-sm text-red-700 mt-1",children:y})]})]})}):t?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(py,{className:"h-4 w-4 text-gray-500"}),n.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Session: ",e.tmuxSession]})]}),t.windows.length>1&&n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("label",{className:"text-sm text-gray-600",children:"Window:"}),n.jsx("select",{value:a,onChange:p=>c(p.target.value),className:"text-sm border border-gray-300 rounded px-2 py-1",children:t.windows.map(p=>n.jsx("option",{value:p,children:p},p))})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("label",{className:"text-sm text-gray-600",children:"Lines:"}),n.jsxs("select",{value:o,onChange:p=>l(parseInt(p.target.value)),className:"text-sm border border-gray-300 rounded px-2 py-1",children:[n.jsx("option",{value:50,children:"50"}),n.jsx("option",{value:100,children:"100"}),n.jsx("option",{value:200,children:"200"}),n.jsx("option",{value:500,children:"500"})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("button",{onClick:()=>g(!h),className:`inline-flex items-center px-3 py-1 rounded text-sm font-medium ${h?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[h?n.jsx(_o,{className:"h-3 w-3 mr-1"}):n.jsx(ah,{className:"h-3 w-3 mr-1"}),h?"Stop":"Auto-refresh"]}),n.jsxs("button",{onClick:d,disabled:f,className:"inline-flex items-center px-3 py-1 bg-blue-100 text-blue-700 rounded text-sm font-medium hover:bg-blue-200 disabled:opacity-50",children:[n.jsx(Er,{className:`h-3 w-3 mr-1 ${f?"animate-spin":""}`}),"Refresh"]})]})]}),n.jsxs("div",{className:"bg-black rounded-lg overflow-hidden",children:[n.jsx("div",{className:"bg-gray-800 px-4 py-2 border-b border-gray-700",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ms,{className:"h-4 w-4 text-green-400"}),n.jsxs("span",{className:"text-sm text-gray-300",children:[(s==null?void 0:s.windowName)||a,s&&` - ${s.lines} lines`]})]}),s&&n.jsxs("span",{className:"text-xs text-gray-400",children:["Updated: ",new Date(s.timestamp).toLocaleTimeString()]})]})}),n.jsx("div",{className:"p-4 h-96 overflow-y-auto font-mono text-sm text-green-400 whitespace-pre-wrap",children:(s==null?void 0:s.content)||(f?"Loading...":"No content available")})]}),n.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx(Ej,{className:"h-4 w-4 text-gray-500"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Quick Commands:"})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:[{label:"Clear",command:"clear"},{label:"Git Status",command:"git status"},{label:"List Files",command:"ls -la"},{label:"Current Dir",command:"pwd"}].map(p=>n.jsx("button",{onClick:()=>u(p.command),className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs font-medium hover:bg-blue-200",children:p.label},p.command))})]})]}):n.jsx("div",{className:"flex items-center justify-center h-32",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})},yN=({agent:e})=>{const[t,r]=j.useState([]),[s,i]=j.useState(""),[a,c]=j.useState(!1),[o,l]=j.useState(!1),[f,v]=j.useState(""),[h,g]=j.useState([]),[y,_]=j.useState(null),x=j.useRef(null),m=j.useRef(null);qo();const d=j.useCallback(()=>{x.current&&(x.current.scrollTop=x.current.scrollHeight)},[]),u=j.useCallback(async()=>{try{const A=await(await fetch(`/api/tmux/sessions/${e.tmuxSession}/info`)).json();A.success?(g(A.data.windows),v(A.data.activeWindow),_(null),c(!0),b(`Connected to tmux session: ${e.tmuxSession}`,"system"),b(`Active window: ${A.data.activeWindow}`,"system"),b(`Available windows: ${A.data.windows.join(", ")}`,"system"),p()):(_(A.error),c(!1))}catch{_("Failed to connect to tmux session"),c(!1)}},[e.tmuxSession]),p=j.useCallback(async()=>{try{const I=f?`?window=${f}&lines=20`:"?lines=20",O=await(await fetch(`/api/tmux/sessions/${e.tmuxSession}/content${I}`)).json();if(O.success){const P=O.data.content;P.trim()&&P.split(`
`).filter(U=>U.trim()).forEach(U=>{U.trim()&&b(U,"output")})}}catch(I){console.error("Failed to load initial content:",I)}},[e.tmuxSession,f]),b=j.useCallback((I,A)=>{const O={id:Date.now().toString()+Math.random(),content:I,timestamp:new Date,type:A};r(P=>[...P,O]),setTimeout(d,100)},[d]),S=j.useCallback(async I=>{if(!(!I.trim()||!a)){l(!0),b(`$ ${I}`,"input");try{const O=await(await fetch(`/api/tmux/sessions/${e.tmuxSession}/command`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({command:I,window:f})})).json();O.success?setTimeout(async()=>{try{const B=await(await fetch(`/api/tmux/sessions/${e.tmuxSession}/content?window=${f}&lines=5`)).json();B.success&&B.data.content.split(`
`).slice(-3).forEach($=>{$.trim()&&!$.includes(`$ ${I}`)&&b($,"output")})}catch{b("Error fetching command output","system")}},500):b(`Error: ${O.error}`,"system")}catch{b("Error sending command","system")}finally{l(!1)}}},[e.tmuxSession,f,a,b]),C=j.useCallback(I=>{I.preventDefault(),s.trim()&&(S(s),i(""))},[s,S]),k=j.useCallback(I=>{I.key==="Enter"&&C(I)},[C]),w=j.useCallback(async I=>{v(I),b(`Switching to window: ${I}`,"system"),setTimeout(p,500)},[p]),N=j.useCallback(()=>{r([]),b("Terminal cleared","system")},[b]);j.useEffect(()=>{u()},[u]),j.useEffect(()=>{m.current&&m.current.focus()},[]);const D=I=>I.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),T=I=>{switch(I){case"input":return"text-cyan-300 font-semibold";case"output":return"text-green-300";case"system":return"text-yellow-300 text-sm";default:return"text-gray-300"}};return y?n.jsx("div",{className:"bg-red-900 border border-red-700 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(ms,{className:"h-5 w-5 text-red-400 mr-2"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-red-200",children:"Interactive Terminal Error"}),n.jsx("p",{className:"text-sm text-red-300 mt-1",children:y})]})]})}):n.jsxs("div",{className:"bg-gray-900 rounded-lg overflow-hidden border border-gray-700",children:[n.jsx("div",{className:"bg-gray-800 px-4 py-2 border-b border-gray-700",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ms,{className:"h-4 w-4 text-green-400"}),n.jsxs("span",{className:"text-sm text-gray-300 font-mono",children:[e.tmuxSession,":",f]}),n.jsx("div",{className:`w-2 h-2 rounded-full ${a?"bg-green-400":"bg-red-400"}`})]}),h.length>1&&n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-xs text-gray-400",children:"Window:"}),n.jsx("select",{value:f,onChange:I=>w(I.target.value),className:"bg-gray-700 text-white text-xs border border-gray-600 rounded px-2 py-1",children:h.map(I=>n.jsx("option",{value:I,children:I},I))})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:N,className:"text-gray-400 hover:text-white p-1",title:"Clear terminal",children:n.jsx(Fl,{className:"h-4 w-4"})}),n.jsx("button",{onClick:u,className:"text-gray-400 hover:text-white p-1",title:"Reconnect",children:n.jsx(Bj,{className:"h-4 w-4"})})]})]})}),n.jsxs("div",{ref:x,className:"h-96 overflow-y-auto p-4 font-mono text-sm bg-black",children:[t.map(I=>n.jsxs("div",{className:"flex items-start space-x-2 mb-1",children:[n.jsx("span",{className:"text-gray-500 text-xs min-w-[60px]",children:D(I.timestamp)}),n.jsx("span",{className:T(I.type),children:I.content})]},I.id)),o&&n.jsxs("div",{className:"flex items-center space-x-2 text-yellow-300",children:[n.jsx("span",{className:"text-gray-500 text-xs min-w-[60px]",children:D(new Date)}),n.jsx("span",{children:"Executing command..."})]})]}),n.jsxs("div",{className:"bg-gray-800 border-t border-gray-700 p-3",children:[n.jsxs("form",{onSubmit:C,className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-green-400 font-mono text-sm",children:"$"}),n.jsx("input",{ref:m,type:"text",value:s,onChange:I=>i(I.target.value),onKeyDown:k,disabled:!a||o,placeholder:a?"Enter command...":"Not connected",className:"flex-1 bg-gray-900 text-green-300 border border-gray-600 rounded px-3 py-2 font-mono text-sm focus:outline-none focus:border-green-400 disabled:opacity-50"}),n.jsx("button",{type:"submit",disabled:!a||o||!s.trim(),className:"px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:n.jsx($j,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"mt-2 text-xs text-gray-400",children:[n.jsxs("span",{children:["Connected to tmux session: ",e.tmuxSession]}),f&&n.jsxs("span",{children:[" | Window: ",f]}),n.jsxs("span",{children:[" | Status: ",a?"Connected":"Disconnected"]})]})]})]})},bN=[{id:"overview",label:"Overview",icon:n.jsx(Nf,{className:"w-4 h-4"})},{id:"configuration",label:"Configuration",icon:n.jsx(Yo,{className:"w-4 h-4"})},{id:"activity",label:"Activity",icon:n.jsx(_j,{className:"w-4 h-4"})},{id:"terminal",label:"Terminal View",icon:n.jsx(ms,{className:"w-4 h-4"})},{id:"interactive",label:"Interactive",icon:n.jsx(ms,{className:"w-4 h-4"})}],_N=()=>{const{id:e}=x0(),t=Ss(),[r,s]=j.useState("overview"),{subscribe:i,unsubscribe:a,isConnected:c}=qo(),{data:o,isLoading:l,error:f,refetch:v}=fr({queryKey:["agent",e],queryFn:()=>ye.getAgent(e),enabled:!!e,refetchInterval:3e4});j.useEffect(()=>(e&&i(`agent:${e}`),()=>{e&&a(`agent:${e}`)}),[e,i,a]);const h=d=>new Date(d).toLocaleString(),g=d=>{const u=new Date(d),b=new Date().getTime()-u.getTime(),S=Math.floor(b/(1e3*60*60)),C=Math.floor(b%(1e3*60*60)/(1e3*60));return S>0?`${S}h ${C}m`:`${C}m`},y=async d=>{try{await ye.updateAgentStatus(d,"RUNNING"),se.success("Agent started successfully"),v()}catch(u){se.error("Failed to start agent"),console.error("Failed to start agent:",u)}},_=async d=>{try{await ye.updateAgentStatus(d,"STOPPED"),se.success("Agent stopped successfully"),v()}catch(u){se.error("Failed to stop agent"),console.error("Failed to stop agent:",u)}},x=async(d,u=!1)=>{try{await ye.deleteAgent(d,u),se.success("Agent deleted successfully"),t("/agents")}catch(p){se.error("Failed to delete agent"),console.error("Failed to delete agent:",p)}},m=async d=>{try{await _(d),setTimeout(()=>y(d),1e3)}catch(u){se.error("Failed to restart agent"),console.error("Failed to restart agent:",u)}};return l?n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand"})}):f||!o?n.jsx("div",{className:"max-w-7xl mx-auto p-6",children:n.jsx("div",{className:"bg-status-error/20 border border-status-error/30 rounded-md p-4",children:n.jsxs("div",{className:"flex",children:[n.jsx(ot,{className:"h-5 w-5 text-status-error"}),n.jsxs("div",{className:"ml-3",children:[n.jsx("h3",{className:"text-sm font-medium text-status-error",children:"Error loading agent"}),n.jsx("div",{className:"mt-2 text-sm text-status-error",children:n.jsx("p",{children:f instanceof Error?f.message:"Agent not found"})}),n.jsx("div",{className:"mt-4",children:n.jsx("button",{onClick:()=>t("/agents"),className:"bg-status-error/20 px-3 py-2 rounded-md text-sm font-medium text-status-error hover:bg-status-error/30",children:"Back to agents"})})]})]})})}):n.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-background min-h-screen",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("button",{onClick:()=>t("/agents"),className:"inline-flex items-center text-sm text-foreground-tertiary hover:text-foreground-secondary mb-4",children:[n.jsx(Go,{className:"w-4 h-4 mr-1"}),"Back to Agents"]}),n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsxs("h1",{className:"text-2xl font-bold text-foreground flex items-center",children:[o.id,n.jsx(Ym,{status:o.status,size:"md",className:"ml-4"})]}),n.jsxs("div",{className:"mt-2 flex flex-col sm:flex-row sm:items-center sm:space-x-6",children:[n.jsxs("div",{className:"flex items-center text-sm text-foreground-secondary",children:[n.jsx(ps,{className:"w-4 h-4 mr-1"}),n.jsx("code",{className:"bg-background-tertiary px-2 py-1 rounded text-foreground",children:o.branch})]}),n.jsxs("div",{className:"flex items-center text-sm text-foreground-secondary mt-2 sm:mt-0",children:[n.jsx(ms,{className:"w-4 h-4 mr-1"}),n.jsx("code",{className:"bg-background-tertiary px-2 py-1 rounded text-foreground",children:o.tmuxSession})]}),n.jsxs("div",{className:"flex items-center text-sm text-foreground-secondary mt-2 sm:mt-0",children:[n.jsx(Sc,{className:"w-4 h-4 mr-1"}),n.jsxs("span",{children:["Running for ",g(o.createdAt)]})]})]})]}),n.jsxs("div",{className:"ml-6 flex items-center space-x-3",children:[n.jsx("button",{onClick:()=>v(),className:"inline-flex items-center px-3 py-2 border border-border rounded-md shadow-sm text-sm font-medium text-foreground bg-background-card hover:bg-background-card-hover",children:n.jsx(Er,{className:"w-4 h-4"})}),n.jsx(vN,{agent:o,onStart:y,onStop:_,onRestart:m,onDelete:x,variant:"inline",size:"md"})]})]})]}),n.jsx("div",{className:"border-b border-border",children:n.jsx("nav",{className:"-mb-px flex space-x-8",children:bN.map(d=>n.jsxs("button",{onClick:()=>s(d.id),className:`
                group inline-flex items-center py-4 px-1 border-b-2 font-medium text-sm
                ${r===d.id?"border-brand text-brand":"border-transparent text-foreground-tertiary hover:text-foreground-secondary hover:border-border-hover"}
              `,children:[d.icon,n.jsx("span",{className:"ml-2",children:d.label})]},d.id))})}),n.jsxs("div",{className:"mt-6",children:[r==="overview"&&n.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-foreground mb-4",children:"Basic Information"}),n.jsxs("dl",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("dt",{className:"text-sm font-medium text-foreground-tertiary",children:"Agent ID"}),n.jsx("dd",{className:"mt-1 text-sm text-foreground",children:o.id})]}),n.jsxs("div",{children:[n.jsx("dt",{className:"text-sm font-medium text-foreground-tertiary",children:"Branch"}),n.jsx("dd",{className:"mt-1 text-sm text-foreground",children:n.jsx("code",{className:"bg-background-tertiary px-2 py-1 rounded text-foreground",children:o.branch})})]}),n.jsxs("div",{children:[n.jsx("dt",{className:"text-sm font-medium text-foreground-tertiary",children:"Status"}),n.jsx("dd",{className:"mt-1",children:n.jsx(Ym,{status:o.status,variant:"full"})})]}),n.jsxs("div",{children:[n.jsx("dt",{className:"text-sm font-medium text-foreground-tertiary",children:"Created"}),n.jsx("dd",{className:"mt-1 text-sm text-foreground",children:h(o.createdAt)})]}),o.updatedAt&&n.jsxs("div",{children:[n.jsx("dt",{className:"text-sm font-medium text-foreground-tertiary",children:"Last Updated"}),n.jsx("dd",{className:"mt-1 text-sm text-foreground",children:h(o.updatedAt)})]})]})]}),n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-foreground mb-4",children:"System Information"}),n.jsxs("dl",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("dt",{className:"text-sm font-medium text-foreground-tertiary",children:"Tmux Session"}),n.jsx("dd",{className:"mt-1 text-sm text-foreground",children:n.jsx("code",{className:"bg-background-tertiary px-2 py-1 rounded text-foreground",children:o.tmuxSession})})]}),n.jsxs("div",{children:[n.jsx("dt",{className:"text-sm font-medium text-foreground-tertiary",children:"Worktree Path"}),n.jsx("dd",{className:"mt-1 text-sm text-foreground",children:n.jsx("code",{className:"bg-background-tertiary px-2 py-1 rounded text-xs break-all text-foreground",children:o.worktreePath})})]}),n.jsxs("div",{children:[n.jsx("dt",{className:"text-sm font-medium text-foreground-tertiary",children:"WebSocket Connection"}),n.jsx("dd",{className:"mt-1 text-sm text-foreground",children:n.jsxs("span",{className:`inline-flex items-center ${c?"text-status-success":"text-status-error"}`,children:[n.jsx("div",{className:`w-2 h-2 rounded-full mr-2 ${c?"bg-status-success":"bg-status-error"}`}),c?"Connected":"Disconnected"]})})]}),o.projectId&&n.jsxs("div",{children:[n.jsx("dt",{className:"text-sm font-medium text-foreground-tertiary",children:"Project ID"}),n.jsx("dd",{className:"mt-1 text-sm text-foreground",children:o.projectId})]})]})]})]}),r==="configuration"&&n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-foreground mb-4",children:"Agent Configuration"}),n.jsxs("dl",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("dt",{className:"text-sm font-medium text-foreground-tertiary",children:"Auto Accept"}),n.jsx("dd",{className:"mt-1 text-sm text-foreground",children:o.autoAccept?n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-status-success/20 text-status-success border border-status-success/30",children:"Enabled"}):n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-foreground-tertiary/20 text-foreground-tertiary border border-foreground-tertiary/30",children:"Disabled"})})]}),n.jsxs("div",{children:[n.jsx("dt",{className:"text-sm font-medium text-foreground-tertiary",children:"Docker Mode"}),n.jsx("dd",{className:"mt-1 text-sm text-foreground",children:o.useDocker?n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-brand/20 text-brand border border-brand/30",children:"Docker"}):n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-foreground-tertiary/20 text-foreground-tertiary border border-foreground-tertiary/30",children:"Local"})})]}),o.config&&n.jsxs("div",{children:[n.jsx("dt",{className:"text-sm font-medium text-foreground-tertiary",children:"Additional Configuration"}),n.jsx("dd",{className:"mt-1",children:n.jsx("pre",{className:"bg-background-secondary rounded p-3 text-xs overflow-x-auto text-foreground border border-border",children:JSON.stringify(o.config,null,2)})})]})]})]}),r==="activity"&&n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-foreground mb-4",children:"Recent Activity"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"border-l-4 border-brand pl-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:"Agent started"}),n.jsx("p",{className:"text-sm text-foreground-tertiary",children:h(o.createdAt)})]}),n.jsx("p",{className:"text-sm text-foreground-secondary mt-1",children:"Agent was created and started successfully"})]}),o.status==="RUNNING"&&n.jsxs("div",{className:"border-l-4 border-status-success pl-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:"Currently running"}),n.jsx("p",{className:"text-sm text-foreground-tertiary",children:"Active"})]}),n.jsx("p",{className:"text-sm text-foreground-secondary mt-1",children:"Agent is actively processing tasks"})]}),o.status==="STOPPED"&&n.jsxs("div",{className:"border-l-4 border-status-warning pl-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:"Agent stopped"}),n.jsx("p",{className:"text-sm text-foreground-tertiary",children:o.updatedAt?h(o.updatedAt):"Unknown"})]}),n.jsx("p",{className:"text-sm text-foreground-secondary mt-1",children:"Agent has been stopped"})]}),o.status==="ERROR"&&n.jsxs("div",{className:"border-l-4 border-status-error pl-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:"Error occurred"}),n.jsx("p",{className:"text-sm text-foreground-tertiary",children:o.updatedAt?h(o.updatedAt):"Unknown"})]}),n.jsx("p",{className:"text-sm text-foreground-secondary mt-1",children:"Agent encountered an error"})]})]})]}),r==="terminal"&&n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Live Terminal View"}),n.jsx("div",{className:"text-sm text-foreground-secondary",children:"Real-time view of agent's tmux session"})]}),n.jsx(xN,{agent:o}),n.jsxs("div",{className:"mt-6 p-4 bg-brand/10 border border-brand/30 rounded-lg",children:[n.jsx("h4",{className:"text-sm font-medium text-brand",children:"Direct Access"}),n.jsx("p",{className:"text-sm text-brand mt-1",children:"For full terminal control, attach directly:"}),n.jsx("div",{className:"mt-2 bg-background-tertiary rounded p-2 border border-border",children:n.jsxs("code",{className:"text-foreground text-sm",children:["tmux attach-session -t ",o.tmuxSession]})}),n.jsx("p",{className:"text-sm text-brand mt-2",children:"Or use the magents CLI:"}),n.jsx("div",{className:"mt-2 bg-background-tertiary rounded p-2 border border-border",children:n.jsxs("code",{className:"text-foreground text-sm",children:["magents attach ",o.id]})})]})]}),r==="interactive"&&n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Interactive Terminal"}),n.jsx("div",{className:"text-sm text-foreground-secondary",children:"Direct command interface to agent's tmux session"})]}),n.jsx(yN,{agent:o}),n.jsxs("div",{className:"mt-4 p-3 bg-brand/10 border border-brand/30 rounded-lg",children:[n.jsx("h4",{className:"text-sm font-medium text-brand",children:"Usage Tips"}),n.jsxs("ul",{className:"mt-2 text-sm text-brand space-y-1 list-disc list-inside",children:[n.jsx("li",{children:"Type commands and press Enter to execute them in the agent's tmux session"}),n.jsx("li",{children:"Switch between tmux windows (main, claude, git) using the dropdown"}),n.jsxs("li",{children:["Use standard terminal commands: ",n.jsx("code",{className:"bg-background-tertiary px-1 rounded text-foreground border border-border",children:"ls"}),", ",n.jsx("code",{className:"bg-background-tertiary px-1 rounded text-foreground border border-border",children:"cd"}),", ",n.jsx("code",{className:"bg-background-tertiary px-1 rounded text-foreground border border-border",children:"git status"})]}),n.jsx("li",{children:"Commands are executed in the agent's working directory"}),n.jsxs("li",{children:["Use ",n.jsx("code",{className:"bg-background-tertiary px-1 rounded text-foreground border border-border",children:"clear"})," to clear the terminal display"]})]})]})]})]})]})},wN=()=>{const{id:e}=x0();return n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Project ",e]}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Detailed view of project"}),n.jsx("div",{className:"mt-8 bg-white p-6 rounded-lg shadow",children:n.jsx("p",{className:"text-gray-500",children:"Project detail interface coming soon..."})})]})},SN=[{id:"feature",name:"Feature Implementation",template:{priority:"medium",testStrategy:"Unit tests for core functionality, integration tests for API endpoints, E2E tests for user flows",subtasks:[{title:"Design and plan implementation",description:"Create technical design document and implementation plan"},{title:"Implement core functionality",description:"Build the main feature logic and business rules"},{title:"Add tests",description:"Write unit tests, integration tests, and E2E tests"},{title:"Update documentation",description:"Update API docs, user guides, and code comments"}]}},{id:"bugfix",name:"Bug Fix",template:{priority:"high",testStrategy:"Regression tests to prevent reoccurrence, unit tests for the fix",subtasks:[{title:"Reproduce and diagnose issue",description:"Create minimal reproduction and identify root cause"},{title:"Implement fix",description:"Apply the fix and ensure it resolves the issue"},{title:"Add regression tests",description:"Write tests to prevent the bug from reoccurring"}]}},{id:"refactor",name:"Code Refactoring",template:{priority:"low",testStrategy:"Ensure existing tests pass, add tests for any new patterns or abstractions",subtasks:[{title:"Analyze current implementation",description:"Review existing code and identify refactoring opportunities"},{title:"Plan refactoring approach",description:"Design the new structure and migration strategy"},{title:"Implement refactoring",description:"Apply changes incrementally with tests passing at each step"},{title:"Update affected components",description:"Update all components using the refactored code"}]}},{id:"research",name:"Research Task",template:{priority:"medium",testStrategy:"Proof of concept implementation, performance benchmarks if applicable",subtasks:[{title:"Research and analysis",description:"Investigate options and gather requirements"},{title:"Create proof of concept",description:"Build a minimal implementation to validate approach"},{title:"Document findings",description:"Create documentation of research results and recommendations"}]}}],CN=({projectPath:e,onClose:t,onTaskCreated:r,existingTasks:s=[]})=>{const[i,a]=j.useState(0),[c,o]=j.useState({title:"",description:"",priority:"medium",dependencies:[],details:"",testStrategy:"",subtasks:[]}),[l,f]=j.useState({}),[v,h]=j.useState(""),[g,y]=j.useState(!1),[_,x]=j.useState(!1),[m,d]=j.useState(null),u=[{id:"template",title:"Choose Template"},{id:"basic",title:"Basic Information"},{id:"details",title:"Implementation Details"},{id:"dependencies",title:"Dependencies"},{id:"subtasks",title:"Subtasks"},{id:"review",title:"Review & Create"}],p=s.filter(O=>{const P=v.toLowerCase();return!c.dependencies.includes(O.id)&&(O.id.toLowerCase().includes(P)||O.title.toLowerCase().includes(P))}),b=O=>{const P={};switch(O){case 1:c.title.trim()?c.title.length<5&&(P.title="Title must be at least 5 characters"):P.title="Title is required",c.description.trim()?c.description.length<10&&(P.description="Description must be at least 10 characters"):P.description="Description is required";break;case 4:const B={};c.subtasks.forEach((U,$)=>{const E={};U.title.trim()||(E.title="Subtask title is required"),U.description.trim()||(E.description="Subtask description is required"),Object.keys(E).length>0&&(B[$]=E)}),Object.keys(B).length>0&&(P.subtasks=B);break}return f(P),Object.keys(P).length===0},S=()=>{(i===0||b(i))&&a(Math.min(i+1,u.length-1))},C=()=>{a(Math.max(i-1,0))},k=O=>{o(P=>({...P,priority:O.template.priority,testStrategy:O.template.testStrategy,subtasks:O.template.subtasks.map(B=>({...B}))})),S()},w=O=>{o(P=>({...P,dependencies:[...P.dependencies,O]})),h("")},N=O=>{o(P=>({...P,dependencies:P.dependencies.filter(B=>B!==O)}))},D=()=>{o(O=>({...O,subtasks:[...O.subtasks,{title:"",description:""}]}))},T=O=>{o(P=>({...P,subtasks:P.subtasks.filter((B,U)=>U!==O)})),f(P=>{const B={...P};if(B.subtasks){delete B.subtasks[O];const U={};Object.entries(B.subtasks).forEach(([$,E])=>{const R=parseInt($);R>O?U[R-1]=E:U[R]=E}),B.subtasks=U}return B})},I=async()=>{if(b(i)){x(!0),d(null);try{const O=await ye.createTaskMasterTask(e,c.title,c.description,c.priority),P={...O,dependencies:c.dependencies.length>0?c.dependencies:void 0,details:c.details||void 0,testStrategy:c.testStrategy||void 0,subtasks:c.subtasks.length>0?c.subtasks.map((B,U)=>({id:`${O.id}.${U+1}`,title:B.title,description:B.description,status:"pending",priority:"medium"})):void 0};r(P),t()}catch(O){d(O instanceof Error?O.message:"Failed to create task")}finally{x(!1)}}};j.useEffect(()=>{const O=P=>{P.key==="Escape"?t():P.key==="Enter"&&(P.metaKey||P.ctrlKey)&&(i===u.length-1?I():S())};return window.addEventListener("keydown",O),()=>window.removeEventListener("keydown",O)},[i,c]);const A=()=>{switch(i){case 0:return n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-foreground",children:"Choose a Task Template"}),n.jsx("p",{className:"text-sm text-foreground-secondary mb-6",children:"Select a template to pre-fill common fields, or skip to create a custom task."}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:SN.map(O=>n.jsxs("button",{onClick:()=>k(O),className:"p-4 border border-border rounded-lg text-left hover:border-brand hover:bg-brand/10 transition-all bg-background-card",children:[n.jsx("h4",{className:"font-medium mb-2 text-foreground",children:O.name}),n.jsxs("p",{className:"text-sm text-foreground-secondary",children:["Priority: ",O.template.priority,"  ",O.template.subtasks.length," subtasks"]})]},O.id))}),n.jsx("button",{onClick:S,className:"w-full mt-4 py-2 text-foreground-tertiary hover:text-foreground-secondary transition-colors",children:"Skip and create custom task "})]});case 1:return n.jsxs("div",{className:"space-y-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-foreground",children:"Basic Information"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Task Title *"}),n.jsx("input",{type:"text",value:c.title,onChange:O=>o(P=>({...P,title:O.target.value})),className:`w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-brand bg-background-card text-foreground placeholder-foreground-tertiary ${l.title?"border-status-error":""}`,placeholder:"e.g., Implement user authentication"}),l.title&&n.jsx("p",{className:"mt-1 text-sm text-status-error",children:l.title})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Description *"}),n.jsx("textarea",{value:c.description,onChange:O=>o(P=>({...P,description:O.target.value})),className:`w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-brand bg-background-card text-foreground placeholder-foreground-tertiary ${l.description?"border-status-error":""}`,rows:4,placeholder:"Describe what needs to be done..."}),l.description&&n.jsx("p",{className:"mt-1 text-sm text-status-error",children:l.description})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Priority"}),n.jsxs("select",{value:c.priority,onChange:O=>o(P=>({...P,priority:O.target.value})),className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-brand bg-background-card text-foreground",children:[n.jsx("option",{value:"low",children:"Low"}),n.jsx("option",{value:"medium",children:"Medium"}),n.jsx("option",{value:"high",children:"High"})]})]})]});case 2:return n.jsxs("div",{className:"space-y-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-foreground",children:"Implementation Details"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Implementation Details"}),n.jsx("textarea",{value:c.details,onChange:O=>o(P=>({...P,details:O.target.value})),className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-brand bg-background-card text-foreground placeholder-foreground-tertiary",rows:6,placeholder:"Technical details, approach, considerations..."}),n.jsx("p",{className:"mt-1 text-sm text-foreground-tertiary",children:"Provide technical details about how this task should be implemented."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Test Strategy"}),n.jsx("textarea",{value:c.testStrategy,onChange:O=>o(P=>({...P,testStrategy:O.target.value})),className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-brand bg-background-card text-foreground placeholder-foreground-tertiary",rows:4,placeholder:"How should this be tested?"}),n.jsx("p",{className:"mt-1 text-sm text-foreground-tertiary",children:"Describe the testing approach for this task."})]})]});case 3:return n.jsxs("div",{className:"space-y-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-foreground",children:"Task Dependencies"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"This task depends on:"}),c.dependencies.length>0&&n.jsx("div",{className:"mb-4 space-y-2",children:c.dependencies.map(O=>{const P=s.find(B=>B.id===O);return n.jsxs("div",{className:"flex items-center justify-between p-3 bg-background-tertiary rounded-md",children:[n.jsxs("div",{children:[n.jsxs("span",{className:"font-mono text-sm text-foreground-tertiary",children:["#",O]}),P&&n.jsx("span",{className:"ml-2 text-sm text-foreground",children:P.title})]}),n.jsx("button",{onClick:()=>N(O),className:"text-status-error hover:text-status-error/80",children:n.jsx(qi,{className:"w-4 h-4"})})]},O)})}),n.jsxs("div",{className:"relative",children:[n.jsx(Qo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-foreground-tertiary"}),n.jsx("input",{type:"text",value:v,onChange:O=>h(O.target.value),onFocus:()=>y(!0),className:"w-full pl-10 pr-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-brand bg-background-card text-foreground placeholder-foreground-tertiary",placeholder:"Search tasks by ID or title..."})]}),g&&v&&n.jsx("div",{className:"mt-2 max-h-60 overflow-y-auto border border-border rounded-md shadow-lg bg-background-card",children:p.length>0?p.slice(0,10).map(O=>n.jsxs("button",{onClick:()=>{w(O.id),y(!1)},className:"w-full px-4 py-2 text-left hover:bg-background-card-hover flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("span",{className:"font-mono text-sm text-foreground-tertiary",children:["#",O.id]}),n.jsx("span",{className:"ml-2 text-sm text-foreground",children:O.title})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${O.status==="done"?"bg-status-success/20 text-status-success border-status-success/30":O.status==="in-progress"?"bg-brand/20 text-brand border-brand/30":"bg-status-warning/20 text-status-warning border-status-warning/30"}`,children:O.status})]},O.id)):n.jsx("div",{className:"px-4 py-3 text-sm text-foreground-tertiary",children:"No matching tasks found"})})]}),n.jsx("p",{className:"text-sm text-foreground-tertiary",children:"Dependencies ensure this task won't be started until the selected tasks are completed."})]});case 4:return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Subtasks"}),n.jsxs("button",{onClick:D,className:"flex items-center space-x-2 px-3 py-1 text-sm bg-brand text-white rounded-md hover:bg-brand-hover",children:[n.jsx(Yr,{className:"w-4 h-4"}),n.jsx("span",{children:"Add Subtask"})]})]}),c.subtasks.length===0?n.jsxs("div",{className:"text-center py-8 bg-background-tertiary rounded-lg",children:[n.jsx("p",{className:"text-foreground-secondary mb-4",children:"No subtasks added yet"}),n.jsx("button",{onClick:D,className:"text-brand hover:text-brand-hover",children:"Add your first subtask"})]}):n.jsx("div",{className:"space-y-4",children:c.subtasks.map((O,P)=>{var B,U,$,E,R,F,M,z;return n.jsxs("div",{className:"p-4 border border-border rounded-lg bg-background-card",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("span",{className:"text-sm font-medium text-foreground-tertiary",children:["Subtask ",P+1]}),n.jsx("button",{onClick:()=>T(P),className:"text-status-error hover:text-status-error/80",children:n.jsx(qi,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("input",{type:"text",value:O.title,onChange:q=>{const Y=[...c.subtasks];Y[P].title=q.target.value,o(te=>({...te,subtasks:Y}))},className:`w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-brand bg-background text-foreground placeholder-foreground-tertiary ${(U=(B=l.subtasks)==null?void 0:B[P])!=null&&U.title?"border-status-error":""}`,placeholder:"Subtask title"}),((E=($=l.subtasks)==null?void 0:$[P])==null?void 0:E.title)&&n.jsx("p",{className:"mt-1 text-sm text-status-error",children:l.subtasks[P].title})]}),n.jsxs("div",{children:[n.jsx("textarea",{value:O.description,onChange:q=>{const Y=[...c.subtasks];Y[P].description=q.target.value,o(te=>({...te,subtasks:Y}))},className:`w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-brand bg-background text-foreground placeholder-foreground-tertiary ${(F=(R=l.subtasks)==null?void 0:R[P])!=null&&F.description?"border-status-error":""}`,rows:2,placeholder:"Subtask description"}),((z=(M=l.subtasks)==null?void 0:M[P])==null?void 0:z.description)&&n.jsx("p",{className:"mt-1 text-sm text-status-error",children:l.subtasks[P].description})]})]})]},P)})})]});case 5:return n.jsxs("div",{className:"space-y-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-foreground",children:"Review Task Details"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"p-4 bg-background-tertiary rounded-lg",children:[n.jsx("h4",{className:"font-medium text-foreground mb-2",children:"Basic Information"}),n.jsxs("dl",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex",children:[n.jsx("dt",{className:"font-medium text-foreground-tertiary w-24",children:"Title:"}),n.jsx("dd",{className:"flex-1 text-foreground",children:c.title})]}),n.jsxs("div",{className:"flex",children:[n.jsx("dt",{className:"font-medium text-foreground-tertiary w-24",children:"Priority:"}),n.jsx("dd",{className:"flex-1",children:n.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${c.priority==="high"?"bg-status-error/20 text-status-error border-status-error/30":c.priority==="medium"?"bg-status-warning/20 text-status-warning border-status-warning/30":"bg-status-success/20 text-status-success border-status-success/30"}`,children:c.priority})})]}),n.jsxs("div",{className:"flex",children:[n.jsx("dt",{className:"font-medium text-foreground-tertiary w-24",children:"Description:"}),n.jsx("dd",{className:"flex-1 text-foreground",children:c.description})]})]})]}),(c.details||c.testStrategy)&&n.jsxs("div",{className:"p-4 bg-background-tertiary rounded-lg",children:[n.jsx("h4",{className:"font-medium text-foreground mb-2",children:"Implementation"}),n.jsxs("dl",{className:"space-y-2 text-sm",children:[c.details&&n.jsxs("div",{children:[n.jsx("dt",{className:"font-medium text-foreground-tertiary mb-1",children:"Details:"}),n.jsx("dd",{className:"text-foreground whitespace-pre-wrap",children:c.details})]}),c.testStrategy&&n.jsxs("div",{children:[n.jsx("dt",{className:"font-medium text-foreground-tertiary mb-1",children:"Test Strategy:"}),n.jsx("dd",{className:"text-foreground whitespace-pre-wrap",children:c.testStrategy})]})]})]}),c.dependencies.length>0&&n.jsxs("div",{className:"p-4 bg-background-tertiary rounded-lg",children:[n.jsx("h4",{className:"font-medium text-foreground mb-2",children:"Dependencies"}),n.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm",children:c.dependencies.map(O=>{const P=s.find(B=>B.id===O);return n.jsxs("li",{children:[n.jsxs("span",{className:"font-mono text-foreground-tertiary",children:["#",O]}),P&&n.jsx("span",{className:"ml-2 text-foreground",children:P.title})]},O)})})]}),c.subtasks.length>0&&n.jsxs("div",{className:"p-4 bg-background-tertiary rounded-lg",children:[n.jsxs("h4",{className:"font-medium text-foreground mb-2",children:["Subtasks (",c.subtasks.length,")"]}),n.jsx("ol",{className:"list-decimal list-inside space-y-2 text-sm",children:c.subtasks.map((O,P)=>n.jsxs("li",{children:[n.jsx("span",{className:"font-medium text-foreground",children:O.title}),n.jsx("p",{className:"ml-6 text-foreground-secondary",children:O.description})]},P))})]})]}),m&&n.jsxs("div",{className:"p-4 bg-status-error/20 border border-status-error/30 rounded-md flex items-start space-x-3",children:[n.jsx(ot,{className:"w-5 h-5 text-status-error flex-shrink-0 mt-0.5"}),n.jsx("div",{className:"text-sm text-status-error",children:m})]}),n.jsx("div",{className:"p-4 bg-brand/10 border border-brand/30 rounded-md",children:n.jsx("p",{className:"text-sm text-brand",children:'Review the task details above. Click "Create Task" to add this task to your TaskMaster project.'})})]});default:return null}};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-background-card border border-border rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] flex flex-col",children:[n.jsxs("div",{className:"px-6 py-4 border-b border-border flex items-center justify-between",children:[n.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Create New Task"}),n.jsx("button",{onClick:t,className:"text-foreground-tertiary hover:text-foreground-secondary transition-colors",children:n.jsx(Xt,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"px-6 py-4 border-b border-border",children:n.jsx("div",{className:"flex items-center justify-between",children:u.map((O,P)=>n.jsxs("div",{className:`flex items-center ${P<u.length-1?"flex-1":""}`,children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${P<i?"bg-status-success text-white":P===i?"bg-brand text-white":"bg-background-tertiary text-foreground-tertiary"}`,children:P<i?n.jsx(Ko,{className:"w-4 h-4"}):P+1}),n.jsx("span",{className:`ml-2 text-sm ${P<=i?"text-foreground":"text-foreground-tertiary"}`,children:O.title})]}),P<u.length-1&&n.jsx("div",{className:`flex-1 h-0.5 mx-4 ${P<i?"bg-status-success":"bg-background-tertiary"}`})]},O.id))})}),n.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-6",children:A()}),n.jsxs("div",{className:"px-6 py-4 border-t border-border flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center space-x-3",children:i>0&&n.jsxs("button",{onClick:C,className:"px-4 py-2 text-foreground-tertiary hover:text-foreground-secondary transition-colors flex items-center space-x-2",children:[n.jsx(Go,{className:"w-4 h-4"}),n.jsx("span",{children:"Previous"})]})}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("button",{onClick:t,className:"px-4 py-2 text-foreground-tertiary hover:text-foreground-secondary transition-colors",children:"Cancel"}),i<u.length-1?n.jsxs("button",{onClick:S,className:"px-4 py-2 bg-brand text-white rounded-md hover:bg-brand-hover transition-colors flex items-center space-x-2",children:[n.jsx("span",{children:"Next"}),n.jsx(Xn,{className:"w-4 h-4"})]}):n.jsx("button",{onClick:I,disabled:_,className:"px-4 py-2 bg-status-success text-white rounded-md hover:bg-status-success/80 transition-colors flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:_?n.jsxs(n.Fragment,{children:[n.jsx(Er,{className:"w-4 h-4 animate-spin"}),n.jsx("span",{children:"Creating..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(Fj,{className:"w-4 h-4"}),n.jsx("span",{children:"Create Task"})]})})]})]})]})})},Jm=({selectedProjectId:e,onProjectSelect:t,className:r=""})=>{const[s,i]=j.useState([]),[a,c]=j.useState(!0),[o,l]=j.useState(null),[f,v]=j.useState(!1),[h,g]=j.useState(""),y=s.find(u=>u.id===e);j.useEffect(()=>{_()},[]);const _=async()=>{try{c(!0),l(null);const u=await ye.getProjects();i(u)}catch(u){l(u instanceof Error?u.message:"Failed to load projects"),i([])}finally{c(!1)}},x=s.filter(u=>u.name.toLowerCase().includes(h.toLowerCase())||u.path.toLowerCase().includes(h.toLowerCase())||u.id&&u.id.toLowerCase().includes(h.toLowerCase())),m=u=>{t(u),v(!1),g("")},d=()=>{t(null),v(!1),g("")};return n.jsxs("div",{className:`relative ${r}`,children:[n.jsxs("button",{onClick:()=>v(!f),className:"w-full flex items-center justify-between px-3 py-2 border border-border rounded-md bg-background-card hover:bg-background-card-hover transition-colors focus:outline-none focus:ring-2 focus:ring-brand",disabled:a,children:[n.jsxs("div",{className:"flex items-center space-x-2 min-w-0",children:[n.jsx(Jn,{className:"w-4 h-4 text-foreground-tertiary flex-shrink-0"}),a?n.jsx("span",{className:"text-foreground-secondary",children:"Loading projects..."}):y?n.jsxs("div",{className:"min-w-0",children:[n.jsx("span",{className:"text-foreground font-medium truncate block",children:y.name}),n.jsx("span",{className:"text-xs text-foreground-tertiary truncate block",children:y.path})]}):n.jsx("span",{className:"text-foreground-secondary",children:"Select a project..."})]}),n.jsx(_c,{className:`w-4 h-4 text-foreground-tertiary flex-shrink-0 transition-transform ${f?"rotate-180":""}`})]}),f&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>v(!1)}),n.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-background-card border border-border rounded-md shadow-lg z-20 max-h-80 overflow-hidden",children:[n.jsx("div",{className:"p-3 border-b border-border",children:n.jsxs("div",{className:"relative",children:[n.jsx(Qo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-foreground-tertiary"}),n.jsx("input",{type:"text",placeholder:"Search projects...",value:h,onChange:u=>g(u.target.value),className:"w-full pl-10 pr-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-brand bg-background text-foreground placeholder-foreground-tertiary text-sm",autoFocus:!0})]})}),a&&n.jsxs("div",{className:"p-4 text-center",children:[n.jsx(Er,{className:"w-5 h-5 animate-spin mx-auto mb-2 text-foreground-tertiary"}),n.jsx("p",{className:"text-sm text-foreground-secondary",children:"Loading projects..."})]}),o&&n.jsxs("div",{className:"p-4 text-center",children:[n.jsx(ot,{className:"w-5 h-5 mx-auto mb-2 text-status-error"}),n.jsx("p",{className:"text-sm text-status-error mb-2",children:o}),n.jsx("button",{onClick:_,className:"text-sm text-brand hover:text-brand-hover",children:"Try again"})]}),!a&&!o&&n.jsxs("div",{className:"overflow-y-auto max-h-60",children:[y&&n.jsx("button",{onClick:d,className:"w-full px-4 py-3 text-left hover:bg-background-tertiary border-b border-border",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-4 h-4"})," ",n.jsx("span",{className:"text-foreground-secondary italic",children:"Clear selection"})]})}),x.length===0?n.jsx("div",{className:"p-4 text-center",children:n.jsx("p",{className:"text-sm text-foreground-secondary",children:h?"No projects match your search":"No projects found"})}):x.map(u=>n.jsx("button",{onClick:()=>m(u),className:`w-full px-4 py-3 text-left hover:bg-background-tertiary transition-colors ${(y==null?void 0:y.id)===u.id?"bg-brand/10 border-r-2 border-brand":""}`,children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Jn,{className:"w-4 h-4 text-foreground-tertiary flex-shrink-0"}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("div",{className:"font-medium text-foreground truncate",children:u.name}),n.jsx("div",{className:"text-xs text-foreground-tertiary truncate",children:u.path}),u.status&&n.jsxs("div",{className:"text-xs text-foreground-secondary mt-1",children:["Status: ",u.status]})]})]})},u.id))]}),n.jsx("div",{className:"p-2 border-t border-border bg-background-secondary",children:n.jsxs("p",{className:"text-xs text-foreground-tertiary text-center",children:[x.length," of ",s.length," projects"]})})]})]})]})},kN=({task:e,onSelect:t,isSelected:r})=>{const s=c=>{switch(c){case"high":return"text-status-error bg-status-error/20 border-status-error/30";case"medium":return"text-status-warning bg-status-warning/20 border-status-warning/30";case"low":return"text-status-success bg-status-success/20 border-status-success/30";default:return"text-foreground-tertiary bg-foreground-tertiary/20 border-foreground-tertiary/30"}},i=c=>{switch(c){case"done":return"text-status-success";case"in-progress":return"text-brand";case"blocked":return"text-status-error";case"cancelled":return"text-foreground-tertiary";default:return"text-status-warning"}},a=(c,o)=>!c||c.length<=o?c:c.substring(0,o)+"...";return n.jsxs("div",{className:`p-4 border rounded-lg cursor-pointer transition-all duration-200 hover:bg-background-card-hover ${r?"border-brand bg-brand/10":"border-border hover:border-border-hover"} bg-background-card`,onClick:()=>t(e),children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("span",{className:"text-sm font-mono text-foreground-tertiary",children:["#",e.id]}),n.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${s(e.priority)}`,children:e.priority})]}),n.jsx("span",{className:`text-sm font-medium ${i(e.status)}`,children:e.status})]}),n.jsx("h3",{className:"font-semibold text-foreground mb-1",children:e.title}),e.description&&n.jsx("p",{className:"text-sm text-foreground-secondary mb-2",children:a(e.description,150)}),n.jsxs("div",{className:"flex items-center justify-between mt-3",children:[n.jsxs("div",{className:"flex items-center space-x-4 text-xs text-foreground-tertiary",children:[e.dependencies&&e.dependencies.length>0&&n.jsxs("span",{children:["Deps: ",e.dependencies.join(", ")]}),e.subtasks&&e.subtasks.length>0&&n.jsxs("span",{children:[e.subtasks.length," subtasks"]})]}),n.jsx(wc,{className:"w-4 h-4 text-foreground-tertiary"})]})]})},jN=({projectPath:e,onTaskSelect:t})=>{const[r,s]=w0(),[i,a]=j.useState([]),[c,o]=j.useState([]),[l,f]=j.useState(!0),[v,h]=j.useState(null),[g,y]=j.useState(null),[_,x]=j.useState(!1),[m,d]=j.useState(null),[u,p]=j.useState(r.get("projectId")||void 0),b=(m==null?void 0:m.path)||e,[S,C]=j.useState(r.get("search")||""),[k,w]=j.useState(r.get("status")||"all"),[N,D]=j.useState(r.get("priority")||"all"),[T,I]=j.useState(r.get("deps")||"all"),[A,O]=j.useState(r.get("sort")||"id"),[P,B]=j.useState(r.get("filters")==="true"),U=j.useCallback(M=>{const z=new URLSearchParams(r);Object.entries(M).forEach(([q,Y])=>{Y===""||q!=="search"&&q!=="projectId"&&Y==="all"?z.delete(q):z.set(q,Y)}),s(z,{replace:!0})},[r,s]),$=j.useCallback(M=>{d(M),p(M==null?void 0:M.id),U({projectId:(M==null?void 0:M.id)||""}),M?localStorage.setItem("magents-selected-project",M.id):localStorage.removeItem("magents-selected-project")},[U]),E=j.useCallback(async()=>{if(!b){a([]),o([]),f(!1);return}f(!0),h(null);try{const M=await ye.getTaskMasterTasks(b);a(M),o(M)}catch(M){h(M instanceof Error?M.message:"Failed to fetch tasks"),a([]),o([])}finally{f(!1)}},[b]);j.useEffect(()=>{E()},[E]),j.useEffect(()=>{const M=localStorage.getItem("magents-selected-project");M&&!u&&(p(M),U({projectId:M}))},[]),j.useEffect(()=>{let M=[...i];if(S){const z=S.toLowerCase();M=M.filter(q=>q.id.toLowerCase().includes(z)||q.title.toLowerCase().includes(z)||q.description&&q.description.toLowerCase().includes(z))}k!=="all"&&(M=M.filter(z=>z.status===k)),N!=="all"&&(M=M.filter(z=>z.priority===N)),T!=="all"&&(M=M.filter(z=>{const q=z.dependencies&&z.dependencies.length>0;return T==="with"?q:!q})),M.sort((z,q)=>{switch(A){case"id":return z.id.localeCompare(q.id,void 0,{numeric:!0});case"priority":const Y={high:0,medium:1,low:2};return(Y[z.priority]||3)-(Y[q.priority]||3);case"status":return z.status.localeCompare(q.status);case"title":return z.title.localeCompare(q.title);default:return 0}}),o(M)},[i,S,k,N,T,A]);const R=M=>{y(M),t==null||t(M)},F=M=>{a(z=>[...z,M]),x(!1),R(M)};return j.useEffect(()=>{const M=z=>{if(!(z.target instanceof HTMLInputElement||z.target instanceof HTMLTextAreaElement)){if((z.metaKey||z.ctrlKey)&&z.key==="k"){z.preventDefault();const q=document.querySelector('input[type="text"]');q==null||q.focus()}if((z.metaKey||z.ctrlKey)&&z.key==="f"&&(z.preventDefault(),B(q=>{const Y=!q;return U({filters:Y?"true":""}),Y})),(z.metaKey||z.ctrlKey)&&z.key==="r"&&(z.preventDefault(),E()),(z.metaKey||z.ctrlKey)&&z.key==="n"&&(z.preventDefault(),b&&x(!0)),!z.metaKey&&!z.ctrlKey&&!z.altKey&&!z.shiftKey)switch(z.key){case"1":w("all"),U({status:"all"});break;case"2":w("pending"),U({status:"pending"});break;case"3":w("in-progress"),U({status:"in-progress"});break;case"4":w("done"),U({status:"done"});break;case"5":w("blocked"),U({status:"blocked"});break}}};return window.addEventListener("keydown",M),()=>window.removeEventListener("keydown",M)},[E,U,b]),!b&&!l?n.jsxs("div",{className:"h-full flex flex-col bg-background",children:[n.jsx("div",{className:"p-4 border-b border-border bg-background-card",children:n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"TaskMaster Tasks"}),n.jsx("div",{className:"min-w-0 flex-1 max-w-xs",children:n.jsx(Jm,{selectedProjectId:u,onProjectSelect:$})})]})})}),n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(ot,{className:"w-12 h-12 text-foreground-tertiary mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No Project Selected"}),n.jsx("p",{className:"text-foreground-secondary mb-4 max-w-md",children:"Please select a project from the dropdown above to view and manage its TaskMaster tasks."})]})})]}):l?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(Er,{className:"w-8 h-8 text-foreground-tertiary animate-spin"})}):v?n.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[n.jsx(ot,{className:"w-12 h-12 text-status-error mb-4"}),n.jsx("p",{className:"text-foreground font-medium mb-2",children:"Failed to load tasks"}),n.jsx("p",{className:"text-sm text-foreground-secondary mb-4",children:v}),n.jsx("button",{onClick:E,className:"px-4 py-2 bg-brand text-white rounded-md hover:bg-brand-hover transition-colors",children:"Retry"})]}):n.jsxs("div",{className:"h-full flex flex-col bg-background",children:[n.jsxs("div",{className:"p-4 border-b border-border bg-background-card",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"TaskMaster Tasks"}),n.jsx("div",{className:"min-w-0 flex-1 max-w-xs",children:n.jsx(Jm,{selectedProjectId:u,onProjectSelect:$})})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("button",{onClick:()=>x(!0),disabled:!b,className:`px-3 py-1.5 rounded-md transition-colors flex items-center space-x-2 text-sm ${b?"bg-brand text-white hover:bg-brand-hover":"bg-foreground-tertiary/20 text-foreground-tertiary cursor-not-allowed"}`,title:b?"Create new task (N)":"Select a project first",children:[n.jsx(Yr,{className:"w-4 h-4"}),n.jsx("span",{children:"New Task"})]}),n.jsx("button",{onClick:()=>{B(!P),U({filters:P?"":"true"})},className:`p-2 rounded-md transition-colors ${P?"bg-background-tertiary text-foreground":"text-foreground-tertiary hover:bg-background-tertiary"}`,title:"Toggle filters (F)",children:n.jsx(uy,{className:"w-4 h-4"})}),n.jsx("button",{onClick:E,className:"p-2 text-foreground-tertiary hover:bg-background-tertiary rounded-md transition-colors",title:"Refresh tasks (R)",children:n.jsx(Er,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Qo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-foreground-tertiary"}),n.jsx("input",{type:"text",placeholder:"Search tasks by ID, title, or description...",value:S,onChange:M=>{C(M.target.value),U({search:M.target.value})},className:"w-full pl-10 pr-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-brand bg-background-card text-foreground placeholder-foreground-tertiary"})]}),P&&n.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 md:grid-cols-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Status"}),n.jsxs("select",{value:k,onChange:M=>{w(M.target.value),U({status:M.target.value})},className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-brand bg-background-card text-foreground",children:[n.jsx("option",{value:"all",children:"All"}),n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"in-progress",children:"In Progress"}),n.jsx("option",{value:"done",children:"Done"}),n.jsx("option",{value:"blocked",children:"Blocked"}),n.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Priority"}),n.jsxs("select",{value:N,onChange:M=>{D(M.target.value),U({priority:M.target.value})},className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-brand bg-background-card text-foreground",children:[n.jsx("option",{value:"all",children:"All"}),n.jsx("option",{value:"high",children:"High"}),n.jsx("option",{value:"medium",children:"Medium"}),n.jsx("option",{value:"low",children:"Low"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Dependencies"}),n.jsxs("select",{value:T,onChange:M=>{I(M.target.value),U({deps:M.target.value})},className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-brand bg-background-card text-foreground",children:[n.jsx("option",{value:"all",children:"All"}),n.jsx("option",{value:"with",children:"With Dependencies"}),n.jsx("option",{value:"without",children:"No Dependencies"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Sort By"}),n.jsxs("select",{value:A,onChange:M=>{O(M.target.value),U({sort:M.target.value})},className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-brand bg-background-card text-foreground",children:[n.jsx("option",{value:"id",children:"ID"}),n.jsx("option",{value:"priority",children:"Priority"}),n.jsx("option",{value:"status",children:"Status"}),n.jsx("option",{value:"title",children:"Title"})]})]})]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-background",children:c.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("p",{className:"text-foreground-secondary",children:"No tasks found"}),S||k!=="all"||N!=="all"||T!=="all"?n.jsx("button",{onClick:()=>{C(""),w("all"),D("all"),I("all"),U({search:"",status:"all",priority:"all",deps:"all"})},className:"mt-2 text-sm text-brand hover:text-brand-hover",children:"Clear filters"}):null]}):n.jsx("div",{className:"space-y-3",children:c.map(M=>n.jsx(kN,{task:M,onSelect:R,isSelected:(g==null?void 0:g.id)===M.id},M.id))})}),n.jsx("div",{className:"p-4 border-t border-border bg-background-secondary",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("p",{className:"text-sm text-foreground-secondary",children:["Showing ",c.length," of ",i.length," tasks"]}),n.jsxs("div",{className:"text-xs text-foreground-tertiary",children:[n.jsx("span",{className:"mr-3",children:"K: Search"}),n.jsx("span",{className:"mr-3",children:"F: Filters"}),n.jsx("span",{className:"mr-3",children:"R: Refresh"}),n.jsx("span",{className:"mr-3",children:"N: New Task"}),n.jsx("span",{children:"1-5: Status filters"})]})]})}),_&&b&&n.jsx(CN,{projectPath:b,onClose:()=>x(!1),onTaskCreated:F,existingTasks:i})]})},an=({title:e,icon:t,defaultOpen:r=!0,children:s,isEmpty:i=!1})=>{const[a,c]=j.useState(r);return i?null:n.jsxs("div",{className:"border border-border rounded-lg overflow-hidden",children:[n.jsxs("button",{onClick:()=>c(!a),className:"w-full px-4 py-3 bg-background-tertiary hover:bg-background-card-hover transition-colors flex items-center justify-between text-left",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[t,n.jsx("h3",{className:"font-medium text-foreground",children:e})]}),a?n.jsx(_c,{className:"w-4 h-4 text-foreground-tertiary"}):n.jsx(wc,{className:"w-4 h-4 text-foreground-tertiary"})]}),a&&n.jsx("div",{className:"p-4 bg-background-card",children:s})]})},vy=({status:e})=>{const r=(()=>{switch(e){case"done":return{color:"text-status-success bg-status-success/20 border-status-success/30",icon:Cf,text:"Done"};case"in-progress":return{color:"text-brand bg-brand/20 border-brand/30",icon:Sc,text:"In Progress"};case"blocked":return{color:"text-status-error bg-status-error/20 border-status-error/30",icon:ot,text:"Blocked"};case"cancelled":return{color:"text-foreground-tertiary bg-foreground-tertiary/20 border-foreground-tertiary/30",icon:Xt,text:"Cancelled"};default:return{color:"text-status-warning bg-status-warning/20 border-status-warning/30",icon:kf,text:"Pending"}}})(),s=r.icon;return n.jsxs("span",{className:`inline-flex items-center px-3 py-1.5 text-sm font-medium rounded-full border ${r.color}`,children:[n.jsx(s,{className:"w-4 h-4 mr-1.5"}),r.text]})},NN=({priority:e})=>{const t=()=>{switch(e){case"high":return"text-status-error bg-status-error/20 border-status-error/30";case"medium":return"text-status-warning bg-status-warning/20 border-status-warning/30";case"low":return"text-status-success bg-status-success/20 border-status-success/30";default:return"text-foreground-tertiary bg-foreground-tertiary/20 border-foreground-tertiary/30"}};return n.jsx("span",{className:`inline-flex items-center px-3 py-1.5 text-sm font-medium rounded-full border capitalize ${t()}`,children:e})},Zm=({code:e,language:t="text"})=>{const r=s=>s.split(`
`).map((i,a)=>n.jsxs("div",{className:"table-row",children:[n.jsx("span",{className:"table-cell pr-4 text-foreground-tertiary select-none text-xs",children:a+1}),n.jsx("span",{className:"table-cell",children:n.jsx("pre",{className:"whitespace-pre font-mono text-sm text-foreground",children:i})})]},a));return n.jsxs("div",{className:"relative rounded-lg bg-background-secondary text-foreground overflow-hidden border border-border",children:[t&&n.jsx("div",{className:"absolute top-2 right-2 text-xs text-foreground-tertiary",children:t}),n.jsx("div",{className:"p-4 overflow-x-auto",children:n.jsx("div",{className:"table w-full",children:r(e)})})]})},EN=({task:e,allTasks:t=[]})=>{const r=s=>{const i=t.find(o=>o.id===s),a=(i==null?void 0:i.status)||"unknown",c={done:"text-status-success border-status-success/30 bg-status-success/10","in-progress":"text-brand border-brand/30 bg-brand/10",blocked:"text-status-error border-status-error/30 bg-status-error/10",pending:"text-status-warning border-status-warning/30 bg-status-warning/10",cancelled:"text-foreground-tertiary border-foreground-tertiary/30 bg-foreground-tertiary/10",unknown:"text-foreground-tertiary border-foreground-tertiary/30 bg-foreground-tertiary/10"}[a]||"text-foreground-tertiary border-foreground-tertiary/30 bg-foreground-tertiary/10";return n.jsxs("div",{className:`px-3 py-2 rounded-lg border ${c} flex items-center space-x-2`,children:[n.jsx(jf,{className:"w-3 h-3"}),n.jsx("span",{className:"font-mono text-sm",children:s}),i&&n.jsxs("span",{className:"text-xs",children:["- ",i.title]})]},s)};return!e.dependencies||e.dependencies.length===0?n.jsx("p",{className:"text-foreground-tertiary text-sm",children:"No dependencies"}):n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"flex flex-wrap gap-2",children:e.dependencies.map(r)}),n.jsx("div",{className:"mt-4 text-xs text-foreground-secondary",children:n.jsx("p",{children:"Task will be blocked until all dependencies are completed."})})]})},xy=({subtasks:e,level:t=0})=>!e||e.length===0?null:n.jsx("div",{className:`space-y-1 ${t>0?"ml-6":""}`,children:e.map(r=>n.jsxs("div",{className:"border border-border rounded-lg p-3 hover:bg-background-card-hover transition-colors",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(jf,{className:"w-3 h-3 text-foreground-tertiary"}),n.jsx("span",{className:"font-mono text-sm text-foreground-secondary",children:r.id}),n.jsx("span",{className:"font-medium text-foreground",children:r.title})]}),n.jsx(vy,{status:r.status})]}),r.description&&n.jsx("p",{className:"mt-1 text-sm text-foreground-secondary ml-5",children:r.description}),r.subtasks&&r.subtasks.length>0&&n.jsx("div",{className:"mt-2",children:n.jsx(xy,{subtasks:r.subtasks,level:t+1})})]},r.id))}),DN=({task:e,onClose:t,className:r=""})=>{j.useState(!1);const s=i=>{const a=/```(\w+)?\n([\s\S]*?)```/g,c=/`([^`]+)`/g;let o=[],l=0,f;for(;(f=a.exec(i))!==null;){if(f.index>l){const g=i.slice(l,f.index);o.push(g.replace(c,(y,_)=>`<code class="bg-background-tertiary text-foreground px-1 py-0.5 rounded text-sm font-mono">${_}</code>`))}const v=f[1]||"text",h=f[2];o.push(n.jsx(Zm,{code:h,language:v},f.index)),l=f.index+f[0].length}if(l<i.length){const v=i.slice(l);o.push(v.replace(c,(h,g)=>`<code class="bg-background-tertiary text-foreground px-1 py-0.5 rounded text-sm font-mono">${g}</code>`))}return o.map((v,h)=>typeof v=="string"?n.jsx("div",{dangerouslySetInnerHTML:{__html:v}},h):v)};return n.jsxs("div",{className:`h-full flex flex-col bg-background-card border-l border-border ${r}`,children:[n.jsxs("div",{className:"sticky top-0 z-10 bg-background-card border-b border-border p-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(jf,{className:"w-5 h-5 text-foreground-tertiary"}),n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:e.id}),n.jsx(vy,{status:e.status}),n.jsx(NN,{priority:e.priority})]}),t&&n.jsx("button",{onClick:t,className:"p-2 text-foreground-tertiary hover:text-foreground hover:bg-background-tertiary rounded-lg transition-colors",children:n.jsx(Xt,{className:"w-4 h-4"})})]}),n.jsx("h2",{className:"text-xl font-bold text-foreground mt-2",children:e.title})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[n.jsx(an,{title:"Description",icon:n.jsx(dy,{className:"w-4 h-4 text-foreground-secondary"}),defaultOpen:!0,children:n.jsx("div",{className:"prose prose-sm max-w-none text-foreground-secondary",children:e.description?s(e.description):n.jsx("p",{className:"text-foreground-tertiary italic",children:"No description provided"})})}),n.jsx(an,{title:"Implementation Details",icon:n.jsx(Hm,{className:"w-4 h-4 text-foreground-secondary"}),defaultOpen:!1,isEmpty:!e.details,children:n.jsx("div",{className:"prose prose-sm max-w-none text-foreground-secondary",children:e.details&&s(e.details)})}),n.jsx(an,{title:"Test Strategy",icon:n.jsx(Wj,{className:"w-4 h-4 text-foreground-secondary"}),defaultOpen:!1,isEmpty:!e.testStrategy,children:n.jsx("div",{className:"prose prose-sm max-w-none text-foreground-secondary",children:e.testStrategy&&s(e.testStrategy)})}),n.jsx(an,{title:"Dependencies",icon:n.jsx(ps,{className:"w-4 h-4 text-foreground-secondary"}),defaultOpen:!0,children:n.jsx(EN,{task:e})}),n.jsx(an,{title:"Subtasks",icon:n.jsx(Tj,{className:"w-4 h-4 text-foreground-secondary"}),defaultOpen:!0,isEmpty:!e.subtasks||e.subtasks.length===0,children:n.jsx(xy,{subtasks:e.subtasks||[]})}),n.jsx(an,{title:"Show Raw Data",icon:n.jsx(Hm,{className:"w-4 h-4 text-foreground-secondary"}),defaultOpen:!1,children:n.jsx(Zm,{code:JSON.stringify(e,null,2),language:"json"})})]})]})};const PN=()=>{const[e,t]=j.useState(null),[r,s]=j.useState(""),[i,a]=j.useState(null),[c,o]=j.useState(!0);return j.useEffect(()=>{(async()=>{try{const f=await ye.getProjects();if(f.length>0){const v=f[0].path;s(v);const h=await ye.detectTaskMaster(v);a(h.isConfigured)}else{const v="/Users/santossafrao/Development/personal/magents";s(v);const h=await ye.detectTaskMaster(v);a(h.isConfigured)}}catch(f){console.error("Failed to detect TaskMaster:",f),a(!1)}finally{o(!1)}})()},[]),c?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx("p",{className:"text-foreground-secondary",children:"Checking for TaskMaster configuration..."})}):i?n.jsxs("div",{className:"flex h-full bg-background",children:[n.jsx("div",{className:"w-1/2 border-r border-border bg-background-secondary task-browser-container",children:n.jsx(jN,{projectPath:r,onTaskSelect:t})}),n.jsx("div",{className:"w-1/2 bg-background",children:e?n.jsx(DN,{task:e,onClose:()=>t(null),className:"h-full"}):n.jsx("div",{className:"flex items-center justify-center h-full text-foreground-tertiary",children:n.jsx("p",{children:"Select a task to view details"})})})]}):n.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[n.jsx(ot,{className:"w-16 h-16 text-status-warning mb-4"}),n.jsx("h2",{className:"text-2xl font-semibold text-foreground mb-2",children:"TaskMaster Not Configured"}),n.jsx("p",{className:"text-foreground-secondary mb-6 max-w-md",children:"This project does not have TaskMaster configured. To use the task browser, you need to initialize TaskMaster in your project."}),n.jsx("div",{className:"bg-background-tertiary rounded-lg p-4 max-w-md border border-border",children:n.jsx("p",{className:"font-mono text-sm text-foreground",children:"task-master init"})})]})};function lh(e,t){return lh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},lh(e,t)}function yy(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,lh(e,t)}function ae(){return ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ae.apply(null,arguments)}function wo(e){"@babel/helpers - typeof";return wo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wo(e)}function RN(e,t){if(wo(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(wo(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function AN(e){var t=RN(e,"string");return wo(t)=="symbol"?t:t+""}function TN(e,t,r){return(t=AN(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function tg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eg(Object(r),!0).forEach(function(s){TN(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eg(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function ct(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var rg=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Dd=function(){return Math.random().toString(36).substring(7).split("").join(".")},sg={INIT:"@@redux/INIT"+Dd(),REPLACE:"@@redux/REPLACE"+Dd(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Dd()}};function LN(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function by(e,t,r){var s;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(ct(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(ct(1));return r(by)(e,t)}if(typeof e!="function")throw new Error(ct(2));var i=e,a=t,c=[],o=c,l=!1;function f(){o===c&&(o=c.slice())}function v(){if(l)throw new Error(ct(3));return a}function h(x){if(typeof x!="function")throw new Error(ct(4));if(l)throw new Error(ct(5));var m=!0;return f(),o.push(x),function(){if(m){if(l)throw new Error(ct(6));m=!1,f();var u=o.indexOf(x);o.splice(u,1),c=null}}}function g(x){if(!LN(x))throw new Error(ct(7));if(typeof x.type>"u")throw new Error(ct(8));if(l)throw new Error(ct(9));try{l=!0,a=i(a,x)}finally{l=!1}for(var m=c=o,d=0;d<m.length;d++){var u=m[d];u()}return x}function y(x){if(typeof x!="function")throw new Error(ct(10));i=x,g({type:sg.REPLACE})}function _(){var x,m=h;return x={subscribe:function(u){if(typeof u!="object"||u===null)throw new Error(ct(11));function p(){u.next&&u.next(v())}p();var b=m(p);return{unsubscribe:b}}},x[rg]=function(){return this},x}return g({type:sg.INIT}),s={dispatch:g,subscribe:h,getState:v,replaceReducer:y},s[rg]=_,s}function ng(e,t){return function(){return t(e.apply(this,arguments))}}function ig(e,t){if(typeof e=="function")return ng(e,t);if(typeof e!="object"||e===null)throw new Error(ct(16));var r={};for(var s in e){var i=e[s];typeof i=="function"&&(r[s]=ng(i,t))}return r}function _y(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(s){return s}:t.length===1?t[0]:t.reduce(function(s,i){return function(){return s(i.apply(void 0,arguments))}})}function IN(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(s){return function(){var i=s.apply(void 0,arguments),a=function(){throw new Error(ct(15))},c={getState:i.getState,dispatch:function(){return a.apply(void 0,arguments)}},o=t.map(function(l){return l(c)});return a=_y.apply(void 0,o)(i.dispatch),tg(tg({},i),{},{dispatch:a})}}}var wy=oe.createContext(null);function MN(e){e()}var Sy=MN,ON=function(t){return Sy=t},BN=function(){return Sy};function FN(){var e=BN(),t=null,r=null;return{clear:function(){t=null,r=null},notify:function(){e(function(){for(var i=t;i;)i.callback(),i=i.next})},get:function(){for(var i=[],a=t;a;)i.push(a),a=a.next;return i},subscribe:function(i){var a=!0,c=r={callback:i,next:null,prev:r};return c.prev?c.prev.next=c:t=c,function(){!a||t===null||(a=!1,c.next?c.next.prev=c.prev:r=c.prev,c.prev?c.prev.next=c.next:t=c.next)}}}}var og={notify:function(){},get:function(){return[]}};function Cy(e,t){var r,s=og;function i(h){return l(),s.subscribe(h)}function a(){s.notify()}function c(){v.onStateChange&&v.onStateChange()}function o(){return!!r}function l(){r||(r=t?t.addNestedSub(c):e.subscribe(c),s=FN())}function f(){r&&(r(),r=void 0,s.clear(),s=og)}var v={addNestedSub:i,notifyNestedSubs:a,handleChangeWrapper:c,isSubscribed:o,trySubscribe:l,tryUnsubscribe:f,getListeners:function(){return s}};return v}var ky=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?j.useLayoutEffect:j.useEffect;function $N(e){var t=e.store,r=e.context,s=e.children,i=j.useMemo(function(){var o=Cy(t);return{store:t,subscription:o}},[t]),a=j.useMemo(function(){return t.getState()},[t]);ky(function(){var o=i.subscription;return o.onStateChange=o.notifyNestedSubs,o.trySubscribe(),a!==t.getState()&&o.notifyNestedSubs(),function(){o.tryUnsubscribe(),o.onStateChange=null}},[i,a]);var c=r||wy;return oe.createElement(c.Provider,{value:i},s)}function $l(e,t){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;r[s]=e[s]}return r}var jy={exports:{}},ve={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var We=typeof Symbol=="function"&&Symbol.for,Ef=We?Symbol.for("react.element"):60103,Df=We?Symbol.for("react.portal"):60106,kc=We?Symbol.for("react.fragment"):60107,jc=We?Symbol.for("react.strict_mode"):60108,Nc=We?Symbol.for("react.profiler"):60114,Ec=We?Symbol.for("react.provider"):60109,Dc=We?Symbol.for("react.context"):60110,Pf=We?Symbol.for("react.async_mode"):60111,Pc=We?Symbol.for("react.concurrent_mode"):60111,Rc=We?Symbol.for("react.forward_ref"):60112,Ac=We?Symbol.for("react.suspense"):60113,HN=We?Symbol.for("react.suspense_list"):60120,Tc=We?Symbol.for("react.memo"):60115,Lc=We?Symbol.for("react.lazy"):60116,UN=We?Symbol.for("react.block"):60121,WN=We?Symbol.for("react.fundamental"):60117,zN=We?Symbol.for("react.responder"):60118,VN=We?Symbol.for("react.scope"):60119;function Nt(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Ef:switch(e=e.type,e){case Pf:case Pc:case kc:case Nc:case jc:case Ac:return e;default:switch(e=e&&e.$$typeof,e){case Dc:case Rc:case Lc:case Tc:case Ec:return e;default:return t}}case Df:return t}}}function Ny(e){return Nt(e)===Pc}ve.AsyncMode=Pf;ve.ConcurrentMode=Pc;ve.ContextConsumer=Dc;ve.ContextProvider=Ec;ve.Element=Ef;ve.ForwardRef=Rc;ve.Fragment=kc;ve.Lazy=Lc;ve.Memo=Tc;ve.Portal=Df;ve.Profiler=Nc;ve.StrictMode=jc;ve.Suspense=Ac;ve.isAsyncMode=function(e){return Ny(e)||Nt(e)===Pf};ve.isConcurrentMode=Ny;ve.isContextConsumer=function(e){return Nt(e)===Dc};ve.isContextProvider=function(e){return Nt(e)===Ec};ve.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ef};ve.isForwardRef=function(e){return Nt(e)===Rc};ve.isFragment=function(e){return Nt(e)===kc};ve.isLazy=function(e){return Nt(e)===Lc};ve.isMemo=function(e){return Nt(e)===Tc};ve.isPortal=function(e){return Nt(e)===Df};ve.isProfiler=function(e){return Nt(e)===Nc};ve.isStrictMode=function(e){return Nt(e)===jc};ve.isSuspense=function(e){return Nt(e)===Ac};ve.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===kc||e===Pc||e===Nc||e===jc||e===Ac||e===HN||typeof e=="object"&&e!==null&&(e.$$typeof===Lc||e.$$typeof===Tc||e.$$typeof===Ec||e.$$typeof===Dc||e.$$typeof===Rc||e.$$typeof===WN||e.$$typeof===zN||e.$$typeof===VN||e.$$typeof===UN)};ve.typeOf=Nt;jy.exports=ve;var qN=jy.exports,Rf=qN,GN={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},KN={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},QN={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Ey={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Af={};Af[Rf.ForwardRef]=QN;Af[Rf.Memo]=Ey;function ag(e){return Rf.isMemo(e)?Ey:Af[e.$$typeof]||GN}var YN=Object.defineProperty,XN=Object.getOwnPropertyNames,lg=Object.getOwnPropertySymbols,JN=Object.getOwnPropertyDescriptor,ZN=Object.getPrototypeOf,cg=Object.prototype;function Dy(e,t,r){if(typeof t!="string"){if(cg){var s=ZN(t);s&&s!==cg&&Dy(e,s,r)}var i=XN(t);lg&&(i=i.concat(lg(t)));for(var a=ag(e),c=ag(t),o=0;o<i.length;++o){var l=i[o];if(!KN[l]&&!(r&&r[l])&&!(c&&c[l])&&!(a&&a[l])){var f=JN(t,l);try{YN(e,l,f)}catch{}}}}return e}var eE=Dy;const dg=mh(eE);var Py={exports:{}},be={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ic=60103,Mc=60106,Jo=60107,Zo=60108,ea=60114,ta=60109,ra=60110,sa=60112,na=60113,Tf=60120,ia=60115,oa=60116,Ry=60121,Ay=60122,Ty=60117,Ly=60129,Iy=60131;if(typeof Symbol=="function"&&Symbol.for){var ze=Symbol.for;Ic=ze("react.element"),Mc=ze("react.portal"),Jo=ze("react.fragment"),Zo=ze("react.strict_mode"),ea=ze("react.profiler"),ta=ze("react.provider"),ra=ze("react.context"),sa=ze("react.forward_ref"),na=ze("react.suspense"),Tf=ze("react.suspense_list"),ia=ze("react.memo"),oa=ze("react.lazy"),Ry=ze("react.block"),Ay=ze("react.server.block"),Ty=ze("react.fundamental"),Ly=ze("react.debug_trace_mode"),Iy=ze("react.legacy_hidden")}function rr(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Ic:switch(e=e.type,e){case Jo:case ea:case Zo:case na:case Tf:return e;default:switch(e=e&&e.$$typeof,e){case ra:case sa:case oa:case ia:case ta:return e;default:return t}}case Mc:return t}}}var tE=ta,rE=Ic,sE=sa,nE=Jo,iE=oa,oE=ia,aE=Mc,lE=ea,cE=Zo,dE=na;be.ContextConsumer=ra;be.ContextProvider=tE;be.Element=rE;be.ForwardRef=sE;be.Fragment=nE;be.Lazy=iE;be.Memo=oE;be.Portal=aE;be.Profiler=lE;be.StrictMode=cE;be.Suspense=dE;be.isAsyncMode=function(){return!1};be.isConcurrentMode=function(){return!1};be.isContextConsumer=function(e){return rr(e)===ra};be.isContextProvider=function(e){return rr(e)===ta};be.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ic};be.isForwardRef=function(e){return rr(e)===sa};be.isFragment=function(e){return rr(e)===Jo};be.isLazy=function(e){return rr(e)===oa};be.isMemo=function(e){return rr(e)===ia};be.isPortal=function(e){return rr(e)===Mc};be.isProfiler=function(e){return rr(e)===ea};be.isStrictMode=function(e){return rr(e)===Zo};be.isSuspense=function(e){return rr(e)===na};be.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Jo||e===ea||e===Ly||e===Zo||e===na||e===Tf||e===Iy||typeof e=="object"&&e!==null&&(e.$$typeof===oa||e.$$typeof===ia||e.$$typeof===ta||e.$$typeof===ra||e.$$typeof===sa||e.$$typeof===Ty||e.$$typeof===Ry||e[0]===Ay)};be.typeOf=rr;Py.exports=be;var uE=Py.exports,hE=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],fE=["reactReduxForwardedRef"],pE=[],mE=[null,null];function gE(e,t){var r=e[1];return[t.payload,r+1]}function ug(e,t,r){ky(function(){return e.apply(void 0,t)},r)}function vE(e,t,r,s,i,a,c){e.current=s,t.current=i,r.current=!1,a.current&&(a.current=null,c())}function xE(e,t,r,s,i,a,c,o,l,f){if(e){var v=!1,h=null,g=function(){if(!v){var x=t.getState(),m,d;try{m=s(x,i.current)}catch(u){d=u,h=u}d||(h=null),m===a.current?c.current||l():(a.current=m,o.current=m,c.current=!0,f({type:"STORE_UPDATED",payload:{error:d}}))}};r.onStateChange=g,r.trySubscribe(),g();var y=function(){if(v=!0,r.tryUnsubscribe(),r.onStateChange=null,h)throw h};return y}}var yE=function(){return[null,0]};function bE(e,t){t===void 0&&(t={});var r=t,s=r.getDisplayName,i=s===void 0?function(p){return"ConnectAdvanced("+p+")"}:s,a=r.methodName,c=a===void 0?"connectAdvanced":a,o=r.renderCountProp,l=o===void 0?void 0:o,f=r.shouldHandleStateChanges,v=f===void 0?!0:f,h=r.storeKey,g=h===void 0?"store":h;r.withRef;var y=r.forwardRef,_=y===void 0?!1:y,x=r.context,m=x===void 0?wy:x,d=$l(r,hE),u=m;return function(b){var S=b.displayName||b.name||"Component",C=i(S),k=ae({},d,{getDisplayName:i,methodName:c,renderCountProp:l,shouldHandleStateChanges:v,storeKey:g,displayName:C,wrappedComponentName:S,WrappedComponent:b}),w=d.pure;function N(O){return e(O.dispatch,k)}var D=w?j.useMemo:function(O){return O()};function T(O){var P=j.useMemo(function(){var mr=O.reactReduxForwardedRef,js=$l(O,fE);return[O.context,mr,js]},[O]),B=P[0],U=P[1],$=P[2],E=j.useMemo(function(){return B&&B.Consumer&&uE.isContextConsumer(oe.createElement(B.Consumer,null))?B:u},[B,u]),R=j.useContext(E),F=!!O.store&&!!O.store.getState&&!!O.store.dispatch;R&&R.store;var M=F?O.store:R.store,z=j.useMemo(function(){return N(M)},[M]),q=j.useMemo(function(){if(!v)return mE;var mr=Cy(M,F?null:R.subscription),js=mr.notifyNestedSubs.bind(mr);return[mr,js]},[M,F,R]),Y=q[0],te=q[1],W=j.useMemo(function(){return F?R:ae({},R,{subscription:Y})},[F,R,Y]),L=j.useReducer(gE,pE,yE),G=L[0],V=G[0],J=L[1];if(V&&V.error)throw V.error;var X=j.useRef(),ce=j.useRef($),xe=j.useRef(),we=j.useRef(!1),Be=D(function(){return xe.current&&$===ce.current?xe.current:z(M.getState(),$)},[M,V,$]);ug(vE,[ce,X,we,$,Be,xe,te]),ug(xE,[v,M,Y,z,ce,X,we,xe,te,J],[M,Y,z]);var le=j.useMemo(function(){return oe.createElement(b,ae({},Be,{ref:U}))},[U,b,Be]),ks=j.useMemo(function(){return v?oe.createElement(E.Provider,{value:W},le):le},[E,le,W]);return ks}var I=w?oe.memo(T):T;if(I.WrappedComponent=b,I.displayName=T.displayName=C,_){var A=oe.forwardRef(function(P,B){return oe.createElement(I,ae({},P,{reactReduxForwardedRef:B}))});return A.displayName=C,A.WrappedComponent=b,dg(A,b)}return dg(I,b)}}function hg(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Pd(e,t){if(hg(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(var i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(t,r[i])||!hg(e[r[i]],t[r[i]]))return!1;return!0}function _E(e,t){var r={},s=function(c){var o=e[c];typeof o=="function"&&(r[c]=function(){return t(o.apply(void 0,arguments))})};for(var i in e)s(i);return r}function Lf(e){return function(r,s){var i=e(r,s);function a(){return i}return a.dependsOnOwnProps=!1,a}}function fg(e){return e.dependsOnOwnProps!==null&&e.dependsOnOwnProps!==void 0?!!e.dependsOnOwnProps:e.length!==1}function My(e,t){return function(s,i){i.displayName;var a=function(o,l){return a.dependsOnOwnProps?a.mapToProps(o,l):a.mapToProps(o)};return a.dependsOnOwnProps=!0,a.mapToProps=function(o,l){a.mapToProps=e,a.dependsOnOwnProps=fg(e);var f=a(o,l);return typeof f=="function"&&(a.mapToProps=f,a.dependsOnOwnProps=fg(f),f=a(o,l)),f},a}}function wE(e){return typeof e=="function"?My(e):void 0}function SE(e){return e?void 0:Lf(function(t){return{dispatch:t}})}function CE(e){return e&&typeof e=="object"?Lf(function(t){return _E(e,t)}):void 0}const kE=[wE,SE,CE];function jE(e){return typeof e=="function"?My(e):void 0}function NE(e){return e?void 0:Lf(function(){return{}})}const EE=[jE,NE];function DE(e,t,r){return ae({},r,e,t)}function PE(e){return function(r,s){s.displayName;var i=s.pure,a=s.areMergedPropsEqual,c=!1,o;return function(f,v,h){var g=e(f,v,h);return c?(!i||!a(g,o))&&(o=g):(c=!0,o=g),o}}}function RE(e){return typeof e=="function"?PE(e):void 0}function AE(e){return e?void 0:function(){return DE}}const TE=[RE,AE];var LE=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function IE(e,t,r,s){return function(a,c){return r(e(a,c),t(s,c),c)}}function ME(e,t,r,s,i){var a=i.areStatesEqual,c=i.areOwnPropsEqual,o=i.areStatePropsEqual,l=!1,f,v,h,g,y;function _(p,b){return f=p,v=b,h=e(f,v),g=t(s,v),y=r(h,g,v),l=!0,y}function x(){return h=e(f,v),t.dependsOnOwnProps&&(g=t(s,v)),y=r(h,g,v),y}function m(){return e.dependsOnOwnProps&&(h=e(f,v)),t.dependsOnOwnProps&&(g=t(s,v)),y=r(h,g,v),y}function d(){var p=e(f,v),b=!o(p,h);return h=p,b&&(y=r(h,g,v)),y}function u(p,b){var S=!c(b,v),C=!a(p,f,b,v);return f=p,v=b,S&&C?x():S?m():C?d():y}return function(b,S){return l?u(b,S):_(b,S)}}function OE(e,t){var r=t.initMapStateToProps,s=t.initMapDispatchToProps,i=t.initMergeProps,a=$l(t,LE),c=r(e,a),o=s(e,a),l=i(e,a),f=a.pure?ME:IE;return f(c,o,l,e,a)}var BE=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function Rd(e,t,r){for(var s=t.length-1;s>=0;s--){var i=t[s](e);if(i)return i}return function(a,c){throw new Error("Invalid value of type "+typeof e+" for "+r+" argument when connecting component "+c.wrappedComponentName+".")}}function FE(e,t){return e===t}function $E(e){var t=e===void 0?{}:e,r=t.connectHOC,s=r===void 0?bE:r,i=t.mapStateToPropsFactories,a=i===void 0?EE:i,c=t.mapDispatchToPropsFactories,o=c===void 0?kE:c,l=t.mergePropsFactories,f=l===void 0?TE:l,v=t.selectorFactory,h=v===void 0?OE:v;return function(y,_,x,m){m===void 0&&(m={});var d=m,u=d.pure,p=u===void 0?!0:u,b=d.areStatesEqual,S=b===void 0?FE:b,C=d.areOwnPropsEqual,k=C===void 0?Pd:C,w=d.areStatePropsEqual,N=w===void 0?Pd:w,D=d.areMergedPropsEqual,T=D===void 0?Pd:D,I=$l(d,BE),A=Rd(y,a,"mapStateToProps"),O=Rd(_,o,"mapDispatchToProps"),P=Rd(x,f,"mergeProps");return s(h,ae({methodName:"connect",getDisplayName:function(U){return"Connect("+U+")"},shouldHandleStateChanges:!!y,initMapStateToProps:A,initMapDispatchToProps:O,initMergeProps:P,pure:p,areStatesEqual:S,areOwnPropsEqual:k,areStatePropsEqual:N,areMergedPropsEqual:T},I))}}const Oy=$E();ON(uf.unstable_batchedUpdates);function HE(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function By(e,t){var r=j.useState(function(){return{inputs:t,result:e()}})[0],s=j.useRef(!0),i=j.useRef(r),a=s.current||!!(t&&i.current.inputs&&HE(t,i.current.inputs)),c=a?i.current:{inputs:t,result:e()};return j.useEffect(function(){s.current=!1,i.current=c},[c]),c.result}function UE(e,t){return By(function(){return e},t)}var pe=By,ie=UE,WE=!0,Ad="Invariant failed";function zE(e,t){if(!e){if(WE)throw new Error(Ad);var r=typeof t=="function"?t():t,s=r?"".concat(Ad,": ").concat(r):Ad;throw new Error(s)}}var Jt=function(t){var r=t.top,s=t.right,i=t.bottom,a=t.left,c=s-a,o=i-r,l={top:r,right:s,bottom:i,left:a,width:c,height:o,x:a,y:r,center:{x:(s+a)/2,y:(i+r)/2}};return l},If=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},pg=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},VE=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},Td={top:0,right:0,bottom:0,left:0},Mf=function(t){var r=t.borderBox,s=t.margin,i=s===void 0?Td:s,a=t.border,c=a===void 0?Td:a,o=t.padding,l=o===void 0?Td:o,f=Jt(If(r,i)),v=Jt(pg(r,c)),h=Jt(pg(v,l));return{marginBox:f,borderBox:Jt(r),paddingBox:v,contentBox:h,margin:i,border:c,padding:l}},Dt=function(t){var r=t.slice(0,-2),s=t.slice(-2);if(s!=="px")return 0;var i=Number(r);return isNaN(i)&&zE(!1),i},qE=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Hl=function(t,r){var s=t.borderBox,i=t.border,a=t.margin,c=t.padding,o=VE(s,r);return Mf({borderBox:o,border:i,margin:a,padding:c})},Ul=function(t,r){return r===void 0&&(r=qE()),Hl(t,r)},Fy=function(t,r){var s={top:Dt(r.marginTop),right:Dt(r.marginRight),bottom:Dt(r.marginBottom),left:Dt(r.marginLeft)},i={top:Dt(r.paddingTop),right:Dt(r.paddingRight),bottom:Dt(r.paddingBottom),left:Dt(r.paddingLeft)},a={top:Dt(r.borderTopWidth),right:Dt(r.borderRightWidth),bottom:Dt(r.borderBottomWidth),left:Dt(r.borderLeftWidth)};return Mf({borderBox:t,margin:s,padding:i,border:a})},$y=function(t){var r=t.getBoundingClientRect(),s=window.getComputedStyle(t);return Fy(r,s)},mg=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function GE(e,t){return!!(e===t||mg(e)&&mg(t))}function KE(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!GE(e[r],t[r]))return!1;return!0}function He(e,t){t===void 0&&(t=KE);var r,s=[],i,a=!1;function c(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];return a&&r===this&&t(o,s)||(i=e.apply(this,o),a=!0,r=this,s=o),i}return c}var QE=function(t){var r=[],s=null,i=function(){for(var c=arguments.length,o=new Array(c),l=0;l<c;l++)o[l]=arguments[l];r=o,!s&&(s=requestAnimationFrame(function(){s=null,t.apply(void 0,r)}))};return i.cancel=function(){s&&(cancelAnimationFrame(s),s=null)},i};const So=QE;function Hy(e,t){}Hy.bind(null,"warn");Hy.bind(null,"error");function ls(){}function YE(e,t){return ae({},e,{},t)}function Ot(e,t,r){var s=t.map(function(i){var a=YE(r,i.options);return e.addEventListener(i.eventName,i.fn,a),function(){e.removeEventListener(i.eventName,i.fn,a)}});return function(){s.forEach(function(a){a()})}}var XE="Invariant failed";function Wl(e){this.message=e}Wl.prototype.toString=function(){return this.message};function Q(e,t){if(!e)throw new Wl(XE)}var JE=function(e){yy(t,e);function t(){for(var s,i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return s=e.call.apply(e,[this].concat(a))||this,s.callbacks=null,s.unbind=ls,s.onWindowError=function(o){var l=s.getCallbacks();l.isDragging()&&l.tryAbort();var f=o.error;f instanceof Wl&&o.preventDefault()},s.getCallbacks=function(){if(!s.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return s.callbacks},s.setCallbacks=function(o){s.callbacks=o},s}var r=t.prototype;return r.componentDidMount=function(){this.unbind=Ot(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(i){if(i instanceof Wl){this.setState({});return}throw i},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},t}(oe.Component),ZE=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,zl=function(t){return t+1},e5=function(t){return`
  You have lifted an item in position `+zl(t.source.index)+`
`},Uy=function(t,r){var s=t.droppableId===r.droppableId,i=zl(t.index),a=zl(r.index);return s?`
      You have moved the item from position `+i+`
      to position `+a+`
    `:`
    You have moved the item from position `+i+`
    in list `+t.droppableId+`
    to list `+r.droppableId+`
    in position `+a+`
  `},Wy=function(t,r,s){var i=r.droppableId===s.droppableId;return i?`
      The item `+t+`
      has been combined with `+s.draggableId:`
      The item `+t+`
      in list `+r.droppableId+`
      has been combined with `+s.draggableId+`
      in list `+s.droppableId+`
    `},t5=function(t){var r=t.destination;if(r)return Uy(t.source,r);var s=t.combine;return s?Wy(t.draggableId,t.source,s):"You are over an area that cannot be dropped on"},gg=function(t){return`
  The item has returned to its starting position
  of `+zl(t.index)+`
`},r5=function(t){if(t.reason==="CANCEL")return`
      Movement cancelled.
      `+gg(t.source)+`
    `;var r=t.destination,s=t.combine;return r?`
      You have dropped the item.
      `+Uy(t.source,r)+`
    `:s?`
      You have dropped the item.
      `+Wy(t.draggableId,t.source,s)+`
    `:`
    The item has been dropped while not over a drop area.
    `+gg(t.source)+`
  `},sl={dragHandleUsageInstructions:ZE,onDragStart:e5,onDragUpdate:t5,onDragEnd:r5},Ue={x:0,y:0},Ge=function(t,r){return{x:t.x+r.x,y:t.y+r.y}},bt=function(t,r){return{x:t.x-r.x,y:t.y-r.y}},cs=function(t,r){return t.x===r.x&&t.y===r.y},li=function(t){return{x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}},tn=function(t,r,s){var i;return s===void 0&&(s=0),i={},i[t]=r,i[t==="x"?"y":"x"]=s,i},Co=function(t,r){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))},vg=function(t,r){return Math.min.apply(Math,r.map(function(s){return Co(t,s)}))},zy=function(t){return function(r){return{x:t(r.x),y:t(r.y)}}},s5=function(e,t){var r=Jt({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r},aa=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},xg=function(t){return[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}]},n5={top:0,right:0,bottom:0,left:0},i5=function(t,r){return r?aa(t,r.scroll.diff.displacement):t},o5=function(t,r,s){if(s&&s.increasedBy){var i;return ae({},t,(i={},i[r.end]=t[r.end]+s.increasedBy[r.line],i))}return t},a5=function(t,r){return r&&r.shouldClipSubject?s5(r.pageMarginBox,t):Jt(t)},ei=function(e){var t=e.page,r=e.withPlaceholder,s=e.axis,i=e.frame,a=i5(t.marginBox,i),c=o5(a,s,r),o=a5(c,i);return{page:t,withPlaceholder:r,active:o}},Of=function(e,t){e.frame||Q(!1);var r=e.frame,s=bt(t,r.scroll.initial),i=li(s),a=ae({},r,{scroll:{initial:r.scroll.initial,current:t,diff:{value:s,displacement:i},max:r.scroll.max}}),c=ei({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:a}),o=ae({},e,{frame:a,subject:c});return o};function Vl(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function Bf(e,t){if(e.findIndex)return e.findIndex(t);for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function Cs(e,t){if(e.find)return e.find(t);var r=Bf(e,t);if(r!==-1)return e[r]}function Vy(e){return Array.prototype.slice.call(e)}var qy=He(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),Gy=He(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),Oc=He(function(e){return Vl(e)}),l5=He(function(e){return Vl(e)}),ci=He(function(e,t){var r=l5(t).filter(function(s){return e===s.descriptor.droppableId}).sort(function(s,i){return s.descriptor.index-i.descriptor.index});return r});function Ff(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function Bc(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var Fc=He(function(e,t){return t.filter(function(r){return r.descriptor.id!==e.descriptor.id})}),c5=function(e){var t=e.isMovingForward,r=e.draggable,s=e.destination,i=e.insideDestination,a=e.previousImpact;if(!s.isCombineEnabled)return null;var c=Ff(a);if(!c)return null;function o(x){var m={type:"COMBINE",combine:{draggableId:x,droppableId:s.descriptor.id}};return ae({},a,{at:m})}var l=a.displaced.all,f=l.length?l[0]:null;if(t)return f?o(f):null;var v=Fc(r,i);if(!f){if(!v.length)return null;var h=v[v.length-1];return o(h.descriptor.id)}var g=Bf(v,function(x){return x.descriptor.id===f});g===-1&&Q(!1);var y=g-1;if(y<0)return null;var _=v[y];return o(_.descriptor.id)},di=function(e,t){return e.descriptor.droppableId===t.descriptor.id},Ky={point:Ue,value:0},ko={invisible:{},visible:{},all:[]},d5={displaced:ko,displacedBy:Ky,at:null},Ft=function(e,t){return function(r){return e<=r&&r<=t}},Qy=function(e){var t=Ft(e.top,e.bottom),r=Ft(e.left,e.right);return function(s){var i=t(s.top)&&t(s.bottom)&&r(s.left)&&r(s.right);if(i)return!0;var a=t(s.top)||t(s.bottom),c=r(s.left)||r(s.right),o=a&&c;if(o)return!0;var l=s.top<e.top&&s.bottom>e.bottom,f=s.left<e.left&&s.right>e.right,v=l&&f;if(v)return!0;var h=l&&c||f&&a;return h}},u5=function(e){var t=Ft(e.top,e.bottom),r=Ft(e.left,e.right);return function(s){var i=t(s.top)&&t(s.bottom)&&r(s.left)&&r(s.right);return i}},$f={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Yy={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},h5=function(e){return function(t){var r=Ft(t.top,t.bottom),s=Ft(t.left,t.right);return function(i){return e===$f?r(i.top)&&r(i.bottom):s(i.left)&&s(i.right)}}},f5=function(t,r){var s=r.frame?r.frame.scroll.diff.displacement:Ue;return aa(t,s)},p5=function(t,r,s){return r.subject.active?s(r.subject.active)(t):!1},m5=function(t,r,s){return s(r)(t)},Hf=function(t){var r=t.target,s=t.destination,i=t.viewport,a=t.withDroppableDisplacement,c=t.isVisibleThroughFrameFn,o=a?f5(r,s):r;return p5(o,s,c)&&m5(o,i,c)},g5=function(t){return Hf(ae({},t,{isVisibleThroughFrameFn:Qy}))},Xy=function(t){return Hf(ae({},t,{isVisibleThroughFrameFn:u5}))},v5=function(t){return Hf(ae({},t,{isVisibleThroughFrameFn:h5(t.destination.axis)}))},x5=function(t,r,s){if(typeof s=="boolean")return s;if(!r)return!0;var i=r.invisible,a=r.visible;if(i[t])return!1;var c=a[t];return c?c.shouldAnimate:!0};function y5(e,t){var r=e.page.marginBox,s={top:t.point.y,right:0,bottom:0,left:t.point.x};return Jt(If(r,s))}function jo(e){var t=e.afterDragging,r=e.destination,s=e.displacedBy,i=e.viewport,a=e.forceShouldAnimate,c=e.last;return t.reduce(function(l,f){var v=y5(f,s),h=f.descriptor.id;l.all.push(h);var g=g5({target:v,destination:r,viewport:i,withDroppableDisplacement:!0});if(!g)return l.invisible[f.descriptor.id]=!0,l;var y=x5(h,c,a),_={draggableId:h,shouldAnimate:y};return l.visible[h]=_,l},{all:[],visible:{},invisible:{}})}function b5(e,t){if(!e.length)return 0;var r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function yg(e){var t=e.insideDestination,r=e.inHomeList,s=e.displacedBy,i=e.destination,a=b5(t,{inHomeList:r});return{displaced:ko,displacedBy:s,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:a}}}}function ql(e){var t=e.draggable,r=e.insideDestination,s=e.destination,i=e.viewport,a=e.displacedBy,c=e.last,o=e.index,l=e.forceShouldAnimate,f=di(t,s);if(o==null)return yg({insideDestination:r,inHomeList:f,displacedBy:a,destination:s});var v=Cs(r,function(x){return x.descriptor.index===o});if(!v)return yg({insideDestination:r,inHomeList:f,displacedBy:a,destination:s});var h=Fc(t,r),g=r.indexOf(v),y=h.slice(g),_=jo({afterDragging:y,destination:s,displacedBy:a,last:c,viewport:i.frame,forceShouldAnimate:l});return{displaced:_,displacedBy:a,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:o}}}}function gs(e,t){return!!t.effected[e]}var _5=function(e){var t=e.isMovingForward,r=e.destination,s=e.draggables,i=e.combine,a=e.afterCritical;if(!r.isCombineEnabled)return null;var c=i.draggableId,o=s[c],l=o.descriptor.index,f=gs(c,a);return f?t?l:l-1:t?l+1:l},w5=function(e){var t=e.isMovingForward,r=e.isInHomeList,s=e.insideDestination,i=e.location;if(!s.length)return null;var a=i.index,c=t?a+1:a-1,o=s[0].descriptor.index,l=s[s.length-1].descriptor.index,f=r?l:l+1;return c<o||c>f?null:c},S5=function(e){var t=e.isMovingForward,r=e.isInHomeList,s=e.draggable,i=e.draggables,a=e.destination,c=e.insideDestination,o=e.previousImpact,l=e.viewport,f=e.afterCritical,v=o.at;if(v||Q(!1),v.type==="REORDER"){var h=w5({isMovingForward:t,isInHomeList:r,location:v.destination,insideDestination:c});return h==null?null:ql({draggable:s,insideDestination:c,destination:a,viewport:l,last:o.displaced,displacedBy:o.displacedBy,index:h})}var g=_5({isMovingForward:t,destination:a,displaced:o.displaced,draggables:i,combine:v.combine,afterCritical:f});return g==null?null:ql({draggable:s,insideDestination:c,destination:a,viewport:l,last:o.displaced,displacedBy:o.displacedBy,index:g})},C5=function(e){var t=e.displaced,r=e.afterCritical,s=e.combineWith,i=e.displacedBy,a=!!(t.visible[s]||t.invisible[s]);return gs(s,r)?a?Ue:li(i.point):a?i.point:Ue},k5=function(e){var t=e.afterCritical,r=e.impact,s=e.draggables,i=Bc(r);i||Q(!1);var a=i.draggableId,c=s[a].page.borderBox.center,o=C5({displaced:r.displaced,afterCritical:t,combineWith:a,displacedBy:r.displacedBy});return Ge(c,o)},Jy=function(t,r){return r.margin[t.start]+r.borderBox[t.size]/2},j5=function(t,r){return r.margin[t.end]+r.borderBox[t.size]/2},Uf=function(t,r,s){return r[t.crossAxisStart]+s.margin[t.crossAxisStart]+s.borderBox[t.crossAxisSize]/2},bg=function(t){var r=t.axis,s=t.moveRelativeTo,i=t.isMoving;return tn(r.line,s.marginBox[r.end]+Jy(r,i),Uf(r,s.marginBox,i))},_g=function(t){var r=t.axis,s=t.moveRelativeTo,i=t.isMoving;return tn(r.line,s.marginBox[r.start]-j5(r,i),Uf(r,s.marginBox,i))},N5=function(t){var r=t.axis,s=t.moveInto,i=t.isMoving;return tn(r.line,s.contentBox[r.start]+Jy(r,i),Uf(r,s.contentBox,i))},E5=function(e){var t=e.impact,r=e.draggable,s=e.draggables,i=e.droppable,a=e.afterCritical,c=ci(i.descriptor.id,s),o=r.page,l=i.axis;if(!c.length)return N5({axis:l,moveInto:i.page,isMoving:o});var f=t.displaced,v=t.displacedBy,h=f.all[0];if(h){var g=s[h];if(gs(h,a))return _g({axis:l,moveRelativeTo:g.page,isMoving:o});var y=Hl(g.page,v.point);return _g({axis:l,moveRelativeTo:y,isMoving:o})}var _=c[c.length-1];if(_.descriptor.id===r.descriptor.id)return o.borderBox.center;if(gs(_.descriptor.id,a)){var x=Hl(_.page,li(a.displacedBy.point));return bg({axis:l,moveRelativeTo:x,isMoving:o})}return bg({axis:l,moveRelativeTo:_.page,isMoving:o})},ch=function(e,t){var r=e.frame;return r?Ge(t,r.scroll.diff.displacement):t},D5=function(t){var r=t.impact,s=t.draggable,i=t.droppable,a=t.draggables,c=t.afterCritical,o=s.page.borderBox.center,l=r.at;return!i||!l?o:l.type==="REORDER"?E5({impact:r,draggable:s,draggables:a,droppable:i,afterCritical:c}):k5({impact:r,draggables:a,afterCritical:c})},$c=function(e){var t=D5(e),r=e.droppable,s=r?ch(r,t):t;return s},Zy=function(e,t){var r=bt(t,e.scroll.initial),s=li(r),i=Jt({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),a={frame:i,scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:s}}};return a};function wg(e,t){return e.map(function(r){return t[r]})}function P5(e,t){for(var r=0;r<t.length;r++){var s=t[r].visible[e];if(s)return s}return null}var R5=function(e){var t=e.impact,r=e.viewport,s=e.destination,i=e.draggables,a=e.maxScrollChange,c=Zy(r,Ge(r.scroll.current,a)),o=s.frame?Of(s,Ge(s.frame.scroll.current,a)):s,l=t.displaced,f=jo({afterDragging:wg(l.all,i),destination:s,displacedBy:t.displacedBy,viewport:c.frame,last:l,forceShouldAnimate:!1}),v=jo({afterDragging:wg(l.all,i),destination:o,displacedBy:t.displacedBy,viewport:r.frame,last:l,forceShouldAnimate:!1}),h={},g={},y=[l,f,v];l.all.forEach(function(x){var m=P5(x,y);if(m){g[x]=m;return}h[x]=!0});var _=ae({},t,{displaced:{all:l.all,invisible:h,visible:g}});return _},A5=function(e,t){return Ge(e.scroll.diff.displacement,t)},Wf=function(e){var t=e.pageBorderBoxCenter,r=e.draggable,s=e.viewport,i=A5(s,t),a=bt(i,r.page.borderBox.center);return Ge(r.client.borderBox.center,a)},eb=function(e){var t=e.draggable,r=e.destination,s=e.newPageBorderBoxCenter,i=e.viewport,a=e.withDroppableDisplacement,c=e.onlyOnMainAxis,o=c===void 0?!1:c,l=bt(s,t.page.borderBox.center),f=aa(t.page.borderBox,l),v={target:f,destination:r,withDroppableDisplacement:a,viewport:i};return o?v5(v):Xy(v)},T5=function(e){var t=e.isMovingForward,r=e.draggable,s=e.destination,i=e.draggables,a=e.previousImpact,c=e.viewport,o=e.previousPageBorderBoxCenter,l=e.previousClientSelection,f=e.afterCritical;if(!s.isEnabled)return null;var v=ci(s.descriptor.id,i),h=di(r,s),g=c5({isMovingForward:t,draggable:r,destination:s,insideDestination:v,previousImpact:a})||S5({isMovingForward:t,isInHomeList:h,draggable:r,draggables:i,destination:s,insideDestination:v,previousImpact:a,viewport:c,afterCritical:f});if(!g)return null;var y=$c({impact:g,draggable:r,droppable:s,draggables:i,afterCritical:f}),_=eb({draggable:r,destination:s,newPageBorderBoxCenter:y,viewport:c.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(_){var x=Wf({pageBorderBoxCenter:y,draggable:r,viewport:c});return{clientSelection:x,impact:g,scrollJumpRequest:null}}var m=bt(y,o),d=R5({impact:g,viewport:c,destination:s,draggables:i,maxScrollChange:m});return{clientSelection:l,impact:d,scrollJumpRequest:m}},tt=function(t){var r=t.subject.active;return r||Q(!1),r},L5=function(e){var t=e.isMovingForward,r=e.pageBorderBoxCenter,s=e.source,i=e.droppables,a=e.viewport,c=s.subject.active;if(!c)return null;var o=s.axis,l=Ft(c[o.start],c[o.end]),f=Oc(i).filter(function(h){return h!==s}).filter(function(h){return h.isEnabled}).filter(function(h){return!!h.subject.active}).filter(function(h){return Qy(a.frame)(tt(h))}).filter(function(h){var g=tt(h);return t?c[o.crossAxisEnd]<g[o.crossAxisEnd]:g[o.crossAxisStart]<c[o.crossAxisStart]}).filter(function(h){var g=tt(h),y=Ft(g[o.start],g[o.end]);return l(g[o.start])||l(g[o.end])||y(c[o.start])||y(c[o.end])}).sort(function(h,g){var y=tt(h)[o.crossAxisStart],_=tt(g)[o.crossAxisStart];return t?y-_:_-y}).filter(function(h,g,y){return tt(h)[o.crossAxisStart]===tt(y[0])[o.crossAxisStart]});if(!f.length)return null;if(f.length===1)return f[0];var v=f.filter(function(h){var g=Ft(tt(h)[o.start],tt(h)[o.end]);return g(r[o.line])});return v.length===1?v[0]:v.length>1?v.sort(function(h,g){return tt(h)[o.start]-tt(g)[o.start]})[0]:f.sort(function(h,g){var y=vg(r,xg(tt(h))),_=vg(r,xg(tt(g)));return y!==_?y-_:tt(h)[o.start]-tt(g)[o.start]})[0]},Sg=function(t,r){var s=t.page.borderBox.center;return gs(t.descriptor.id,r)?bt(s,r.displacedBy.point):s},I5=function(t,r){var s=t.page.borderBox;return gs(t.descriptor.id,r)?aa(s,li(r.displacedBy.point)):s},M5=function(e){var t=e.pageBorderBoxCenter,r=e.viewport,s=e.destination,i=e.insideDestination,a=e.afterCritical,c=i.filter(function(o){return Xy({target:I5(o,a),destination:s,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(o,l){var f=Co(t,ch(s,Sg(o,a))),v=Co(t,ch(s,Sg(l,a)));return f<v?-1:v<f?1:o.descriptor.index-l.descriptor.index});return c[0]||null},la=He(function(t,r){var s=r[t.line];return{value:s,point:tn(t.line,s)}}),O5=function(t,r,s){var i=t.axis;if(t.descriptor.mode==="virtual")return tn(i.line,r[i.line]);var a=t.subject.page.contentBox[i.size],c=ci(t.descriptor.id,s),o=c.reduce(function(v,h){return v+h.client.marginBox[i.size]},0),l=o+r[i.line],f=l-a;return f<=0?null:tn(i.line,f)},tb=function(t,r){return ae({},t,{scroll:ae({},t.scroll,{max:r})})},rb=function(t,r,s){var i=t.frame;di(r,t)&&Q(!1),t.subject.withPlaceholder&&Q(!1);var a=la(t.axis,r.displaceBy).point,c=O5(t,a,s),o={placeholderSize:a,increasedBy:c,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!i){var l=ei({page:t.subject.page,withPlaceholder:o,axis:t.axis,frame:t.frame});return ae({},t,{subject:l})}var f=c?Ge(i.scroll.max,c):i.scroll.max,v=tb(i,f),h=ei({page:t.subject.page,withPlaceholder:o,axis:t.axis,frame:v});return ae({},t,{subject:h,frame:v})},B5=function(t){var r=t.subject.withPlaceholder;r||Q(!1);var s=t.frame;if(!s){var i=ei({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return ae({},t,{subject:i})}var a=r.oldFrameMaxScroll;a||Q(!1);var c=tb(s,a),o=ei({page:t.subject.page,axis:t.axis,frame:c,withPlaceholder:null});return ae({},t,{subject:o,frame:c})},F5=function(e){var t=e.previousPageBorderBoxCenter,r=e.moveRelativeTo,s=e.insideDestination,i=e.draggable,a=e.draggables,c=e.destination,o=e.viewport,l=e.afterCritical;if(!r){if(s.length)return null;var f={displaced:ko,displacedBy:Ky,at:{type:"REORDER",destination:{droppableId:c.descriptor.id,index:0}}},v=$c({impact:f,draggable:i,droppable:c,draggables:a,afterCritical:l}),h=di(i,c)?c:rb(c,i,a),g=eb({draggable:i,destination:h,newPageBorderBoxCenter:v,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return g?f:null}var y=t[c.axis.line]<=r.page.borderBox.center[c.axis.line],_=function(){var m=r.descriptor.index;return r.descriptor.id===i.descriptor.id||y?m:m+1}(),x=la(c.axis,i.displaceBy);return ql({draggable:i,insideDestination:s,destination:c,viewport:o,displacedBy:x,last:ko,index:_})},$5=function(e){var t=e.isMovingForward,r=e.previousPageBorderBoxCenter,s=e.draggable,i=e.isOver,a=e.draggables,c=e.droppables,o=e.viewport,l=e.afterCritical,f=L5({isMovingForward:t,pageBorderBoxCenter:r,source:i,droppables:c,viewport:o});if(!f)return null;var v=ci(f.descriptor.id,a),h=M5({pageBorderBoxCenter:r,viewport:o,destination:f,insideDestination:v,afterCritical:l}),g=F5({previousPageBorderBoxCenter:r,destination:f,draggable:s,draggables:a,moveRelativeTo:h,insideDestination:v,viewport:o,afterCritical:l});if(!g)return null;var y=$c({impact:g,draggable:s,droppable:f,draggables:a,afterCritical:l}),_=Wf({pageBorderBoxCenter:y,draggable:s,viewport:o});return{clientSelection:_,impact:g,scrollJumpRequest:null}},wt=function(e){var t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null},H5=function(t,r){var s=wt(t);return s?r[s]:null},U5=function(e){var t=e.state,r=e.type,s=H5(t.impact,t.dimensions.droppables),i=!!s,a=t.dimensions.droppables[t.critical.droppable.id],c=s||a,o=c.axis.direction,l=o==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||o==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(l&&!i)return null;var f=r==="MOVE_DOWN"||r==="MOVE_RIGHT",v=t.dimensions.draggables[t.critical.draggable.id],h=t.current.page.borderBoxCenter,g=t.dimensions,y=g.draggables,_=g.droppables;return l?T5({isMovingForward:f,previousPageBorderBoxCenter:h,draggable:v,destination:c,draggables:y,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):$5({isMovingForward:f,previousPageBorderBoxCenter:h,draggable:v,isOver:c,draggables:y,droppables:_,viewport:t.viewport,afterCritical:t.afterCritical})};function Rs(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function sb(e){var t=Ft(e.top,e.bottom),r=Ft(e.left,e.right);return function(i){return t(i.y)&&r(i.x)}}function W5(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function z5(e){var t=e.pageBorderBox,r=e.draggable,s=e.candidates,i=r.page.borderBox.center,a=s.map(function(c){var o=c.axis,l=tn(c.axis.line,t.center[o.line],c.page.borderBox.center[o.crossAxisLine]);return{id:c.descriptor.id,distance:Co(i,l)}}).sort(function(c,o){return o.distance-c.distance});return a[0]?a[0].id:null}function V5(e){var t=e.pageBorderBox,r=e.draggable,s=e.droppables,i=Oc(s).filter(function(a){if(!a.isEnabled)return!1;var c=a.subject.active;if(!c||!W5(t,c))return!1;if(sb(c)(t.center))return!0;var o=a.axis,l=c.center[o.crossAxisLine],f=t[o.crossAxisStart],v=t[o.crossAxisEnd],h=Ft(c[o.crossAxisStart],c[o.crossAxisEnd]),g=h(f),y=h(v);return!g&&!y?!0:g?f<l:v>l});return i.length?i.length===1?i[0].descriptor.id:z5({pageBorderBox:t,draggable:r,candidates:i}):null}var nb=function(t,r){return Jt(aa(t,r))},q5=function(e,t){var r=e.frame;return r?nb(t,r.scroll.diff.value):t};function ib(e){var t=e.displaced,r=e.id;return!!(t.visible[r]||t.invisible[r])}function G5(e){var t=e.draggable,r=e.closest,s=e.inHomeList;return r?s&&r.descriptor.index>t.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var K5=function(e){var t=e.pageBorderBoxWithDroppableScroll,r=e.draggable,s=e.destination,i=e.insideDestination,a=e.last,c=e.viewport,o=e.afterCritical,l=s.axis,f=la(s.axis,r.displaceBy),v=f.value,h=t[l.start],g=t[l.end],y=Fc(r,i),_=Cs(y,function(m){var d=m.descriptor.id,u=m.page.borderBox.center[l.line],p=gs(d,o),b=ib({displaced:a,id:d});return p?b?g<=u:h<u-v:b?g<=u+v:h<u}),x=G5({draggable:r,closest:_,inHomeList:di(r,s)});return ql({draggable:r,insideDestination:i,destination:s,viewport:c,last:a,displacedBy:f,index:x})},Q5=4,Y5=function(e){var t=e.draggable,r=e.pageBorderBoxWithDroppableScroll,s=e.previousImpact,i=e.destination,a=e.insideDestination,c=e.afterCritical;if(!i.isCombineEnabled)return null;var o=i.axis,l=la(i.axis,t.displaceBy),f=l.value,v=r[o.start],h=r[o.end],g=Fc(t,a),y=Cs(g,function(x){var m=x.descriptor.id,d=x.page.borderBox,u=d[o.size],p=u/Q5,b=gs(m,c),S=ib({displaced:s.displaced,id:m});return b?S?h>d[o.start]+p&&h<d[o.end]-p:v>d[o.start]-f+p&&v<d[o.end]-f-p:S?h>d[o.start]+f+p&&h<d[o.end]+f-p:v>d[o.start]+p&&v<d[o.end]-p});if(!y)return null;var _={displacedBy:l,displaced:s.displaced,at:{type:"COMBINE",combine:{draggableId:y.descriptor.id,droppableId:i.descriptor.id}}};return _},ob=function(e){var t=e.pageOffset,r=e.draggable,s=e.draggables,i=e.droppables,a=e.previousImpact,c=e.viewport,o=e.afterCritical,l=nb(r.page.borderBox,t),f=V5({pageBorderBox:l,draggable:r,droppables:i});if(!f)return d5;var v=i[f],h=ci(v.descriptor.id,s),g=q5(v,l);return Y5({pageBorderBoxWithDroppableScroll:g,draggable:r,previousImpact:a,destination:v,insideDestination:h,afterCritical:o})||K5({pageBorderBoxWithDroppableScroll:g,draggable:r,destination:v,insideDestination:h,last:a.displaced,viewport:c,afterCritical:o})},zf=function(e,t){var r;return ae({},e,(r={},r[t.descriptor.id]=t,r))},X5=function(t){var r=t.previousImpact,s=t.impact,i=t.droppables,a=wt(r),c=wt(s);if(!a||a===c)return i;var o=i[a];if(!o.subject.withPlaceholder)return i;var l=B5(o);return zf(i,l)},J5=function(e){var t=e.draggable,r=e.draggables,s=e.droppables,i=e.previousImpact,a=e.impact,c=X5({previousImpact:i,impact:a,droppables:s}),o=wt(a);if(!o)return c;var l=s[o];if(di(t,l)||l.subject.withPlaceholder)return c;var f=rb(l,t,r);return zf(c,f)},Gi=function(e){var t=e.state,r=e.clientSelection,s=e.dimensions,i=e.viewport,a=e.impact,c=e.scrollJumpRequest,o=i||t.viewport,l=s||t.dimensions,f=r||t.current.client.selection,v=bt(f,t.initial.client.selection),h={offset:v,selection:f,borderBoxCenter:Ge(t.initial.client.borderBoxCenter,v)},g={selection:Ge(h.selection,o.scroll.current),borderBoxCenter:Ge(h.borderBoxCenter,o.scroll.current),offset:Ge(h.offset,o.scroll.diff.value)},y={client:h,page:g};if(t.phase==="COLLECTING")return ae({phase:"COLLECTING"},t,{dimensions:l,viewport:o,current:y});var _=l.draggables[t.critical.draggable.id],x=a||ob({pageOffset:g.offset,draggable:_,draggables:l.draggables,droppables:l.droppables,previousImpact:t.impact,viewport:o,afterCritical:t.afterCritical}),m=J5({draggable:_,impact:x,previousImpact:t.impact,draggables:l.draggables,droppables:l.droppables}),d=ae({},t,{current:y,dimensions:{draggables:l.draggables,droppables:m},impact:x,viewport:o,scrollJumpRequest:c||null,forceShouldAnimate:c?!1:null});return d};function Z5(e,t){return e.map(function(r){return t[r]})}var ab=function(e){var t=e.impact,r=e.viewport,s=e.draggables,i=e.destination,a=e.forceShouldAnimate,c=t.displaced,o=Z5(c.all,s),l=jo({afterDragging:o,destination:i,displacedBy:t.displacedBy,viewport:r.frame,forceShouldAnimate:a,last:c});return ae({},t,{displaced:l})},lb=function(e){var t=e.impact,r=e.draggable,s=e.droppable,i=e.draggables,a=e.viewport,c=e.afterCritical,o=$c({impact:t,draggable:r,draggables:i,droppable:s,afterCritical:c});return Wf({pageBorderBoxCenter:o,draggable:r,viewport:a})},cb=function(e){var t=e.state,r=e.dimensions,s=e.viewport;t.movementMode!=="SNAP"&&Q(!1);var i=t.impact,a=s||t.viewport,c=r||t.dimensions,o=c.draggables,l=c.droppables,f=o[t.critical.draggable.id],v=wt(i);v||Q(!1);var h=l[v],g=ab({impact:i,viewport:a,destination:h,draggables:o}),y=lb({impact:g,draggable:f,droppable:h,draggables:o,viewport:a,afterCritical:t.afterCritical});return Gi({impact:g,clientSelection:y,state:t,dimensions:c,viewport:a})},e4=function(e){return{index:e.index,droppableId:e.droppableId}},db=function(e){var t=e.draggable,r=e.home,s=e.draggables,i=e.viewport,a=la(r.axis,t.displaceBy),c=ci(r.descriptor.id,s),o=c.indexOf(t);o===-1&&Q(!1);var l=c.slice(o+1),f=l.reduce(function(y,_){return y[_.descriptor.id]=!0,y},{}),v={inVirtualList:r.descriptor.mode==="virtual",displacedBy:a,effected:f},h=jo({afterDragging:l,destination:r,displacedBy:a,last:null,viewport:i.frame,forceShouldAnimate:!1}),g={displaced:h,displacedBy:a,at:{type:"REORDER",destination:e4(t.descriptor)}};return{impact:g,afterCritical:v}},t4=function(e,t){return{draggables:e.draggables,droppables:zf(e.droppables,t)}},r4=function(e){var t=e.draggable,r=e.offset,s=e.initialWindowScroll,i=Hl(t.client,r),a=Ul(i,s),c=ae({},t,{placeholder:ae({},t.placeholder,{client:i}),client:i,page:a});return c},s4=function(e){var t=e.frame;return t||Q(!1),t},n4=function(e){var t=e.additions,r=e.updatedDroppables,s=e.viewport,i=s.scroll.diff.value;return t.map(function(a){var c=a.descriptor.droppableId,o=r[c],l=s4(o),f=l.scroll.diff.value,v=Ge(i,f),h=r4({draggable:a,offset:v,initialWindowScroll:s.scroll.initial});return h})},i4=function(e){var t=e.state,r=e.published,s=r.modified.map(function(p){var b=t.dimensions.droppables[p.droppableId],S=Of(b,p.scroll);return S}),i=ae({},t.dimensions.droppables,{},qy(s)),a=Gy(n4({additions:r.additions,updatedDroppables:i,viewport:t.viewport})),c=ae({},t.dimensions.draggables,{},a);r.removals.forEach(function(p){delete c[p]});var o={droppables:i,draggables:c},l=wt(t.impact),f=l?o.droppables[l]:null,v=o.draggables[t.critical.draggable.id],h=o.droppables[t.critical.droppable.id],g=db({draggable:v,home:h,draggables:c,viewport:t.viewport}),y=g.impact,_=g.afterCritical,x=f&&f.isCombineEnabled?t.impact:y,m=ob({pageOffset:t.current.page.offset,draggable:o.draggables[t.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:x,viewport:t.viewport,afterCritical:_}),d=ae({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:m,onLiftImpact:y,dimensions:o,afterCritical:_,forceShouldAnimate:!1});if(t.phase==="COLLECTING")return d;var u=ae({phase:"DROP_PENDING"},d,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1});return u},dh=function(t){return t.movementMode==="SNAP"},Ld=function(t,r,s){var i=t4(t.dimensions,r);return!dh(t)||s?Gi({state:t,dimensions:i}):cb({state:t,dimensions:i})};function Id(e){return e.isDragging&&e.movementMode==="SNAP"?ae({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var Cg={phase:"IDLE",completed:null,shouldFlush:!1},o4=function(e,t){if(e===void 0&&(e=Cg),t.type==="FLUSH")return ae({},Cg,{shouldFlush:!0});if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&Q(!1);var r=t.payload,s=r.critical,i=r.clientSelection,a=r.viewport,c=r.dimensions,o=r.movementMode,l=c.draggables[s.draggable.id],f=c.droppables[s.droppable.id],v={selection:i,borderBoxCenter:l.client.borderBox.center,offset:Ue},h={client:v,page:{selection:Ge(v.selection,a.scroll.initial),borderBoxCenter:Ge(v.selection,a.scroll.initial),offset:Ge(v.selection,a.scroll.diff.value)}},g=Oc(c.droppables).every(function(J){return!J.isFixedOnPage}),y=db({draggable:l,home:f,draggables:c.draggables,viewport:a}),_=y.impact,x=y.afterCritical,m={phase:"DRAGGING",isDragging:!0,critical:s,movementMode:o,dimensions:c,initial:h,current:h,isWindowScrollAllowed:g,impact:_,afterCritical:x,onLiftImpact:_,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null};return m}if(t.type==="COLLECTION_STARTING"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&Q(!1);var d=ae({phase:"COLLECTING"},e,{phase:"COLLECTING"});return d}if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||Q(!1),i4({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Rs(e)||Q(!1);var u=t.payload.client;return cs(u,e.current.client.selection)?e:Gi({state:e,clientSelection:u,impact:dh(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return Id(e);Rs(e)||Q(!1);var p=t.payload,b=p.id,S=p.newScroll,C=e.dimensions.droppables[b];if(!C)return e;var k=Of(C,S);return Ld(e,k,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Rs(e)||Q(!1);var w=t.payload,N=w.id,D=w.isEnabled,T=e.dimensions.droppables[N];T||Q(!1),T.isEnabled===D&&Q(!1);var I=ae({},T,{isEnabled:D});return Ld(e,I,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Rs(e)||Q(!1);var A=t.payload,O=A.id,P=A.isCombineEnabled,B=e.dimensions.droppables[O];B||Q(!1),B.isCombineEnabled===P&&Q(!1);var U=ae({},B,{isCombineEnabled:P});return Ld(e,U,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Rs(e)||Q(!1),e.isWindowScrollAllowed||Q(!1);var $=t.payload.newScroll;if(cs(e.viewport.scroll.current,$))return Id(e);var E=Zy(e.viewport,$);return dh(e)?cb({state:e,viewport:E}):Gi({state:e,viewport:E})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Rs(e))return e;var R=t.payload.maxScroll;if(cs(R,e.viewport.scroll.max))return e;var F=ae({},e.viewport,{scroll:ae({},e.viewport.scroll,{max:R})});return ae({phase:"DRAGGING"},e,{viewport:F})}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&Q(!1);var M=U5({state:e,type:t.type});return M?Gi({state:e,impact:M.impact,clientSelection:M.clientSelection,scrollJumpRequest:M.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){var z=t.payload.reason;e.phase!=="COLLECTING"&&Q(!1);var q=ae({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:z});return q}if(t.type==="DROP_ANIMATE"){var Y=t.payload,te=Y.completed,W=Y.dropDuration,L=Y.newHomeClientOffset;e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||Q(!1);var G={phase:"DROP_ANIMATING",completed:te,dropDuration:W,newHomeClientOffset:L,dimensions:e.dimensions};return G}if(t.type==="DROP_COMPLETE"){var V=t.payload.completed;return{phase:"IDLE",completed:V,shouldFlush:!1}}return e},a4=function(t){return{type:"BEFORE_INITIAL_CAPTURE",payload:t}},l4=function(t){return{type:"LIFT",payload:t}},c4=function(t){return{type:"INITIAL_PUBLISH",payload:t}},d4=function(t){return{type:"PUBLISH_WHILE_DRAGGING",payload:t}},u4=function(){return{type:"COLLECTION_STARTING",payload:null}},h4=function(t){return{type:"UPDATE_DROPPABLE_SCROLL",payload:t}},f4=function(t){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}},p4=function(t){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}},ub=function(t){return{type:"MOVE",payload:t}},m4=function(t){return{type:"MOVE_BY_WINDOW_SCROLL",payload:t}},g4=function(t){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}},v4=function(){return{type:"MOVE_UP",payload:null}},x4=function(){return{type:"MOVE_DOWN",payload:null}},y4=function(){return{type:"MOVE_RIGHT",payload:null}},b4=function(){return{type:"MOVE_LEFT",payload:null}},Vf=function(){return{type:"FLUSH",payload:null}},_4=function(t){return{type:"DROP_ANIMATE",payload:t}},qf=function(t){return{type:"DROP_COMPLETE",payload:t}},hb=function(t){return{type:"DROP",payload:t}},w4=function(t){return{type:"DROP_PENDING",payload:t}},fb=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},S4=function(e){return function(t){var r=t.getState,s=t.dispatch;return function(i){return function(a){if(a.type!=="LIFT"){i(a);return}var c=a.payload,o=c.id,l=c.clientSelection,f=c.movementMode,v=r();v.phase==="DROP_ANIMATING"&&s(qf({completed:v.completed})),r().phase!=="IDLE"&&Q(!1),s(Vf()),s(a4({draggableId:o,movementMode:f}));var h={shouldPublishImmediately:f==="SNAP"},g={draggableId:o,scrollOptions:h},y=e.startPublishing(g),_=y.critical,x=y.dimensions,m=y.viewport;s(c4({critical:_,dimensions:x,clientSelection:l,movementMode:f,viewport:m}))}}}},C4=function(e){return function(){return function(t){return function(r){r.type==="INITIAL_PUBLISH"&&e.dragging(),r.type==="DROP_ANIMATE"&&e.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&e.resting(),t(r)}}}},Gf={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},No={opacity:{drop:0,combining:.7},scale:{drop:.75}},Kf={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Ns=Kf.outOfTheWay+"s "+Gf.outOfTheWay,Ki={fluid:"opacity "+Ns,snap:"transform "+Ns+", opacity "+Ns,drop:function(t){var r=t+"s "+Gf.drop;return"transform "+r+", opacity "+r},outOfTheWay:"transform "+Ns,placeholder:"height "+Ns+", width "+Ns+", margin "+Ns},kg=function(t){return cs(t,Ue)?null:"translate("+t.x+"px, "+t.y+"px)"},uh={moveTo:kg,drop:function(t,r){var s=kg(t);return s?r?s+" scale("+No.scale.drop+")":s:null}},hh=Kf.minDropTime,pb=Kf.maxDropTime,k4=pb-hh,jg=1500,j4=.6,N4=function(e){var t=e.current,r=e.destination,s=e.reason,i=Co(t,r);if(i<=0)return hh;if(i>=jg)return pb;var a=i/jg,c=hh+k4*a,o=s==="CANCEL"?c*j4:c;return Number(o.toFixed(2))},E4=function(e){var t=e.impact,r=e.draggable,s=e.dimensions,i=e.viewport,a=e.afterCritical,c=s.draggables,o=s.droppables,l=wt(t),f=l?o[l]:null,v=o[r.descriptor.droppableId],h=lb({impact:t,draggable:r,draggables:c,afterCritical:a,droppable:f||v,viewport:i}),g=bt(h,r.client.borderBox.center);return g},D4=function(e){var t=e.draggables,r=e.reason,s=e.lastImpact,i=e.home,a=e.viewport,c=e.onLiftImpact;if(!s.at||r!=="DROP"){var o=ab({draggables:t,impact:c,destination:i,viewport:a,forceShouldAnimate:!0});return{impact:o,didDropInsideDroppable:!1}}if(s.at.type==="REORDER")return{impact:s,didDropInsideDroppable:!0};var l=ae({},s,{displaced:ko});return{impact:l,didDropInsideDroppable:!0}},P4=function(e){var t=e.getState,r=e.dispatch;return function(s){return function(i){if(i.type!=="DROP"){s(i);return}var a=t(),c=i.payload.reason;if(a.phase==="COLLECTING"){r(w4({reason:c}));return}if(a.phase!=="IDLE"){var o=a.phase==="DROP_PENDING"&&a.isWaiting;o&&Q(!1),a.phase==="DRAGGING"||a.phase==="DROP_PENDING"||Q(!1);var l=a.critical,f=a.dimensions,v=f.draggables[a.critical.draggable.id],h=D4({reason:c,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),g=h.impact,y=h.didDropInsideDroppable,_=y?Ff(g):null,x=y?Bc(g):null,m={index:l.draggable.index,droppableId:l.droppable.id},d={draggableId:v.descriptor.id,type:v.descriptor.type,source:m,reason:c,mode:a.movementMode,destination:_,combine:x},u=E4({impact:g,draggable:v,dimensions:f,viewport:a.viewport,afterCritical:a.afterCritical}),p={critical:a.critical,afterCritical:a.afterCritical,result:d,impact:g},b=!cs(a.current.client.offset,u)||!!d.combine;if(!b){r(qf({completed:p}));return}var S=N4({current:a.current.client.offset,destination:u,reason:c}),C={newHomeClientOffset:u,dropDuration:S,completed:p};r(_4(C))}}}},mb=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function R4(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(r){r.target!==window&&r.target!==window.document||e()}}}function A4(e){var t=e.onWindowScroll;function r(){t(mb())}var s=So(r),i=R4(s),a=ls;function c(){return a!==ls}function o(){c()&&Q(!1),a=Ot(window,[i])}function l(){c()||Q(!1),s.cancel(),a(),a=ls}return{start:o,stop:l,isActive:c}}var T4=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},L4=function(e){var t=A4({onWindowScroll:function(s){e.dispatch(m4({newScroll:s}))}});return function(r){return function(s){!t.isActive()&&s.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&T4(s)&&t.stop(),r(s)}}},I4=function(e){var t=!1,r=!1,s=setTimeout(function(){r=!0}),i=function(c){t||r||(t=!0,e(c),clearTimeout(s))};return i.wasCalled=function(){return t},i},M4=function(){var e=[],t=function(a){var c=Bf(e,function(f){return f.timerId===a});c===-1&&Q(!1);var o=e.splice(c,1),l=o[0];l.callback()},r=function(a){var c=setTimeout(function(){return t(c)}),o={timerId:c,callback:a};e.push(o)},s=function(){if(e.length){var a=[].concat(e);e.length=0,a.forEach(function(c){clearTimeout(c.timerId),c.callback()})}};return{add:r,flush:s}},O4=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.droppableId===r.droppableId&&t.index===r.index},B4=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.draggableId===r.draggableId&&t.droppableId===r.droppableId},F4=function(t,r){if(t===r)return!0;var s=t.draggable.id===r.draggable.id&&t.draggable.droppableId===r.draggable.droppableId&&t.draggable.type===r.draggable.type&&t.draggable.index===r.draggable.index,i=t.droppable.id===r.droppable.id&&t.droppable.type===r.droppable.type;return s&&i},Si=function(t,r){r()},Ma=function(t,r){return{draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:r}},Md=function(t,r,s,i){if(!t){s(i(r));return}var a=I4(s),c={announce:a};t(r,c),a.wasCalled()||s(i(r))},$4=function(e,t){var r=M4(),s=null,i=function(g,y){s&&Q(!1),Si("onBeforeCapture",function(){var _=e().onBeforeCapture;if(_){var x={draggableId:g,mode:y};_(x)}})},a=function(g,y){s&&Q(!1),Si("onBeforeDragStart",function(){var _=e().onBeforeDragStart;_&&_(Ma(g,y))})},c=function(g,y){s&&Q(!1);var _=Ma(g,y);s={mode:y,lastCritical:g,lastLocation:_.source,lastCombine:null},r.add(function(){Si("onDragStart",function(){return Md(e().onDragStart,_,t,sl.onDragStart)})})},o=function(g,y){var _=Ff(y),x=Bc(y);s||Q(!1);var m=!F4(g,s.lastCritical);m&&(s.lastCritical=g);var d=!O4(s.lastLocation,_);d&&(s.lastLocation=_);var u=!B4(s.lastCombine,x);if(u&&(s.lastCombine=x),!(!m&&!d&&!u)){var p=ae({},Ma(g,s.mode),{combine:x,destination:_});r.add(function(){Si("onDragUpdate",function(){return Md(e().onDragUpdate,p,t,sl.onDragUpdate)})})}},l=function(){s||Q(!1),r.flush()},f=function(g){s||Q(!1),s=null,Si("onDragEnd",function(){return Md(e().onDragEnd,g,t,sl.onDragEnd)})},v=function(){if(s){var g=ae({},Ma(s.lastCritical,s.mode),{combine:null,destination:null,reason:"CANCEL"});f(g)}};return{beforeCapture:i,beforeStart:a,start:c,update:o,flush:l,drop:f,abort:v}},H4=function(e,t){var r=$4(e,t);return function(s){return function(i){return function(a){if(a.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(a.payload.draggableId,a.payload.movementMode);return}if(a.type==="INITIAL_PUBLISH"){var c=a.payload.critical;r.beforeStart(c,a.payload.movementMode),i(a),r.start(c,a.payload.movementMode);return}if(a.type==="DROP_COMPLETE"){var o=a.payload.completed.result;r.flush(),i(a),r.drop(o);return}if(i(a),a.type==="FLUSH"){r.abort();return}var l=s.getState();l.phase==="DRAGGING"&&r.update(l.critical,l.impact)}}}},U4=function(e){return function(t){return function(r){if(r.type!=="DROP_ANIMATION_FINISHED"){t(r);return}var s=e.getState();s.phase!=="DROP_ANIMATING"&&Q(!1),e.dispatch(qf({completed:s.completed}))}}},W4=function(e){var t=null,r=null;function s(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return function(i){return function(a){if((a.type==="FLUSH"||a.type==="DROP_COMPLETE"||a.type==="DROP_ANIMATION_FINISHED")&&s(),i(a),a.type==="DROP_ANIMATE"){var c={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var l=e.getState();l.phase==="DROP_ANIMATING"&&e.dispatch(fb())}};r=requestAnimationFrame(function(){r=null,t=Ot(window,[c])})}}}},z4=function(e){return function(){return function(t){return function(r){(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&e.stopPublishing(),t(r)}}}},V4=function(e){var t=!1;return function(){return function(r){return function(s){if(s.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(s.payload.critical.draggable.id),r(s),e.tryRestoreFocusRecorded();return}if(r(s),!!t){if(s.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(s.type==="DROP_COMPLETE"){t=!1;var i=s.payload.completed.result;i.combine&&e.tryShiftRecord(i.draggableId,i.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}},q4=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},G4=function(e){return function(t){return function(r){return function(s){if(q4(s)){e.stop(),r(s);return}if(s.type==="INITIAL_PUBLISH"){r(s);var i=t.getState();i.phase!=="DRAGGING"&&Q(!1),e.start(i);return}r(s),e.scroll(t.getState())}}}},K4=function(e){return function(t){return function(r){if(t(r),r.type==="PUBLISH_WHILE_DRAGGING"){var s=e.getState();s.phase==="DROP_PENDING"&&(s.isWaiting||e.dispatch(hb({reason:s.reason})))}}}},Q4=_y,Y4=function(e){var t=e.dimensionMarshal,r=e.focusMarshal,s=e.styleMarshal,i=e.getResponders,a=e.announce,c=e.autoScroller;return by(o4,Q4(IN(C4(s),z4(t),S4(t),P4,U4,W4,K4,G4(c),L4,V4(r),H4(i,a))))},Od=function(){return{additions:{},removals:{},modified:{}}};function X4(e){var t=e.registry,r=e.callbacks,s=Od(),i=null,a=function(){i||(r.collectionStarting(),i=requestAnimationFrame(function(){i=null;var v=s,h=v.additions,g=v.removals,y=v.modified,_=Object.keys(h).map(function(d){return t.draggable.getById(d).getDimension(Ue)}).sort(function(d,u){return d.descriptor.index-u.descriptor.index}),x=Object.keys(y).map(function(d){var u=t.droppable.getById(d),p=u.callbacks.getScrollWhileDragging();return{droppableId:d,scroll:p}}),m={additions:_,removals:Object.keys(g),modified:x};s=Od(),r.publish(m)}))},c=function(v){var h=v.descriptor.id;s.additions[h]=v,s.modified[v.descriptor.droppableId]=!0,s.removals[h]&&delete s.removals[h],a()},o=function(v){var h=v.descriptor;s.removals[h.id]=!0,s.modified[h.droppableId]=!0,s.additions[h.id]&&delete s.additions[h.id],a()},l=function(){i&&(cancelAnimationFrame(i),i=null,s=Od())};return{add:c,remove:o,stop:l}}var gb=function(e){var t=e.scrollHeight,r=e.scrollWidth,s=e.height,i=e.width,a=bt({x:r,y:t},{x:i,y:s}),c={x:Math.max(0,a.x),y:Math.max(0,a.y)};return c},vb=function(){var e=document.documentElement;return e||Q(!1),e},xb=function(){var e=vb(),t=gb({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight});return t},J4=function(){var e=mb(),t=xb(),r=e.y,s=e.x,i=vb(),a=i.clientWidth,c=i.clientHeight,o=s+a,l=r+c,f=Jt({top:r,left:s,right:o,bottom:l}),v={frame:f,scroll:{initial:e,current:e,max:t,diff:{value:Ue,displacement:Ue}}};return v},Z4=function(e){var t=e.critical,r=e.scrollOptions,s=e.registry,i=J4(),a=i.scroll.current,c=t.droppable,o=s.droppable.getAllByType(c.type).map(function(h){return h.callbacks.getDimensionAndWatchScroll(a,r)}),l=s.draggable.getAllByType(t.draggable.type).map(function(h){return h.getDimension(a)}),f={draggables:Gy(l),droppables:qy(o)},v={dimensions:f,critical:t,viewport:i};return v};function Ng(e,t,r){if(r.descriptor.id===t.id||r.descriptor.type!==t.type)return!1;var s=e.droppable.getById(r.descriptor.droppableId);return s.descriptor.mode==="virtual"}var e3=function(e,t){var r=null,s=X4({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),i=function(y,_){e.droppable.exists(y)||Q(!1),r&&t.updateDroppableIsEnabled({id:y,isEnabled:_})},a=function(y,_){r&&(e.droppable.exists(y)||Q(!1),t.updateDroppableIsCombineEnabled({id:y,isCombineEnabled:_}))},c=function(y,_){r&&(e.droppable.exists(y)||Q(!1),t.updateDroppableScroll({id:y,newScroll:_}))},o=function(y,_){r&&e.droppable.getById(y).callbacks.scroll(_)},l=function(){if(r){s.stop();var y=r.critical.droppable;e.droppable.getAllByType(y.type).forEach(function(_){return _.callbacks.dragStopped()}),r.unsubscribe(),r=null}},f=function(y){r||Q(!1);var _=r.critical.draggable;y.type==="ADDITION"&&Ng(e,_,y.value)&&s.add(y.value),y.type==="REMOVAL"&&Ng(e,_,y.value)&&s.remove(y.value)},v=function(y){r&&Q(!1);var _=e.draggable.getById(y.draggableId),x=e.droppable.getById(_.descriptor.droppableId),m={draggable:_.descriptor,droppable:x.descriptor},d=e.subscribe(f);return r={critical:m,unsubscribe:d},Z4({critical:m,registry:e,scrollOptions:y.scrollOptions})},h={updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:a,scrollDroppable:o,updateDroppableScroll:c,startPublishing:v,stopPublishing:l};return h},yb=function(e,t){return e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP"},t3=function(e){window.scrollBy(e.x,e.y)},r3=He(function(e){return Oc(e).filter(function(t){return!(!t.isEnabled||!t.frame)})}),s3=function(t,r){var s=Cs(r3(r),function(i){return i.frame||Q(!1),sb(i.frame.pageMarginBox)(t)});return s},n3=function(e){var t=e.center,r=e.destination,s=e.droppables;if(r){var i=s[r];return i.frame?i:null}var a=s3(t,s);return a},ds={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(t){return Math.pow(t,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},i3=function(e,t){var r=e[t.size]*ds.startFromPercentage,s=e[t.size]*ds.maxScrollAtPercentage,i={startScrollingFrom:r,maxScrollValueAt:s};return i},bb=function(e){var t=e.startOfRange,r=e.endOfRange,s=e.current,i=r-t;if(i===0)return 0;var a=s-t,c=a/i;return c},Qf=1,o3=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return ds.maxPixelScroll;if(e===t.startScrollingFrom)return Qf;var r=bb({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),s=1-r,i=ds.maxPixelScroll*ds.ease(s);return Math.ceil(i)},Eg=ds.durationDampening.accelerateAt,Dg=ds.durationDampening.stopDampeningAt,a3=function(e,t){var r=t,s=Dg,i=Date.now(),a=i-r;if(a>=Dg)return e;if(a<Eg)return Qf;var c=bb({startOfRange:Eg,endOfRange:s,current:a}),o=e*ds.ease(c);return Math.ceil(o)},Pg=function(e){var t=e.distanceToEdge,r=e.thresholds,s=e.dragStartTime,i=e.shouldUseTimeDampening,a=o3(t,r);return a===0?0:i?Math.max(a3(a,s),Qf):a},Rg=function(e){var t=e.container,r=e.distanceToEdges,s=e.dragStartTime,i=e.axis,a=e.shouldUseTimeDampening,c=i3(t,i),o=r[i.end]<r[i.start];return o?Pg({distanceToEdge:r[i.end],thresholds:c,dragStartTime:s,shouldUseTimeDampening:a}):-1*Pg({distanceToEdge:r[i.start],thresholds:c,dragStartTime:s,shouldUseTimeDampening:a})},l3=function(e){var t=e.container,r=e.subject,s=e.proposedScroll,i=r.height>t.height,a=r.width>t.width;return!a&&!i?s:a&&i?null:{x:a?0:s.x,y:i?0:s.y}},c3=zy(function(e){return e===0?0:e}),_b=function(e){var t=e.dragStartTime,r=e.container,s=e.subject,i=e.center,a=e.shouldUseTimeDampening,c={top:i.y-r.top,right:r.right-i.x,bottom:r.bottom-i.y,left:i.x-r.left},o=Rg({container:r,distanceToEdges:c,dragStartTime:t,axis:$f,shouldUseTimeDampening:a}),l=Rg({container:r,distanceToEdges:c,dragStartTime:t,axis:Yy,shouldUseTimeDampening:a}),f=c3({x:l,y:o});if(cs(f,Ue))return null;var v=l3({container:r,subject:s,proposedScroll:f});return v?cs(v,Ue)?null:v:null},d3=zy(function(e){return e===0?0:e>0?1:-1}),Yf=function(){var e=function(r,s){return r<0?r:r>s?r-s:0};return function(t){var r=t.current,s=t.max,i=t.change,a=Ge(r,i),c={x:e(a.x,s.x),y:e(a.y,s.y)};return cs(c,Ue)?null:c}}(),wb=function(t){var r=t.max,s=t.current,i=t.change,a={x:Math.max(s.x,r.x),y:Math.max(s.y,r.y)},c=d3(i),o=Yf({max:a,current:s,change:c});return!o||c.x!==0&&o.x===0||c.y!==0&&o.y===0},Xf=function(t,r){return wb({current:t.scroll.current,max:t.scroll.max,change:r})},u3=function(t,r){if(!Xf(t,r))return null;var s=t.scroll.max,i=t.scroll.current;return Yf({current:i,max:s,change:r})},Jf=function(t,r){var s=t.frame;return s?wb({current:s.scroll.current,max:s.scroll.max,change:r}):!1},h3=function(t,r){var s=t.frame;return!s||!Jf(t,r)?null:Yf({current:s.scroll.current,max:s.scroll.max,change:r})},f3=function(e){var t=e.viewport,r=e.subject,s=e.center,i=e.dragStartTime,a=e.shouldUseTimeDampening,c=_b({dragStartTime:i,container:t.frame,subject:r,center:s,shouldUseTimeDampening:a});return c&&Xf(t,c)?c:null},p3=function(e){var t=e.droppable,r=e.subject,s=e.center,i=e.dragStartTime,a=e.shouldUseTimeDampening,c=t.frame;if(!c)return null;var o=_b({dragStartTime:i,container:c.pageMarginBox,subject:r,center:s,shouldUseTimeDampening:a});return o&&Jf(t,o)?o:null},Ag=function(e){var t=e.state,r=e.dragStartTime,s=e.shouldUseTimeDampening,i=e.scrollWindow,a=e.scrollDroppable,c=t.current.page.borderBoxCenter,o=t.dimensions.draggables[t.critical.draggable.id],l=o.page.marginBox;if(t.isWindowScrollAllowed){var f=t.viewport,v=f3({dragStartTime:r,viewport:f,subject:l,center:c,shouldUseTimeDampening:s});if(v){i(v);return}}var h=n3({center:c,destination:wt(t.impact),droppables:t.dimensions.droppables});if(h){var g=p3({dragStartTime:r,droppable:h,subject:l,center:c,shouldUseTimeDampening:s});g&&a(h.descriptor.id,g)}},m3=function(e){var t=e.scrollWindow,r=e.scrollDroppable,s=So(t),i=So(r),a=null,c=function(v){a||Q(!1);var h=a,g=h.shouldUseTimeDampening,y=h.dragStartTime;Ag({state:v,scrollWindow:s,scrollDroppable:i,dragStartTime:y,shouldUseTimeDampening:g})},o=function(v){a&&Q(!1);var h=Date.now(),g=!1,y=function(){g=!0};Ag({state:v,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:y,scrollDroppable:y}),a={dragStartTime:h,shouldUseTimeDampening:g},g&&c(v)},l=function(){a&&(s.cancel(),i.cancel(),a=null)};return{start:o,stop:l,scroll:c}},g3=function(e){var t=e.move,r=e.scrollDroppable,s=e.scrollWindow,i=function(f,v){var h=Ge(f.current.client.selection,v);t({client:h})},a=function(f,v){if(!Jf(f,v))return v;var h=h3(f,v);if(!h)return r(f.descriptor.id,v),null;var g=bt(v,h);r(f.descriptor.id,g);var y=bt(v,g);return y},c=function(f,v,h){if(!f||!Xf(v,h))return h;var g=u3(v,h);if(!g)return s(h),null;var y=bt(h,g);s(y);var _=bt(h,y);return _},o=function(f){var v=f.scrollJumpRequest;if(v){var h=wt(f.impact);h||Q(!1);var g=a(f.dimensions.droppables[h],v);if(g){var y=f.viewport,_=c(f.isWindowScrollAllowed,y,g);_&&i(f,_)}}};return o},v3=function(e){var t=e.scrollDroppable,r=e.scrollWindow,s=e.move,i=m3({scrollWindow:r,scrollDroppable:t}),a=g3({move:s,scrollWindow:r,scrollDroppable:t}),c=function(f){if(f.phase==="DRAGGING"){if(f.movementMode==="FLUID"){i.scroll(f);return}f.scrollJumpRequest&&a(f)}},o={scroll:c,start:i.start,stop:i.stop};return o},ti="data-rbd",ri=function(){var e=ti+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),fh=function(){var e=ti+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),x3=function(){var e=ti+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Tg={contextId:ti+"-scroll-container-context-id"},y3=function(t){return function(r){return"["+r+'="'+t+'"]'}},Ci=function(t,r){return t.map(function(s){var i=s.styles[r];return i?s.selector+" { "+i+" }":""}).join(" ")},b3="pointer-events: none;",_3=function(e){var t=y3(e),r=function(){var o=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(ri.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:o,dragging:b3,dropAnimating:o}}}(),s=function(){var o=`
      transition: `+Ki.outOfTheWay+`;
    `;return{selector:t(fh.contextId),styles:{dragging:o,dropAnimating:o,userCancel:o}}}(),i={selector:t(x3.contextId),styles:{always:"overflow-anchor: none;"}},a={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},c=[s,r,i,a];return{always:Ci(c,"always"),resting:Ci(c,"resting"),dragging:Ci(c,"dragging"),dropAnimating:Ci(c,"dropAnimating"),userCancel:Ci(c,"userCancel")}},St=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?j.useLayoutEffect:j.useEffect,Bd=function(){var t=document.querySelector("head");return t||Q(!1),t},Lg=function(t){var r=document.createElement("style");return t&&r.setAttribute("nonce",t),r.type="text/css",r};function w3(e,t){var r=pe(function(){return _3(e)},[e]),s=j.useRef(null),i=j.useRef(null),a=ie(He(function(h){var g=i.current;g||Q(!1),g.textContent=h}),[]),c=ie(function(h){var g=s.current;g||Q(!1),g.textContent=h},[]);St(function(){!s.current&&!i.current||Q(!1);var h=Lg(t),g=Lg(t);return s.current=h,i.current=g,h.setAttribute(ti+"-always",e),g.setAttribute(ti+"-dynamic",e),Bd().appendChild(h),Bd().appendChild(g),c(r.always),a(r.resting),function(){var y=function(x){var m=x.current;m||Q(!1),Bd().removeChild(m),x.current=null};y(s),y(i)}},[t,c,a,r.always,r.resting,e]);var o=ie(function(){return a(r.dragging)},[a,r.dragging]),l=ie(function(h){if(h==="DROP"){a(r.dropAnimating);return}a(r.userCancel)},[a,r.dropAnimating,r.userCancel]),f=ie(function(){i.current&&a(r.resting)},[a,r.resting]),v=pe(function(){return{dragging:o,dropping:l,resting:f}},[o,l,f]);return v}var Sb=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function Hc(e){return e instanceof Sb(e).HTMLElement}function S3(e,t){var r="["+ri.contextId+'="'+e+'"]',s=Vy(document.querySelectorAll(r));if(!s.length)return null;var i=Cs(s,function(a){return a.getAttribute(ri.draggableId)===t});return!i||!Hc(i)?null:i}function C3(e){var t=j.useRef({}),r=j.useRef(null),s=j.useRef(null),i=j.useRef(!1),a=ie(function(g,y){var _={id:g,focus:y};return t.current[g]=_,function(){var m=t.current,d=m[g];d!==_&&delete m[g]}},[]),c=ie(function(g){var y=S3(e,g);y&&y!==document.activeElement&&y.focus()},[e]),o=ie(function(g,y){r.current===g&&(r.current=y)},[]),l=ie(function(){s.current||i.current&&(s.current=requestAnimationFrame(function(){s.current=null;var g=r.current;g&&c(g)}))},[c]),f=ie(function(g){r.current=null;var y=document.activeElement;y&&y.getAttribute(ri.draggableId)===g&&(r.current=g)},[]);St(function(){return i.current=!0,function(){i.current=!1;var g=s.current;g&&cancelAnimationFrame(g)}},[]);var v=pe(function(){return{register:a,tryRecordFocus:f,tryRestoreFocusRecorded:l,tryShiftRecord:o}},[a,f,l,o]);return v}function k3(){var e={draggables:{},droppables:{}},t=[];function r(h){return t.push(h),function(){var y=t.indexOf(h);y!==-1&&t.splice(y,1)}}function s(h){t.length&&t.forEach(function(g){return g(h)})}function i(h){return e.draggables[h]||null}function a(h){var g=i(h);return g||Q(!1),g}var c={register:function(g){e.draggables[g.descriptor.id]=g,s({type:"ADDITION",value:g})},update:function(g,y){var _=e.draggables[y.descriptor.id];_&&_.uniqueId===g.uniqueId&&(delete e.draggables[y.descriptor.id],e.draggables[g.descriptor.id]=g)},unregister:function(g){var y=g.descriptor.id,_=i(y);_&&g.uniqueId===_.uniqueId&&(delete e.draggables[y],s({type:"REMOVAL",value:g}))},getById:a,findById:i,exists:function(g){return!!i(g)},getAllByType:function(g){return Vl(e.draggables).filter(function(y){return y.descriptor.type===g})}};function o(h){return e.droppables[h]||null}function l(h){var g=o(h);return g||Q(!1),g}var f={register:function(g){e.droppables[g.descriptor.id]=g},unregister:function(g){var y=o(g.descriptor.id);y&&g.uniqueId===y.uniqueId&&delete e.droppables[g.descriptor.id]},getById:l,findById:o,exists:function(g){return!!o(g)},getAllByType:function(g){return Vl(e.droppables).filter(function(y){return y.descriptor.type===g})}};function v(){e.draggables={},e.droppables={},t.length=0}return{draggable:c,droppable:f,subscribe:r,clean:v}}function j3(){var e=pe(k3,[]);return j.useEffect(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}var Zf=oe.createContext(null),Gl=function(){var e=document.body;return e||Q(!1),e},N3={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},E3=function(t){return"rbd-announcement-"+t};function D3(e){var t=pe(function(){return E3(e)},[e]),r=j.useRef(null);j.useEffect(function(){var a=document.createElement("div");return r.current=a,a.id=t,a.setAttribute("aria-live","assertive"),a.setAttribute("aria-atomic","true"),ae(a.style,N3),Gl().appendChild(a),function(){setTimeout(function(){var l=Gl();l.contains(a)&&l.removeChild(a),a===r.current&&(r.current=null)})}},[t]);var s=ie(function(i){var a=r.current;if(a){a.textContent=i;return}},[]);return s}var P3=0,R3={separator:"::"};function ep(e,t){return t===void 0&&(t=R3),pe(function(){return""+e+t.separator+P3++},[t.separator,e])}function A3(e){var t=e.contextId,r=e.uniqueId;return"rbd-hidden-text-"+t+"-"+r}function T3(e){var t=e.contextId,r=e.text,s=ep("hidden-text",{separator:"-"}),i=pe(function(){return A3({contextId:t,uniqueId:s})},[s,t]);return j.useEffect(function(){var c=document.createElement("div");return c.id=i,c.textContent=r,c.style.display="none",Gl().appendChild(c),function(){var l=Gl();l.contains(c)&&l.removeChild(c)}},[i,r]),i}var Uc=oe.createContext(null);function Cb(e){var t=j.useRef(e);return j.useEffect(function(){t.current=e}),t}function L3(){var e=null;function t(){return!!e}function r(c){return c===e}function s(c){e&&Q(!1);var o={abandon:c};return e=o,o}function i(){e||Q(!1),e=null}function a(){e&&(e.abandon(),i())}return{isClaimed:t,isActive:r,claim:s,release:i,tryAbandon:a}}var I3=9,M3=13,tp=27,kb=32,O3=33,B3=34,F3=35,$3=36,H3=37,U3=38,W3=39,z3=40,Oa,V3=(Oa={},Oa[M3]=!0,Oa[I3]=!0,Oa),jb=function(e){V3[e.keyCode]&&e.preventDefault()},Wc=function(){var e="visibilitychange";if(typeof document>"u")return e;var t=[e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],r=Cs(t,function(s){return"on"+s in document});return r||e}(),Nb=0,Ig=5;function q3(e,t){return Math.abs(t.x-e.x)>=Ig||Math.abs(t.y-e.y)>=Ig}var Mg={type:"IDLE"};function G3(e){var t=e.cancel,r=e.completed,s=e.getPhase,i=e.setPhase;return[{eventName:"mousemove",fn:function(c){var o=c.button,l=c.clientX,f=c.clientY;if(o===Nb){var v={x:l,y:f},h=s();if(h.type==="DRAGGING"){c.preventDefault(),h.actions.move(v);return}h.type!=="PENDING"&&Q(!1);var g=h.point;if(q3(g,v)){c.preventDefault();var y=h.actions.fluidLift(v);i({type:"DRAGGING",actions:y})}}}},{eventName:"mouseup",fn:function(c){var o=s();if(o.type!=="DRAGGING"){t();return}c.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:function(c){s().type==="DRAGGING"&&c.preventDefault(),t()}},{eventName:"keydown",fn:function(c){var o=s();if(o.type==="PENDING"){t();return}if(c.keyCode===tp){c.preventDefault(),t();return}jb(c)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){s().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:function(c){var o=s();if(o.type==="IDLE"&&Q(!1),o.actions.shouldRespectForcePress()){t();return}c.preventDefault()}},{eventName:Wc,fn:t}]}function K3(e){var t=j.useRef(Mg),r=j.useRef(ls),s=pe(function(){return{eventName:"mousedown",fn:function(h){if(!h.defaultPrevented&&h.button===Nb&&!(h.ctrlKey||h.metaKey||h.shiftKey||h.altKey)){var g=e.findClosestDraggableId(h);if(g){var y=e.tryGetLock(g,c,{sourceEvent:h});if(y){h.preventDefault();var _={x:h.clientX,y:h.clientY};r.current(),f(y,_)}}}}}},[e]),i=pe(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(h){if(!h.defaultPrevented){var g=e.findClosestDraggableId(h);if(g){var y=e.findOptionsForDraggable(g);y&&(y.shouldRespectForcePress||e.canGetLock(g)&&h.preventDefault())}}}}},[e]),a=ie(function(){var h={passive:!1,capture:!0};r.current=Ot(window,[i,s],h)},[i,s]),c=ie(function(){var v=t.current;v.type!=="IDLE"&&(t.current=Mg,r.current(),a())},[a]),o=ie(function(){var v=t.current;c(),v.type==="DRAGGING"&&v.actions.cancel({shouldBlockNextClick:!0}),v.type==="PENDING"&&v.actions.abort()},[c]),l=ie(function(){var h={capture:!0,passive:!1},g=G3({cancel:o,completed:c,getPhase:function(){return t.current},setPhase:function(_){t.current=_}});r.current=Ot(window,g,h)},[o,c]),f=ie(function(h,g){t.current.type!=="IDLE"&&Q(!1),t.current={type:"PENDING",point:g,actions:h},l()},[l]);St(function(){return a(),function(){r.current()}},[a])}var ln;function Q3(){}var Y3=(ln={},ln[B3]=!0,ln[O3]=!0,ln[$3]=!0,ln[F3]=!0,ln);function X3(e,t){function r(){t(),e.cancel()}function s(){t(),e.drop()}return[{eventName:"keydown",fn:function(a){if(a.keyCode===tp){a.preventDefault(),r();return}if(a.keyCode===kb){a.preventDefault(),s();return}if(a.keyCode===z3){a.preventDefault(),e.moveDown();return}if(a.keyCode===U3){a.preventDefault(),e.moveUp();return}if(a.keyCode===W3){a.preventDefault(),e.moveRight();return}if(a.keyCode===H3){a.preventDefault(),e.moveLeft();return}if(Y3[a.keyCode]){a.preventDefault();return}jb(a)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:Wc,fn:r}]}function J3(e){var t=j.useRef(Q3),r=pe(function(){return{eventName:"keydown",fn:function(a){if(a.defaultPrevented||a.keyCode!==kb)return;var c=e.findClosestDraggableId(a);if(!c)return;var o=e.tryGetLock(c,v,{sourceEvent:a});if(!o)return;a.preventDefault();var l=!0,f=o.snapLift();t.current();function v(){l||Q(!1),l=!1,t.current(),s()}t.current=Ot(window,X3(f,v),{capture:!0,passive:!1})}}},[e]),s=ie(function(){var a={passive:!1,capture:!0};t.current=Ot(window,[r],a)},[r]);St(function(){return s(),function(){t.current()}},[s])}var Fd={type:"IDLE"},Z3=120,eD=.15;function tD(e){var t=e.cancel,r=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(i){i.preventDefault()}},{eventName:"keydown",fn:function(i){if(r().type!=="DRAGGING"){t();return}i.keyCode===tp&&i.preventDefault(),t()}},{eventName:Wc,fn:t}]}function rD(e){var t=e.cancel,r=e.completed,s=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(a){var c=s();if(c.type!=="DRAGGING"){t();return}c.hasMoved=!0;var o=a.touches[0],l=o.clientX,f=o.clientY,v={x:l,y:f};a.preventDefault(),c.actions.move(v)}},{eventName:"touchend",fn:function(a){var c=s();if(c.type!=="DRAGGING"){t();return}a.preventDefault(),c.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:function(a){if(s().type!=="DRAGGING"){t();return}a.preventDefault(),t()}},{eventName:"touchforcechange",fn:function(a){var c=s();c.type==="IDLE"&&Q(!1);var o=a.touches[0];if(o){var l=o.force>=eD;if(l){var f=c.actions.shouldRespectForcePress();if(c.type==="PENDING"){f&&t();return}if(f){if(c.hasMoved){a.preventDefault();return}t();return}a.preventDefault()}}}},{eventName:Wc,fn:t}]}function sD(e){var t=j.useRef(Fd),r=j.useRef(ls),s=ie(function(){return t.current},[]),i=ie(function(y){t.current=y},[]),a=pe(function(){return{eventName:"touchstart",fn:function(y){if(!y.defaultPrevented){var _=e.findClosestDraggableId(y);if(_){var x=e.tryGetLock(_,o,{sourceEvent:y});if(x){var m=y.touches[0],d=m.clientX,u=m.clientY,p={x:d,y:u};r.current(),h(x,p)}}}}}},[e]),c=ie(function(){var y={capture:!0,passive:!1};r.current=Ot(window,[a],y)},[a]),o=ie(function(){var g=t.current;g.type!=="IDLE"&&(g.type==="PENDING"&&clearTimeout(g.longPressTimerId),i(Fd),r.current(),c())},[c,i]),l=ie(function(){var g=t.current;o(),g.type==="DRAGGING"&&g.actions.cancel({shouldBlockNextClick:!0}),g.type==="PENDING"&&g.actions.abort()},[o]),f=ie(function(){var y={capture:!0,passive:!1},_={cancel:l,completed:o,getPhase:s},x=Ot(window,rD(_),y),m=Ot(window,tD(_),y);r.current=function(){x(),m()}},[l,s,o]),v=ie(function(){var y=s();y.type!=="PENDING"&&Q(!1);var _=y.actions.fluidLift(y.point);i({type:"DRAGGING",actions:_,hasMoved:!1})},[s,i]),h=ie(function(y,_){s().type!=="IDLE"&&Q(!1);var x=setTimeout(v,Z3);i({type:"PENDING",point:_,actions:y,longPressTimerId:x}),f()},[f,s,i,v]);St(function(){return c(),function(){r.current();var _=s();_.type==="PENDING"&&(clearTimeout(_.longPressTimerId),i(Fd))}},[s,c,i]),St(function(){var y=Ot(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return y},[])}var nD={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function Eb(e,t){if(t==null)return!1;var r=!!nD[t.tagName.toLowerCase()];if(r)return!0;var s=t.getAttribute("contenteditable");return s==="true"||s===""?!0:t===e?!1:Eb(e,t.parentElement)}function iD(e,t){var r=t.target;return Hc(r)?Eb(e,r):!1}var oD=function(e){return Jt(e.getBoundingClientRect()).center};function aD(e){return e instanceof Sb(e).Element}var lD=function(){var e="matches";if(typeof document>"u")return e;var t=[e,"msMatchesSelector","webkitMatchesSelector"],r=Cs(t,function(s){return s in Element.prototype});return r||e}();function Db(e,t){return e==null?null:e[lD](t)?e:Db(e.parentElement,t)}function cD(e,t){return e.closest?e.closest(t):Db(e,t)}function dD(e){return"["+ri.contextId+'="'+e+'"]'}function uD(e,t){var r=t.target;if(!aD(r))return null;var s=dD(e),i=cD(r,s);return!i||!Hc(i)?null:i}function hD(e,t){var r=uD(e,t);return r?r.getAttribute(ri.draggableId):null}function fD(e,t){var r="["+fh.contextId+'="'+e+'"]',s=Vy(document.querySelectorAll(r)),i=Cs(s,function(a){return a.getAttribute(fh.id)===t});return!i||!Hc(i)?null:i}function pD(e){e.preventDefault()}function Ba(e){var t=e.expected,r=e.phase,s=e.isLockActive;return e.shouldWarn,!(!s()||t!==r)}function Pb(e){var t=e.lockAPI,r=e.store,s=e.registry,i=e.draggableId;if(t.isClaimed())return!1;var a=s.draggable.findById(i);return!(!a||!a.options.isEnabled||!yb(r.getState(),i))}function mD(e){var t=e.lockAPI,r=e.contextId,s=e.store,i=e.registry,a=e.draggableId,c=e.forceSensorStop,o=e.sourceEvent,l=Pb({lockAPI:t,store:s,registry:i,draggableId:a});if(!l)return null;var f=i.draggable.getById(a),v=fD(r,f.descriptor.id);if(!v||o&&!f.options.canDragInteractiveElements&&iD(v,o))return null;var h=t.claim(c||ls),g="PRE_DRAG";function y(){return f.options.shouldRespectForcePress}function _(){return t.isActive(h)}function x(C,k){Ba({expected:C,phase:g,isLockActive:_,shouldWarn:!0})&&s.dispatch(k())}var m=x.bind(null,"DRAGGING");function d(C){function k(){t.release(),g="COMPLETED"}g!=="PRE_DRAG"&&(k(),g!=="PRE_DRAG"&&Q(!1)),s.dispatch(l4(C.liftActionArgs)),g="DRAGGING";function w(N,D){if(D===void 0&&(D={shouldBlockNextClick:!1}),C.cleanup(),D.shouldBlockNextClick){var T=Ot(window,[{eventName:"click",fn:pD,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(T)}k(),s.dispatch(hb({reason:N}))}return ae({isActive:function(){return Ba({expected:"DRAGGING",phase:g,isLockActive:_,shouldWarn:!1})},shouldRespectForcePress:y,drop:function(D){return w("DROP",D)},cancel:function(D){return w("CANCEL",D)}},C.actions)}function u(C){var k=So(function(N){m(function(){return ub({client:N})})}),w=d({liftActionArgs:{id:a,clientSelection:C,movementMode:"FLUID"},cleanup:function(){return k.cancel()},actions:{move:k}});return ae({},w,{move:k})}function p(){var C={moveUp:function(){return m(v4)},moveRight:function(){return m(y4)},moveDown:function(){return m(x4)},moveLeft:function(){return m(b4)}};return d({liftActionArgs:{id:a,clientSelection:oD(v),movementMode:"SNAP"},cleanup:ls,actions:C})}function b(){var C=Ba({expected:"PRE_DRAG",phase:g,isLockActive:_,shouldWarn:!0});C&&t.release()}var S={isActive:function(){return Ba({expected:"PRE_DRAG",phase:g,isLockActive:_,shouldWarn:!1})},shouldRespectForcePress:y,fluidLift:u,snapLift:p,abort:b};return S}var gD=[K3,J3,sD];function vD(e){var t=e.contextId,r=e.store,s=e.registry,i=e.customSensors,a=e.enableDefaultSensors,c=[].concat(a?gD:[],i||[]),o=j.useState(function(){return L3()})[0],l=ie(function(u,p){u.isDragging&&!p.isDragging&&o.tryAbandon()},[o]);St(function(){var u=r.getState(),p=r.subscribe(function(){var b=r.getState();l(u,b),u=b});return p},[o,r,l]),St(function(){return o.tryAbandon},[o.tryAbandon]);for(var f=ie(function(d){return Pb({lockAPI:o,registry:s,store:r,draggableId:d})},[o,s,r]),v=ie(function(d,u,p){return mD({lockAPI:o,registry:s,contextId:t,store:r,draggableId:d,forceSensorStop:u,sourceEvent:p&&p.sourceEvent?p.sourceEvent:null})},[t,o,s,r]),h=ie(function(d){return hD(t,d)},[t]),g=ie(function(d){var u=s.draggable.findById(d);return u?u.options:null},[s.draggable]),y=ie(function(){o.isClaimed()&&(o.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch(Vf()))},[o,r]),_=ie(o.isClaimed,[o]),x=pe(function(){return{canGetLock:f,tryGetLock:v,findClosestDraggableId:h,findOptionsForDraggable:g,tryReleaseLock:y,isLockClaimed:_}},[f,v,h,g,y,_]),m=0;m<c.length;m++)c[m](x)}var xD=function(t){return{onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}};function ki(e){return e.current||Q(!1),e.current}function yD(e){var t=e.contextId,r=e.setCallbacks,s=e.sensors,i=e.nonce,a=e.dragHandleUsageInstructions,c=j.useRef(null),o=Cb(e),l=ie(function(){return xD(o.current)},[o]),f=D3(t),v=T3({contextId:t,text:a}),h=w3(t,i),g=ie(function(N){ki(c).dispatch(N)},[]),y=pe(function(){return ig({publishWhileDragging:d4,updateDroppableScroll:h4,updateDroppableIsEnabled:f4,updateDroppableIsCombineEnabled:p4,collectionStarting:u4},g)},[g]),_=j3(),x=pe(function(){return e3(_,y)},[_,y]),m=pe(function(){return v3(ae({scrollWindow:t3,scrollDroppable:x.scrollDroppable},ig({move:ub},g)))},[x.scrollDroppable,g]),d=C3(t),u=pe(function(){return Y4({announce:f,autoScroller:m,dimensionMarshal:x,focusMarshal:d,getResponders:l,styleMarshal:h})},[f,m,x,d,l,h]);c.current=u;var p=ie(function(){var N=ki(c),D=N.getState();D.phase!=="IDLE"&&N.dispatch(Vf())},[]),b=ie(function(){var N=ki(c).getState();return N.isDragging||N.phase==="DROP_ANIMATING"},[]),S=pe(function(){return{isDragging:b,tryAbort:p}},[b,p]);r(S);var C=ie(function(N){return yb(ki(c).getState(),N)},[]),k=ie(function(){return Rs(ki(c).getState())},[]),w=pe(function(){return{marshal:x,focus:d,contextId:t,canLift:C,isMovementAllowed:k,dragHandleUsageInstructionsId:v,registry:_}},[t,x,v,d,C,k,_]);return vD({contextId:t,store:u,registry:_,customSensors:s,enableDefaultSensors:e.enableDefaultSensors!==!1}),j.useEffect(function(){return p},[p]),oe.createElement(Uc.Provider,{value:w},oe.createElement($N,{context:Zf,store:u},e.children))}var bD=0;function _D(){return pe(function(){return""+bD++},[])}function wD(e){var t=_D(),r=e.dragHandleUsageInstructions||sl.dragHandleUsageInstructions;return oe.createElement(JE,null,function(s){return oe.createElement(yD,{nonce:e.nonce,contextId:t,setCallbacks:s,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var Rb=function(t){return function(r){return t===r}},SD=Rb("scroll"),CD=Rb("auto"),Og=function(t,r){return r(t.overflowX)||r(t.overflowY)},kD=function(t){var r=window.getComputedStyle(t),s={overflowX:r.overflowX,overflowY:r.overflowY};return Og(s,SD)||Og(s,CD)},jD=function(){return!1},ND=function e(t){return t==null?null:t===document.body?jD()?t:null:t===document.documentElement?null:kD(t)?t:e(t.parentElement)},ph=function(e){return{x:e.scrollLeft,y:e.scrollTop}},ED=function e(t){if(!t)return!1;var r=window.getComputedStyle(t);return r.position==="fixed"?!0:e(t.parentElement)},DD=function(e){var t=ND(e),r=ED(e);return{closestScrollable:t,isFixedOnPage:r}},PD=function(e){var t=e.descriptor,r=e.isEnabled,s=e.isCombineEnabled,i=e.isFixedOnPage,a=e.direction,c=e.client,o=e.page,l=e.closest,f=function(){if(!l)return null;var y=l.scrollSize,_=l.client,x=gb({scrollHeight:y.scrollHeight,scrollWidth:y.scrollWidth,height:_.paddingBox.height,width:_.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:_,scrollSize:y,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:x,diff:{value:Ue,displacement:Ue}}}}(),v=a==="vertical"?$f:Yy,h=ei({page:o,withPlaceholder:null,axis:v,frame:f}),g={descriptor:t,isCombineEnabled:s,isFixedOnPage:i,axis:v,isEnabled:r,client:c,page:o,frame:f,subject:h};return g},RD=function(t,r){var s=$y(t);if(!r||t!==r)return s;var i=s.paddingBox.top-r.scrollTop,a=s.paddingBox.left-r.scrollLeft,c=i+r.scrollHeight,o=a+r.scrollWidth,l={top:i,right:o,bottom:c,left:a},f=If(l,s.border),v=Mf({borderBox:f,margin:s.margin,border:s.border,padding:s.padding});return v},AD=function(e){var t=e.ref,r=e.descriptor,s=e.env,i=e.windowScroll,a=e.direction,c=e.isDropDisabled,o=e.isCombineEnabled,l=e.shouldClipSubject,f=s.closestScrollable,v=RD(t,f),h=Ul(v,i),g=function(){if(!f)return null;var _=$y(f),x={scrollHeight:f.scrollHeight,scrollWidth:f.scrollWidth};return{client:_,page:Ul(_,i),scroll:ph(f),scrollSize:x,shouldClipSubject:l}}(),y=PD({descriptor:r,isEnabled:!c,isCombineEnabled:o,isFixedOnPage:s.isFixedOnPage,direction:a,client:v,page:h,closest:g});return y},TD={passive:!1},LD={passive:!0},Bg=function(e){return e.shouldPublishImmediately?TD:LD};function Kl(e){var t=j.useContext(e);return t||Q(!1),t}var Fa=function(t){return t&&t.env.closestScrollable||null};function ID(e){var t=j.useRef(null),r=Kl(Uc),s=ep("droppable"),i=r.registry,a=r.marshal,c=Cb(e),o=pe(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),l=j.useRef(o),f=pe(function(){return He(function(b,S){t.current||Q(!1);var C={x:b,y:S};a.updateDroppableScroll(o.id,C)})},[o.id,a]),v=ie(function(){var b=t.current;return!b||!b.env.closestScrollable?Ue:ph(b.env.closestScrollable)},[]),h=ie(function(){var b=v();f(b.x,b.y)},[v,f]),g=pe(function(){return So(h)},[h]),y=ie(function(){var b=t.current,S=Fa(b);b&&S||Q(!1);var C=b.scrollOptions;if(C.shouldPublishImmediately){h();return}g()},[g,h]),_=ie(function(b,S){t.current&&Q(!1);var C=c.current,k=C.getDroppableRef();k||Q(!1);var w=DD(k),N={ref:k,descriptor:o,env:w,scrollOptions:S};t.current=N;var D=AD({ref:k,descriptor:o,env:w,windowScroll:b,direction:C.direction,isDropDisabled:C.isDropDisabled,isCombineEnabled:C.isCombineEnabled,shouldClipSubject:!C.ignoreContainerClipping}),T=w.closestScrollable;return T&&(T.setAttribute(Tg.contextId,r.contextId),T.addEventListener("scroll",y,Bg(N.scrollOptions))),D},[r.contextId,o,y,c]),x=ie(function(){var b=t.current,S=Fa(b);return b&&S||Q(!1),ph(S)},[]),m=ie(function(){var b=t.current;b||Q(!1);var S=Fa(b);t.current=null,S&&(g.cancel(),S.removeAttribute(Tg.contextId),S.removeEventListener("scroll",y,Bg(b.scrollOptions)))},[y,g]),d=ie(function(b){var S=t.current;S||Q(!1);var C=Fa(S);C||Q(!1),C.scrollTop+=b.y,C.scrollLeft+=b.x},[]),u=pe(function(){return{getDimensionAndWatchScroll:_,getScrollWhileDragging:x,dragStopped:m,scroll:d}},[m,_,x,d]),p=pe(function(){return{uniqueId:s,descriptor:o,callbacks:u}},[u,o,s]);St(function(){return l.current=p.descriptor,i.droppable.register(p),function(){t.current&&m(),i.droppable.unregister(p)}},[u,o,m,p,a,i.droppable]),St(function(){t.current&&a.updateDroppableIsEnabled(l.current.id,!e.isDropDisabled)},[e.isDropDisabled,a]),St(function(){t.current&&a.updateDroppableIsCombineEnabled(l.current.id,e.isCombineEnabled)},[e.isCombineEnabled,a])}function $d(){}var Fg={width:0,height:0,margin:n5},MD=function(t){var r=t.isAnimatingOpenOnMount,s=t.placeholder,i=t.animate;return r||i==="close"?Fg:{height:s.client.borderBox.height,width:s.client.borderBox.width,margin:s.client.margin}},OD=function(t){var r=t.isAnimatingOpenOnMount,s=t.placeholder,i=t.animate,a=MD({isAnimatingOpenOnMount:r,placeholder:s,animate:i});return{display:s.display,boxSizing:"border-box",width:a.width,height:a.height,marginTop:a.margin.top,marginRight:a.margin.right,marginBottom:a.margin.bottom,marginLeft:a.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:i!=="none"?Ki.placeholder:null}};function BD(e){var t=j.useRef(null),r=ie(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),s=e.animate,i=e.onTransitionEnd,a=e.onClose,c=e.contextId,o=j.useState(e.animate==="open"),l=o[0],f=o[1];j.useEffect(function(){return l?s!=="open"?(r(),f(!1),$d):t.current?$d:(t.current=setTimeout(function(){t.current=null,f(!1)}),r):$d},[s,l,r]);var v=ie(function(g){g.propertyName==="height"&&(i(),s==="close"&&a())},[s,a,i]),h=OD({isAnimatingOpenOnMount:l,animate:e.animate,placeholder:e.placeholder});return oe.createElement(e.placeholder.tagName,{style:h,"data-rbd-placeholder-context-id":c,onTransitionEnd:v,ref:e.innerRef})}var FD=oe.memo(BD),rp=oe.createContext(null),$D=function(e){yy(t,e);function t(){for(var s,i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return s=e.call.apply(e,[this].concat(a))||this,s.state={isVisible:!!s.props.on,data:s.props.on,animate:s.props.shouldAnimate&&s.props.on?"open":"none"},s.onClose=function(){s.state.animate==="close"&&s.setState({isVisible:!1})},s}t.getDerivedStateFromProps=function(i,a){return i.shouldAnimate?i.on?{isVisible:!0,data:i.on,animate:"open"}:a.isVisible?{isVisible:!0,data:a.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!i.on,data:i.on,animate:"none"}};var r=t.prototype;return r.render=function(){if(!this.state.isVisible)return null;var i={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(i)},t}(oe.PureComponent),$g={dragging:5e3,dropAnimating:4500},HD=function(t,r){return r?Ki.drop(r.duration):t?Ki.snap:Ki.fluid},UD=function(t,r){return t?r?No.opacity.drop:No.opacity.combining:null},WD=function(t){return t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP"};function zD(e){var t=e.dimension,r=t.client,s=e.offset,i=e.combineWith,a=e.dropping,c=!!i,o=WD(e),l=!!a,f=l?uh.drop(s,c):uh.moveTo(s),v={position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:HD(o,a),transform:f,opacity:UD(c,l),zIndex:l?$g.dropAnimating:$g.dragging,pointerEvents:"none"};return v}function VD(e){return{transform:uh.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function qD(e){return e.type==="DRAGGING"?zD(e):VD(e)}function GD(e,t,r){r===void 0&&(r=Ue);var s=window.getComputedStyle(t),i=t.getBoundingClientRect(),a=Fy(i,s),c=Ul(a,r),o={client:a,tagName:t.tagName.toLowerCase(),display:s.display},l={x:a.marginBox.width,y:a.marginBox.height},f={descriptor:e,placeholder:o,displaceBy:l,client:a,page:c};return f}function KD(e){var t=ep("draggable"),r=e.descriptor,s=e.registry,i=e.getDraggableRef,a=e.canDragInteractiveElements,c=e.shouldRespectForcePress,o=e.isEnabled,l=pe(function(){return{canDragInteractiveElements:a,shouldRespectForcePress:c,isEnabled:o}},[a,o,c]),f=ie(function(y){var _=i();return _||Q(!1),GD(r,_,y)},[r,i]),v=pe(function(){return{uniqueId:t,descriptor:r,options:l,getDimension:f}},[r,f,l,t]),h=j.useRef(v),g=j.useRef(!0);St(function(){return s.draggable.register(h.current),function(){return s.draggable.unregister(h.current)}},[s.draggable]),St(function(){if(g.current){g.current=!1;return}var y=h.current;h.current=v,s.draggable.update(v,y)},[v,s.draggable])}function QD(e){e.preventDefault()}function YD(e){var t=j.useRef(null),r=ie(function(N){t.current=N},[]),s=ie(function(){return t.current},[]),i=Kl(Uc),a=i.contextId,c=i.dragHandleUsageInstructionsId,o=i.registry,l=Kl(rp),f=l.type,v=l.droppableId,h=pe(function(){return{id:e.draggableId,index:e.index,type:f,droppableId:v}},[e.draggableId,e.index,f,v]),g=e.children,y=e.draggableId,_=e.isEnabled,x=e.shouldRespectForcePress,m=e.canDragInteractiveElements,d=e.isClone,u=e.mapped,p=e.dropAnimationFinished;if(!d){var b=pe(function(){return{descriptor:h,registry:o,getDraggableRef:s,canDragInteractiveElements:m,shouldRespectForcePress:x,isEnabled:_}},[h,o,s,m,x,_]);KD(b)}var S=pe(function(){return _?{tabIndex:0,role:"button","aria-describedby":c,"data-rbd-drag-handle-draggable-id":y,"data-rbd-drag-handle-context-id":a,draggable:!1,onDragStart:QD}:null},[a,c,y,_]),C=ie(function(N){u.type==="DRAGGING"&&u.dropping&&N.propertyName==="transform"&&p()},[p,u]),k=pe(function(){var N=qD(u),D=u.type==="DRAGGING"&&u.dropping?C:null,T={innerRef:r,draggableProps:{"data-rbd-draggable-context-id":a,"data-rbd-draggable-id":y,style:N,onTransitionEnd:D},dragHandleProps:S};return T},[a,S,y,u,C,r]),w=pe(function(){return{draggableId:h.id,type:h.type,source:{index:h.index,droppableId:h.droppableId}}},[h.droppableId,h.id,h.index,h.type]);return g(k,u.snapshot,w)}var Ab=function(e,t){return e===t},Tb=function(e){var t=e.combine,r=e.destination;return r?r.droppableId:t?t.droppableId:null},XD=function(t){return t.combine?t.combine.draggableId:null},JD=function(t){return t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null};function ZD(){var e=He(function(i,a){return{x:i,y:a}}),t=He(function(i,a,c,o,l){return{isDragging:!0,isClone:a,isDropAnimating:!!l,dropAnimation:l,mode:i,draggingOver:c,combineWith:o,combineTargetFor:null}}),r=He(function(i,a,c,o,l,f,v){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:l,combineWith:f,mode:a,offset:i,dimension:c,forceShouldAnimate:v,snapshot:t(a,o,l,f,null)}}}),s=function(a,c){if(a.isDragging){if(a.critical.draggable.id!==c.draggableId)return null;var o=a.current.client.offset,l=a.dimensions.draggables[c.draggableId],f=wt(a.impact),v=JD(a.impact),h=a.forceShouldAnimate;return r(e(o.x,o.y),a.movementMode,l,c.isClone,f,v,h)}if(a.phase==="DROP_ANIMATING"){var g=a.completed;if(g.result.draggableId!==c.draggableId)return null;var y=c.isClone,_=a.dimensions.draggables[c.draggableId],x=g.result,m=x.mode,d=Tb(x),u=XD(x),p=a.dropDuration,b={duration:p,curve:Gf.drop,moveTo:a.newHomeClientOffset,opacity:u?No.opacity.drop:null,scale:u?No.scale.drop:null};return{mapped:{type:"DRAGGING",offset:a.newHomeClientOffset,dimension:_,dropping:b,draggingOver:d,combineWith:u,mode:m,forceShouldAnimate:null,snapshot:t(m,y,d,u,b)}}}return null};return s}function Lb(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var eP={mapped:{type:"SECONDARY",offset:Ue,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Lb(null)}};function tP(){var e=He(function(c,o){return{x:c,y:o}}),t=He(Lb),r=He(function(c,o,l){return o===void 0&&(o=null),{mapped:{type:"SECONDARY",offset:c,combineTargetFor:o,shouldAnimateDisplacement:l,snapshot:t(o)}}}),s=function(o){return o?r(Ue,o,!0):null},i=function(o,l,f,v){var h=f.displaced.visible[o],g=!!(v.inVirtualList&&v.effected[o]),y=Bc(f),_=y&&y.draggableId===o?l:null;if(!h){if(!g)return s(_);if(f.displaced.invisible[o])return null;var x=li(v.displacedBy.point),m=e(x.x,x.y);return r(m,_,!0)}if(g)return s(_);var d=f.displacedBy.point,u=e(d.x,d.y);return r(u,_,h.shouldAnimate)},a=function(o,l){if(o.isDragging)return o.critical.draggable.id===l.draggableId?null:i(l.draggableId,o.critical.draggable.id,o.impact,o.afterCritical);if(o.phase==="DROP_ANIMATING"){var f=o.completed;return f.result.draggableId===l.draggableId?null:i(l.draggableId,f.result.draggableId,f.impact,f.afterCritical)}return null};return a}var rP=function(){var t=ZD(),r=tP(),s=function(a,c){return t(a,c)||r(a,c)||eP};return s},sP={dropAnimationFinished:fb},nP=Oy(rP,sP,null,{context:Zf,pure:!0,areStatePropsEqual:Ab})(YD);function Ib(e){var t=Kl(rp),r=t.isUsingCloneFor;return r===e.draggableId&&!e.isClone?null:oe.createElement(nP,e)}function iP(e){var t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,s=!!e.shouldRespectForcePress;return oe.createElement(Ib,ae({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:s}))}function oP(e){var t=j.useContext(Uc);t||Q(!1);var r=t.contextId,s=t.isMovementAllowed,i=j.useRef(null),a=j.useRef(null),c=e.children,o=e.droppableId,l=e.type,f=e.mode,v=e.direction,h=e.ignoreContainerClipping,g=e.isDropDisabled,y=e.isCombineEnabled,_=e.snapshot,x=e.useClone,m=e.updateViewportMaxScroll,d=e.getContainerForClone,u=ie(function(){return i.current},[]),p=ie(function(T){i.current=T},[]);ie(function(){return a.current},[]);var b=ie(function(T){a.current=T},[]),S=ie(function(){s()&&m({maxScroll:xb()})},[s,m]);ID({droppableId:o,type:l,mode:f,direction:v,isDropDisabled:g,isCombineEnabled:y,ignoreContainerClipping:h,getDroppableRef:u});var C=oe.createElement($D,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(T){var I=T.onClose,A=T.data,O=T.animate;return oe.createElement(FD,{placeholder:A,onClose:I,innerRef:b,animate:O,contextId:r,onTransitionEnd:S})}),k=pe(function(){return{innerRef:p,placeholder:C,droppableProps:{"data-rbd-droppable-id":o,"data-rbd-droppable-context-id":r}}},[r,o,C,p]),w=x?x.dragging.draggableId:null,N=pe(function(){return{droppableId:o,type:l,isUsingCloneFor:w}},[o,w,l]);function D(){if(!x)return null;var T=x.dragging,I=x.render,A=oe.createElement(Ib,{draggableId:T.draggableId,index:T.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(O,P){return I(O,P,T)});return hw.createPortal(A,d())}return oe.createElement(rp.Provider,{value:N},c(k,_),D())}var Hd=function(t,r){return t===r.droppable.type},Hg=function(t,r){return r.draggables[t.draggable.id]},aP=function(){var t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r=ae({},t,{shouldAnimatePlaceholder:!1}),s=He(function(c){return{draggableId:c.id,type:c.type,source:{index:c.index,droppableId:c.droppableId}}}),i=He(function(c,o,l,f,v,h){var g=v.descriptor.id,y=v.descriptor.droppableId===c;if(y){var _=h?{render:h,dragging:s(v.descriptor)}:null,x={isDraggingOver:l,draggingOverWith:l?g:null,draggingFromThisWith:g,isUsingPlaceholder:!0};return{placeholder:v.placeholder,shouldAnimatePlaceholder:!1,snapshot:x,useClone:_}}if(!o)return r;if(!f)return t;var m={isDraggingOver:l,draggingOverWith:g,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:v.placeholder,shouldAnimatePlaceholder:!0,snapshot:m,useClone:null}}),a=function(o,l){var f=l.droppableId,v=l.type,h=!l.isDropDisabled,g=l.renderClone;if(o.isDragging){var y=o.critical;if(!Hd(v,y))return r;var _=Hg(y,o.dimensions),x=wt(o.impact)===f;return i(f,h,x,x,_,g)}if(o.phase==="DROP_ANIMATING"){var m=o.completed;if(!Hd(v,m.critical))return r;var d=Hg(m.critical,o.dimensions);return i(f,h,Tb(m.result)===f,wt(m.impact)===f,d,g)}if(o.phase==="IDLE"&&o.completed&&!o.shouldFlush){var u=o.completed;if(!Hd(v,u.critical))return r;var p=wt(u.impact)===f,b=!!(u.impact.at&&u.impact.at.type==="COMBINE"),S=u.critical.droppable.id===f;return p?b?t:r:S?t:r}return r};return a},lP={updateViewportMaxScroll:g4};function cP(){return document.body||Q(!1),document.body}var dP={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:cP},Mb=Oy(aP,lP,null,{context:Zf,pure:!0,areStatePropsEqual:Ab})(oP);Mb.defaultProps=dP;const uP=({task:e,index:t,isDragging:r})=>{const s=()=>{switch(e.status){case"done":return n.jsx(Cf,{className:"w-4 h-4 text-status-success"});case"in-progress":return n.jsx(Sc,{className:"w-4 h-4 text-brand"});case"blocked":return n.jsx(ot,{className:"w-4 h-4 text-status-error"});default:return n.jsx(kf,{className:"w-4 h-4 text-status-warning"})}},i=()=>{switch(e.priority){case"high":return"border-red-700 bg-red-900/20";case"medium":return"border-yellow-700 bg-yellow-900/20";case"low":return"border-green-700 bg-green-900/20";default:return"border-border bg-background-secondary"}};return n.jsx(iP,{draggableId:e.id,index:t,children:(a,c)=>n.jsxs("div",{ref:a.innerRef,...a.draggableProps,...a.dragHandleProps,className:`p-3 mb-2 border rounded-lg transition-all cursor-move ${i()} ${r||c.isDragging?"shadow-lg opacity-90 rotate-2":"shadow-sm hover:shadow-md"}`,children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[s(),n.jsxs("span",{className:"text-sm font-mono text-foreground-secondary",children:["#",e.id]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${e.priority==="high"?"bg-red-900 text-red-200":e.priority==="medium"?"bg-yellow-900 text-yellow-200":"bg-green-900 text-green-200"}`,children:e.priority})]}),n.jsx(wc,{className:"w-4 h-4 text-foreground-tertiary"})]}),n.jsx("h4",{className:"mt-2 font-medium text-foreground",children:e.title}),e.description&&n.jsx("p",{className:"mt-1 text-sm text-foreground-secondary line-clamp-2",children:e.description}),e.dependencies&&e.dependencies.length>0&&n.jsxs("div",{className:"mt-2 text-xs text-foreground-tertiary",children:["Dependencies: ",e.dependencies.join(", ")]})]})})},Ob=({tasks:e,droppableId:t,isDraggingOver:r})=>n.jsx(Mb,{droppableId:t,children:(s,i)=>n.jsxs("div",{ref:s.innerRef,...s.droppableProps,className:`h-full p-4 rounded-lg transition-colors ${r||i.isDraggingOver?"bg-brand/10 border-2 border-brand border-dashed":"bg-background-secondary"}`,children:[e.length===0?n.jsx("p",{className:"text-center text-foreground-tertiary py-8",children:t==="unassigned"?"No unassigned tasks":"Drop tasks here to assign"}):e.map((a,c)=>n.jsx(uP,{task:a,index:c},a.id)),s.placeholder]})}),hP=({agent:e,assignedTasks:t,isDraggingOver:r})=>{const s=()=>{switch(e.status){case"RUNNING":return"text-status-success bg-status-success/20";case"STOPPED":return"text-status-error bg-status-error/20";case"ERROR":return"text-status-error bg-status-error/20";default:return"text-foreground-secondary bg-background-tertiary"}};return n.jsxs("div",{className:"border border-border rounded-lg overflow-hidden h-full flex flex-col",children:[n.jsxs("div",{className:"p-4 bg-background-card border-b border-border",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(gy,{className:"w-5 h-5 text-foreground-secondary"}),n.jsx("h3",{className:"font-semibold text-foreground",children:e.id})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${s()}`,children:e.status})]}),n.jsx("p",{className:"mt-1 text-sm text-foreground-secondary",children:e.branch}),n.jsxs("p",{className:"mt-1 text-xs text-foreground-tertiary",children:[t.length," task",t.length!==1?"s":""," assigned"]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto",children:n.jsx(Ob,{tasks:t,droppableId:`agent-${e.id}`,isDraggingOver:r})})]})},fP=({projectPath:e})=>{const[t,r]=j.useState([]),[s,i]=j.useState([]),[a,c]=j.useState({}),[o,l]=j.useState(!0),[f,v]=j.useState(!1),h=async()=>{try{v(!0);const[x,m]=await Promise.all([ye.getTaskMasterTasks(e),ye.getAgents()]);r(x),i(m.filter(u=>u.status==="RUNNING"));const d={};m.forEach(u=>{var p;(p=u.config)!=null&&p.taskId&&(d[u.config.taskId]=u.id)}),c(d)}catch(x){console.error("Failed to fetch data:",x),se.error("Failed to load tasks and agents")}finally{l(!1),v(!1)}};j.useEffect(()=>{h()},[e]);const g=async x=>{const{destination:m,source:d,draggableId:u}=x;if(!m||m.droppableId===d.droppableId&&m.index===d.index)return;const p=u,b=t.find(S=>S.id===p);if(b){if(m.droppableId.startsWith("agent-")){const S=m.droppableId.replace("agent-","");if(!s.find(w=>w.id===S))return;if(b.dependencies&&b.dependencies.length>0){const w=b.dependencies.filter(N=>{const D=t.find(T=>T.id===N);return D&&D.status!=="done"});if(w.length>0){se.warning(`Cannot assign task: Dependencies ${w.join(", ")} are not complete`,{autoClose:5e3});return}}if(!window.confirm(`Assign task "${b.title}" to agent ${S}?`))return;try{await ye.assignTaskToAgent(S,p,e),c(w=>({...w,[p]:S})),se.success(`Task assigned to agent ${S}`)}catch(w){console.error("Failed to assign task:",w),se.error("Failed to assign task")}}else if(m.droppableId==="unassigned"){const S=a[p];if(S){if(!window.confirm(`Remove task "${b.title}" from agent ${S}?`))return;c(k=>{const w={...k};return delete w[p],w}),se.info("Task unassigned")}}}},y=()=>t.filter(x=>!a[x.id]&&x.status!=="done"&&x.status!=="cancelled"),_=x=>t.filter(m=>a[m.id]===x);return o?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(Er,{className:"w-8 h-8 text-foreground-tertiary animate-spin"})}):n.jsxs("div",{className:"h-full flex flex-col",children:[n.jsxs("div",{className:"p-4 border-b border-border bg-background-card",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Task Assignment"}),n.jsx("button",{onClick:h,disabled:f,className:"p-2 text-foreground-secondary hover:bg-background-secondary rounded-md transition-colors disabled:opacity-50",title:"Refresh",children:n.jsx(Er,{className:`w-4 h-4 ${f?"animate-spin":""}`})})]}),n.jsx("p",{className:"mt-1 text-sm text-foreground-secondary",children:"Drag tasks from the left panel to assign them to agents"})]}),n.jsx("div",{className:"flex-1 flex overflow-hidden",children:n.jsxs(wD,{onDragEnd:g,children:[n.jsxs("div",{className:"w-1/3 border-r border-border flex flex-col",children:[n.jsxs("div",{className:"p-4 bg-background-secondary border-b border-border",children:[n.jsx("h3",{className:"font-medium text-foreground",children:"Unassigned Tasks"}),n.jsxs("p",{className:"text-sm text-foreground-secondary mt-1",children:[y().length," tasks available"]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto",children:n.jsx(Ob,{tasks:y(),droppableId:"unassigned"})})]}),n.jsx("div",{className:"flex-1 p-4",children:s.length===0?n.jsx("div",{className:"flex items-center justify-center h-full text-foreground-tertiary",children:n.jsxs("div",{className:"text-center",children:[n.jsx(gy,{className:"w-12 h-12 mx-auto mb-4 text-foreground-tertiary"}),n.jsx("p",{children:"No running agents available"}),n.jsx("p",{className:"text-sm mt-2",children:"Start an agent to assign tasks"})]})}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 h-full",children:s.map(x=>n.jsx(hP,{agent:x,assignedTasks:_(x.id)},x.id))})})]})})]})},pP=()=>{const[e,t]=j.useState(""),[r,s]=j.useState(null),[i,a]=j.useState(!0);return j.useEffect(()=>{(async()=>{try{const o=await ye.getProjects();if(o.length>0){const l=o[0].path;t(l);const f=await ye.detectTaskMaster(l);s(f.isConfigured)}else{const l="/Users/santossafrao/Development/personal/magents";t(l);const f=await ye.detectTaskMaster(l);s(f.isConfigured)}}catch(o){console.error("Failed to detect TaskMaster:",o),s(!1)}finally{a(!1)}})()},[]),i?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx("p",{className:"text-foreground-secondary",children:"Checking for TaskMaster configuration..."})}):r?n.jsx(fP,{projectPath:e}):n.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[n.jsx(ot,{className:"w-16 h-16 text-status-warning mb-4"}),n.jsx("h2",{className:"text-2xl font-semibold text-foreground mb-2",children:"TaskMaster Not Configured"}),n.jsx("p",{className:"text-foreground-secondary mb-6 max-w-md",children:"This project does not have TaskMaster configured. To use task assignment, you need to initialize TaskMaster in your project."}),n.jsx("div",{className:"bg-background-tertiary rounded-lg p-4 max-w-md border border-border",children:n.jsx("p",{className:"font-mono text-sm text-foreground",children:"task-master init"})})]})},mP=()=>{const{data:e=[]}=fr({queryKey:["agents"],queryFn:()=>ye.getAgents()}),{data:t=[]}=fr({queryKey:["projects"],queryFn:()=>ye.getProjects()}),r=e.length,s=e.filter(f=>f.status==="RUNNING").length,i=e.filter(f=>f.status==="STOPPED").length,a=e.filter(f=>f.status==="ERROR").length,c=r>0?Math.round(s/r*100):0,o=t.filter(f=>e.some(v=>v.projectId===f.id)).length,l=t.length>0?(r/t.length).toFixed(1):"0";return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Analytics"}),n.jsx("p",{className:"text-foreground-secondary mt-1",children:"System performance and usage metrics"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsx("div",{className:"bg-background-card border border-border rounded-lg p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-foreground-secondary",children:"Agent Uptime"}),n.jsxs("p",{className:"text-2xl font-bold text-foreground mt-1",children:[c,"%"]}),n.jsxs("p",{className:"text-xs text-foreground-tertiary mt-2",children:[s," of ",r," running"]})]}),n.jsx("div",{className:"p-3 rounded-lg bg-status-success/20",children:n.jsx(Am,{className:"h-6 w-6 text-status-success"})})]})}),n.jsx("div",{className:"bg-background-card border border-border rounded-lg p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-foreground-secondary",children:"Total Agents"}),n.jsx("p",{className:"text-2xl font-bold text-foreground mt-1",children:r}),n.jsxs("p",{className:"text-xs text-foreground-tertiary mt-2",children:["Across ",t.length," projects"]})]}),n.jsx("div",{className:"p-3 rounded-lg bg-brand/20",children:n.jsx(fs,{className:"h-6 w-6 text-brand"})})]})}),n.jsx("div",{className:"bg-background-card border border-border rounded-lg p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-foreground-secondary",children:"Active Projects"}),n.jsx("p",{className:"text-2xl font-bold text-foreground mt-1",children:o}),n.jsx("p",{className:"text-xs text-foreground-tertiary mt-2",children:"With running agents"})]}),n.jsx("div",{className:"p-3 rounded-lg bg-brand/20",children:n.jsx(Il,{className:"h-6 w-6 text-brand"})})]})}),n.jsx("div",{className:"bg-background-card border border-border rounded-lg p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-foreground-secondary",children:"Avg Agents/Project"}),n.jsx("p",{className:"text-2xl font-bold text-foreground mt-1",children:l}),n.jsx("p",{className:"text-xs text-foreground-tertiary mt-2",children:"Distribution metric"})]}),n.jsx("div",{className:"p-3 rounded-lg bg-foreground-tertiary/20",children:n.jsx(gf,{className:"h-6 w-6 text-foreground-tertiary"})})]})})]}),n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-foreground mb-6",children:"Agent Status Distribution"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-foreground-secondary",children:"Running"}),n.jsxs("span",{className:"text-sm font-medium text-status-success",children:[s," agents"]})]}),n.jsx("div",{className:"w-full bg-background-tertiary rounded-full h-2",children:n.jsx("div",{className:"bg-status-success h-2 rounded-full transition-all duration-300",style:{width:`${r>0?s/r*100:0}%`}})})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-foreground-secondary",children:"Stopped"}),n.jsxs("span",{className:"text-sm font-medium text-foreground-tertiary",children:[i," agents"]})]}),n.jsx("div",{className:"w-full bg-background-tertiary rounded-full h-2",children:n.jsx("div",{className:"bg-foreground-tertiary h-2 rounded-full transition-all duration-300",style:{width:`${r>0?i/r*100:0}%`}})})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-foreground-secondary",children:"Error"}),n.jsxs("span",{className:"text-sm font-medium text-status-error",children:[a," agents"]})]}),n.jsx("div",{className:"w-full bg-background-tertiary rounded-full h-2",children:n.jsx("div",{className:"bg-status-error h-2 rounded-full transition-all duration-300",style:{width:`${r>0?a/r*100:0}%`}})})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"System Activity"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 bg-background-tertiary rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(en,{className:"h-5 w-5 text-foreground-tertiary"}),n.jsx("span",{className:"text-sm text-foreground",children:"Average agent runtime"})]}),n.jsx("span",{className:"text-sm font-medium text-foreground",children:"2h 34m"})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-background-tertiary rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Il,{className:"h-5 w-5 text-status-success"}),n.jsx("span",{className:"text-sm text-foreground",children:"Tasks completed today"})]}),n.jsx("span",{className:"text-sm font-medium text-foreground",children:"12"})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-background-tertiary rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(fs,{className:"h-5 w-5 text-brand"}),n.jsx("span",{className:"text-sm text-foreground",children:"New agents this week"})]}),n.jsx("span",{className:"text-sm font-medium text-foreground",children:"3"})]})]})]}),n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"Performance Metrics"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 bg-background-tertiary rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Am,{className:"h-5 w-5 text-status-success"}),n.jsx("span",{className:"text-sm text-foreground",children:"Success rate"})]}),n.jsx("span",{className:"text-sm font-medium text-status-success",children:"94.2%"})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-background-tertiary rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(h2,{className:"h-5 w-5 text-status-error"}),n.jsx("span",{className:"text-sm text-foreground",children:"Error rate"})]}),n.jsx("span",{className:"text-sm font-medium text-status-error",children:"5.8%"})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-background-tertiary rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(en,{className:"h-5 w-5 text-foreground-tertiary"}),n.jsx("span",{className:"text-sm text-foreground",children:"Avg response time"})]}),n.jsx("span",{className:"text-sm font-medium text-foreground",children:"234ms"})]})]})]})]})]})},gP=()=>{const[e]=w0(),t=Ss(),[r,s]=j.useState(e.get("agent")||void 0);j.useEffect(()=>{const a=e.get("agent");s(a||void 0)},[e]);const i=()=>{t("/")};return n.jsxs("div",{className:"flex flex-col h-screen bg-background",children:[n.jsxs("div",{className:"flex items-center justify-between px-6 py-4 bg-background-card border-b border-border",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:i,className:"p-2 text-foreground-secondary hover:text-foreground hover:bg-background-tertiary rounded-lg transition-colors",title:"Back to dashboard",children:n.jsx(a2,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Nr,{className:"w-6 h-6 text-brand"}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-semibold text-foreground",children:"Terminal"}),r&&n.jsxs("p",{className:"text-sm text-foreground-secondary",children:["Connected to Agent ",r]})]})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:r&&n.jsxs("div",{className:"text-sm text-foreground-secondary bg-background-tertiary px-3 py-1 rounded-full",children:["Agent: ",r]})})]}),n.jsx("div",{className:"flex-1 p-6",children:n.jsx(Bl,{agentId:r||void 0,isSystemTerminal:!r,isFullscreen:!1,className:"h-full"})})]})};const vP=new LS({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:3e4}}});function xP(){return n.jsxs(BS,{client:vP,children:[n.jsx(zk,{children:n.jsx(dS,{children:n.jsxs("div",{className:"App",children:[n.jsx(Jk,{children:n.jsxs(tS,{children:[n.jsx(Pt,{path:"/",element:n.jsx(gj,{})}),n.jsx(Pt,{path:"/agents",element:n.jsx(vj,{})}),n.jsx(Pt,{path:"/agents/new",element:n.jsx(pN,{})}),n.jsx(Pt,{path:"/agents/:id",element:n.jsx(_N,{})}),n.jsx(Pt,{path:"/projects",element:n.jsx(mN,{})}),n.jsx(Pt,{path:"/projects/:id",element:n.jsx(wN,{})}),n.jsx(Pt,{path:"/tasks",element:n.jsx(PN,{})}),n.jsx(Pt,{path:"/tasks/assign",element:n.jsx(pP,{})}),n.jsx(Pt,{path:"/analytics",element:n.jsx(mP,{})}),n.jsx(Pt,{path:"/settings",element:n.jsx(gN,{})}),n.jsx(Pt,{path:"/terminal",element:n.jsx(gP,{})})]})}),n.jsx(Ju,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})})}),n.jsx(YS,{initialIsOpen:!1})]})}const yP=Ud.createRoot(document.getElementById("root"));yP.render(n.jsx(oe.StrictMode,{children:n.jsx(xP,{})}));
//# sourceMappingURL=index-36122eab.js.map
