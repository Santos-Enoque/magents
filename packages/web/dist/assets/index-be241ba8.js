var Lc=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};var H=(e,t,r)=>(Lc(e,t,"read from private field"),r?r.call(e):t.get(e)),se=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},ee=(e,t,r,s)=>(Lc(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r);var ta=(e,t,r,s)=>({set _(i){ee(e,t,i,r)},get _(){return H(e,t,s)}}),ue=(e,t,r)=>(Lc(e,t,"access private method"),r);function yb(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(s,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();function sh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Lg={exports:{}},Hl={},Ig={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Po=Symbol.for("react.element"),bb=Symbol.for("react.portal"),_b=Symbol.for("react.fragment"),wb=Symbol.for("react.strict_mode"),Sb=Symbol.for("react.profiler"),Cb=Symbol.for("react.provider"),kb=Symbol.for("react.context"),Eb=Symbol.for("react.forward_ref"),jb=Symbol.for("react.suspense"),Nb=Symbol.for("react.memo"),Db=Symbol.for("react.lazy"),Gf=Symbol.iterator;function Rb(e){return e===null||typeof e!="object"?null:(e=Gf&&e[Gf]||e["@@iterator"],typeof e=="function"?e:null)}var Og={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Mg=Object.assign,Bg={};function Xn(e,t,r){this.props=e,this.context=t,this.refs=Bg,this.updater=r||Og}Xn.prototype.isReactComponent={};Xn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Xn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Fg(){}Fg.prototype=Xn.prototype;function nh(e,t,r){this.props=e,this.context=t,this.refs=Bg,this.updater=r||Og}var ih=nh.prototype=new Fg;ih.constructor=nh;Mg(ih,Xn.prototype);ih.isPureReactComponent=!0;var Kf=Array.isArray,$g=Object.prototype.hasOwnProperty,oh={current:null},Hg={key:!0,ref:!0,__self:!0,__source:!0};function Ug(e,t,r){var s,i={},a=null,l=null;if(t!=null)for(s in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(a=""+t.key),t)$g.call(t,s)&&!Hg.hasOwnProperty(s)&&(i[s]=t[s]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var c=Array(o),h=0;h<o;h++)c[h]=arguments[h+2];i.children=c}if(e&&e.defaultProps)for(s in o=e.defaultProps,o)i[s]===void 0&&(i[s]=o[s]);return{$$typeof:Po,type:e,key:a,ref:l,props:i,_owner:oh.current}}function Ab(e,t){return{$$typeof:Po,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ah(e){return typeof e=="object"&&e!==null&&e.$$typeof===Po}function Tb(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Qf=/\/+/g;function Ic(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Tb(""+e.key):t.toString(36)}function Ra(e,t,r,s,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Po:case bb:l=!0}}if(l)return l=e,i=i(l),e=s===""?"."+Ic(l,0):s,Kf(i)?(r="",e!=null&&(r=e.replace(Qf,"$&/")+"/"),Ra(i,t,r,"",function(h){return h})):i!=null&&(ah(i)&&(i=Ab(i,r+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(Qf,"$&/")+"/")+e)),t.push(i)),1;if(l=0,s=s===""?".":s+":",Kf(e))for(var o=0;o<e.length;o++){a=e[o];var c=s+Ic(a,o);l+=Ra(a,t,r,c,i)}else if(c=Rb(e),typeof c=="function")for(e=c.call(e),o=0;!(a=e.next()).done;)a=a.value,c=s+Ic(a,o++),l+=Ra(a,t,r,c,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function ra(e,t,r){if(e==null)return e;var s=[],i=0;return Ra(e,s,"","",function(a){return t.call(r,a,i++)}),s}function Pb(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ot={current:null},Aa={transition:null},Lb={ReactCurrentDispatcher:ot,ReactCurrentBatchConfig:Aa,ReactCurrentOwner:oh};function Wg(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:ra,forEach:function(e,t,r){ra(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ra(e,function(){t++}),t},toArray:function(e){return ra(e,function(t){return t})||[]},only:function(e){if(!ah(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};de.Component=Xn;de.Fragment=_b;de.Profiler=Sb;de.PureComponent=nh;de.StrictMode=wb;de.Suspense=jb;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lb;de.act=Wg;de.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=Mg({},e.props),i=e.key,a=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,l=oh.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)$g.call(t,c)&&!Hg.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){o=Array(c);for(var h=0;h<c;h++)o[h]=arguments[h+2];s.children=o}return{$$typeof:Po,type:e.type,key:i,ref:a,props:s,_owner:l}};de.createContext=function(e){return e={$$typeof:kb,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Cb,_context:e},e.Consumer=e};de.createElement=Ug;de.createFactory=function(e){var t=Ug.bind(null,e);return t.type=e,t};de.createRef=function(){return{current:null}};de.forwardRef=function(e){return{$$typeof:Eb,render:e}};de.isValidElement=ah;de.lazy=function(e){return{$$typeof:Db,_payload:{_status:-1,_result:e},_init:Pb}};de.memo=function(e,t){return{$$typeof:Nb,type:e,compare:t===void 0?null:t}};de.startTransition=function(e){var t=Aa.transition;Aa.transition={};try{e()}finally{Aa.transition=t}};de.unstable_act=Wg;de.useCallback=function(e,t){return ot.current.useCallback(e,t)};de.useContext=function(e){return ot.current.useContext(e)};de.useDebugValue=function(){};de.useDeferredValue=function(e){return ot.current.useDeferredValue(e)};de.useEffect=function(e,t){return ot.current.useEffect(e,t)};de.useId=function(){return ot.current.useId()};de.useImperativeHandle=function(e,t,r){return ot.current.useImperativeHandle(e,t,r)};de.useInsertionEffect=function(e,t){return ot.current.useInsertionEffect(e,t)};de.useLayoutEffect=function(e,t){return ot.current.useLayoutEffect(e,t)};de.useMemo=function(e,t){return ot.current.useMemo(e,t)};de.useReducer=function(e,t,r){return ot.current.useReducer(e,t,r)};de.useRef=function(e){return ot.current.useRef(e)};de.useState=function(e){return ot.current.useState(e)};de.useSyncExternalStore=function(e,t,r){return ot.current.useSyncExternalStore(e,t,r)};de.useTransition=function(){return ot.current.useTransition()};de.version="18.3.1";Ig.exports=de;var E=Ig.exports;const ie=sh(E),Ib=yb({__proto__:null,default:ie},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ob=E,Mb=Symbol.for("react.element"),Bb=Symbol.for("react.fragment"),Fb=Object.prototype.hasOwnProperty,$b=Ob.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Hb={key:!0,ref:!0,__self:!0,__source:!0};function zg(e,t,r){var s,i={},a=null,l=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(l=t.ref);for(s in t)Fb.call(t,s)&&!Hb.hasOwnProperty(s)&&(i[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)i[s]===void 0&&(i[s]=t[s]);return{$$typeof:Mb,type:e,key:a,ref:l,props:i,_owner:$b.current}}Hl.Fragment=Bb;Hl.jsx=zg;Hl.jsxs=zg;Lg.exports=Hl;var n=Lg.exports,Rd={},Vg={exports:{}},kt={},qg={exports:{}},Gg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,N){var P=$.length;$.push(N);e:for(;0<P;){var M=P-1>>>1,F=$[M];if(0<i(F,N))$[M]=N,$[P]=F,P=M;else break e}}function r($){return $.length===0?null:$[0]}function s($){if($.length===0)return null;var N=$[0],P=$.pop();if(P!==N){$[0]=P;e:for(var M=0,F=$.length,V=F>>>1;M<V;){var K=2*(M+1)-1,J=$[K],te=K+1,W=$[te];if(0>i(J,P))te<F&&0>i(W,J)?($[M]=W,$[te]=P,M=te):($[M]=J,$[K]=P,M=K);else if(te<F&&0>i(W,P))$[M]=W,$[te]=P,M=te;else break e}}return N}function i($,N){var P=$.sortIndex-N.sortIndex;return P!==0?P:$.id-N.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],h=[],v=1,d=null,g=3,x=!1,_=!1,y=!1,f=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,u=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m($){for(var N=r(h);N!==null;){if(N.callback===null)s(h);else if(N.startTime<=$)s(h),N.sortIndex=N.expirationTime,t(c,N);else break;N=r(h)}}function b($){if(y=!1,m($),!_)if(r(c)!==null)_=!0,B(S);else{var N=r(h);N!==null&&U(b,N.startTime-$)}}function S($,N){_=!1,y&&(y=!1,p(w),w=-1),x=!0;var P=g;try{for(m(N),d=r(c);d!==null&&(!(d.expirationTime>N)||$&&!I());){var M=d.callback;if(typeof M=="function"){d.callback=null,g=d.priorityLevel;var F=M(d.expirationTime<=N);N=e.unstable_now(),typeof F=="function"?d.callback=F:d===r(c)&&s(c),m(N)}else s(c);d=r(c)}if(d!==null)var V=!0;else{var K=r(h);K!==null&&U(b,K.startTime-N),V=!1}return V}finally{d=null,g=P,x=!1}}var C=!1,k=null,w=-1,j=5,D=-1;function I(){return!(e.unstable_now()-D<j)}function T(){if(k!==null){var $=e.unstable_now();D=$;var N=!0;try{N=k(!0,$)}finally{N?A():(C=!1,k=null)}}else C=!1}var A;if(typeof u=="function")A=function(){u(T)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,R=O.port2;O.port1.onmessage=T,A=function(){R.postMessage(null)}}else A=function(){f(T,0)};function B($){k=$,C||(C=!0,A())}function U($,N){w=f(function(){$(e.unstable_now())},N)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){_||x||(_=!0,B(S))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function($){switch(g){case 1:case 2:case 3:var N=3;break;default:N=g}var P=g;g=N;try{return $()}finally{g=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,N){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var P=g;g=$;try{return N()}finally{g=P}},e.unstable_scheduleCallback=function($,N,P){var M=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?M+P:M):P=M,$){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=P+F,$={id:v++,callback:N,priorityLevel:$,startTime:P,expirationTime:F,sortIndex:-1},P>M?($.sortIndex=P,t(h,$),r(c)===null&&$===r(h)&&(y?(p(w),w=-1):y=!0,U(b,P-M))):($.sortIndex=F,t(c,$),_||x||(_=!0,B(S))),$},e.unstable_shouldYield=I,e.unstable_wrapCallback=function($){var N=g;return function(){var P=g;g=N;try{return $.apply(this,arguments)}finally{g=P}}}})(Gg);qg.exports=Gg;var Ub=qg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wb=E,St=Ub;function G(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Kg=new Set,Wi={};function en(e,t){Bn(e,t),Bn(e+"Capture",t)}function Bn(e,t){for(Wi[e]=t,e=0;e<t.length;e++)Kg.add(t[e])}var wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ad=Object.prototype.hasOwnProperty,zb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yf={},Xf={};function Vb(e){return Ad.call(Xf,e)?!0:Ad.call(Yf,e)?!1:zb.test(e)?Xf[e]=!0:(Yf[e]=!0,!1)}function qb(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Gb(e,t,r,s){if(t===null||typeof t>"u"||qb(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function at(e,t,r,s,i,a,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=l}var Qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Qe[e]=new at(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Qe[t]=new at(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Qe[e]=new at(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Qe[e]=new at(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Qe[e]=new at(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Qe[e]=new at(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Qe[e]=new at(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Qe[e]=new at(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Qe[e]=new at(e,5,!1,e.toLowerCase(),null,!1,!1)});var lh=/[\-:]([a-z])/g;function ch(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(lh,ch);Qe[t]=new at(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(lh,ch);Qe[t]=new at(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(lh,ch);Qe[t]=new at(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Qe[e]=new at(e,1,!1,e.toLowerCase(),null,!1,!1)});Qe.xlinkHref=new at("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Qe[e]=new at(e,1,!1,e.toLowerCase(),null,!0,!0)});function dh(e,t,r,s){var i=Qe.hasOwnProperty(t)?Qe[t]:null;(i!==null?i.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Gb(t,r,i,s)&&(r=null),s||i===null?Vb(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,s=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var Er=Wb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sa=Symbol.for("react.element"),ln=Symbol.for("react.portal"),cn=Symbol.for("react.fragment"),uh=Symbol.for("react.strict_mode"),Td=Symbol.for("react.profiler"),Qg=Symbol.for("react.provider"),Yg=Symbol.for("react.context"),hh=Symbol.for("react.forward_ref"),Pd=Symbol.for("react.suspense"),Ld=Symbol.for("react.suspense_list"),fh=Symbol.for("react.memo"),Ar=Symbol.for("react.lazy"),Xg=Symbol.for("react.offscreen"),Jf=Symbol.iterator;function li(e){return e===null||typeof e!="object"?null:(e=Jf&&e[Jf]||e["@@iterator"],typeof e=="function"?e:null)}var De=Object.assign,Oc;function bi(e){if(Oc===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Oc=t&&t[1]||""}return`
`+Oc+e}var Mc=!1;function Bc(e,t){if(!e||Mc)return"";Mc=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var s=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){s=h}e.call(t.prototype)}else{try{throw Error()}catch(h){s=h}e()}}catch(h){if(h&&s&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),a=s.stack.split(`
`),l=i.length-1,o=a.length-1;1<=l&&0<=o&&i[l]!==a[o];)o--;for(;1<=l&&0<=o;l--,o--)if(i[l]!==a[o]){if(l!==1||o!==1)do if(l--,o--,0>o||i[l]!==a[o]){var c=`
`+i[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=o);break}}}finally{Mc=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?bi(e):""}function Kb(e){switch(e.tag){case 5:return bi(e.type);case 16:return bi("Lazy");case 13:return bi("Suspense");case 19:return bi("SuspenseList");case 0:case 2:case 15:return e=Bc(e.type,!1),e;case 11:return e=Bc(e.type.render,!1),e;case 1:return e=Bc(e.type,!0),e;default:return""}}function Id(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case cn:return"Fragment";case ln:return"Portal";case Td:return"Profiler";case uh:return"StrictMode";case Pd:return"Suspense";case Ld:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Yg:return(e.displayName||"Context")+".Consumer";case Qg:return(e._context.displayName||"Context")+".Provider";case hh:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case fh:return t=e.displayName||null,t!==null?t:Id(e.type)||"Memo";case Ar:t=e._payload,e=e._init;try{return Id(e(t))}catch{}}return null}function Qb(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Id(t);case 8:return t===uh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ls(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Jg(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Yb(e){var t=Jg(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(l){s=""+l,a.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(l){s=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function na(e){e._valueTracker||(e._valueTracker=Yb(e))}function Zg(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=Jg(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function Ga(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Od(e,t){var r=t.checked;return De({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Zf(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=ls(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ev(e,t){t=t.checked,t!=null&&dh(e,"checked",t,!1)}function Md(e,t){ev(e,t);var r=ls(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Bd(e,t.type,r):t.hasOwnProperty("defaultValue")&&Bd(e,t.type,ls(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ep(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Bd(e,t,r){(t!=="number"||Ga(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var _i=Array.isArray;function bn(e,t,r,s){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&s&&(e[r].defaultSelected=!0)}else{for(r=""+ls(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,s&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Fd(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(G(91));return De({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function tp(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(G(92));if(_i(r)){if(1<r.length)throw Error(G(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ls(r)}}function tv(e,t){var r=ls(t.value),s=ls(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function rp(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function rv(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $d(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?rv(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ia,sv=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ia=ia||document.createElement("div"),ia.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ia.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function zi(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ji={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xb=["Webkit","ms","Moz","O"];Object.keys(ji).forEach(function(e){Xb.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ji[t]=ji[e]})});function nv(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ji.hasOwnProperty(e)&&ji[e]?(""+t).trim():t+"px"}function iv(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,i=nv(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,i):e[r]=i}}var Jb=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hd(e,t){if(t){if(Jb[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(G(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(G(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(G(61))}if(t.style!=null&&typeof t.style!="object")throw Error(G(62))}}function Ud(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wd=null;function ph(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var zd=null,_n=null,wn=null;function sp(e){if(e=Oo(e)){if(typeof zd!="function")throw Error(G(280));var t=e.stateNode;t&&(t=ql(t),zd(e.stateNode,e.type,t))}}function ov(e){_n?wn?wn.push(e):wn=[e]:_n=e}function av(){if(_n){var e=_n,t=wn;if(wn=_n=null,sp(e),t)for(e=0;e<t.length;e++)sp(t[e])}}function lv(e,t){return e(t)}function cv(){}var Fc=!1;function dv(e,t,r){if(Fc)return e(t,r);Fc=!0;try{return lv(e,t,r)}finally{Fc=!1,(_n!==null||wn!==null)&&(cv(),av())}}function Vi(e,t){var r=e.stateNode;if(r===null)return null;var s=ql(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(G(231,t,typeof r));return r}var Vd=!1;if(wr)try{var ci={};Object.defineProperty(ci,"passive",{get:function(){Vd=!0}}),window.addEventListener("test",ci,ci),window.removeEventListener("test",ci,ci)}catch{Vd=!1}function Zb(e,t,r,s,i,a,l,o,c){var h=Array.prototype.slice.call(arguments,3);try{t.apply(r,h)}catch(v){this.onError(v)}}var Ni=!1,Ka=null,Qa=!1,qd=null,e_={onError:function(e){Ni=!0,Ka=e}};function t_(e,t,r,s,i,a,l,o,c){Ni=!1,Ka=null,Zb.apply(e_,arguments)}function r_(e,t,r,s,i,a,l,o,c){if(t_.apply(this,arguments),Ni){if(Ni){var h=Ka;Ni=!1,Ka=null}else throw Error(G(198));Qa||(Qa=!0,qd=h)}}function tn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function uv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function np(e){if(tn(e)!==e)throw Error(G(188))}function s_(e){var t=e.alternate;if(!t){if(t=tn(e),t===null)throw Error(G(188));return t!==e?null:e}for(var r=e,s=t;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(s=i.return,s!==null){r=s;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return np(i),e;if(a===s)return np(i),t;a=a.sibling}throw Error(G(188))}if(r.return!==s.return)r=i,s=a;else{for(var l=!1,o=i.child;o;){if(o===r){l=!0,r=i,s=a;break}if(o===s){l=!0,s=i,r=a;break}o=o.sibling}if(!l){for(o=a.child;o;){if(o===r){l=!0,r=a,s=i;break}if(o===s){l=!0,s=a,r=i;break}o=o.sibling}if(!l)throw Error(G(189))}}if(r.alternate!==s)throw Error(G(190))}if(r.tag!==3)throw Error(G(188));return r.stateNode.current===r?e:t}function hv(e){return e=s_(e),e!==null?fv(e):null}function fv(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=fv(e);if(t!==null)return t;e=e.sibling}return null}var pv=St.unstable_scheduleCallback,ip=St.unstable_cancelCallback,n_=St.unstable_shouldYield,i_=St.unstable_requestPaint,Pe=St.unstable_now,o_=St.unstable_getCurrentPriorityLevel,mh=St.unstable_ImmediatePriority,mv=St.unstable_UserBlockingPriority,Ya=St.unstable_NormalPriority,a_=St.unstable_LowPriority,gv=St.unstable_IdlePriority,Ul=null,cr=null;function l_(e){if(cr&&typeof cr.onCommitFiberRoot=="function")try{cr.onCommitFiberRoot(Ul,e,void 0,(e.current.flags&128)===128)}catch{}}var Jt=Math.clz32?Math.clz32:u_,c_=Math.log,d_=Math.LN2;function u_(e){return e>>>=0,e===0?32:31-(c_(e)/d_|0)|0}var oa=64,aa=4194304;function wi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Xa(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,i=e.suspendedLanes,a=e.pingedLanes,l=r&268435455;if(l!==0){var o=l&~i;o!==0?s=wi(o):(a&=l,a!==0&&(s=wi(a)))}else l=r&~i,l!==0?s=wi(l):a!==0&&(s=wi(a));if(s===0)return 0;if(t!==0&&t!==s&&!(t&i)&&(i=s&-s,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-Jt(t),i=1<<r,s|=e[r],t&=~i;return s}function h_(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function f_(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-Jt(a),o=1<<l,c=i[l];c===-1?(!(o&r)||o&s)&&(i[l]=h_(o,t)):c<=t&&(e.expiredLanes|=o),a&=~o}}function Gd(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function vv(){var e=oa;return oa<<=1,!(oa&4194240)&&(oa=64),e}function $c(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Lo(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Jt(t),e[t]=r}function p_(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-Jt(r),a=1<<i;t[i]=0,s[i]=-1,e[i]=-1,r&=~a}}function gh(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-Jt(r),i=1<<s;i&t|e[s]&t&&(e[s]|=t),r&=~i}}var ge=0;function xv(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var yv,vh,bv,_v,wv,Kd=!1,la=[],Kr=null,Qr=null,Yr=null,qi=new Map,Gi=new Map,Pr=[],m_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function op(e,t){switch(e){case"focusin":case"focusout":Kr=null;break;case"dragenter":case"dragleave":Qr=null;break;case"mouseover":case"mouseout":Yr=null;break;case"pointerover":case"pointerout":qi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gi.delete(t.pointerId)}}function di(e,t,r,s,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Oo(t),t!==null&&vh(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function g_(e,t,r,s,i){switch(t){case"focusin":return Kr=di(Kr,e,t,r,s,i),!0;case"dragenter":return Qr=di(Qr,e,t,r,s,i),!0;case"mouseover":return Yr=di(Yr,e,t,r,s,i),!0;case"pointerover":var a=i.pointerId;return qi.set(a,di(qi.get(a)||null,e,t,r,s,i)),!0;case"gotpointercapture":return a=i.pointerId,Gi.set(a,di(Gi.get(a)||null,e,t,r,s,i)),!0}return!1}function Sv(e){var t=js(e.target);if(t!==null){var r=tn(t);if(r!==null){if(t=r.tag,t===13){if(t=uv(r),t!==null){e.blockedOn=t,wv(e.priority,function(){bv(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ta(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Qd(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);Wd=s,r.target.dispatchEvent(s),Wd=null}else return t=Oo(r),t!==null&&vh(t),e.blockedOn=r,!1;t.shift()}return!0}function ap(e,t,r){Ta(e)&&r.delete(t)}function v_(){Kd=!1,Kr!==null&&Ta(Kr)&&(Kr=null),Qr!==null&&Ta(Qr)&&(Qr=null),Yr!==null&&Ta(Yr)&&(Yr=null),qi.forEach(ap),Gi.forEach(ap)}function ui(e,t){e.blockedOn===t&&(e.blockedOn=null,Kd||(Kd=!0,St.unstable_scheduleCallback(St.unstable_NormalPriority,v_)))}function Ki(e){function t(i){return ui(i,e)}if(0<la.length){ui(la[0],e);for(var r=1;r<la.length;r++){var s=la[r];s.blockedOn===e&&(s.blockedOn=null)}}for(Kr!==null&&ui(Kr,e),Qr!==null&&ui(Qr,e),Yr!==null&&ui(Yr,e),qi.forEach(t),Gi.forEach(t),r=0;r<Pr.length;r++)s=Pr[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<Pr.length&&(r=Pr[0],r.blockedOn===null);)Sv(r),r.blockedOn===null&&Pr.shift()}var Sn=Er.ReactCurrentBatchConfig,Ja=!0;function x_(e,t,r,s){var i=ge,a=Sn.transition;Sn.transition=null;try{ge=1,xh(e,t,r,s)}finally{ge=i,Sn.transition=a}}function y_(e,t,r,s){var i=ge,a=Sn.transition;Sn.transition=null;try{ge=4,xh(e,t,r,s)}finally{ge=i,Sn.transition=a}}function xh(e,t,r,s){if(Ja){var i=Qd(e,t,r,s);if(i===null)Yc(e,t,s,Za,r),op(e,s);else if(g_(i,e,t,r,s))s.stopPropagation();else if(op(e,s),t&4&&-1<m_.indexOf(e)){for(;i!==null;){var a=Oo(i);if(a!==null&&yv(a),a=Qd(e,t,r,s),a===null&&Yc(e,t,s,Za,r),a===i)break;i=a}i!==null&&s.stopPropagation()}else Yc(e,t,s,null,r)}}var Za=null;function Qd(e,t,r,s){if(Za=null,e=ph(s),e=js(e),e!==null)if(t=tn(e),t===null)e=null;else if(r=t.tag,r===13){if(e=uv(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Za=e,null}function Cv(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(o_()){case mh:return 1;case mv:return 4;case Ya:case a_:return 16;case gv:return 536870912;default:return 16}default:return 16}}var Wr=null,yh=null,Pa=null;function kv(){if(Pa)return Pa;var e,t=yh,r=t.length,s,i="value"in Wr?Wr.value:Wr.textContent,a=i.length;for(e=0;e<r&&t[e]===i[e];e++);var l=r-e;for(s=1;s<=l&&t[r-s]===i[a-s];s++);return Pa=i.slice(e,1<s?1-s:void 0)}function La(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ca(){return!0}function lp(){return!1}function Et(e){function t(r,s,i,a,l){this._reactName=r,this._targetInst=i,this.type=s,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?ca:lp,this.isPropagationStopped=lp,this}return De(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ca)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ca)},persist:function(){},isPersistent:ca}),t}var Jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bh=Et(Jn),Io=De({},Jn,{view:0,detail:0}),b_=Et(Io),Hc,Uc,hi,Wl=De({},Io,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_h,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hi&&(hi&&e.type==="mousemove"?(Hc=e.screenX-hi.screenX,Uc=e.screenY-hi.screenY):Uc=Hc=0,hi=e),Hc)},movementY:function(e){return"movementY"in e?e.movementY:Uc}}),cp=Et(Wl),__=De({},Wl,{dataTransfer:0}),w_=Et(__),S_=De({},Io,{relatedTarget:0}),Wc=Et(S_),C_=De({},Jn,{animationName:0,elapsedTime:0,pseudoElement:0}),k_=Et(C_),E_=De({},Jn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),j_=Et(E_),N_=De({},Jn,{data:0}),dp=Et(N_),D_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},R_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},A_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function T_(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=A_[e])?!!t[e]:!1}function _h(){return T_}var P_=De({},Io,{key:function(e){if(e.key){var t=D_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=La(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?R_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_h,charCode:function(e){return e.type==="keypress"?La(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?La(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),L_=Et(P_),I_=De({},Wl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),up=Et(I_),O_=De({},Io,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_h}),M_=Et(O_),B_=De({},Jn,{propertyName:0,elapsedTime:0,pseudoElement:0}),F_=Et(B_),$_=De({},Wl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),H_=Et($_),U_=[9,13,27,32],wh=wr&&"CompositionEvent"in window,Di=null;wr&&"documentMode"in document&&(Di=document.documentMode);var W_=wr&&"TextEvent"in window&&!Di,Ev=wr&&(!wh||Di&&8<Di&&11>=Di),hp=String.fromCharCode(32),fp=!1;function jv(e,t){switch(e){case"keyup":return U_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var dn=!1;function z_(e,t){switch(e){case"compositionend":return Nv(t);case"keypress":return t.which!==32?null:(fp=!0,hp);case"textInput":return e=t.data,e===hp&&fp?null:e;default:return null}}function V_(e,t){if(dn)return e==="compositionend"||!wh&&jv(e,t)?(e=kv(),Pa=yh=Wr=null,dn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ev&&t.locale!=="ko"?null:t.data;default:return null}}var q_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!q_[e.type]:t==="textarea"}function Dv(e,t,r,s){ov(s),t=el(t,"onChange"),0<t.length&&(r=new bh("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Ri=null,Qi=null;function G_(e){$v(e,0)}function zl(e){var t=fn(e);if(Zg(t))return e}function K_(e,t){if(e==="change")return t}var Rv=!1;if(wr){var zc;if(wr){var Vc="oninput"in document;if(!Vc){var mp=document.createElement("div");mp.setAttribute("oninput","return;"),Vc=typeof mp.oninput=="function"}zc=Vc}else zc=!1;Rv=zc&&(!document.documentMode||9<document.documentMode)}function gp(){Ri&&(Ri.detachEvent("onpropertychange",Av),Qi=Ri=null)}function Av(e){if(e.propertyName==="value"&&zl(Qi)){var t=[];Dv(t,Qi,e,ph(e)),dv(G_,t)}}function Q_(e,t,r){e==="focusin"?(gp(),Ri=t,Qi=r,Ri.attachEvent("onpropertychange",Av)):e==="focusout"&&gp()}function Y_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return zl(Qi)}function X_(e,t){if(e==="click")return zl(t)}function J_(e,t){if(e==="input"||e==="change")return zl(t)}function Z_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var er=typeof Object.is=="function"?Object.is:Z_;function Yi(e,t){if(er(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var i=r[s];if(!Ad.call(t,i)||!er(e[i],t[i]))return!1}return!0}function vp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function xp(e,t){var r=vp(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=vp(r)}}function Tv(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Tv(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Pv(){for(var e=window,t=Ga();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ga(e.document)}return t}function Sh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function e1(e){var t=Pv(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Tv(r.ownerDocument.documentElement,r)){if(s!==null&&Sh(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,a=Math.min(s.start,i);s=s.end===void 0?a:Math.min(s.end,i),!e.extend&&a>s&&(i=s,s=a,a=i),i=xp(r,a);var l=xp(r,s);i&&l&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>s?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var t1=wr&&"documentMode"in document&&11>=document.documentMode,un=null,Yd=null,Ai=null,Xd=!1;function yp(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Xd||un==null||un!==Ga(s)||(s=un,"selectionStart"in s&&Sh(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ai&&Yi(Ai,s)||(Ai=s,s=el(Yd,"onSelect"),0<s.length&&(t=new bh("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=un)))}function da(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var hn={animationend:da("Animation","AnimationEnd"),animationiteration:da("Animation","AnimationIteration"),animationstart:da("Animation","AnimationStart"),transitionend:da("Transition","TransitionEnd")},qc={},Lv={};wr&&(Lv=document.createElement("div").style,"AnimationEvent"in window||(delete hn.animationend.animation,delete hn.animationiteration.animation,delete hn.animationstart.animation),"TransitionEvent"in window||delete hn.transitionend.transition);function Vl(e){if(qc[e])return qc[e];if(!hn[e])return e;var t=hn[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Lv)return qc[e]=t[r];return e}var Iv=Vl("animationend"),Ov=Vl("animationiteration"),Mv=Vl("animationstart"),Bv=Vl("transitionend"),Fv=new Map,bp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fs(e,t){Fv.set(e,t),en(t,[e])}for(var Gc=0;Gc<bp.length;Gc++){var Kc=bp[Gc],r1=Kc.toLowerCase(),s1=Kc[0].toUpperCase()+Kc.slice(1);fs(r1,"on"+s1)}fs(Iv,"onAnimationEnd");fs(Ov,"onAnimationIteration");fs(Mv,"onAnimationStart");fs("dblclick","onDoubleClick");fs("focusin","onFocus");fs("focusout","onBlur");fs(Bv,"onTransitionEnd");Bn("onMouseEnter",["mouseout","mouseover"]);Bn("onMouseLeave",["mouseout","mouseover"]);Bn("onPointerEnter",["pointerout","pointerover"]);Bn("onPointerLeave",["pointerout","pointerover"]);en("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));en("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));en("onBeforeInput",["compositionend","keypress","textInput","paste"]);en("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));en("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));en("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Si="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Si));function _p(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,r_(s,t,void 0,e),e.currentTarget=null}function $v(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],i=s.event;s=s.listeners;e:{var a=void 0;if(t)for(var l=s.length-1;0<=l;l--){var o=s[l],c=o.instance,h=o.currentTarget;if(o=o.listener,c!==a&&i.isPropagationStopped())break e;_p(i,o,h),a=c}else for(l=0;l<s.length;l++){if(o=s[l],c=o.instance,h=o.currentTarget,o=o.listener,c!==a&&i.isPropagationStopped())break e;_p(i,o,h),a=c}}}if(Qa)throw e=qd,Qa=!1,qd=null,e}function Se(e,t){var r=t[ru];r===void 0&&(r=t[ru]=new Set);var s=e+"__bubble";r.has(s)||(Hv(t,e,2,!1),r.add(s))}function Qc(e,t,r){var s=0;t&&(s|=4),Hv(r,e,s,t)}var ua="_reactListening"+Math.random().toString(36).slice(2);function Xi(e){if(!e[ua]){e[ua]=!0,Kg.forEach(function(r){r!=="selectionchange"&&(n1.has(r)||Qc(r,!1,e),Qc(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ua]||(t[ua]=!0,Qc("selectionchange",!1,t))}}function Hv(e,t,r,s){switch(Cv(t)){case 1:var i=x_;break;case 4:i=y_;break;default:i=xh}r=i.bind(null,t,r,e),i=void 0,!Vd||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),s?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function Yc(e,t,r,s,i){var a=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var l=s.tag;if(l===3||l===4){var o=s.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(l===4)for(l=s.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;l=l.return}for(;o!==null;){if(l=js(o),l===null)return;if(c=l.tag,c===5||c===6){s=a=l;continue e}o=o.parentNode}}s=s.return}dv(function(){var h=a,v=ph(r),d=[];e:{var g=Fv.get(e);if(g!==void 0){var x=bh,_=e;switch(e){case"keypress":if(La(r)===0)break e;case"keydown":case"keyup":x=L_;break;case"focusin":_="focus",x=Wc;break;case"focusout":_="blur",x=Wc;break;case"beforeblur":case"afterblur":x=Wc;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=cp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=w_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=M_;break;case Iv:case Ov:case Mv:x=k_;break;case Bv:x=F_;break;case"scroll":x=b_;break;case"wheel":x=H_;break;case"copy":case"cut":case"paste":x=j_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=up}var y=(t&4)!==0,f=!y&&e==="scroll",p=y?g!==null?g+"Capture":null:g;y=[];for(var u=h,m;u!==null;){m=u;var b=m.stateNode;if(m.tag===5&&b!==null&&(m=b,p!==null&&(b=Vi(u,p),b!=null&&y.push(Ji(u,b,m)))),f)break;u=u.return}0<y.length&&(g=new x(g,_,null,r,v),d.push({event:g,listeners:y}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",g&&r!==Wd&&(_=r.relatedTarget||r.fromElement)&&(js(_)||_[Sr]))break e;if((x||g)&&(g=v.window===v?v:(g=v.ownerDocument)?g.defaultView||g.parentWindow:window,x?(_=r.relatedTarget||r.toElement,x=h,_=_?js(_):null,_!==null&&(f=tn(_),_!==f||_.tag!==5&&_.tag!==6)&&(_=null)):(x=null,_=h),x!==_)){if(y=cp,b="onMouseLeave",p="onMouseEnter",u="mouse",(e==="pointerout"||e==="pointerover")&&(y=up,b="onPointerLeave",p="onPointerEnter",u="pointer"),f=x==null?g:fn(x),m=_==null?g:fn(_),g=new y(b,u+"leave",x,r,v),g.target=f,g.relatedTarget=m,b=null,js(v)===h&&(y=new y(p,u+"enter",_,r,v),y.target=m,y.relatedTarget=f,b=y),f=b,x&&_)t:{for(y=x,p=_,u=0,m=y;m;m=sn(m))u++;for(m=0,b=p;b;b=sn(b))m++;for(;0<u-m;)y=sn(y),u--;for(;0<m-u;)p=sn(p),m--;for(;u--;){if(y===p||p!==null&&y===p.alternate)break t;y=sn(y),p=sn(p)}y=null}else y=null;x!==null&&wp(d,g,x,y,!1),_!==null&&f!==null&&wp(d,f,_,y,!0)}}e:{if(g=h?fn(h):window,x=g.nodeName&&g.nodeName.toLowerCase(),x==="select"||x==="input"&&g.type==="file")var S=K_;else if(pp(g))if(Rv)S=J_;else{S=Y_;var C=Q_}else(x=g.nodeName)&&x.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(S=X_);if(S&&(S=S(e,h))){Dv(d,S,r,v);break e}C&&C(e,g,h),e==="focusout"&&(C=g._wrapperState)&&C.controlled&&g.type==="number"&&Bd(g,"number",g.value)}switch(C=h?fn(h):window,e){case"focusin":(pp(C)||C.contentEditable==="true")&&(un=C,Yd=h,Ai=null);break;case"focusout":Ai=Yd=un=null;break;case"mousedown":Xd=!0;break;case"contextmenu":case"mouseup":case"dragend":Xd=!1,yp(d,r,v);break;case"selectionchange":if(t1)break;case"keydown":case"keyup":yp(d,r,v)}var k;if(wh)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else dn?jv(e,r)&&(w="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(w="onCompositionStart");w&&(Ev&&r.locale!=="ko"&&(dn||w!=="onCompositionStart"?w==="onCompositionEnd"&&dn&&(k=kv()):(Wr=v,yh="value"in Wr?Wr.value:Wr.textContent,dn=!0)),C=el(h,w),0<C.length&&(w=new dp(w,e,null,r,v),d.push({event:w,listeners:C}),k?w.data=k:(k=Nv(r),k!==null&&(w.data=k)))),(k=W_?z_(e,r):V_(e,r))&&(h=el(h,"onBeforeInput"),0<h.length&&(v=new dp("onBeforeInput","beforeinput",null,r,v),d.push({event:v,listeners:h}),v.data=k))}$v(d,t)})}function Ji(e,t,r){return{instance:e,listener:t,currentTarget:r}}function el(e,t){for(var r=t+"Capture",s=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Vi(e,r),a!=null&&s.unshift(Ji(e,a,i)),a=Vi(e,t),a!=null&&s.push(Ji(e,a,i))),e=e.return}return s}function sn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wp(e,t,r,s,i){for(var a=t._reactName,l=[];r!==null&&r!==s;){var o=r,c=o.alternate,h=o.stateNode;if(c!==null&&c===s)break;o.tag===5&&h!==null&&(o=h,i?(c=Vi(r,a),c!=null&&l.unshift(Ji(r,c,o))):i||(c=Vi(r,a),c!=null&&l.push(Ji(r,c,o)))),r=r.return}l.length!==0&&e.push({event:t,listeners:l})}var i1=/\r\n?/g,o1=/\u0000|\uFFFD/g;function Sp(e){return(typeof e=="string"?e:""+e).replace(i1,`
`).replace(o1,"")}function ha(e,t,r){if(t=Sp(t),Sp(e)!==t&&r)throw Error(G(425))}function tl(){}var Jd=null,Zd=null;function eu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var tu=typeof setTimeout=="function"?setTimeout:void 0,a1=typeof clearTimeout=="function"?clearTimeout:void 0,Cp=typeof Promise=="function"?Promise:void 0,l1=typeof queueMicrotask=="function"?queueMicrotask:typeof Cp<"u"?function(e){return Cp.resolve(null).then(e).catch(c1)}:tu;function c1(e){setTimeout(function(){throw e})}function Xc(e,t){var r=t,s=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(s===0){e.removeChild(i),Ki(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=i}while(r);Ki(t)}function Xr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function kp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Zn=Math.random().toString(36).slice(2),lr="__reactFiber$"+Zn,Zi="__reactProps$"+Zn,Sr="__reactContainer$"+Zn,ru="__reactEvents$"+Zn,d1="__reactListeners$"+Zn,u1="__reactHandles$"+Zn;function js(e){var t=e[lr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Sr]||r[lr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=kp(e);e!==null;){if(r=e[lr])return r;e=kp(e)}return t}e=r,r=e.parentNode}return null}function Oo(e){return e=e[lr]||e[Sr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function fn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(G(33))}function ql(e){return e[Zi]||null}var su=[],pn=-1;function ps(e){return{current:e}}function Ce(e){0>pn||(e.current=su[pn],su[pn]=null,pn--)}function be(e,t){pn++,su[pn]=e.current,e.current=t}var cs={},et=ps(cs),pt=ps(!1),Ws=cs;function Fn(e,t){var r=e.type.contextTypes;if(!r)return cs;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=t[a];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function mt(e){return e=e.childContextTypes,e!=null}function rl(){Ce(pt),Ce(et)}function Ep(e,t,r){if(et.current!==cs)throw Error(G(168));be(et,t),be(pt,r)}function Uv(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var i in s)if(!(i in t))throw Error(G(108,Qb(e)||"Unknown",i));return De({},r,s)}function sl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||cs,Ws=et.current,be(et,e),be(pt,pt.current),!0}function jp(e,t,r){var s=e.stateNode;if(!s)throw Error(G(169));r?(e=Uv(e,t,Ws),s.__reactInternalMemoizedMergedChildContext=e,Ce(pt),Ce(et),be(et,e)):Ce(pt),be(pt,r)}var vr=null,Gl=!1,Jc=!1;function Wv(e){vr===null?vr=[e]:vr.push(e)}function h1(e){Gl=!0,Wv(e)}function ms(){if(!Jc&&vr!==null){Jc=!0;var e=0,t=ge;try{var r=vr;for(ge=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}vr=null,Gl=!1}catch(i){throw vr!==null&&(vr=vr.slice(e+1)),pv(mh,ms),i}finally{ge=t,Jc=!1}}return null}var mn=[],gn=0,nl=null,il=0,Pt=[],Lt=0,zs=null,yr=1,br="";function Ss(e,t){mn[gn++]=il,mn[gn++]=nl,nl=e,il=t}function zv(e,t,r){Pt[Lt++]=yr,Pt[Lt++]=br,Pt[Lt++]=zs,zs=e;var s=yr;e=br;var i=32-Jt(s)-1;s&=~(1<<i),r+=1;var a=32-Jt(t)+i;if(30<a){var l=i-i%5;a=(s&(1<<l)-1).toString(32),s>>=l,i-=l,yr=1<<32-Jt(t)+i|r<<i|s,br=a+e}else yr=1<<a|r<<i|s,br=e}function Ch(e){e.return!==null&&(Ss(e,1),zv(e,1,0))}function kh(e){for(;e===nl;)nl=mn[--gn],mn[gn]=null,il=mn[--gn],mn[gn]=null;for(;e===zs;)zs=Pt[--Lt],Pt[Lt]=null,br=Pt[--Lt],Pt[Lt]=null,yr=Pt[--Lt],Pt[Lt]=null}var bt=null,xt=null,ke=!1,Qt=null;function Vv(e,t){var r=Ot(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Np(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,bt=e,xt=Xr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,bt=e,xt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=zs!==null?{id:yr,overflow:br}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ot(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,bt=e,xt=null,!0):!1;default:return!1}}function nu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function iu(e){if(ke){var t=xt;if(t){var r=t;if(!Np(e,t)){if(nu(e))throw Error(G(418));t=Xr(r.nextSibling);var s=bt;t&&Np(e,t)?Vv(s,r):(e.flags=e.flags&-4097|2,ke=!1,bt=e)}}else{if(nu(e))throw Error(G(418));e.flags=e.flags&-4097|2,ke=!1,bt=e}}}function Dp(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;bt=e}function fa(e){if(e!==bt)return!1;if(!ke)return Dp(e),ke=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!eu(e.type,e.memoizedProps)),t&&(t=xt)){if(nu(e))throw qv(),Error(G(418));for(;t;)Vv(e,t),t=Xr(t.nextSibling)}if(Dp(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(G(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){xt=Xr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}xt=null}}else xt=bt?Xr(e.stateNode.nextSibling):null;return!0}function qv(){for(var e=xt;e;)e=Xr(e.nextSibling)}function $n(){xt=bt=null,ke=!1}function Eh(e){Qt===null?Qt=[e]:Qt.push(e)}var f1=Er.ReactCurrentBatchConfig;function fi(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(G(309));var s=r.stateNode}if(!s)throw Error(G(147,e));var i=s,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(l){var o=i.refs;l===null?delete o[a]:o[a]=l},t._stringRef=a,t)}if(typeof e!="string")throw Error(G(284));if(!r._owner)throw Error(G(290,e))}return e}function pa(e,t){throw e=Object.prototype.toString.call(t),Error(G(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Rp(e){var t=e._init;return t(e._payload)}function Gv(e){function t(p,u){if(e){var m=p.deletions;m===null?(p.deletions=[u],p.flags|=16):m.push(u)}}function r(p,u){if(!e)return null;for(;u!==null;)t(p,u),u=u.sibling;return null}function s(p,u){for(p=new Map;u!==null;)u.key!==null?p.set(u.key,u):p.set(u.index,u),u=u.sibling;return p}function i(p,u){return p=ts(p,u),p.index=0,p.sibling=null,p}function a(p,u,m){return p.index=m,e?(m=p.alternate,m!==null?(m=m.index,m<u?(p.flags|=2,u):m):(p.flags|=2,u)):(p.flags|=1048576,u)}function l(p){return e&&p.alternate===null&&(p.flags|=2),p}function o(p,u,m,b){return u===null||u.tag!==6?(u=id(m,p.mode,b),u.return=p,u):(u=i(u,m),u.return=p,u)}function c(p,u,m,b){var S=m.type;return S===cn?v(p,u,m.props.children,b,m.key):u!==null&&(u.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ar&&Rp(S)===u.type)?(b=i(u,m.props),b.ref=fi(p,u,m),b.return=p,b):(b=Ha(m.type,m.key,m.props,null,p.mode,b),b.ref=fi(p,u,m),b.return=p,b)}function h(p,u,m,b){return u===null||u.tag!==4||u.stateNode.containerInfo!==m.containerInfo||u.stateNode.implementation!==m.implementation?(u=od(m,p.mode,b),u.return=p,u):(u=i(u,m.children||[]),u.return=p,u)}function v(p,u,m,b,S){return u===null||u.tag!==7?(u=Us(m,p.mode,b,S),u.return=p,u):(u=i(u,m),u.return=p,u)}function d(p,u,m){if(typeof u=="string"&&u!==""||typeof u=="number")return u=id(""+u,p.mode,m),u.return=p,u;if(typeof u=="object"&&u!==null){switch(u.$$typeof){case sa:return m=Ha(u.type,u.key,u.props,null,p.mode,m),m.ref=fi(p,null,u),m.return=p,m;case ln:return u=od(u,p.mode,m),u.return=p,u;case Ar:var b=u._init;return d(p,b(u._payload),m)}if(_i(u)||li(u))return u=Us(u,p.mode,m,null),u.return=p,u;pa(p,u)}return null}function g(p,u,m,b){var S=u!==null?u.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return S!==null?null:o(p,u,""+m,b);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case sa:return m.key===S?c(p,u,m,b):null;case ln:return m.key===S?h(p,u,m,b):null;case Ar:return S=m._init,g(p,u,S(m._payload),b)}if(_i(m)||li(m))return S!==null?null:v(p,u,m,b,null);pa(p,m)}return null}function x(p,u,m,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return p=p.get(m)||null,o(u,p,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case sa:return p=p.get(b.key===null?m:b.key)||null,c(u,p,b,S);case ln:return p=p.get(b.key===null?m:b.key)||null,h(u,p,b,S);case Ar:var C=b._init;return x(p,u,m,C(b._payload),S)}if(_i(b)||li(b))return p=p.get(m)||null,v(u,p,b,S,null);pa(u,b)}return null}function _(p,u,m,b){for(var S=null,C=null,k=u,w=u=0,j=null;k!==null&&w<m.length;w++){k.index>w?(j=k,k=null):j=k.sibling;var D=g(p,k,m[w],b);if(D===null){k===null&&(k=j);break}e&&k&&D.alternate===null&&t(p,k),u=a(D,u,w),C===null?S=D:C.sibling=D,C=D,k=j}if(w===m.length)return r(p,k),ke&&Ss(p,w),S;if(k===null){for(;w<m.length;w++)k=d(p,m[w],b),k!==null&&(u=a(k,u,w),C===null?S=k:C.sibling=k,C=k);return ke&&Ss(p,w),S}for(k=s(p,k);w<m.length;w++)j=x(k,p,w,m[w],b),j!==null&&(e&&j.alternate!==null&&k.delete(j.key===null?w:j.key),u=a(j,u,w),C===null?S=j:C.sibling=j,C=j);return e&&k.forEach(function(I){return t(p,I)}),ke&&Ss(p,w),S}function y(p,u,m,b){var S=li(m);if(typeof S!="function")throw Error(G(150));if(m=S.call(m),m==null)throw Error(G(151));for(var C=S=null,k=u,w=u=0,j=null,D=m.next();k!==null&&!D.done;w++,D=m.next()){k.index>w?(j=k,k=null):j=k.sibling;var I=g(p,k,D.value,b);if(I===null){k===null&&(k=j);break}e&&k&&I.alternate===null&&t(p,k),u=a(I,u,w),C===null?S=I:C.sibling=I,C=I,k=j}if(D.done)return r(p,k),ke&&Ss(p,w),S;if(k===null){for(;!D.done;w++,D=m.next())D=d(p,D.value,b),D!==null&&(u=a(D,u,w),C===null?S=D:C.sibling=D,C=D);return ke&&Ss(p,w),S}for(k=s(p,k);!D.done;w++,D=m.next())D=x(k,p,w,D.value,b),D!==null&&(e&&D.alternate!==null&&k.delete(D.key===null?w:D.key),u=a(D,u,w),C===null?S=D:C.sibling=D,C=D);return e&&k.forEach(function(T){return t(p,T)}),ke&&Ss(p,w),S}function f(p,u,m,b){if(typeof m=="object"&&m!==null&&m.type===cn&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case sa:e:{for(var S=m.key,C=u;C!==null;){if(C.key===S){if(S=m.type,S===cn){if(C.tag===7){r(p,C.sibling),u=i(C,m.props.children),u.return=p,p=u;break e}}else if(C.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ar&&Rp(S)===C.type){r(p,C.sibling),u=i(C,m.props),u.ref=fi(p,C,m),u.return=p,p=u;break e}r(p,C);break}else t(p,C);C=C.sibling}m.type===cn?(u=Us(m.props.children,p.mode,b,m.key),u.return=p,p=u):(b=Ha(m.type,m.key,m.props,null,p.mode,b),b.ref=fi(p,u,m),b.return=p,p=b)}return l(p);case ln:e:{for(C=m.key;u!==null;){if(u.key===C)if(u.tag===4&&u.stateNode.containerInfo===m.containerInfo&&u.stateNode.implementation===m.implementation){r(p,u.sibling),u=i(u,m.children||[]),u.return=p,p=u;break e}else{r(p,u);break}else t(p,u);u=u.sibling}u=od(m,p.mode,b),u.return=p,p=u}return l(p);case Ar:return C=m._init,f(p,u,C(m._payload),b)}if(_i(m))return _(p,u,m,b);if(li(m))return y(p,u,m,b);pa(p,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,u!==null&&u.tag===6?(r(p,u.sibling),u=i(u,m),u.return=p,p=u):(r(p,u),u=id(m,p.mode,b),u.return=p,p=u),l(p)):r(p,u)}return f}var Hn=Gv(!0),Kv=Gv(!1),ol=ps(null),al=null,vn=null,jh=null;function Nh(){jh=vn=al=null}function Dh(e){var t=ol.current;Ce(ol),e._currentValue=t}function ou(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function Cn(e,t){al=e,jh=vn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ht=!0),e.firstContext=null)}function $t(e){var t=e._currentValue;if(jh!==e)if(e={context:e,memoizedValue:t,next:null},vn===null){if(al===null)throw Error(G(308));vn=e,al.dependencies={lanes:0,firstContext:e}}else vn=vn.next=e;return t}var Ns=null;function Rh(e){Ns===null?Ns=[e]:Ns.push(e)}function Qv(e,t,r,s){var i=t.interleaved;return i===null?(r.next=r,Rh(t)):(r.next=i.next,i.next=r),t.interleaved=r,Cr(e,s)}function Cr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Tr=!1;function Ah(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yv(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function _r(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Jr(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,me&2){var i=s.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),s.pending=t,Cr(e,r)}return i=s.interleaved,i===null?(t.next=t,Rh(s)):(t.next=i.next,i.next=t),s.interleaved=t,Cr(e,r)}function Ia(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,gh(e,r)}}function Ap(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=l:a=a.next=l,r=r.next}while(r!==null);a===null?i=a=t:a=a.next=t}else i=a=t;r={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ll(e,t,r,s){var i=e.updateQueue;Tr=!1;var a=i.firstBaseUpdate,l=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,h=c.next;c.next=null,l===null?a=h:l.next=h,l=c;var v=e.alternate;v!==null&&(v=v.updateQueue,o=v.lastBaseUpdate,o!==l&&(o===null?v.firstBaseUpdate=h:o.next=h,v.lastBaseUpdate=c))}if(a!==null){var d=i.baseState;l=0,v=h=c=null,o=a;do{var g=o.lane,x=o.eventTime;if((s&g)===g){v!==null&&(v=v.next={eventTime:x,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var _=e,y=o;switch(g=t,x=r,y.tag){case 1:if(_=y.payload,typeof _=="function"){d=_.call(x,d,g);break e}d=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=y.payload,g=typeof _=="function"?_.call(x,d,g):_,g==null)break e;d=De({},d,g);break e;case 2:Tr=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,g=i.effects,g===null?i.effects=[o]:g.push(o))}else x={eventTime:x,lane:g,tag:o.tag,payload:o.payload,callback:o.callback,next:null},v===null?(h=v=x,c=d):v=v.next=x,l|=g;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;g=o,o=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(1);if(v===null&&(c=d),i.baseState=c,i.firstBaseUpdate=h,i.lastBaseUpdate=v,t=i.shared.interleaved,t!==null){i=t;do l|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);qs|=l,e.lanes=l,e.memoizedState=d}}function Tp(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],i=s.callback;if(i!==null){if(s.callback=null,s=r,typeof i!="function")throw Error(G(191,i));i.call(s)}}}var Mo={},dr=ps(Mo),eo=ps(Mo),to=ps(Mo);function Ds(e){if(e===Mo)throw Error(G(174));return e}function Th(e,t){switch(be(to,t),be(eo,e),be(dr,Mo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:$d(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=$d(t,e)}Ce(dr),be(dr,t)}function Un(){Ce(dr),Ce(eo),Ce(to)}function Xv(e){Ds(to.current);var t=Ds(dr.current),r=$d(t,e.type);t!==r&&(be(eo,e),be(dr,r))}function Ph(e){eo.current===e&&(Ce(dr),Ce(eo))}var je=ps(0);function cl(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Zc=[];function Lh(){for(var e=0;e<Zc.length;e++)Zc[e]._workInProgressVersionPrimary=null;Zc.length=0}var Oa=Er.ReactCurrentDispatcher,ed=Er.ReactCurrentBatchConfig,Vs=0,Ne=null,Oe=null,Fe=null,dl=!1,Ti=!1,ro=0,p1=0;function Ye(){throw Error(G(321))}function Ih(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!er(e[r],t[r]))return!1;return!0}function Oh(e,t,r,s,i,a){if(Vs=a,Ne=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Oa.current=e===null||e.memoizedState===null?x1:y1,e=r(s,i),Ti){a=0;do{if(Ti=!1,ro=0,25<=a)throw Error(G(301));a+=1,Fe=Oe=null,t.updateQueue=null,Oa.current=b1,e=r(s,i)}while(Ti)}if(Oa.current=ul,t=Oe!==null&&Oe.next!==null,Vs=0,Fe=Oe=Ne=null,dl=!1,t)throw Error(G(300));return e}function Mh(){var e=ro!==0;return ro=0,e}function nr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?Ne.memoizedState=Fe=e:Fe=Fe.next=e,Fe}function Ht(){if(Oe===null){var e=Ne.alternate;e=e!==null?e.memoizedState:null}else e=Oe.next;var t=Fe===null?Ne.memoizedState:Fe.next;if(t!==null)Fe=t,Oe=e;else{if(e===null)throw Error(G(310));Oe=e,e={memoizedState:Oe.memoizedState,baseState:Oe.baseState,baseQueue:Oe.baseQueue,queue:Oe.queue,next:null},Fe===null?Ne.memoizedState=Fe=e:Fe=Fe.next=e}return Fe}function so(e,t){return typeof t=="function"?t(e):t}function td(e){var t=Ht(),r=t.queue;if(r===null)throw Error(G(311));r.lastRenderedReducer=e;var s=Oe,i=s.baseQueue,a=r.pending;if(a!==null){if(i!==null){var l=i.next;i.next=a.next,a.next=l}s.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,s=s.baseState;var o=l=null,c=null,h=a;do{var v=h.lane;if((Vs&v)===v)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),s=h.hasEagerState?h.eagerState:e(s,h.action);else{var d={lane:v,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(o=c=d,l=s):c=c.next=d,Ne.lanes|=v,qs|=v}h=h.next}while(h!==null&&h!==a);c===null?l=s:c.next=o,er(s,t.memoizedState)||(ht=!0),t.memoizedState=s,t.baseState=l,t.baseQueue=c,r.lastRenderedState=s}if(e=r.interleaved,e!==null){i=e;do a=i.lane,Ne.lanes|=a,qs|=a,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function rd(e){var t=Ht(),r=t.queue;if(r===null)throw Error(G(311));r.lastRenderedReducer=e;var s=r.dispatch,i=r.pending,a=t.memoizedState;if(i!==null){r.pending=null;var l=i=i.next;do a=e(a,l.action),l=l.next;while(l!==i);er(a,t.memoizedState)||(ht=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,s]}function Jv(){}function Zv(e,t){var r=Ne,s=Ht(),i=t(),a=!er(s.memoizedState,i);if(a&&(s.memoizedState=i,ht=!0),s=s.queue,Bh(r0.bind(null,r,s,e),[e]),s.getSnapshot!==t||a||Fe!==null&&Fe.memoizedState.tag&1){if(r.flags|=2048,no(9,t0.bind(null,r,s,i,t),void 0,null),$e===null)throw Error(G(349));Vs&30||e0(r,t,i)}return i}function e0(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ne.updateQueue,t===null?(t={lastEffect:null,stores:null},Ne.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function t0(e,t,r,s){t.value=r,t.getSnapshot=s,s0(t)&&n0(e)}function r0(e,t,r){return r(function(){s0(t)&&n0(e)})}function s0(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!er(e,r)}catch{return!0}}function n0(e){var t=Cr(e,1);t!==null&&Zt(t,e,1,-1)}function Pp(e){var t=nr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:e},t.queue=e,e=e.dispatch=v1.bind(null,Ne,e),[t.memoizedState,e]}function no(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=Ne.updateQueue,t===null?(t={lastEffect:null,stores:null},Ne.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function i0(){return Ht().memoizedState}function Ma(e,t,r,s){var i=nr();Ne.flags|=e,i.memoizedState=no(1|t,r,void 0,s===void 0?null:s)}function Kl(e,t,r,s){var i=Ht();s=s===void 0?null:s;var a=void 0;if(Oe!==null){var l=Oe.memoizedState;if(a=l.destroy,s!==null&&Ih(s,l.deps)){i.memoizedState=no(t,r,a,s);return}}Ne.flags|=e,i.memoizedState=no(1|t,r,a,s)}function Lp(e,t){return Ma(8390656,8,e,t)}function Bh(e,t){return Kl(2048,8,e,t)}function o0(e,t){return Kl(4,2,e,t)}function a0(e,t){return Kl(4,4,e,t)}function l0(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function c0(e,t,r){return r=r!=null?r.concat([e]):null,Kl(4,4,l0.bind(null,t,e),r)}function Fh(){}function d0(e,t){var r=Ht();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Ih(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function u0(e,t){var r=Ht();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Ih(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function h0(e,t,r){return Vs&21?(er(r,t)||(r=vv(),Ne.lanes|=r,qs|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ht=!0),e.memoizedState=r)}function m1(e,t){var r=ge;ge=r!==0&&4>r?r:4,e(!0);var s=ed.transition;ed.transition={};try{e(!1),t()}finally{ge=r,ed.transition=s}}function f0(){return Ht().memoizedState}function g1(e,t,r){var s=es(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},p0(e))m0(t,r);else if(r=Qv(e,t,r,s),r!==null){var i=it();Zt(r,e,s,i),g0(r,t,s)}}function v1(e,t,r){var s=es(e),i={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(p0(e))m0(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var l=t.lastRenderedState,o=a(l,r);if(i.hasEagerState=!0,i.eagerState=o,er(o,l)){var c=t.interleaved;c===null?(i.next=i,Rh(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}r=Qv(e,t,i,s),r!==null&&(i=it(),Zt(r,e,s,i),g0(r,t,s))}}function p0(e){var t=e.alternate;return e===Ne||t!==null&&t===Ne}function m0(e,t){Ti=dl=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function g0(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,gh(e,r)}}var ul={readContext:$t,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useInsertionEffect:Ye,useLayoutEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useMutableSource:Ye,useSyncExternalStore:Ye,useId:Ye,unstable_isNewReconciler:!1},x1={readContext:$t,useCallback:function(e,t){return nr().memoizedState=[e,t===void 0?null:t],e},useContext:$t,useEffect:Lp,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ma(4194308,4,l0.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ma(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ma(4,2,e,t)},useMemo:function(e,t){var r=nr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=nr();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=g1.bind(null,Ne,e),[s.memoizedState,e]},useRef:function(e){var t=nr();return e={current:e},t.memoizedState=e},useState:Pp,useDebugValue:Fh,useDeferredValue:function(e){return nr().memoizedState=e},useTransition:function(){var e=Pp(!1),t=e[0];return e=m1.bind(null,e[1]),nr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=Ne,i=nr();if(ke){if(r===void 0)throw Error(G(407));r=r()}else{if(r=t(),$e===null)throw Error(G(349));Vs&30||e0(s,t,r)}i.memoizedState=r;var a={value:r,getSnapshot:t};return i.queue=a,Lp(r0.bind(null,s,a,e),[e]),s.flags|=2048,no(9,t0.bind(null,s,a,r,t),void 0,null),r},useId:function(){var e=nr(),t=$e.identifierPrefix;if(ke){var r=br,s=yr;r=(s&~(1<<32-Jt(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=ro++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=p1++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},y1={readContext:$t,useCallback:d0,useContext:$t,useEffect:Bh,useImperativeHandle:c0,useInsertionEffect:o0,useLayoutEffect:a0,useMemo:u0,useReducer:td,useRef:i0,useState:function(){return td(so)},useDebugValue:Fh,useDeferredValue:function(e){var t=Ht();return h0(t,Oe.memoizedState,e)},useTransition:function(){var e=td(so)[0],t=Ht().memoizedState;return[e,t]},useMutableSource:Jv,useSyncExternalStore:Zv,useId:f0,unstable_isNewReconciler:!1},b1={readContext:$t,useCallback:d0,useContext:$t,useEffect:Bh,useImperativeHandle:c0,useInsertionEffect:o0,useLayoutEffect:a0,useMemo:u0,useReducer:rd,useRef:i0,useState:function(){return rd(so)},useDebugValue:Fh,useDeferredValue:function(e){var t=Ht();return Oe===null?t.memoizedState=e:h0(t,Oe.memoizedState,e)},useTransition:function(){var e=rd(so)[0],t=Ht().memoizedState;return[e,t]},useMutableSource:Jv,useSyncExternalStore:Zv,useId:f0,unstable_isNewReconciler:!1};function zt(e,t){if(e&&e.defaultProps){t=De({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function au(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:De({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ql={isMounted:function(e){return(e=e._reactInternals)?tn(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=it(),i=es(e),a=_r(s,i);a.payload=t,r!=null&&(a.callback=r),t=Jr(e,a,i),t!==null&&(Zt(t,e,i,s),Ia(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=it(),i=es(e),a=_r(s,i);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=Jr(e,a,i),t!==null&&(Zt(t,e,i,s),Ia(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=it(),s=es(e),i=_r(r,s);i.tag=2,t!=null&&(i.callback=t),t=Jr(e,i,s),t!==null&&(Zt(t,e,s,r),Ia(t,e,s))}};function Ip(e,t,r,s,i,a,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,a,l):t.prototype&&t.prototype.isPureReactComponent?!Yi(r,s)||!Yi(i,a):!0}function v0(e,t,r){var s=!1,i=cs,a=t.contextType;return typeof a=="object"&&a!==null?a=$t(a):(i=mt(t)?Ws:et.current,s=t.contextTypes,a=(s=s!=null)?Fn(e,i):cs),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ql,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Op(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&Ql.enqueueReplaceState(t,t.state,null)}function lu(e,t,r,s){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},Ah(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=$t(a):(a=mt(t)?Ws:et.current,i.context=Fn(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(au(e,t,a,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Ql.enqueueReplaceState(i,i.state,null),ll(e,r,i,s),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Wn(e,t){try{var r="",s=t;do r+=Kb(s),s=s.return;while(s);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function sd(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function cu(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var _1=typeof WeakMap=="function"?WeakMap:Map;function x0(e,t,r){r=_r(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){fl||(fl=!0,yu=s),cu(e,t)},r}function y0(e,t,r){r=_r(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var i=t.value;r.payload=function(){return s(i)},r.callback=function(){cu(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){cu(e,t),typeof s!="function"&&(Zr===null?Zr=new Set([this]):Zr.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function Mp(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new _1;var i=new Set;s.set(t,i)}else i=s.get(t),i===void 0&&(i=new Set,s.set(t,i));i.has(r)||(i.add(r),e=I1.bind(null,e,t,r),t.then(e,e))}function Bp(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Fp(e,t,r,s,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=_r(-1,1),t.tag=2,Jr(r,t,1))),r.lanes|=1),e)}var w1=Er.ReactCurrentOwner,ht=!1;function nt(e,t,r,s){t.child=e===null?Kv(t,null,r,s):Hn(t,e.child,r,s)}function $p(e,t,r,s,i){r=r.render;var a=t.ref;return Cn(t,i),s=Oh(e,t,r,s,a,i),r=Mh(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,kr(e,t,i)):(ke&&r&&Ch(t),t.flags|=1,nt(e,t,s,i),t.child)}function Hp(e,t,r,s,i){if(e===null){var a=r.type;return typeof a=="function"&&!Gh(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,b0(e,t,a,s,i)):(e=Ha(r.type,null,s,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var l=a.memoizedProps;if(r=r.compare,r=r!==null?r:Yi,r(l,s)&&e.ref===t.ref)return kr(e,t,i)}return t.flags|=1,e=ts(a,s),e.ref=t.ref,e.return=t,t.child=e}function b0(e,t,r,s,i){if(e!==null){var a=e.memoizedProps;if(Yi(a,s)&&e.ref===t.ref)if(ht=!1,t.pendingProps=s=a,(e.lanes&i)!==0)e.flags&131072&&(ht=!0);else return t.lanes=e.lanes,kr(e,t,i)}return du(e,t,r,s,i)}function _0(e,t,r){var s=t.pendingProps,i=s.children,a=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(yn,vt),vt|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,be(yn,vt),vt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:r,be(yn,vt),vt|=s}else a!==null?(s=a.baseLanes|r,t.memoizedState=null):s=r,be(yn,vt),vt|=s;return nt(e,t,i,r),t.child}function w0(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function du(e,t,r,s,i){var a=mt(r)?Ws:et.current;return a=Fn(t,a),Cn(t,i),r=Oh(e,t,r,s,a,i),s=Mh(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,kr(e,t,i)):(ke&&s&&Ch(t),t.flags|=1,nt(e,t,r,i),t.child)}function Up(e,t,r,s,i){if(mt(r)){var a=!0;sl(t)}else a=!1;if(Cn(t,i),t.stateNode===null)Ba(e,t),v0(t,r,s),lu(t,r,s,i),s=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,h=r.contextType;typeof h=="object"&&h!==null?h=$t(h):(h=mt(r)?Ws:et.current,h=Fn(t,h));var v=r.getDerivedStateFromProps,d=typeof v=="function"||typeof l.getSnapshotBeforeUpdate=="function";d||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==s||c!==h)&&Op(t,l,s,h),Tr=!1;var g=t.memoizedState;l.state=g,ll(t,s,l,i),c=t.memoizedState,o!==s||g!==c||pt.current||Tr?(typeof v=="function"&&(au(t,r,v,s),c=t.memoizedState),(o=Tr||Ip(t,r,o,s,g,c,h))?(d||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),l.props=s,l.state=c,l.context=h,s=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{l=t.stateNode,Yv(e,t),o=t.memoizedProps,h=t.type===t.elementType?o:zt(t.type,o),l.props=h,d=t.pendingProps,g=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=$t(c):(c=mt(r)?Ws:et.current,c=Fn(t,c));var x=r.getDerivedStateFromProps;(v=typeof x=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==d||g!==c)&&Op(t,l,s,c),Tr=!1,g=t.memoizedState,l.state=g,ll(t,s,l,i);var _=t.memoizedState;o!==d||g!==_||pt.current||Tr?(typeof x=="function"&&(au(t,r,x,s),_=t.memoizedState),(h=Tr||Ip(t,r,h,s,g,_,c)||!1)?(v||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,_,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,_,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=_),l.props=s,l.state=_,l.context=c,s=h):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),s=!1)}return uu(e,t,r,s,a,i)}function uu(e,t,r,s,i,a){w0(e,t);var l=(t.flags&128)!==0;if(!s&&!l)return i&&jp(t,r,!1),kr(e,t,a);s=t.stateNode,w1.current=t;var o=l&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&l?(t.child=Hn(t,e.child,null,a),t.child=Hn(t,null,o,a)):nt(e,t,o,a),t.memoizedState=s.state,i&&jp(t,r,!0),t.child}function S0(e){var t=e.stateNode;t.pendingContext?Ep(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ep(e,t.context,!1),Th(e,t.containerInfo)}function Wp(e,t,r,s,i){return $n(),Eh(i),t.flags|=256,nt(e,t,r,s),t.child}var hu={dehydrated:null,treeContext:null,retryLane:0};function fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function C0(e,t,r){var s=t.pendingProps,i=je.current,a=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),be(je,i&1),e===null)return iu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=s.children,e=s.fallback,a?(s=t.mode,a=t.child,l={mode:"hidden",children:l},!(s&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=Jl(l,s,0,null),e=Us(e,s,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=fu(r),t.memoizedState=hu,e):$h(t,l));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return S1(e,t,l,s,o,i,r);if(a){a=s.fallback,l=t.mode,i=e.child,o=i.sibling;var c={mode:"hidden",children:s.children};return!(l&1)&&t.child!==i?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=ts(i,c),s.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=ts(o,a):(a=Us(a,l,r,null),a.flags|=2),a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,l=e.child.memoizedState,l=l===null?fu(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~r,t.memoizedState=hu,s}return a=e.child,e=a.sibling,s=ts(a,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function $h(e,t){return t=Jl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ma(e,t,r,s){return s!==null&&Eh(s),Hn(t,e.child,null,r),e=$h(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function S1(e,t,r,s,i,a,l){if(r)return t.flags&256?(t.flags&=-257,s=sd(Error(G(422))),ma(e,t,l,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=s.fallback,i=t.mode,s=Jl({mode:"visible",children:s.children},i,0,null),a=Us(a,i,l,null),a.flags|=2,s.return=t,a.return=t,s.sibling=a,t.child=s,t.mode&1&&Hn(t,e.child,null,l),t.child.memoizedState=fu(l),t.memoizedState=hu,a);if(!(t.mode&1))return ma(e,t,l,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var o=s.dgst;return s=o,a=Error(G(419)),s=sd(a,s,void 0),ma(e,t,l,s)}if(o=(l&e.childLanes)!==0,ht||o){if(s=$e,s!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|l)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Cr(e,i),Zt(s,e,i,-1))}return qh(),s=sd(Error(G(421))),ma(e,t,l,s)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=O1.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,xt=Xr(i.nextSibling),bt=t,ke=!0,Qt=null,e!==null&&(Pt[Lt++]=yr,Pt[Lt++]=br,Pt[Lt++]=zs,yr=e.id,br=e.overflow,zs=t),t=$h(t,s.children),t.flags|=4096,t)}function zp(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),ou(e.return,t,r)}function nd(e,t,r,s,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=r,a.tailMode=i)}function k0(e,t,r){var s=t.pendingProps,i=s.revealOrder,a=s.tail;if(nt(e,t,s.children,r),s=je.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zp(e,r,t);else if(e.tag===19)zp(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(be(je,s),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&cl(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),nd(t,!1,i,r,a);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&cl(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}nd(t,!0,r,null,a);break;case"together":nd(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ba(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function kr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),qs|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(G(153));if(t.child!==null){for(e=t.child,r=ts(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ts(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function C1(e,t,r){switch(t.tag){case 3:S0(t),$n();break;case 5:Xv(t);break;case 1:mt(t.type)&&sl(t);break;case 4:Th(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,i=t.memoizedProps.value;be(ol,s._currentValue),s._currentValue=i;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(be(je,je.current&1),t.flags|=128,null):r&t.child.childLanes?C0(e,t,r):(be(je,je.current&1),e=kr(e,t,r),e!==null?e.sibling:null);be(je,je.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return k0(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),be(je,je.current),s)break;return null;case 22:case 23:return t.lanes=0,_0(e,t,r)}return kr(e,t,r)}var E0,pu,j0,N0;E0=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};pu=function(){};j0=function(e,t,r,s){var i=e.memoizedProps;if(i!==s){e=t.stateNode,Ds(dr.current);var a=null;switch(r){case"input":i=Od(e,i),s=Od(e,s),a=[];break;case"select":i=De({},i,{value:void 0}),s=De({},s,{value:void 0}),a=[];break;case"textarea":i=Fd(e,i),s=Fd(e,s),a=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=tl)}Hd(r,s);var l;r=null;for(h in i)if(!s.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var o=i[h];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Wi.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in s){var c=s[h];if(o=i!=null?i[h]:void 0,s.hasOwnProperty(h)&&c!==o&&(c!=null||o!=null))if(h==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(a||(a=[]),a.push(h,r)),r=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(a=a||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Wi.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&Se("scroll",e),a||o===c||(a=[])):(a=a||[]).push(h,c))}r&&(a=a||[]).push("style",r);var h=a;(t.updateQueue=h)&&(t.flags|=4)}};N0=function(e,t,r,s){r!==s&&(t.flags|=4)};function pi(e,t){if(!ke)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Xe(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function k1(e,t,r){var s=t.pendingProps;switch(kh(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(t),null;case 1:return mt(t.type)&&rl(),Xe(t),null;case 3:return s=t.stateNode,Un(),Ce(pt),Ce(et),Lh(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(fa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Qt!==null&&(wu(Qt),Qt=null))),pu(e,t),Xe(t),null;case 5:Ph(t);var i=Ds(to.current);if(r=t.type,e!==null&&t.stateNode!=null)j0(e,t,r,s,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(G(166));return Xe(t),null}if(e=Ds(dr.current),fa(t)){s=t.stateNode,r=t.type;var a=t.memoizedProps;switch(s[lr]=t,s[Zi]=a,e=(t.mode&1)!==0,r){case"dialog":Se("cancel",s),Se("close",s);break;case"iframe":case"object":case"embed":Se("load",s);break;case"video":case"audio":for(i=0;i<Si.length;i++)Se(Si[i],s);break;case"source":Se("error",s);break;case"img":case"image":case"link":Se("error",s),Se("load",s);break;case"details":Se("toggle",s);break;case"input":Zf(s,a),Se("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},Se("invalid",s);break;case"textarea":tp(s,a),Se("invalid",s)}Hd(r,a),i=null;for(var l in a)if(a.hasOwnProperty(l)){var o=a[l];l==="children"?typeof o=="string"?s.textContent!==o&&(a.suppressHydrationWarning!==!0&&ha(s.textContent,o,e),i=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&ha(s.textContent,o,e),i=["children",""+o]):Wi.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&Se("scroll",s)}switch(r){case"input":na(s),ep(s,a,!0);break;case"textarea":na(s),rp(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=tl)}s=i,t.updateQueue=s,s!==null&&(t.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=rv(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=l.createElement(r,{is:s.is}):(e=l.createElement(r),r==="select"&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,r),e[lr]=t,e[Zi]=s,E0(e,t,!1,!1),t.stateNode=e;e:{switch(l=Ud(r,s),r){case"dialog":Se("cancel",e),Se("close",e),i=s;break;case"iframe":case"object":case"embed":Se("load",e),i=s;break;case"video":case"audio":for(i=0;i<Si.length;i++)Se(Si[i],e);i=s;break;case"source":Se("error",e),i=s;break;case"img":case"image":case"link":Se("error",e),Se("load",e),i=s;break;case"details":Se("toggle",e),i=s;break;case"input":Zf(e,s),i=Od(e,s),Se("invalid",e);break;case"option":i=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},i=De({},s,{value:void 0}),Se("invalid",e);break;case"textarea":tp(e,s),i=Fd(e,s),Se("invalid",e);break;default:i=s}Hd(r,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="style"?iv(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&sv(e,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&zi(e,c):typeof c=="number"&&zi(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Wi.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Se("scroll",e):c!=null&&dh(e,a,c,l))}switch(r){case"input":na(e),ep(e,s,!1);break;case"textarea":na(e),rp(e);break;case"option":s.value!=null&&e.setAttribute("value",""+ls(s.value));break;case"select":e.multiple=!!s.multiple,a=s.value,a!=null?bn(e,!!s.multiple,a,!1):s.defaultValue!=null&&bn(e,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=tl)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Xe(t),null;case 6:if(e&&t.stateNode!=null)N0(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(G(166));if(r=Ds(to.current),Ds(dr.current),fa(t)){if(s=t.stateNode,r=t.memoizedProps,s[lr]=t,(a=s.nodeValue!==r)&&(e=bt,e!==null))switch(e.tag){case 3:ha(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ha(s.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[lr]=t,t.stateNode=s}return Xe(t),null;case 13:if(Ce(je),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ke&&xt!==null&&t.mode&1&&!(t.flags&128))qv(),$n(),t.flags|=98560,a=!1;else if(a=fa(t),s!==null&&s.dehydrated!==null){if(e===null){if(!a)throw Error(G(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(G(317));a[lr]=t}else $n(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Xe(t),a=!1}else Qt!==null&&(wu(Qt),Qt=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||je.current&1?Me===0&&(Me=3):qh())),t.updateQueue!==null&&(t.flags|=4),Xe(t),null);case 4:return Un(),pu(e,t),e===null&&Xi(t.stateNode.containerInfo),Xe(t),null;case 10:return Dh(t.type._context),Xe(t),null;case 17:return mt(t.type)&&rl(),Xe(t),null;case 19:if(Ce(je),a=t.memoizedState,a===null)return Xe(t),null;if(s=(t.flags&128)!==0,l=a.rendering,l===null)if(s)pi(a,!1);else{if(Me!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=cl(e),l!==null){for(t.flags|=128,pi(a,!1),s=l.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)a=r,e=s,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return be(je,je.current&1|2),t.child}e=e.sibling}a.tail!==null&&Pe()>zn&&(t.flags|=128,s=!0,pi(a,!1),t.lanes=4194304)}else{if(!s)if(e=cl(l),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),pi(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!ke)return Xe(t),null}else 2*Pe()-a.renderingStartTime>zn&&r!==1073741824&&(t.flags|=128,s=!0,pi(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(r=a.last,r!==null?r.sibling=l:t.child=l,a.last=l)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Pe(),t.sibling=null,r=je.current,be(je,s?r&1|2:r&1),t):(Xe(t),null);case 22:case 23:return Vh(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?vt&1073741824&&(Xe(t),t.subtreeFlags&6&&(t.flags|=8192)):Xe(t),null;case 24:return null;case 25:return null}throw Error(G(156,t.tag))}function E1(e,t){switch(kh(t),t.tag){case 1:return mt(t.type)&&rl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Un(),Ce(pt),Ce(et),Lh(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ph(t),null;case 13:if(Ce(je),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(G(340));$n()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ce(je),null;case 4:return Un(),null;case 10:return Dh(t.type._context),null;case 22:case 23:return Vh(),null;case 24:return null;default:return null}}var ga=!1,Ze=!1,j1=typeof WeakSet=="function"?WeakSet:Set,Z=null;function xn(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Ae(e,t,s)}else r.current=null}function mu(e,t,r){try{r()}catch(s){Ae(e,t,s)}}var Vp=!1;function N1(e,t){if(Jd=Ja,e=Pv(),Sh(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var i=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var l=0,o=-1,c=-1,h=0,v=0,d=e,g=null;t:for(;;){for(var x;d!==r||i!==0&&d.nodeType!==3||(o=l+i),d!==a||s!==0&&d.nodeType!==3||(c=l+s),d.nodeType===3&&(l+=d.nodeValue.length),(x=d.firstChild)!==null;)g=d,d=x;for(;;){if(d===e)break t;if(g===r&&++h===i&&(o=l),g===a&&++v===s&&(c=l),(x=d.nextSibling)!==null)break;d=g,g=d.parentNode}d=x}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Zd={focusedElem:e,selectionRange:r},Ja=!1,Z=t;Z!==null;)if(t=Z,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Z=e;else for(;Z!==null;){t=Z;try{var _=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var y=_.memoizedProps,f=_.memoizedState,p=t.stateNode,u=p.getSnapshotBeforeUpdate(t.elementType===t.type?y:zt(t.type,y),f);p.__reactInternalSnapshotBeforeUpdate=u}break;case 3:var m=t.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(b){Ae(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,Z=e;break}Z=t.return}return _=Vp,Vp=!1,_}function Pi(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&mu(t,r,a)}i=i.next}while(i!==s)}}function Yl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function gu(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function D0(e){var t=e.alternate;t!==null&&(e.alternate=null,D0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[lr],delete t[Zi],delete t[ru],delete t[d1],delete t[u1])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function R0(e){return e.tag===5||e.tag===3||e.tag===4}function qp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||R0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function vu(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=tl));else if(s!==4&&(e=e.child,e!==null))for(vu(e,t,r),e=e.sibling;e!==null;)vu(e,t,r),e=e.sibling}function xu(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(xu(e,t,r),e=e.sibling;e!==null;)xu(e,t,r),e=e.sibling}var Ve=null,Gt=!1;function Dr(e,t,r){for(r=r.child;r!==null;)A0(e,t,r),r=r.sibling}function A0(e,t,r){if(cr&&typeof cr.onCommitFiberUnmount=="function")try{cr.onCommitFiberUnmount(Ul,r)}catch{}switch(r.tag){case 5:Ze||xn(r,t);case 6:var s=Ve,i=Gt;Ve=null,Dr(e,t,r),Ve=s,Gt=i,Ve!==null&&(Gt?(e=Ve,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ve.removeChild(r.stateNode));break;case 18:Ve!==null&&(Gt?(e=Ve,r=r.stateNode,e.nodeType===8?Xc(e.parentNode,r):e.nodeType===1&&Xc(e,r),Ki(e)):Xc(Ve,r.stateNode));break;case 4:s=Ve,i=Gt,Ve=r.stateNode.containerInfo,Gt=!0,Dr(e,t,r),Ve=s,Gt=i;break;case 0:case 11:case 14:case 15:if(!Ze&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var a=i,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&mu(r,t,l),i=i.next}while(i!==s)}Dr(e,t,r);break;case 1:if(!Ze&&(xn(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(o){Ae(r,t,o)}Dr(e,t,r);break;case 21:Dr(e,t,r);break;case 22:r.mode&1?(Ze=(s=Ze)||r.memoizedState!==null,Dr(e,t,r),Ze=s):Dr(e,t,r);break;default:Dr(e,t,r)}}function Gp(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new j1),t.forEach(function(s){var i=M1.bind(null,e,s);r.has(s)||(r.add(s),s.then(i,i))})}}function Ut(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var i=r[s];try{var a=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:Ve=o.stateNode,Gt=!1;break e;case 3:Ve=o.stateNode.containerInfo,Gt=!0;break e;case 4:Ve=o.stateNode.containerInfo,Gt=!0;break e}o=o.return}if(Ve===null)throw Error(G(160));A0(a,l,i),Ve=null,Gt=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(h){Ae(i,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)T0(t,e),t=t.sibling}function T0(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ut(t,e),sr(e),s&4){try{Pi(3,e,e.return),Yl(3,e)}catch(y){Ae(e,e.return,y)}try{Pi(5,e,e.return)}catch(y){Ae(e,e.return,y)}}break;case 1:Ut(t,e),sr(e),s&512&&r!==null&&xn(r,r.return);break;case 5:if(Ut(t,e),sr(e),s&512&&r!==null&&xn(r,r.return),e.flags&32){var i=e.stateNode;try{zi(i,"")}catch(y){Ae(e,e.return,y)}}if(s&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,l=r!==null?r.memoizedProps:a,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&ev(i,a),Ud(o,l);var h=Ud(o,a);for(l=0;l<c.length;l+=2){var v=c[l],d=c[l+1];v==="style"?iv(i,d):v==="dangerouslySetInnerHTML"?sv(i,d):v==="children"?zi(i,d):dh(i,v,d,h)}switch(o){case"input":Md(i,a);break;case"textarea":tv(i,a);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var x=a.value;x!=null?bn(i,!!a.multiple,x,!1):g!==!!a.multiple&&(a.defaultValue!=null?bn(i,!!a.multiple,a.defaultValue,!0):bn(i,!!a.multiple,a.multiple?[]:"",!1))}i[Zi]=a}catch(y){Ae(e,e.return,y)}}break;case 6:if(Ut(t,e),sr(e),s&4){if(e.stateNode===null)throw Error(G(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(y){Ae(e,e.return,y)}}break;case 3:if(Ut(t,e),sr(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Ki(t.containerInfo)}catch(y){Ae(e,e.return,y)}break;case 4:Ut(t,e),sr(e);break;case 13:Ut(t,e),sr(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(Wh=Pe())),s&4&&Gp(e);break;case 22:if(v=r!==null&&r.memoizedState!==null,e.mode&1?(Ze=(h=Ze)||v,Ut(t,e),Ze=h):Ut(t,e),sr(e),s&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!v&&e.mode&1)for(Z=e,v=e.child;v!==null;){for(d=Z=v;Z!==null;){switch(g=Z,x=g.child,g.tag){case 0:case 11:case 14:case 15:Pi(4,g,g.return);break;case 1:xn(g,g.return);var _=g.stateNode;if(typeof _.componentWillUnmount=="function"){s=g,r=g.return;try{t=s,_.props=t.memoizedProps,_.state=t.memoizedState,_.componentWillUnmount()}catch(y){Ae(s,r,y)}}break;case 5:xn(g,g.return);break;case 22:if(g.memoizedState!==null){Qp(d);continue}}x!==null?(x.return=g,Z=x):Qp(d)}v=v.sibling}e:for(v=null,d=e;;){if(d.tag===5){if(v===null){v=d;try{i=d.stateNode,h?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=d.stateNode,c=d.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=nv("display",l))}catch(y){Ae(e,e.return,y)}}}else if(d.tag===6){if(v===null)try{d.stateNode.nodeValue=h?"":d.memoizedProps}catch(y){Ae(e,e.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;v===d&&(v=null),d=d.return}v===d&&(v=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ut(t,e),sr(e),s&4&&Gp(e);break;case 21:break;default:Ut(t,e),sr(e)}}function sr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(R0(r)){var s=r;break e}r=r.return}throw Error(G(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(zi(i,""),s.flags&=-33);var a=qp(e);xu(e,a,i);break;case 3:case 4:var l=s.stateNode.containerInfo,o=qp(e);vu(e,o,l);break;default:throw Error(G(161))}}catch(c){Ae(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function D1(e,t,r){Z=e,P0(e)}function P0(e,t,r){for(var s=(e.mode&1)!==0;Z!==null;){var i=Z,a=i.child;if(i.tag===22&&s){var l=i.memoizedState!==null||ga;if(!l){var o=i.alternate,c=o!==null&&o.memoizedState!==null||Ze;o=ga;var h=Ze;if(ga=l,(Ze=c)&&!h)for(Z=i;Z!==null;)l=Z,c=l.child,l.tag===22&&l.memoizedState!==null?Yp(i):c!==null?(c.return=l,Z=c):Yp(i);for(;a!==null;)Z=a,P0(a),a=a.sibling;Z=i,ga=o,Ze=h}Kp(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Z=a):Kp(e)}}function Kp(e){for(;Z!==null;){var t=Z;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ze||Yl(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Ze)if(r===null)s.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:zt(t.type,r.memoizedProps);s.componentDidUpdate(i,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Tp(t,a,s);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Tp(t,l,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var v=h.memoizedState;if(v!==null){var d=v.dehydrated;d!==null&&Ki(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}Ze||t.flags&512&&gu(t)}catch(g){Ae(t,t.return,g)}}if(t===e){Z=null;break}if(r=t.sibling,r!==null){r.return=t.return,Z=r;break}Z=t.return}}function Qp(e){for(;Z!==null;){var t=Z;if(t===e){Z=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Z=r;break}Z=t.return}}function Yp(e){for(;Z!==null;){var t=Z;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Yl(4,t)}catch(c){Ae(t,r,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var i=t.return;try{s.componentDidMount()}catch(c){Ae(t,i,c)}}var a=t.return;try{gu(t)}catch(c){Ae(t,a,c)}break;case 5:var l=t.return;try{gu(t)}catch(c){Ae(t,l,c)}}}catch(c){Ae(t,t.return,c)}if(t===e){Z=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Z=o;break}Z=t.return}}var R1=Math.ceil,hl=Er.ReactCurrentDispatcher,Hh=Er.ReactCurrentOwner,Bt=Er.ReactCurrentBatchConfig,me=0,$e=null,Le=null,Ke=0,vt=0,yn=ps(0),Me=0,io=null,qs=0,Xl=0,Uh=0,Li=null,ut=null,Wh=0,zn=1/0,gr=null,fl=!1,yu=null,Zr=null,va=!1,zr=null,pl=0,Ii=0,bu=null,Fa=-1,$a=0;function it(){return me&6?Pe():Fa!==-1?Fa:Fa=Pe()}function es(e){return e.mode&1?me&2&&Ke!==0?Ke&-Ke:f1.transition!==null?($a===0&&($a=vv()),$a):(e=ge,e!==0||(e=window.event,e=e===void 0?16:Cv(e.type)),e):1}function Zt(e,t,r,s){if(50<Ii)throw Ii=0,bu=null,Error(G(185));Lo(e,r,s),(!(me&2)||e!==$e)&&(e===$e&&(!(me&2)&&(Xl|=r),Me===4&&Lr(e,Ke)),gt(e,s),r===1&&me===0&&!(t.mode&1)&&(zn=Pe()+500,Gl&&ms()))}function gt(e,t){var r=e.callbackNode;f_(e,t);var s=Xa(e,e===$e?Ke:0);if(s===0)r!==null&&ip(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&ip(r),t===1)e.tag===0?h1(Xp.bind(null,e)):Wv(Xp.bind(null,e)),l1(function(){!(me&6)&&ms()}),r=null;else{switch(xv(s)){case 1:r=mh;break;case 4:r=mv;break;case 16:r=Ya;break;case 536870912:r=gv;break;default:r=Ya}r=H0(r,L0.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function L0(e,t){if(Fa=-1,$a=0,me&6)throw Error(G(327));var r=e.callbackNode;if(kn()&&e.callbackNode!==r)return null;var s=Xa(e,e===$e?Ke:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=ml(e,s);else{t=s;var i=me;me|=2;var a=O0();($e!==e||Ke!==t)&&(gr=null,zn=Pe()+500,Hs(e,t));do try{P1();break}catch(o){I0(e,o)}while(1);Nh(),hl.current=a,me=i,Le!==null?t=0:($e=null,Ke=0,t=Me)}if(t!==0){if(t===2&&(i=Gd(e),i!==0&&(s=i,t=_u(e,i))),t===1)throw r=io,Hs(e,0),Lr(e,s),gt(e,Pe()),r;if(t===6)Lr(e,s);else{if(i=e.current.alternate,!(s&30)&&!A1(i)&&(t=ml(e,s),t===2&&(a=Gd(e),a!==0&&(s=a,t=_u(e,a))),t===1))throw r=io,Hs(e,0),Lr(e,s),gt(e,Pe()),r;switch(e.finishedWork=i,e.finishedLanes=s,t){case 0:case 1:throw Error(G(345));case 2:Cs(e,ut,gr);break;case 3:if(Lr(e,s),(s&130023424)===s&&(t=Wh+500-Pe(),10<t)){if(Xa(e,0)!==0)break;if(i=e.suspendedLanes,(i&s)!==s){it(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=tu(Cs.bind(null,e,ut,gr),t);break}Cs(e,ut,gr);break;case 4:if(Lr(e,s),(s&4194240)===s)break;for(t=e.eventTimes,i=-1;0<s;){var l=31-Jt(s);a=1<<l,l=t[l],l>i&&(i=l),s&=~a}if(s=i,s=Pe()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*R1(s/1960))-s,10<s){e.timeoutHandle=tu(Cs.bind(null,e,ut,gr),s);break}Cs(e,ut,gr);break;case 5:Cs(e,ut,gr);break;default:throw Error(G(329))}}}return gt(e,Pe()),e.callbackNode===r?L0.bind(null,e):null}function _u(e,t){var r=Li;return e.current.memoizedState.isDehydrated&&(Hs(e,t).flags|=256),e=ml(e,t),e!==2&&(t=ut,ut=r,t!==null&&wu(t)),e}function wu(e){ut===null?ut=e:ut.push.apply(ut,e)}function A1(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var i=r[s],a=i.getSnapshot;i=i.value;try{if(!er(a(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Lr(e,t){for(t&=~Uh,t&=~Xl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Jt(t),s=1<<r;e[r]=-1,t&=~s}}function Xp(e){if(me&6)throw Error(G(327));kn();var t=Xa(e,0);if(!(t&1))return gt(e,Pe()),null;var r=ml(e,t);if(e.tag!==0&&r===2){var s=Gd(e);s!==0&&(t=s,r=_u(e,s))}if(r===1)throw r=io,Hs(e,0),Lr(e,t),gt(e,Pe()),r;if(r===6)throw Error(G(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Cs(e,ut,gr),gt(e,Pe()),null}function zh(e,t){var r=me;me|=1;try{return e(t)}finally{me=r,me===0&&(zn=Pe()+500,Gl&&ms())}}function Gs(e){zr!==null&&zr.tag===0&&!(me&6)&&kn();var t=me;me|=1;var r=Bt.transition,s=ge;try{if(Bt.transition=null,ge=1,e)return e()}finally{ge=s,Bt.transition=r,me=t,!(me&6)&&ms()}}function Vh(){vt=yn.current,Ce(yn)}function Hs(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,a1(r)),Le!==null)for(r=Le.return;r!==null;){var s=r;switch(kh(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&rl();break;case 3:Un(),Ce(pt),Ce(et),Lh();break;case 5:Ph(s);break;case 4:Un();break;case 13:Ce(je);break;case 19:Ce(je);break;case 10:Dh(s.type._context);break;case 22:case 23:Vh()}r=r.return}if($e=e,Le=e=ts(e.current,null),Ke=vt=t,Me=0,io=null,Uh=Xl=qs=0,ut=Li=null,Ns!==null){for(t=0;t<Ns.length;t++)if(r=Ns[t],s=r.interleaved,s!==null){r.interleaved=null;var i=s.next,a=r.pending;if(a!==null){var l=a.next;a.next=i,s.next=l}r.pending=s}Ns=null}return e}function I0(e,t){do{var r=Le;try{if(Nh(),Oa.current=ul,dl){for(var s=Ne.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}dl=!1}if(Vs=0,Fe=Oe=Ne=null,Ti=!1,ro=0,Hh.current=null,r===null||r.return===null){Me=1,io=t,Le=null;break}e:{var a=e,l=r.return,o=r,c=t;if(t=Ke,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,v=o,d=v.tag;if(!(v.mode&1)&&(d===0||d===11||d===15)){var g=v.alternate;g?(v.updateQueue=g.updateQueue,v.memoizedState=g.memoizedState,v.lanes=g.lanes):(v.updateQueue=null,v.memoizedState=null)}var x=Bp(l);if(x!==null){x.flags&=-257,Fp(x,l,o,a,t),x.mode&1&&Mp(a,h,t),t=x,c=h;var _=t.updateQueue;if(_===null){var y=new Set;y.add(c),t.updateQueue=y}else _.add(c);break e}else{if(!(t&1)){Mp(a,h,t),qh();break e}c=Error(G(426))}}else if(ke&&o.mode&1){var f=Bp(l);if(f!==null){!(f.flags&65536)&&(f.flags|=256),Fp(f,l,o,a,t),Eh(Wn(c,o));break e}}a=c=Wn(c,o),Me!==4&&(Me=2),Li===null?Li=[a]:Li.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var p=x0(a,c,t);Ap(a,p);break e;case 1:o=c;var u=a.type,m=a.stateNode;if(!(a.flags&128)&&(typeof u.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Zr===null||!Zr.has(m)))){a.flags|=65536,t&=-t,a.lanes|=t;var b=y0(a,o,t);Ap(a,b);break e}}a=a.return}while(a!==null)}B0(r)}catch(S){t=S,Le===r&&r!==null&&(Le=r=r.return);continue}break}while(1)}function O0(){var e=hl.current;return hl.current=ul,e===null?ul:e}function qh(){(Me===0||Me===3||Me===2)&&(Me=4),$e===null||!(qs&268435455)&&!(Xl&268435455)||Lr($e,Ke)}function ml(e,t){var r=me;me|=2;var s=O0();($e!==e||Ke!==t)&&(gr=null,Hs(e,t));do try{T1();break}catch(i){I0(e,i)}while(1);if(Nh(),me=r,hl.current=s,Le!==null)throw Error(G(261));return $e=null,Ke=0,Me}function T1(){for(;Le!==null;)M0(Le)}function P1(){for(;Le!==null&&!n_();)M0(Le)}function M0(e){var t=$0(e.alternate,e,vt);e.memoizedProps=e.pendingProps,t===null?B0(e):Le=t,Hh.current=null}function B0(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=E1(r,t),r!==null){r.flags&=32767,Le=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Me=6,Le=null;return}}else if(r=k1(r,t,vt),r!==null){Le=r;return}if(t=t.sibling,t!==null){Le=t;return}Le=t=e}while(t!==null);Me===0&&(Me=5)}function Cs(e,t,r){var s=ge,i=Bt.transition;try{Bt.transition=null,ge=1,L1(e,t,r,s)}finally{Bt.transition=i,ge=s}return null}function L1(e,t,r,s){do kn();while(zr!==null);if(me&6)throw Error(G(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(G(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(p_(e,a),e===$e&&(Le=$e=null,Ke=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||va||(va=!0,H0(Ya,function(){return kn(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Bt.transition,Bt.transition=null;var l=ge;ge=1;var o=me;me|=4,Hh.current=null,N1(e,r),T0(r,e),e1(Zd),Ja=!!Jd,Zd=Jd=null,e.current=r,D1(r),i_(),me=o,ge=l,Bt.transition=a}else e.current=r;if(va&&(va=!1,zr=e,pl=i),a=e.pendingLanes,a===0&&(Zr=null),l_(r.stateNode),gt(e,Pe()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],s(i.value,{componentStack:i.stack,digest:i.digest});if(fl)throw fl=!1,e=yu,yu=null,e;return pl&1&&e.tag!==0&&kn(),a=e.pendingLanes,a&1?e===bu?Ii++:(Ii=0,bu=e):Ii=0,ms(),null}function kn(){if(zr!==null){var e=xv(pl),t=Bt.transition,r=ge;try{if(Bt.transition=null,ge=16>e?16:e,zr===null)var s=!1;else{if(e=zr,zr=null,pl=0,me&6)throw Error(G(331));var i=me;for(me|=4,Z=e.current;Z!==null;){var a=Z,l=a.child;if(Z.flags&16){var o=a.deletions;if(o!==null){for(var c=0;c<o.length;c++){var h=o[c];for(Z=h;Z!==null;){var v=Z;switch(v.tag){case 0:case 11:case 15:Pi(8,v,a)}var d=v.child;if(d!==null)d.return=v,Z=d;else for(;Z!==null;){v=Z;var g=v.sibling,x=v.return;if(D0(v),v===h){Z=null;break}if(g!==null){g.return=x,Z=g;break}Z=x}}}var _=a.alternate;if(_!==null){var y=_.child;if(y!==null){_.child=null;do{var f=y.sibling;y.sibling=null,y=f}while(y!==null)}}Z=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,Z=l;else e:for(;Z!==null;){if(a=Z,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Pi(9,a,a.return)}var p=a.sibling;if(p!==null){p.return=a.return,Z=p;break e}Z=a.return}}var u=e.current;for(Z=u;Z!==null;){l=Z;var m=l.child;if(l.subtreeFlags&2064&&m!==null)m.return=l,Z=m;else e:for(l=u;Z!==null;){if(o=Z,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Yl(9,o)}}catch(S){Ae(o,o.return,S)}if(o===l){Z=null;break e}var b=o.sibling;if(b!==null){b.return=o.return,Z=b;break e}Z=o.return}}if(me=i,ms(),cr&&typeof cr.onPostCommitFiberRoot=="function")try{cr.onPostCommitFiberRoot(Ul,e)}catch{}s=!0}return s}finally{ge=r,Bt.transition=t}}return!1}function Jp(e,t,r){t=Wn(r,t),t=x0(e,t,1),e=Jr(e,t,1),t=it(),e!==null&&(Lo(e,1,t),gt(e,t))}function Ae(e,t,r){if(e.tag===3)Jp(e,e,r);else for(;t!==null;){if(t.tag===3){Jp(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Zr===null||!Zr.has(s))){e=Wn(r,e),e=y0(t,e,1),t=Jr(t,e,1),e=it(),t!==null&&(Lo(t,1,e),gt(t,e));break}}t=t.return}}function I1(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=it(),e.pingedLanes|=e.suspendedLanes&r,$e===e&&(Ke&r)===r&&(Me===4||Me===3&&(Ke&130023424)===Ke&&500>Pe()-Wh?Hs(e,0):Uh|=r),gt(e,t)}function F0(e,t){t===0&&(e.mode&1?(t=aa,aa<<=1,!(aa&130023424)&&(aa=4194304)):t=1);var r=it();e=Cr(e,t),e!==null&&(Lo(e,t,r),gt(e,r))}function O1(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),F0(e,r)}function M1(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(G(314))}s!==null&&s.delete(t),F0(e,r)}var $0;$0=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||pt.current)ht=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ht=!1,C1(e,t,r);ht=!!(e.flags&131072)}else ht=!1,ke&&t.flags&1048576&&zv(t,il,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Ba(e,t),e=t.pendingProps;var i=Fn(t,et.current);Cn(t,r),i=Oh(null,t,s,e,i,r);var a=Mh();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,mt(s)?(a=!0,sl(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ah(t),i.updater=Ql,t.stateNode=i,i._reactInternals=t,lu(t,s,e,r),t=uu(null,t,s,!0,a,r)):(t.tag=0,ke&&a&&Ch(t),nt(null,t,i,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Ba(e,t),e=t.pendingProps,i=s._init,s=i(s._payload),t.type=s,i=t.tag=F1(s),e=zt(s,e),i){case 0:t=du(null,t,s,e,r);break e;case 1:t=Up(null,t,s,e,r);break e;case 11:t=$p(null,t,s,e,r);break e;case 14:t=Hp(null,t,s,zt(s.type,e),r);break e}throw Error(G(306,s,""))}return t;case 0:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:zt(s,i),du(e,t,s,i,r);case 1:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:zt(s,i),Up(e,t,s,i,r);case 3:e:{if(S0(t),e===null)throw Error(G(387));s=t.pendingProps,a=t.memoizedState,i=a.element,Yv(e,t),ll(t,s,null,r);var l=t.memoizedState;if(s=l.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=Wn(Error(G(423)),t),t=Wp(e,t,s,r,i);break e}else if(s!==i){i=Wn(Error(G(424)),t),t=Wp(e,t,s,r,i);break e}else for(xt=Xr(t.stateNode.containerInfo.firstChild),bt=t,ke=!0,Qt=null,r=Kv(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if($n(),s===i){t=kr(e,t,r);break e}nt(e,t,s,r)}t=t.child}return t;case 5:return Xv(t),e===null&&iu(t),s=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,l=i.children,eu(s,i)?l=null:a!==null&&eu(s,a)&&(t.flags|=32),w0(e,t),nt(e,t,l,r),t.child;case 6:return e===null&&iu(t),null;case 13:return C0(e,t,r);case 4:return Th(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Hn(t,null,s,r):nt(e,t,s,r),t.child;case 11:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:zt(s,i),$p(e,t,s,i,r);case 7:return nt(e,t,t.pendingProps,r),t.child;case 8:return nt(e,t,t.pendingProps.children,r),t.child;case 12:return nt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,i=t.pendingProps,a=t.memoizedProps,l=i.value,be(ol,s._currentValue),s._currentValue=l,a!==null)if(er(a.value,l)){if(a.children===i.children&&!pt.current){t=kr(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){l=a.child;for(var c=o.firstContext;c!==null;){if(c.context===s){if(a.tag===1){c=_r(-1,r&-r),c.tag=2;var h=a.updateQueue;if(h!==null){h=h.shared;var v=h.pending;v===null?c.next=c:(c.next=v.next,v.next=c),h.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),ou(a.return,r,t),o.lanes|=r;break}c=c.next}}else if(a.tag===10)l=a.type===t.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(G(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),ou(l,r,t),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===t){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}nt(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,s=t.pendingProps.children,Cn(t,r),i=$t(i),s=s(i),t.flags|=1,nt(e,t,s,r),t.child;case 14:return s=t.type,i=zt(s,t.pendingProps),i=zt(s.type,i),Hp(e,t,s,i,r);case 15:return b0(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:zt(s,i),Ba(e,t),t.tag=1,mt(s)?(e=!0,sl(t)):e=!1,Cn(t,r),v0(t,s,i),lu(t,s,i,r),uu(null,t,s,!0,e,r);case 19:return k0(e,t,r);case 22:return _0(e,t,r)}throw Error(G(156,t.tag))};function H0(e,t){return pv(e,t)}function B1(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ot(e,t,r,s){return new B1(e,t,r,s)}function Gh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function F1(e){if(typeof e=="function")return Gh(e)?1:0;if(e!=null){if(e=e.$$typeof,e===hh)return 11;if(e===fh)return 14}return 2}function ts(e,t){var r=e.alternate;return r===null?(r=Ot(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ha(e,t,r,s,i,a){var l=2;if(s=e,typeof e=="function")Gh(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case cn:return Us(r.children,i,a,t);case uh:l=8,i|=8;break;case Td:return e=Ot(12,r,t,i|2),e.elementType=Td,e.lanes=a,e;case Pd:return e=Ot(13,r,t,i),e.elementType=Pd,e.lanes=a,e;case Ld:return e=Ot(19,r,t,i),e.elementType=Ld,e.lanes=a,e;case Xg:return Jl(r,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Qg:l=10;break e;case Yg:l=9;break e;case hh:l=11;break e;case fh:l=14;break e;case Ar:l=16,s=null;break e}throw Error(G(130,e==null?e:typeof e,""))}return t=Ot(l,r,t,i),t.elementType=e,t.type=s,t.lanes=a,t}function Us(e,t,r,s){return e=Ot(7,e,s,t),e.lanes=r,e}function Jl(e,t,r,s){return e=Ot(22,e,s,t),e.elementType=Xg,e.lanes=r,e.stateNode={isHidden:!1},e}function id(e,t,r){return e=Ot(6,e,null,t),e.lanes=r,e}function od(e,t,r){return t=Ot(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $1(e,t,r,s,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$c(0),this.expirationTimes=$c(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$c(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Kh(e,t,r,s,i,a,l,o,c){return e=new $1(e,t,r,o,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Ot(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ah(a),e}function H1(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ln,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function U0(e){if(!e)return cs;e=e._reactInternals;e:{if(tn(e)!==e||e.tag!==1)throw Error(G(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(mt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(G(171))}if(e.tag===1){var r=e.type;if(mt(r))return Uv(e,r,t)}return t}function W0(e,t,r,s,i,a,l,o,c){return e=Kh(r,s,!0,e,i,a,l,o,c),e.context=U0(null),r=e.current,s=it(),i=es(r),a=_r(s,i),a.callback=t??null,Jr(r,a,i),e.current.lanes=i,Lo(e,i,s),gt(e,s),e}function Zl(e,t,r,s){var i=t.current,a=it(),l=es(i);return r=U0(r),t.context===null?t.context=r:t.pendingContext=r,t=_r(a,l),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Jr(i,t,l),e!==null&&(Zt(e,i,l,a),Ia(e,i,l)),l}function gl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Zp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Qh(e,t){Zp(e,t),(e=e.alternate)&&Zp(e,t)}function U1(){return null}var z0=typeof reportError=="function"?reportError:function(e){console.error(e)};function Yh(e){this._internalRoot=e}ec.prototype.render=Yh.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(G(409));Zl(e,t,null,null)};ec.prototype.unmount=Yh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Gs(function(){Zl(null,e,null,null)}),t[Sr]=null}};function ec(e){this._internalRoot=e}ec.prototype.unstable_scheduleHydration=function(e){if(e){var t=_v();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Pr.length&&t!==0&&t<Pr[r].priority;r++);Pr.splice(r,0,e),r===0&&Sv(e)}};function Xh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function tc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function em(){}function W1(e,t,r,s,i){if(i){if(typeof s=="function"){var a=s;s=function(){var h=gl(l);a.call(h)}}var l=W0(t,s,e,0,null,!1,!1,"",em);return e._reactRootContainer=l,e[Sr]=l.current,Xi(e.nodeType===8?e.parentNode:e),Gs(),l}for(;i=e.lastChild;)e.removeChild(i);if(typeof s=="function"){var o=s;s=function(){var h=gl(c);o.call(h)}}var c=Kh(e,0,!1,null,null,!1,!1,"",em);return e._reactRootContainer=c,e[Sr]=c.current,Xi(e.nodeType===8?e.parentNode:e),Gs(function(){Zl(t,c,r,s)}),c}function rc(e,t,r,s,i){var a=r._reactRootContainer;if(a){var l=a;if(typeof i=="function"){var o=i;i=function(){var c=gl(l);o.call(c)}}Zl(t,l,e,i)}else l=W1(r,t,e,i,s);return gl(l)}yv=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=wi(t.pendingLanes);r!==0&&(gh(t,r|1),gt(t,Pe()),!(me&6)&&(zn=Pe()+500,ms()))}break;case 13:Gs(function(){var s=Cr(e,1);if(s!==null){var i=it();Zt(s,e,1,i)}}),Qh(e,1)}};vh=function(e){if(e.tag===13){var t=Cr(e,134217728);if(t!==null){var r=it();Zt(t,e,134217728,r)}Qh(e,134217728)}};bv=function(e){if(e.tag===13){var t=es(e),r=Cr(e,t);if(r!==null){var s=it();Zt(r,e,t,s)}Qh(e,t)}};_v=function(){return ge};wv=function(e,t){var r=ge;try{return ge=e,t()}finally{ge=r}};zd=function(e,t,r){switch(t){case"input":if(Md(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var i=ql(s);if(!i)throw Error(G(90));Zg(s),Md(s,i)}}}break;case"textarea":tv(e,r);break;case"select":t=r.value,t!=null&&bn(e,!!r.multiple,t,!1)}};lv=zh;cv=Gs;var z1={usingClientEntryPoint:!1,Events:[Oo,fn,ql,ov,av,zh]},mi={findFiberByHostInstance:js,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},V1={bundleType:mi.bundleType,version:mi.version,rendererPackageName:mi.rendererPackageName,rendererConfig:mi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Er.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=hv(e),e===null?null:e.stateNode},findFiberByHostInstance:mi.findFiberByHostInstance||U1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xa.isDisabled&&xa.supportsFiber)try{Ul=xa.inject(V1),cr=xa}catch{}}kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z1;kt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xh(t))throw Error(G(200));return H1(e,t,null,r)};kt.createRoot=function(e,t){if(!Xh(e))throw Error(G(299));var r=!1,s="",i=z0;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Kh(e,1,!1,null,null,r,!1,s,i),e[Sr]=t.current,Xi(e.nodeType===8?e.parentNode:e),new Yh(t)};kt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(G(188)):(e=Object.keys(e).join(","),Error(G(268,e)));return e=hv(t),e=e===null?null:e.stateNode,e};kt.flushSync=function(e){return Gs(e)};kt.hydrate=function(e,t,r){if(!tc(t))throw Error(G(200));return rc(null,e,t,!0,r)};kt.hydrateRoot=function(e,t,r){if(!Xh(e))throw Error(G(405));var s=r!=null&&r.hydratedSources||null,i=!1,a="",l=z0;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=W0(t,null,e,1,r??null,i,!1,a,l),e[Sr]=t.current,Xi(e),s)for(e=0;e<s.length;e++)r=s[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new ec(t)};kt.render=function(e,t,r){if(!tc(t))throw Error(G(200));return rc(null,e,t,!1,r)};kt.unmountComponentAtNode=function(e){if(!tc(e))throw Error(G(40));return e._reactRootContainer?(Gs(function(){rc(null,null,e,!1,function(){e._reactRootContainer=null,e[Sr]=null})}),!0):!1};kt.unstable_batchedUpdates=zh;kt.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!tc(r))throw Error(G(200));if(e==null||e._reactInternals===void 0)throw Error(G(38));return rc(e,t,r,!1,s)};kt.version="18.3.1-next-f1338f8080-20240426";function V0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(V0)}catch(e){console.error(e)}}V0(),Vg.exports=kt;var Jh=Vg.exports;const q1=sh(Jh);var tm=Jh;Rd.createRoot=tm.createRoot,Rd.hydrateRoot=tm.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function oo(){return oo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},oo.apply(this,arguments)}var Vr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Vr||(Vr={}));const rm="popstate";function G1(e){e===void 0&&(e={});function t(s,i){let{pathname:a,search:l,hash:o}=s.location;return Su("",{pathname:a,search:l,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(s,i){return typeof i=="string"?i:vl(i)}return Q1(t,r,null,e)}function Te(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function q0(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function K1(){return Math.random().toString(36).substr(2,8)}function sm(e,t){return{usr:e.state,key:e.key,idx:t}}function Su(e,t,r,s){return r===void 0&&(r=null),oo({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ei(t):t,{state:r,key:t&&t.key||s||K1()})}function vl(e){let{pathname:t="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function ei(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function Q1(e,t,r,s){s===void 0&&(s={});let{window:i=document.defaultView,v5Compat:a=!1}=s,l=i.history,o=Vr.Pop,c=null,h=v();h==null&&(h=0,l.replaceState(oo({},l.state,{idx:h}),""));function v(){return(l.state||{idx:null}).idx}function d(){o=Vr.Pop;let f=v(),p=f==null?null:f-h;h=f,c&&c({action:o,location:y.location,delta:p})}function g(f,p){o=Vr.Push;let u=Su(y.location,f,p);r&&r(u,f),h=v()+1;let m=sm(u,h),b=y.createHref(u);try{l.pushState(m,"",b)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(b)}a&&c&&c({action:o,location:y.location,delta:1})}function x(f,p){o=Vr.Replace;let u=Su(y.location,f,p);r&&r(u,f),h=v();let m=sm(u,h),b=y.createHref(u);l.replaceState(m,"",b),a&&c&&c({action:o,location:y.location,delta:0})}function _(f){let p=i.location.origin!=="null"?i.location.origin:i.location.href,u=typeof f=="string"?f:vl(f);return u=u.replace(/ $/,"%20"),Te(p,"No window.location.(origin|href) available to create URL for href: "+u),new URL(u,p)}let y={get action(){return o},get location(){return e(i,l)},listen(f){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(rm,d),c=f,()=>{i.removeEventListener(rm,d),c=null}},createHref(f){return t(i,f)},createURL:_,encodeLocation(f){let p=_(f);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:g,replace:x,go(f){return l.go(f)}};return y}var nm;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(nm||(nm={}));function Y1(e,t,r){return r===void 0&&(r="/"),X1(e,t,r,!1)}function X1(e,t,r,s){let i=typeof t=="string"?ei(t):t,a=Vn(i.pathname||"/",r);if(a==null)return null;let l=G0(e);J1(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let h=cw(a);o=aw(l[c],h,s)}return o}function G0(e,t,r,s){t===void 0&&(t=[]),r===void 0&&(r=[]),s===void 0&&(s="");let i=(a,l,o)=>{let c={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};c.relativePath.startsWith("/")&&(Te(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let h=rs([s,c.relativePath]),v=r.concat(c);a.children&&a.children.length>0&&(Te(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),G0(a.children,t,v,h)),!(a.path==null&&!a.index)&&t.push({path:h,score:iw(h,a.index),routesMeta:v})};return e.forEach((a,l)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))i(a,l);else for(let c of K0(a.path))i(a,l,c)}),t}function K0(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(s.length===0)return i?[a,""]:[a];let l=K0(s.join("/")),o=[];return o.push(...l.map(c=>c===""?a:[a,c].join("/"))),i&&o.push(...l),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function J1(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:ow(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const Z1=/^:[\w-]+$/,ew=3,tw=2,rw=1,sw=10,nw=-2,im=e=>e==="*";function iw(e,t){let r=e.split("/"),s=r.length;return r.some(im)&&(s+=nw),t&&(s+=tw),r.filter(i=>!im(i)).reduce((i,a)=>i+(Z1.test(a)?ew:a===""?rw:sw),s)}function ow(e,t){return e.length===t.length&&e.slice(0,-1).every((s,i)=>s===t[i])?e[e.length-1]-t[t.length-1]:0}function aw(e,t,r){r===void 0&&(r=!1);let{routesMeta:s}=e,i={},a="/",l=[];for(let o=0;o<s.length;++o){let c=s[o],h=o===s.length-1,v=a==="/"?t:t.slice(a.length)||"/",d=xl({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},v),g=c.route;if(!d&&h&&r&&!s[s.length-1].route.index&&(d=xl({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},v)),!d)return null;Object.assign(i,d.params),l.push({params:i,pathname:rs([a,d.pathname]),pathnameBase:fw(rs([a,d.pathnameBase])),route:g}),d.pathnameBase!=="/"&&(a=rs([a,d.pathnameBase]))}return l}function xl(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=lw(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let a=i[0],l=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:s.reduce((h,v,d)=>{let{paramName:g,isOptional:x}=v;if(g==="*"){let y=o[d]||"";l=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const _=o[d];return x&&!_?h[g]=void 0:h[g]=(_||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:l,pattern:e}}function lw(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),q0(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(s.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),s]}function cw(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return q0(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Vn(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}function dw(e,t){t===void 0&&(t="/");let{pathname:r,search:s="",hash:i=""}=typeof e=="string"?ei(e):e;return{pathname:r?r.startsWith("/")?r:uw(r,t):t,search:pw(s),hash:mw(i)}}function uw(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function ad(e,t,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function hw(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Q0(e,t){let r=hw(e);return t?r.map((s,i)=>i===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function Y0(e,t,r,s){s===void 0&&(s=!1);let i;typeof e=="string"?i=ei(e):(i=oo({},e),Te(!i.pathname||!i.pathname.includes("?"),ad("?","pathname","search",i)),Te(!i.pathname||!i.pathname.includes("#"),ad("#","pathname","hash",i)),Te(!i.search||!i.search.includes("#"),ad("#","search","hash",i)));let a=e===""||i.pathname==="",l=a?"/":i.pathname,o;if(l==null)o=r;else{let d=t.length-1;if(!s&&l.startsWith("..")){let g=l.split("/");for(;g[0]==="..";)g.shift(),d-=1;i.pathname=g.join("/")}o=d>=0?t[d]:"/"}let c=dw(i,o),h=l&&l!=="/"&&l.endsWith("/"),v=(a||l===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(h||v)&&(c.pathname+="/"),c}const rs=e=>e.join("/").replace(/\/\/+/g,"/"),fw=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),pw=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,mw=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function gw(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const X0=["post","put","patch","delete"];new Set(X0);const vw=["get",...X0];new Set(vw);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ao(){return ao=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ao.apply(this,arguments)}const sc=E.createContext(null),J0=E.createContext(null),gs=E.createContext(null),nc=E.createContext(null),vs=E.createContext({outlet:null,matches:[],isDataRoute:!1}),Z0=E.createContext(null);function xw(e,t){let{relative:r}=t===void 0?{}:t;Bo()||Te(!1);let{basename:s,navigator:i}=E.useContext(gs),{hash:a,pathname:l,search:o}=ic(e,{relative:r}),c=l;return s!=="/"&&(c=l==="/"?s:rs([s,l])),i.createHref({pathname:c,search:o,hash:a})}function Bo(){return E.useContext(nc)!=null}function xs(){return Bo()||Te(!1),E.useContext(nc).location}function ex(e){E.useContext(gs).static||E.useLayoutEffect(e)}function rn(){let{isDataRoute:e}=E.useContext(vs);return e?Aw():yw()}function yw(){Bo()||Te(!1);let e=E.useContext(sc),{basename:t,future:r,navigator:s}=E.useContext(gs),{matches:i}=E.useContext(vs),{pathname:a}=xs(),l=JSON.stringify(Q0(i,r.v7_relativeSplatPath)),o=E.useRef(!1);return ex(()=>{o.current=!0}),E.useCallback(function(h,v){if(v===void 0&&(v={}),!o.current)return;if(typeof h=="number"){s.go(h);return}let d=Y0(h,JSON.parse(l),a,v.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:rs([t,d.pathname])),(v.replace?s.replace:s.push)(d,v.state,v)},[t,s,l,a,e])}function tx(){let{matches:e}=E.useContext(vs),t=e[e.length-1];return t?t.params:{}}function ic(e,t){let{relative:r}=t===void 0?{}:t,{future:s}=E.useContext(gs),{matches:i}=E.useContext(vs),{pathname:a}=xs(),l=JSON.stringify(Q0(i,s.v7_relativeSplatPath));return E.useMemo(()=>Y0(e,JSON.parse(l),a,r==="path"),[e,l,a,r])}function bw(e,t){return _w(e,t)}function _w(e,t,r,s){Bo()||Te(!1);let{navigator:i}=E.useContext(gs),{matches:a}=E.useContext(vs),l=a[a.length-1],o=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let h=xs(),v;if(t){var d;let f=typeof t=="string"?ei(t):t;c==="/"||(d=f.pathname)!=null&&d.startsWith(c)||Te(!1),v=f}else v=h;let g=v.pathname||"/",x=g;if(c!=="/"){let f=c.replace(/^\//,"").split("/");x="/"+g.replace(/^\//,"").split("/").slice(f.length).join("/")}let _=Y1(e,{pathname:x}),y=Ew(_&&_.map(f=>Object.assign({},f,{params:Object.assign({},o,f.params),pathname:rs([c,i.encodeLocation?i.encodeLocation(f.pathname).pathname:f.pathname]),pathnameBase:f.pathnameBase==="/"?c:rs([c,i.encodeLocation?i.encodeLocation(f.pathnameBase).pathname:f.pathnameBase])})),a,r,s);return t&&y?E.createElement(nc.Provider,{value:{location:ao({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:Vr.Pop}},y):y}function ww(){let e=Rw(),t=gw(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},a=null;return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},t),r?E.createElement("pre",{style:i},r):null,a)}const Sw=E.createElement(ww,null);class Cw extends E.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?E.createElement(vs.Provider,{value:this.props.routeContext},E.createElement(Z0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function kw(e){let{routeContext:t,match:r,children:s}=e,i=E.useContext(sc);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),E.createElement(vs.Provider,{value:t},s)}function Ew(e,t,r,s){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),s===void 0&&(s=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=s)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let l=e,o=(i=r)==null?void 0:i.errors;if(o!=null){let v=l.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);v>=0||Te(!1),l=l.slice(0,Math.min(l.length,v+1))}let c=!1,h=-1;if(r&&s&&s.v7_partialHydration)for(let v=0;v<l.length;v++){let d=l[v];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(h=v),d.route.id){let{loaderData:g,errors:x}=r,_=d.route.loader&&g[d.route.id]===void 0&&(!x||x[d.route.id]===void 0);if(d.route.lazy||_){c=!0,h>=0?l=l.slice(0,h+1):l=[l[0]];break}}}return l.reduceRight((v,d,g)=>{let x,_=!1,y=null,f=null;r&&(x=o&&d.route.id?o[d.route.id]:void 0,y=d.route.errorElement||Sw,c&&(h<0&&g===0?(Tw("route-fallback",!1),_=!0,f=null):h===g&&(_=!0,f=d.route.hydrateFallbackElement||null)));let p=t.concat(l.slice(0,g+1)),u=()=>{let m;return x?m=y:_?m=f:d.route.Component?m=E.createElement(d.route.Component,null):d.route.element?m=d.route.element:m=v,E.createElement(kw,{match:d,routeContext:{outlet:v,matches:p,isDataRoute:r!=null},children:m})};return r&&(d.route.ErrorBoundary||d.route.errorElement||g===0)?E.createElement(Cw,{location:r.location,revalidation:r.revalidation,component:y,error:x,children:u(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):u()},null)}var rx=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(rx||{}),yl=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(yl||{});function jw(e){let t=E.useContext(sc);return t||Te(!1),t}function Nw(e){let t=E.useContext(J0);return t||Te(!1),t}function Dw(e){let t=E.useContext(vs);return t||Te(!1),t}function sx(e){let t=Dw(),r=t.matches[t.matches.length-1];return r.route.id||Te(!1),r.route.id}function Rw(){var e;let t=E.useContext(Z0),r=Nw(yl.UseRouteError),s=sx(yl.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[s]}function Aw(){let{router:e}=jw(rx.UseNavigateStable),t=sx(yl.UseNavigateStable),r=E.useRef(!1);return ex(()=>{r.current=!0}),E.useCallback(function(i,a){a===void 0&&(a={}),r.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,ao({fromRouteId:t},a)))},[e,t])}const om={};function Tw(e,t,r){!t&&!om[e]&&(om[e]=!0)}function Pw(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function Rt(e){Te(!1)}function Lw(e){let{basename:t="/",children:r=null,location:s,navigationType:i=Vr.Pop,navigator:a,static:l=!1,future:o}=e;Bo()&&Te(!1);let c=t.replace(/^\/*/,"/"),h=E.useMemo(()=>({basename:c,navigator:a,static:l,future:ao({v7_relativeSplatPath:!1},o)}),[c,o,a,l]);typeof s=="string"&&(s=ei(s));let{pathname:v="/",search:d="",hash:g="",state:x=null,key:_="default"}=s,y=E.useMemo(()=>{let f=Vn(v,c);return f==null?null:{location:{pathname:f,search:d,hash:g,state:x,key:_},navigationType:i}},[c,v,d,g,x,_,i]);return y==null?null:E.createElement(gs.Provider,{value:h},E.createElement(nc.Provider,{children:r,value:y}))}function Iw(e){let{children:t,location:r}=e;return bw(Cu(t),r)}new Promise(()=>{});function Cu(e,t){t===void 0&&(t=[]);let r=[];return E.Children.forEach(e,(s,i)=>{if(!E.isValidElement(s))return;let a=[...t,i];if(s.type===E.Fragment){r.push.apply(r,Cu(s.props.children,a));return}s.type!==Rt&&Te(!1),!s.props.index||!s.props.children||Te(!1);let l={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=Cu(s.props.children,a)),r.push(l)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bl(){return bl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},bl.apply(this,arguments)}function nx(e,t){if(e==null)return{};var r={},s=Object.keys(e),i,a;for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function Ow(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Mw(e,t){return e.button===0&&(!t||t==="_self")&&!Ow(e)}function ku(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let s=e[r];return t.concat(Array.isArray(s)?s.map(i=>[r,i]):[[r,s]])},[]))}function Bw(e,t){let r=ku(e);return t&&t.forEach((s,i)=>{r.has(i)||t.getAll(i).forEach(a=>{r.append(i,a)})}),r}const Fw=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],$w=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Hw="6";try{window.__reactRouterVersion=Hw}catch{}const Uw=E.createContext({isTransitioning:!1}),Ww="startTransition",am=Ib[Ww];function zw(e){let{basename:t,children:r,future:s,window:i}=e,a=E.useRef();a.current==null&&(a.current=G1({window:i,v5Compat:!0}));let l=a.current,[o,c]=E.useState({action:l.action,location:l.location}),{v7_startTransition:h}=s||{},v=E.useCallback(d=>{h&&am?am(()=>c(d)):c(d)},[c,h]);return E.useLayoutEffect(()=>l.listen(v),[l,v]),E.useEffect(()=>Pw(s),[s]),E.createElement(Lw,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:l,future:s})}const Vw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Gw=E.forwardRef(function(t,r){let{onClick:s,relative:i,reloadDocument:a,replace:l,state:o,target:c,to:h,preventScrollReset:v,viewTransition:d}=t,g=nx(t,Fw),{basename:x}=E.useContext(gs),_,y=!1;if(typeof h=="string"&&qw.test(h)&&(_=h,Vw))try{let m=new URL(window.location.href),b=h.startsWith("//")?new URL(m.protocol+h):new URL(h),S=Vn(b.pathname,x);b.origin===m.origin&&S!=null?h=S+b.search+b.hash:y=!0}catch{}let f=xw(h,{relative:i}),p=Qw(h,{replace:l,state:o,target:c,preventScrollReset:v,relative:i,viewTransition:d});function u(m){s&&s(m),m.defaultPrevented||p(m)}return E.createElement("a",bl({},g,{href:_||f,onClick:y||a?s:u,ref:r,target:c}))}),lm=E.forwardRef(function(t,r){let{"aria-current":s="page",caseSensitive:i=!1,className:a="",end:l=!1,style:o,to:c,viewTransition:h,children:v}=t,d=nx(t,$w),g=ic(c,{relative:d.relative}),x=xs(),_=E.useContext(J0),{navigator:y,basename:f}=E.useContext(gs),p=_!=null&&Xw(g)&&h===!0,u=y.encodeLocation?y.encodeLocation(g).pathname:g.pathname,m=x.pathname,b=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;i||(m=m.toLowerCase(),b=b?b.toLowerCase():null,u=u.toLowerCase()),b&&f&&(b=Vn(b,f)||b);const S=u!=="/"&&u.endsWith("/")?u.length-1:u.length;let C=m===u||!l&&m.startsWith(u)&&m.charAt(S)==="/",k=b!=null&&(b===u||!l&&b.startsWith(u)&&b.charAt(u.length)==="/"),w={isActive:C,isPending:k,isTransitioning:p},j=C?s:void 0,D;typeof a=="function"?D=a(w):D=[a,C?"active":null,k?"pending":null,p?"transitioning":null].filter(Boolean).join(" ");let I=typeof o=="function"?o(w):o;return E.createElement(Gw,bl({},d,{"aria-current":j,className:D,ref:r,style:I,to:c,viewTransition:h}),typeof v=="function"?v(w):v)});var Eu;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Eu||(Eu={}));var cm;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(cm||(cm={}));function Kw(e){let t=E.useContext(sc);return t||Te(!1),t}function Qw(e,t){let{target:r,replace:s,state:i,preventScrollReset:a,relative:l,viewTransition:o}=t===void 0?{}:t,c=rn(),h=xs(),v=ic(e,{relative:l});return E.useCallback(d=>{if(Mw(d,r)){d.preventDefault();let g=s!==void 0?s:vl(h)===vl(v);c(e,{replace:g,state:i,preventScrollReset:a,relative:l,viewTransition:o})}},[h,c,v,s,i,r,e,a,l,o])}function Yw(e){let t=E.useRef(ku(e)),r=E.useRef(!1),s=xs(),i=E.useMemo(()=>Bw(s.search,r.current?null:t.current),[s.search]),a=rn(),l=E.useCallback((o,c)=>{const h=ku(typeof o=="function"?o(i):o);r.current=!0,a("?"+h,c)},[a,i]);return[i,l]}function Xw(e,t){t===void 0&&(t={});let r=E.useContext(Uw);r==null&&Te(!1);let{basename:s}=Kw(Eu.useViewTransitionState),i=ic(e,{relative:t.relative});if(!r.isTransitioning)return!1;let a=Vn(r.currentLocation.pathname,s)||r.currentLocation.pathname,l=Vn(r.nextLocation.pathname,s)||r.nextLocation.pathname;return xl(i.pathname,l)!=null||xl(i.pathname,a)!=null}var Fo=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ks=typeof window>"u"||"Deno"in globalThis;function dt(){}function Jw(e,t){return typeof e=="function"?e(t):e}function ju(e){return typeof e=="number"&&e>=0&&e!==1/0}function ix(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ss(e,t){return typeof e=="function"?e(t):e}function Yt(e,t){return typeof e=="function"?e(t):e}function dm(e,t){const{type:r="all",exact:s,fetchStatus:i,predicate:a,queryKey:l,stale:o}=e;if(l){if(s){if(t.queryHash!==Zh(l,t.options))return!1}else if(!co(t.queryKey,l))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||i&&i!==t.state.fetchStatus||a&&!a(t))}function um(e,t){const{exact:r,status:s,predicate:i,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(r){if(lo(t.options.mutationKey)!==lo(a))return!1}else if(!co(t.options.mutationKey,a))return!1}return!(s&&t.state.status!==s||i&&!i(t))}function Zh(e,t){return((t==null?void 0:t.queryKeyHashFn)||lo)(e)}function lo(e){return JSON.stringify(e,(t,r)=>Du(r)?Object.keys(r).sort().reduce((s,i)=>(s[i]=r[i],s),{}):r)}function co(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>co(e[r],t[r])):!1}function ox(e,t){if(e===t)return e;const r=hm(e)&&hm(t);if(r||Du(e)&&Du(t)){const s=r?e:Object.keys(e),i=s.length,a=r?t:Object.keys(t),l=a.length,o=r?[]:{},c=new Set(s);let h=0;for(let v=0;v<l;v++){const d=r?v:a[v];(!r&&c.has(d)||r)&&e[d]===void 0&&t[d]===void 0?(o[d]=void 0,h++):(o[d]=ox(e[d],t[d]),o[d]===e[d]&&e[d]!==void 0&&h++)}return i===l&&h===i?e:o}return t}function Nu(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function hm(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Du(e){if(!fm(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!fm(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function fm(e){return Object.prototype.toString.call(e)==="[object Object]"}function Zw(e){return new Promise(t=>{setTimeout(t,e)})}function Ru(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?ox(e,t):t}function eS(e,t,r=0){const s=[...e,t];return r&&s.length>r?s.slice(1):s}function tS(e,t,r=0){const s=[t,...e];return r&&s.length>r?s.slice(0,-1):s}var ef=Symbol();function ax(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===ef?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function rS(e,t){return typeof e=="function"?e(...t):!!e}var As,Ir,En,kg,sS=(kg=class extends Fo{constructor(){super();se(this,As,void 0);se(this,Ir,void 0);se(this,En,void 0);ee(this,En,t=>{if(!Ks&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){H(this,Ir)||this.setEventListener(H(this,En))}onUnsubscribe(){var t;this.hasListeners()||((t=H(this,Ir))==null||t.call(this),ee(this,Ir,void 0))}setEventListener(t){var r;ee(this,En,t),(r=H(this,Ir))==null||r.call(this),ee(this,Ir,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){H(this,As)!==t&&(ee(this,As,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof H(this,As)=="boolean"?H(this,As):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},As=new WeakMap,Ir=new WeakMap,En=new WeakMap,kg),tf=new sS,jn,Or,Nn,Eg,nS=(Eg=class extends Fo{constructor(){super();se(this,jn,!0);se(this,Or,void 0);se(this,Nn,void 0);ee(this,Nn,t=>{if(!Ks&&window.addEventListener){const r=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}}})}onSubscribe(){H(this,Or)||this.setEventListener(H(this,Nn))}onUnsubscribe(){var t;this.hasListeners()||((t=H(this,Or))==null||t.call(this),ee(this,Or,void 0))}setEventListener(t){var r;ee(this,Nn,t),(r=H(this,Or))==null||r.call(this),ee(this,Or,t(this.setOnline.bind(this)))}setOnline(t){H(this,jn)!==t&&(ee(this,jn,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return H(this,jn)}},jn=new WeakMap,Or=new WeakMap,Nn=new WeakMap,Eg),_l=new nS;function Au(){let e,t;const r=new Promise((i,a)=>{e=i,t=a});r.status="pending",r.catch(()=>{});function s(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{s({status:"fulfilled",value:i}),e(i)},r.reject=i=>{s({status:"rejected",reason:i}),t(i)},r}function iS(e){return Math.min(1e3*2**e,3e4)}function lx(e){return(e??"online")==="online"?_l.isOnline():!0}var cx=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function ld(e){return e instanceof cx}function dx(e){let t=!1,r=0,s=!1,i;const a=Au(),l=y=>{var f;s||(g(new cx(y)),(f=e.abort)==null||f.call(e))},o=()=>{t=!0},c=()=>{t=!1},h=()=>tf.isFocused()&&(e.networkMode==="always"||_l.isOnline())&&e.canRun(),v=()=>lx(e.networkMode)&&e.canRun(),d=y=>{var f;s||(s=!0,(f=e.onSuccess)==null||f.call(e,y),i==null||i(),a.resolve(y))},g=y=>{var f;s||(s=!0,(f=e.onError)==null||f.call(e,y),i==null||i(),a.reject(y))},x=()=>new Promise(y=>{var f;i=p=>{(s||h())&&y(p)},(f=e.onPause)==null||f.call(e)}).then(()=>{var y;i=void 0,s||(y=e.onContinue)==null||y.call(e)}),_=()=>{if(s)return;let y;const f=r===0?e.initialPromise:void 0;try{y=f??e.fn()}catch(p){y=Promise.reject(p)}Promise.resolve(y).then(d).catch(p=>{var C;if(s)return;const u=e.retry??(Ks?0:3),m=e.retryDelay??iS,b=typeof m=="function"?m(r,p):m,S=u===!0||typeof u=="number"&&r<u||typeof u=="function"&&u(r,p);if(t||!S){g(p);return}r++,(C=e.onFail)==null||C.call(e,r,p),Zw(b).then(()=>h()?void 0:x()).then(()=>{t?g(p):_()})})};return{promise:a,cancel:l,continue:()=>(i==null||i(),a),cancelRetry:o,continueRetry:c,canStart:v,start:()=>(v()?_():x().then(_),a)}}var oS=e=>setTimeout(e,0);function aS(){let e=[],t=0,r=o=>{o()},s=o=>{o()},i=oS;const a=o=>{t?e.push(o):i(()=>{r(o)})},l=()=>{const o=e;e=[],o.length&&i(()=>{s(()=>{o.forEach(c=>{r(c)})})})};return{batch:o=>{let c;t++;try{c=o()}finally{t--,t||l()}return c},batchCalls:o=>(...c)=>{a(()=>{o(...c)})},schedule:a,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{s=o},setScheduler:o=>{i=o}}}var qe=aS(),Ts,jg,ux=(jg=class{constructor(){se(this,Ts,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ju(this.gcTime)&&ee(this,Ts,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Ks?1/0:5*60*1e3))}clearGcTimeout(){H(this,Ts)&&(clearTimeout(H(this,Ts)),ee(this,Ts,void 0))}},Ts=new WeakMap,jg),Dn,Ps,At,Ls,Je,wo,Is,Vt,mr,Ng,lS=(Ng=class extends ux{constructor(t){super();se(this,Vt);se(this,Dn,void 0);se(this,Ps,void 0);se(this,At,void 0);se(this,Ls,void 0);se(this,Je,void 0);se(this,wo,void 0);se(this,Is,void 0);ee(this,Is,!1),ee(this,wo,t.defaultOptions),this.setOptions(t.options),this.observers=[],ee(this,Ls,t.client),ee(this,At,H(this,Ls).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ee(this,Dn,cS(this.options)),this.state=t.state??H(this,Dn),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=H(this,Je))==null?void 0:t.promise}setOptions(t){this.options={...H(this,wo),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&H(this,At).remove(this)}setData(t,r){const s=Ru(this.state.data,t,this.options);return ue(this,Vt,mr).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(t,r){ue(this,Vt,mr).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var s,i;const r=(s=H(this,Je))==null?void 0:s.promise;return(i=H(this,Je))==null||i.cancel(t),r?r.then(dt).catch(dt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(H(this,Dn))}isActive(){return this.observers.some(t=>Yt(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ef||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ss(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!ix(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=H(this,Je))==null||r.continue()}onOnline(){var r;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=H(this,Je))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),H(this,At).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(H(this,Je)&&(H(this,Is)?H(this,Je).cancel({revert:!0}):H(this,Je).cancelRetry()),this.scheduleGc()),H(this,At).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ue(this,Vt,mr).call(this,{type:"invalidate"})}fetch(t,r){var h,v,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(H(this,Je))return H(this,Je).continueRetry(),H(this,Je).promise}if(t&&this.setOptions(t),!this.options.queryFn){const g=this.observers.find(x=>x.options.queryFn);g&&this.setOptions(g.options)}const s=new AbortController,i=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(ee(this,Is,!0),s.signal)})},a=()=>{const g=ax(this.options,r),_=(()=>{const y={client:H(this,Ls),queryKey:this.queryKey,meta:this.meta};return i(y),y})();return ee(this,Is,!1),this.options.persister?this.options.persister(g,_,this):g(_)},o=(()=>{const g={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:H(this,Ls),state:this.state,fetchFn:a};return i(g),g})();(h=this.options.behavior)==null||h.onFetch(o,this),ee(this,Ps,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((v=o.fetchOptions)==null?void 0:v.meta))&&ue(this,Vt,mr).call(this,{type:"fetch",meta:(d=o.fetchOptions)==null?void 0:d.meta});const c=g=>{var x,_,y,f;ld(g)&&g.silent||ue(this,Vt,mr).call(this,{type:"error",error:g}),ld(g)||((_=(x=H(this,At).config).onError)==null||_.call(x,g,this),(f=(y=H(this,At).config).onSettled)==null||f.call(y,this.state.data,g,this)),this.scheduleGc()};return ee(this,Je,dx({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,abort:s.abort.bind(s),onSuccess:g=>{var x,_,y,f;if(g===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(g)}catch(p){c(p);return}(_=(x=H(this,At).config).onSuccess)==null||_.call(x,g,this),(f=(y=H(this,At).config).onSettled)==null||f.call(y,g,this.state.error,this),this.scheduleGc()},onError:c,onFail:(g,x)=>{ue(this,Vt,mr).call(this,{type:"failed",failureCount:g,error:x})},onPause:()=>{ue(this,Vt,mr).call(this,{type:"pause"})},onContinue:()=>{ue(this,Vt,mr).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),H(this,Je).start()}},Dn=new WeakMap,Ps=new WeakMap,At=new WeakMap,Ls=new WeakMap,Je=new WeakMap,wo=new WeakMap,Is=new WeakMap,Vt=new WeakSet,mr=function(t){const r=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...hx(s.data,this.options),fetchMeta:t.meta??null};case"success":return ee(this,Ps,void 0),{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return ld(i)&&i.revert&&H(this,Ps)?{...H(this,Ps),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=r(this.state),qe.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),H(this,At).notify({query:this,type:"updated",action:t})})},Ng);function hx(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:lx(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function cS(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,s=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var ir,Dg,dS=(Dg=class extends Fo{constructor(t={}){super();se(this,ir,void 0);this.config=t,ee(this,ir,new Map)}build(t,r,s){const i=r.queryKey,a=r.queryHash??Zh(i,r);let l=this.get(a);return l||(l=new lS({client:t,queryKey:i,queryHash:a,options:t.defaultQueryOptions(r),state:s,defaultOptions:t.getQueryDefaults(i)}),this.add(l)),l}add(t){H(this,ir).has(t.queryHash)||(H(this,ir).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=H(this,ir).get(t.queryHash);r&&(t.destroy(),r===t&&H(this,ir).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){qe.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return H(this,ir).get(t)}getAll(){return[...H(this,ir).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(s=>dm(r,s))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(s=>dm(t,s)):r}notify(t){qe.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){qe.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){qe.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ir=new WeakMap,Dg),or,rt,Os,ar,Rr,Rg,uS=(Rg=class extends ux{constructor(t){super();se(this,ar);se(this,or,void 0);se(this,rt,void 0);se(this,Os,void 0);this.mutationId=t.mutationId,ee(this,rt,t.mutationCache),ee(this,or,[]),this.state=t.state||hS(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){H(this,or).includes(t)||(H(this,or).push(t),this.clearGcTimeout(),H(this,rt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ee(this,or,H(this,or).filter(r=>r!==t)),this.scheduleGc(),H(this,rt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){H(this,or).length||(this.state.status==="pending"?this.scheduleGc():H(this,rt).remove(this))}continue(){var t;return((t=H(this,Os))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,l,o,c,h,v,d,g,x,_,y,f,p,u,m,b,S,C,k,w;const r=()=>{ue(this,ar,Rr).call(this,{type:"continue"})};ee(this,Os,dx({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(j,D)=>{ue(this,ar,Rr).call(this,{type:"failed",failureCount:j,error:D})},onPause:()=>{ue(this,ar,Rr).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>H(this,rt).canRun(this)}));const s=this.state.status==="pending",i=!H(this,Os).canStart();try{if(s)r();else{ue(this,ar,Rr).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(a=H(this,rt).config).onMutate)==null?void 0:l.call(a,t,this));const D=await((c=(o=this.options).onMutate)==null?void 0:c.call(o,t));D!==this.state.context&&ue(this,ar,Rr).call(this,{type:"pending",context:D,variables:t,isPaused:i})}const j=await H(this,Os).start();return await((v=(h=H(this,rt).config).onSuccess)==null?void 0:v.call(h,j,t,this.state.context,this)),await((g=(d=this.options).onSuccess)==null?void 0:g.call(d,j,t,this.state.context)),await((_=(x=H(this,rt).config).onSettled)==null?void 0:_.call(x,j,null,this.state.variables,this.state.context,this)),await((f=(y=this.options).onSettled)==null?void 0:f.call(y,j,null,t,this.state.context)),ue(this,ar,Rr).call(this,{type:"success",data:j}),j}catch(j){try{throw await((u=(p=H(this,rt).config).onError)==null?void 0:u.call(p,j,t,this.state.context,this)),await((b=(m=this.options).onError)==null?void 0:b.call(m,j,t,this.state.context)),await((C=(S=H(this,rt).config).onSettled)==null?void 0:C.call(S,void 0,j,this.state.variables,this.state.context,this)),await((w=(k=this.options).onSettled)==null?void 0:w.call(k,void 0,j,t,this.state.context)),j}finally{ue(this,ar,Rr).call(this,{type:"error",error:j})}}finally{H(this,rt).runNext(this)}}},or=new WeakMap,rt=new WeakMap,Os=new WeakMap,ar=new WeakSet,Rr=function(t){const r=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),qe.batch(()=>{H(this,or).forEach(s=>{s.onMutationUpdate(t)}),H(this,rt).notify({mutation:this,type:"updated",action:t})})},Rg);function hS(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var xr,qt,So,Ag,fS=(Ag=class extends Fo{constructor(t={}){super();se(this,xr,void 0);se(this,qt,void 0);se(this,So,void 0);this.config=t,ee(this,xr,new Set),ee(this,qt,new Map),ee(this,So,0)}build(t,r,s){const i=new uS({mutationCache:this,mutationId:++ta(this,So)._,options:t.defaultMutationOptions(r),state:s});return this.add(i),i}add(t){H(this,xr).add(t);const r=ya(t);if(typeof r=="string"){const s=H(this,qt).get(r);s?s.push(t):H(this,qt).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(H(this,xr).delete(t)){const r=ya(t);if(typeof r=="string"){const s=H(this,qt).get(r);if(s)if(s.length>1){const i=s.indexOf(t);i!==-1&&s.splice(i,1)}else s[0]===t&&H(this,qt).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=ya(t);if(typeof r=="string"){const s=H(this,qt).get(r),i=s==null?void 0:s.find(a=>a.state.status==="pending");return!i||i===t}else return!0}runNext(t){var s;const r=ya(t);if(typeof r=="string"){const i=(s=H(this,qt).get(r))==null?void 0:s.find(a=>a!==t&&a.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){qe.batch(()=>{H(this,xr).forEach(t=>{this.notify({type:"removed",mutation:t})}),H(this,xr).clear(),H(this,qt).clear()})}getAll(){return Array.from(H(this,xr))}find(t){const r={exact:!0,...t};return this.getAll().find(s=>um(r,s))}findAll(t={}){return this.getAll().filter(r=>um(t,r))}notify(t){qe.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return qe.batch(()=>Promise.all(t.map(r=>r.continue().catch(dt))))}},xr=new WeakMap,qt=new WeakMap,So=new WeakMap,Ag);function ya(e){var t;return(t=e.options.scope)==null?void 0:t.id}function pm(e){return{onFetch:(t,r)=>{var v,d,g,x,_;const s=t.options,i=(g=(d=(v=t.fetchOptions)==null?void 0:v.meta)==null?void 0:d.fetchMore)==null?void 0:g.direction,a=((x=t.state.data)==null?void 0:x.pages)||[],l=((_=t.state.data)==null?void 0:_.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const h=async()=>{let y=!1;const f=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(t.signal.aborted?y=!0:t.signal.addEventListener("abort",()=>{y=!0}),t.signal)})},p=ax(t.options,t.fetchOptions),u=async(m,b,S)=>{if(y)return Promise.reject();if(b==null&&m.pages.length)return Promise.resolve(m);const k=(()=>{const I={client:t.client,queryKey:t.queryKey,pageParam:b,direction:S?"backward":"forward",meta:t.options.meta};return f(I),I})(),w=await p(k),{maxPages:j}=t.options,D=S?tS:eS;return{pages:D(m.pages,w,j),pageParams:D(m.pageParams,b,j)}};if(i&&a.length){const m=i==="backward",b=m?pS:mm,S={pages:a,pageParams:l},C=b(s,S);o=await u(S,C,m)}else{const m=e??a.length;do{const b=c===0?l[0]??s.initialPageParam:mm(s,o);if(c>0&&b==null)break;o=await u(o,b),c++}while(c<m)}return o};t.options.persister?t.fetchFn=()=>{var y,f;return(f=(y=t.options).persister)==null?void 0:f.call(y,h,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=h}}}function mm(e,{pages:t,pageParams:r}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,r[s],r):void 0}function pS(e,{pages:t,pageParams:r}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,r[0],r):void 0}var Re,Mr,Br,Rn,An,Fr,Tn,Pn,Tg,mS=(Tg=class{constructor(e={}){se(this,Re,void 0);se(this,Mr,void 0);se(this,Br,void 0);se(this,Rn,void 0);se(this,An,void 0);se(this,Fr,void 0);se(this,Tn,void 0);se(this,Pn,void 0);ee(this,Re,e.queryCache||new dS),ee(this,Mr,e.mutationCache||new fS),ee(this,Br,e.defaultOptions||{}),ee(this,Rn,new Map),ee(this,An,new Map),ee(this,Fr,0)}mount(){ta(this,Fr)._++,H(this,Fr)===1&&(ee(this,Tn,tf.subscribe(async e=>{e&&(await this.resumePausedMutations(),H(this,Re).onFocus())})),ee(this,Pn,_l.subscribe(async e=>{e&&(await this.resumePausedMutations(),H(this,Re).onOnline())})))}unmount(){var e,t;ta(this,Fr)._--,H(this,Fr)===0&&((e=H(this,Tn))==null||e.call(this),ee(this,Tn,void 0),(t=H(this,Pn))==null||t.call(this),ee(this,Pn,void 0))}isFetching(e){return H(this,Re).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return H(this,Mr).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=H(this,Re).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=H(this,Re).build(this,t),s=r.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(ss(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return H(this,Re).findAll(e).map(({queryKey:t,state:r})=>{const s=r.data;return[t,s]})}setQueryData(e,t,r){const s=this.defaultQueryOptions({queryKey:e}),i=H(this,Re).get(s.queryHash),a=i==null?void 0:i.state.data,l=Jw(t,a);if(l!==void 0)return H(this,Re).build(this,s).setData(l,{...r,manual:!0})}setQueriesData(e,t,r){return qe.batch(()=>H(this,Re).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=H(this,Re).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=H(this,Re);qe.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=H(this,Re);return qe.batch(()=>(r.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},s=qe.batch(()=>H(this,Re).findAll(e).map(i=>i.cancel(r)));return Promise.all(s).then(dt).catch(dt)}invalidateQueries(e,t={}){return qe.batch(()=>(H(this,Re).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},s=qe.batch(()=>H(this,Re).findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,r);return r.throwOnError||(a=a.catch(dt)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(s).then(dt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=H(this,Re).build(this,t);return r.isStaleByTime(ss(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(dt).catch(dt)}fetchInfiniteQuery(e){return e.behavior=pm(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(dt).catch(dt)}ensureInfiniteQueryData(e){return e.behavior=pm(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return _l.isOnline()?H(this,Mr).resumePausedMutations():Promise.resolve()}getQueryCache(){return H(this,Re)}getMutationCache(){return H(this,Mr)}getDefaultOptions(){return H(this,Br)}setDefaultOptions(e){ee(this,Br,e)}setQueryDefaults(e,t){H(this,Rn).set(lo(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...H(this,Rn).values()],r={};return t.forEach(s=>{co(e,s.queryKey)&&Object.assign(r,s.defaultOptions)}),r}setMutationDefaults(e,t){H(this,An).set(lo(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...H(this,An).values()],r={};return t.forEach(s=>{co(e,s.mutationKey)&&Object.assign(r,s.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...H(this,Br).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Zh(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===ef&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...H(this,Br).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){H(this,Re).clear(),H(this,Mr).clear()}},Re=new WeakMap,Mr=new WeakMap,Br=new WeakMap,Rn=new WeakMap,An=new WeakMap,Fr=new WeakMap,Tn=new WeakMap,Pn=new WeakMap,Tg),ct,he,Co,st,Ms,Ln,$r,Hr,ko,In,On,Bs,Fs,Ur,Mn,$s,Ci,Eo,Tu,jo,Pu,No,Lu,Do,Iu,Ro,Ou,Ao,Mu,To,Bu,$l,fx,Pg,gS=(Pg=class extends Fo{constructor(t,r){super();se(this,$s);se(this,Eo);se(this,jo);se(this,No);se(this,Do);se(this,Ro);se(this,Ao);se(this,To);se(this,$l);se(this,ct,void 0);se(this,he,void 0);se(this,Co,void 0);se(this,st,void 0);se(this,Ms,void 0);se(this,Ln,void 0);se(this,$r,void 0);se(this,Hr,void 0);se(this,ko,void 0);se(this,In,void 0);se(this,On,void 0);se(this,Bs,void 0);se(this,Fs,void 0);se(this,Ur,void 0);se(this,Mn,new Set);this.options=r,ee(this,ct,t),ee(this,Hr,null),ee(this,$r,Au()),this.options.experimental_prefetchInRender||H(this,$r).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(H(this,he).addObserver(this),gm(H(this,he),this.options)?ue(this,$s,Ci).call(this):this.updateResult(),ue(this,Do,Iu).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Fu(H(this,he),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Fu(H(this,he),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ue(this,Ro,Ou).call(this),ue(this,Ao,Mu).call(this),H(this,he).removeObserver(this)}setOptions(t){const r=this.options,s=H(this,he);if(this.options=H(this,ct).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Yt(this.options.enabled,H(this,he))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ue(this,To,Bu).call(this),H(this,he).setOptions(this.options),r._defaulted&&!Nu(this.options,r)&&H(this,ct).getQueryCache().notify({type:"observerOptionsUpdated",query:H(this,he),observer:this});const i=this.hasListeners();i&&vm(H(this,he),s,this.options,r)&&ue(this,$s,Ci).call(this),this.updateResult(),i&&(H(this,he)!==s||Yt(this.options.enabled,H(this,he))!==Yt(r.enabled,H(this,he))||ss(this.options.staleTime,H(this,he))!==ss(r.staleTime,H(this,he)))&&ue(this,Eo,Tu).call(this);const a=ue(this,jo,Pu).call(this);i&&(H(this,he)!==s||Yt(this.options.enabled,H(this,he))!==Yt(r.enabled,H(this,he))||a!==H(this,Ur))&&ue(this,No,Lu).call(this,a)}getOptimisticResult(t){const r=H(this,ct).getQueryCache().build(H(this,ct),t),s=this.createResult(r,t);return xS(this,s)&&(ee(this,st,s),ee(this,Ln,this.options),ee(this,Ms,H(this,he).state)),s}getCurrentResult(){return H(this,st)}trackResult(t,r){return new Proxy(t,{get:(s,i)=>(this.trackProp(i),r==null||r(i),Reflect.get(s,i))})}trackProp(t){H(this,Mn).add(t)}getCurrentQuery(){return H(this,he)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=H(this,ct).defaultQueryOptions(t),s=H(this,ct).getQueryCache().build(H(this,ct),r);return s.fetch().then(()=>this.createResult(s,r))}fetch(t){return ue(this,$s,Ci).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),H(this,st)))}createResult(t,r){var j;const s=H(this,he),i=this.options,a=H(this,st),l=H(this,Ms),o=H(this,Ln),h=t!==s?t.state:H(this,Co),{state:v}=t;let d={...v},g=!1,x;if(r._optimisticResults){const D=this.hasListeners(),I=!D&&gm(t,r),T=D&&vm(t,s,r,i);(I||T)&&(d={...d,...hx(v.data,t.options)}),r._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:_,errorUpdatedAt:y,status:f}=d;x=d.data;let p=!1;if(r.placeholderData!==void 0&&x===void 0&&f==="pending"){let D;a!=null&&a.isPlaceholderData&&r.placeholderData===(o==null?void 0:o.placeholderData)?(D=a.data,p=!0):D=typeof r.placeholderData=="function"?r.placeholderData((j=H(this,On))==null?void 0:j.state.data,H(this,On)):r.placeholderData,D!==void 0&&(f="success",x=Ru(a==null?void 0:a.data,D,r),g=!0)}if(r.select&&x!==void 0&&!p)if(a&&x===(l==null?void 0:l.data)&&r.select===H(this,ko))x=H(this,In);else try{ee(this,ko,r.select),x=r.select(x),x=Ru(a==null?void 0:a.data,x,r),ee(this,In,x),ee(this,Hr,null)}catch(D){ee(this,Hr,D)}H(this,Hr)&&(_=H(this,Hr),x=H(this,In),y=Date.now(),f="error");const u=d.fetchStatus==="fetching",m=f==="pending",b=f==="error",S=m&&u,C=x!==void 0,w={status:f,fetchStatus:d.fetchStatus,isPending:m,isSuccess:f==="success",isError:b,isInitialLoading:S,isLoading:S,data:x,dataUpdatedAt:d.dataUpdatedAt,error:_,errorUpdatedAt:y,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>h.dataUpdateCount||d.errorUpdateCount>h.errorUpdateCount,isFetching:u,isRefetching:u&&!m,isLoadingError:b&&!C,isPaused:d.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:b&&C,isStale:rf(t,r),refetch:this.refetch,promise:H(this,$r)};if(this.options.experimental_prefetchInRender){const D=A=>{w.status==="error"?A.reject(w.error):w.data!==void 0&&A.resolve(w.data)},I=()=>{const A=ee(this,$r,w.promise=Au());D(A)},T=H(this,$r);switch(T.status){case"pending":t.queryHash===s.queryHash&&D(T);break;case"fulfilled":(w.status==="error"||w.data!==T.value)&&I();break;case"rejected":(w.status!=="error"||w.error!==T.reason)&&I();break}}return w}updateResult(){const t=H(this,st),r=this.createResult(H(this,he),this.options);if(ee(this,Ms,H(this,he).state),ee(this,Ln,this.options),H(this,Ms).data!==void 0&&ee(this,On,H(this,he)),Nu(r,t))return;ee(this,st,r);const s=()=>{if(!t)return!0;const{notifyOnChangeProps:i}=this.options,a=typeof i=="function"?i():i;if(a==="all"||!a&&!H(this,Mn).size)return!0;const l=new Set(a??H(this,Mn));return this.options.throwOnError&&l.add("error"),Object.keys(H(this,st)).some(o=>{const c=o;return H(this,st)[c]!==t[c]&&l.has(c)})};ue(this,$l,fx).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ue(this,Do,Iu).call(this)}},ct=new WeakMap,he=new WeakMap,Co=new WeakMap,st=new WeakMap,Ms=new WeakMap,Ln=new WeakMap,$r=new WeakMap,Hr=new WeakMap,ko=new WeakMap,In=new WeakMap,On=new WeakMap,Bs=new WeakMap,Fs=new WeakMap,Ur=new WeakMap,Mn=new WeakMap,$s=new WeakSet,Ci=function(t){ue(this,To,Bu).call(this);let r=H(this,he).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(dt)),r},Eo=new WeakSet,Tu=function(){ue(this,Ro,Ou).call(this);const t=ss(this.options.staleTime,H(this,he));if(Ks||H(this,st).isStale||!ju(t))return;const s=ix(H(this,st).dataUpdatedAt,t)+1;ee(this,Bs,setTimeout(()=>{H(this,st).isStale||this.updateResult()},s))},jo=new WeakSet,Pu=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(H(this,he)):this.options.refetchInterval)??!1},No=new WeakSet,Lu=function(t){ue(this,Ao,Mu).call(this),ee(this,Ur,t),!(Ks||Yt(this.options.enabled,H(this,he))===!1||!ju(H(this,Ur))||H(this,Ur)===0)&&ee(this,Fs,setInterval(()=>{(this.options.refetchIntervalInBackground||tf.isFocused())&&ue(this,$s,Ci).call(this)},H(this,Ur)))},Do=new WeakSet,Iu=function(){ue(this,Eo,Tu).call(this),ue(this,No,Lu).call(this,ue(this,jo,Pu).call(this))},Ro=new WeakSet,Ou=function(){H(this,Bs)&&(clearTimeout(H(this,Bs)),ee(this,Bs,void 0))},Ao=new WeakSet,Mu=function(){H(this,Fs)&&(clearInterval(H(this,Fs)),ee(this,Fs,void 0))},To=new WeakSet,Bu=function(){const t=H(this,ct).getQueryCache().build(H(this,ct),this.options);if(t===H(this,he))return;const r=H(this,he);ee(this,he,t),ee(this,Co,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},$l=new WeakSet,fx=function(t){qe.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(H(this,st))}),H(this,ct).getQueryCache().notify({query:H(this,he),type:"observerResultsUpdated"})})},Pg);function vS(e,t){return Yt(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function gm(e,t){return vS(e,t)||e.state.data!==void 0&&Fu(e,t,t.refetchOnMount)}function Fu(e,t,r){if(Yt(t.enabled,e)!==!1&&ss(t.staleTime,e)!=="static"){const s=typeof r=="function"?r(e):r;return s==="always"||s!==!1&&rf(e,t)}return!1}function vm(e,t,r,s){return(e!==t||Yt(s.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&rf(e,r)}function rf(e,t){return Yt(t.enabled,e)!==!1&&e.isStaleByTime(ss(t.staleTime,e))}function xS(e,t){return!Nu(e.getCurrentResult(),t)}var px=E.createContext(void 0),mx=e=>{const t=E.useContext(px);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},yS=({client:e,children:t})=>(E.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),n.jsx(px.Provider,{value:e,children:t})),gx=E.createContext(!1),bS=()=>E.useContext(gx);gx.Provider;function _S(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var wS=E.createContext(_S()),SS=()=>E.useContext(wS),CS=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},kS=e=>{E.useEffect(()=>{e.clearReset()},[e])},ES=({result:e,errorResetBoundary:t,throwOnError:r,query:s,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&(i&&e.data===void 0||rS(r,[e.error,s])),jS=e=>{if(e.suspense){const t=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>t(r(...s)):t(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},NS=(e,t)=>e.isLoading&&e.isFetching&&!t,DS=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,xm=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function RS(e,t,r){var d,g,x,_,y;const s=bS(),i=SS(),a=mx(r),l=a.defaultQueryOptions(e);(g=(d=a.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||g.call(d,l),l._optimisticResults=s?"isRestoring":"optimistic",jS(l),CS(l,i),kS(i);const o=!a.getQueryCache().get(l.queryHash),[c]=E.useState(()=>new t(a,l)),h=c.getOptimisticResult(l),v=!s&&e.subscribed!==!1;if(E.useSyncExternalStore(E.useCallback(f=>{const p=v?c.subscribe(qe.batchCalls(f)):dt;return c.updateResult(),p},[c,v]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),E.useEffect(()=>{c.setOptions(l)},[l,c]),DS(l,h))throw xm(l,c,i);if(ES({result:h,errorResetBoundary:i,throwOnError:l.throwOnError,query:a.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw h.error;if((_=(x=a.getDefaultOptions().queries)==null?void 0:x._experimental_afterQuery)==null||_.call(x,l,h),l.experimental_prefetchInRender&&!Ks&&NS(h,s)){const f=o?xm(l,c,i):(y=a.getQueryCache().get(l.queryHash))==null?void 0:y.promise;f==null||f.catch(dt).finally(()=>{c.updateResult()})}return l.notifyOnChangeProps?h:c.trackResult(h)}function hr(e,t){return RS(e,gS,t)}var AS=function(){return null};function vx(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=vx(e[t]))&&(s&&(s+=" "),s+=r);else for(t in e)e[t]&&(s&&(s+=" "),s+=t);return s}function qr(){for(var e,t,r=0,s="";r<arguments.length;)(e=arguments[r++])&&(t=vx(e))&&(s&&(s+=" "),s+=t);return s}const Oi=e=>typeof e=="number"&&!isNaN(e),Qs=e=>typeof e=="string",ft=e=>typeof e=="function",Ua=e=>Qs(e)||ft(e)?e:null,cd=e=>E.isValidElement(e)||Qs(e)||ft(e)||Oi(e);function TS(e,t,r){r===void 0&&(r=300);const{scrollHeight:s,style:i}=e;requestAnimationFrame(()=>{i.minHeight="initial",i.height=s+"px",i.transition=`all ${r}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(t,r)})})}function oc(e){let{enter:t,exit:r,appendPosition:s=!1,collapse:i=!0,collapseDuration:a=300}=e;return function(l){let{children:o,position:c,preventExitTransition:h,done:v,nodeRef:d,isIn:g}=l;const x=s?`${t}--${c}`:t,_=s?`${r}--${c}`:r,y=E.useRef(0);return E.useLayoutEffect(()=>{const f=d.current,p=x.split(" "),u=m=>{m.target===d.current&&(f.dispatchEvent(new Event("d")),f.removeEventListener("animationend",u),f.removeEventListener("animationcancel",u),y.current===0&&m.type!=="animationcancel"&&f.classList.remove(...p))};f.classList.add(...p),f.addEventListener("animationend",u),f.addEventListener("animationcancel",u)},[]),E.useEffect(()=>{const f=d.current,p=()=>{f.removeEventListener("animationend",p),i?TS(f,v,a):v()};g||(h?p():(y.current=1,f.className+=` ${_}`,f.addEventListener("animationend",p)))},[g]),ie.createElement(ie.Fragment,null,o)}}function ym(e,t){return e!=null?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}:{}}const Tt={list:new Map,emitQueue:new Map,on(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off(e,t){if(t){const r=this.list.get(e).filter(s=>s!==t);return this.list.set(e,r),this}return this.list.delete(e),this},cancelEmit(e){const t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit(e){this.list.has(e)&&this.list.get(e).forEach(t=>{const r=setTimeout(()=>{t(...[].slice.call(arguments,1))},0);this.emitQueue.has(e)||this.emitQueue.set(e,[]),this.emitQueue.get(e).push(r)})}},ba=e=>{let{theme:t,type:r,...s}=e;return ie.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${r})`,...s})},dd={info:function(e){return ie.createElement(ba,{...e},ie.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return ie.createElement(ba,{...e},ie.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return ie.createElement(ba,{...e},ie.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return ie.createElement(ba,{...e},ie.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return ie.createElement("div",{className:"Toastify__spinner"})}};function PS(e){const[,t]=E.useReducer(x=>x+1,0),[r,s]=E.useState([]),i=E.useRef(null),a=E.useRef(new Map).current,l=x=>r.indexOf(x)!==-1,o=E.useRef({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:l,getToast:x=>a.get(x)}).current;function c(x){let{containerId:_}=x;const{limit:y}=o.props;!y||_&&o.containerId!==_||(o.count-=o.queue.length,o.queue=[])}function h(x){s(_=>x==null?[]:_.filter(y=>y!==x))}function v(){const{toastContent:x,toastProps:_,staleId:y}=o.queue.shift();g(x,_,y)}function d(x,_){let{delay:y,staleId:f,...p}=_;if(!cd(x)||function(T){return!i.current||o.props.enableMultiContainer&&T.containerId!==o.props.containerId||a.has(T.toastId)&&T.updateId==null}(p))return;const{toastId:u,updateId:m,data:b}=p,{props:S}=o,C=()=>h(u),k=m==null;k&&o.count++;const w={...S,style:S.toastStyle,key:o.toastKey++,...Object.fromEntries(Object.entries(p).filter(T=>{let[A,O]=T;return O!=null})),toastId:u,updateId:m,data:b,closeToast:C,isIn:!1,className:Ua(p.className||S.toastClassName),bodyClassName:Ua(p.bodyClassName||S.bodyClassName),progressClassName:Ua(p.progressClassName||S.progressClassName),autoClose:!p.isLoading&&(j=p.autoClose,D=S.autoClose,j===!1||Oi(j)&&j>0?j:D),deleteToast(){const T=ym(a.get(u),"removed");a.delete(u),Tt.emit(4,T);const A=o.queue.length;if(o.count=u==null?o.count-o.displayedToast:o.count-1,o.count<0&&(o.count=0),A>0){const O=u==null?o.props.limit:1;if(A===1||O===1)o.displayedToast++,v();else{const R=O>A?A:O;o.displayedToast=R;for(let B=0;B<R;B++)v()}}else t()}};var j,D;w.iconOut=function(T){let{theme:A,type:O,isLoading:R,icon:B}=T,U=null;const $={theme:A,type:O};return B===!1||(ft(B)?U=B($):E.isValidElement(B)?U=E.cloneElement(B,$):Qs(B)||Oi(B)?U=B:R?U=dd.spinner():(N=>N in dd)(O)&&(U=dd[O]($))),U}(w),ft(p.onOpen)&&(w.onOpen=p.onOpen),ft(p.onClose)&&(w.onClose=p.onClose),w.closeButton=S.closeButton,p.closeButton===!1||cd(p.closeButton)?w.closeButton=p.closeButton:p.closeButton===!0&&(w.closeButton=!cd(S.closeButton)||S.closeButton);let I=x;E.isValidElement(x)&&!Qs(x.type)?I=E.cloneElement(x,{closeToast:C,toastProps:w,data:b}):ft(x)&&(I=x({closeToast:C,toastProps:w,data:b})),S.limit&&S.limit>0&&o.count>S.limit&&k?o.queue.push({toastContent:I,toastProps:w,staleId:f}):Oi(y)?setTimeout(()=>{g(I,w,f)},y):g(I,w,f)}function g(x,_,y){const{toastId:f}=_;y&&a.delete(y);const p={content:x,props:_};a.set(f,p),s(u=>[...u,f].filter(m=>m!==y)),Tt.emit(4,ym(p,p.props.updateId==null?"added":"updated"))}return E.useEffect(()=>(o.containerId=e.containerId,Tt.cancelEmit(3).on(0,d).on(1,x=>i.current&&h(x)).on(5,c).emit(2,o),()=>{a.clear(),Tt.emit(3,o)}),[]),E.useEffect(()=>{o.props=e,o.isToastActive=l,o.displayedToast=r.length}),{getToastToRender:function(x){const _=new Map,y=Array.from(a.values());return e.newestOnTop&&y.reverse(),y.forEach(f=>{const{position:p}=f.props;_.has(p)||_.set(p,[]),_.get(p).push(f)}),Array.from(_,f=>x(f[0],f[1]))},containerRef:i,isToastActive:l}}function bm(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function _m(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function LS(e){const[t,r]=E.useState(!1),[s,i]=E.useState(!1),a=E.useRef(null),l=E.useRef({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,o=E.useRef(e),{autoClose:c,pauseOnHover:h,closeToast:v,onClick:d,closeOnClick:g}=e;function x(b){if(e.draggable){b.nativeEvent.type==="touchstart"&&b.nativeEvent.preventDefault(),l.didMove=!1,document.addEventListener("mousemove",p),document.addEventListener("mouseup",u),document.addEventListener("touchmove",p),document.addEventListener("touchend",u);const S=a.current;l.canCloseOnClick=!0,l.canDrag=!0,l.boundingRect=S.getBoundingClientRect(),S.style.transition="",l.x=bm(b.nativeEvent),l.y=_m(b.nativeEvent),e.draggableDirection==="x"?(l.start=l.x,l.removalDistance=S.offsetWidth*(e.draggablePercent/100)):(l.start=l.y,l.removalDistance=S.offsetHeight*(e.draggablePercent===80?1.5*e.draggablePercent:e.draggablePercent/100))}}function _(b){if(l.boundingRect){const{top:S,bottom:C,left:k,right:w}=l.boundingRect;b.nativeEvent.type!=="touchend"&&e.pauseOnHover&&l.x>=k&&l.x<=w&&l.y>=S&&l.y<=C?f():y()}}function y(){r(!0)}function f(){r(!1)}function p(b){const S=a.current;l.canDrag&&S&&(l.didMove=!0,t&&f(),l.x=bm(b),l.y=_m(b),l.delta=e.draggableDirection==="x"?l.x-l.start:l.y-l.start,l.start!==l.x&&(l.canCloseOnClick=!1),S.style.transform=`translate${e.draggableDirection}(${l.delta}px)`,S.style.opacity=""+(1-Math.abs(l.delta/l.removalDistance)))}function u(){document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",u),document.removeEventListener("touchmove",p),document.removeEventListener("touchend",u);const b=a.current;if(l.canDrag&&l.didMove&&b){if(l.canDrag=!1,Math.abs(l.delta)>l.removalDistance)return i(!0),void e.closeToast();b.style.transition="transform 0.2s, opacity 0.2s",b.style.transform=`translate${e.draggableDirection}(0)`,b.style.opacity="1"}}E.useEffect(()=>{o.current=e}),E.useEffect(()=>(a.current&&a.current.addEventListener("d",y,{once:!0}),ft(e.onOpen)&&e.onOpen(E.isValidElement(e.children)&&e.children.props),()=>{const b=o.current;ft(b.onClose)&&b.onClose(E.isValidElement(b.children)&&b.children.props)}),[]),E.useEffect(()=>(e.pauseOnFocusLoss&&(document.hasFocus()||f(),window.addEventListener("focus",y),window.addEventListener("blur",f)),()=>{e.pauseOnFocusLoss&&(window.removeEventListener("focus",y),window.removeEventListener("blur",f))}),[e.pauseOnFocusLoss]);const m={onMouseDown:x,onTouchStart:x,onMouseUp:_,onTouchEnd:_};return c&&h&&(m.onMouseEnter=f,m.onMouseLeave=y),g&&(m.onClick=b=>{d&&d(b),l.canCloseOnClick&&v()}),{playToast:y,pauseToast:f,isRunning:t,preventExitTransition:s,toastRef:a,eventHandlers:m}}function xx(e){let{closeToast:t,theme:r,ariaLabel:s="close"}=e;return ie.createElement("button",{className:`Toastify__close-button Toastify__close-button--${r}`,type:"button",onClick:i=>{i.stopPropagation(),t(i)},"aria-label":s},ie.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},ie.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function IS(e){let{delay:t,isRunning:r,closeToast:s,type:i="default",hide:a,className:l,style:o,controlledProgress:c,progress:h,rtl:v,isIn:d,theme:g}=e;const x=a||c&&h===0,_={...o,animationDuration:`${t}ms`,animationPlayState:r?"running":"paused",opacity:x?0:1};c&&(_.transform=`scaleX(${h})`);const y=qr("Toastify__progress-bar",c?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${g}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":v}),f=ft(l)?l({rtl:v,type:i,defaultClassName:y}):qr(y,l);return ie.createElement("div",{role:"progressbar","aria-hidden":x?"true":"false","aria-label":"notification timer",className:f,style:_,[c&&h>=1?"onTransitionEnd":"onAnimationEnd"]:c&&h<1?null:()=>{d&&s()}})}const OS=e=>{const{isRunning:t,preventExitTransition:r,toastRef:s,eventHandlers:i}=LS(e),{closeButton:a,children:l,autoClose:o,onClick:c,type:h,hideProgressBar:v,closeToast:d,transition:g,position:x,className:_,style:y,bodyClassName:f,bodyStyle:p,progressClassName:u,progressStyle:m,updateId:b,role:S,progress:C,rtl:k,toastId:w,deleteToast:j,isIn:D,isLoading:I,iconOut:T,closeOnClick:A,theme:O}=e,R=qr("Toastify__toast",`Toastify__toast-theme--${O}`,`Toastify__toast--${h}`,{"Toastify__toast--rtl":k},{"Toastify__toast--close-on-click":A}),B=ft(_)?_({rtl:k,position:x,type:h,defaultClassName:R}):qr(R,_),U=!!C||!o,$={closeToast:d,type:h,theme:O};let N=null;return a===!1||(N=ft(a)?a($):E.isValidElement(a)?E.cloneElement(a,$):xx($)),ie.createElement(g,{isIn:D,done:j,position:x,preventExitTransition:r,nodeRef:s},ie.createElement("div",{id:w,onClick:c,className:B,...i,style:y,ref:s},ie.createElement("div",{...D&&{role:S},className:ft(f)?f({type:h}):qr("Toastify__toast-body",f),style:p},T!=null&&ie.createElement("div",{className:qr("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!I})},T),ie.createElement("div",null,l)),N,ie.createElement(IS,{...b&&!U?{key:`pb-${b}`}:{},rtl:k,theme:O,delay:o,isRunning:t,isIn:D,closeToast:d,hide:v,type:h,style:m,className:u,controlledProgress:U,progress:C||0})))},ac=function(e,t){return t===void 0&&(t=!1),{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}},MS=oc(ac("bounce",!0));oc(ac("slide",!0));oc(ac("zoom"));oc(ac("flip"));const $u=E.forwardRef((e,t)=>{const{getToastToRender:r,containerRef:s,isToastActive:i}=PS(e),{className:a,style:l,rtl:o,containerId:c}=e;function h(v){const d=qr("Toastify__toast-container",`Toastify__toast-container--${v}`,{"Toastify__toast-container--rtl":o});return ft(a)?a({position:v,rtl:o,defaultClassName:d}):qr(d,Ua(a))}return E.useEffect(()=>{t&&(t.current=s.current)},[]),ie.createElement("div",{ref:s,className:"Toastify",id:c},r((v,d)=>{const g=d.length?{...l}:{...l,pointerEvents:"none"};return ie.createElement("div",{className:h(v),style:g,key:`container-${v}`},d.map((x,_)=>{let{content:y,props:f}=x;return ie.createElement(OS,{...f,isIn:i(f.toastId),style:{...f.style,"--nth":_+1,"--len":d.length},key:`toast-${f.key}`},y)}))}))});$u.displayName="ToastContainer",$u.defaultProps={position:"top-right",transition:MS,autoClose:5e3,closeButton:xx,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let ud,ks=new Map,ki=[],BS=1;function yx(){return""+BS++}function FS(e){return e&&(Qs(e.toastId)||Oi(e.toastId))?e.toastId:yx()}function Mi(e,t){return ks.size>0?Tt.emit(0,e,t):ki.push({content:e,options:t}),t.toastId}function wl(e,t){return{...t,type:t&&t.type||e,toastId:FS(t)}}function _a(e){return(t,r)=>Mi(t,wl(e,r))}function re(e,t){return Mi(e,wl("default",t))}re.loading=(e,t)=>Mi(e,wl("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),re.promise=function(e,t,r){let s,{pending:i,error:a,success:l}=t;i&&(s=Qs(i)?re.loading(i,r):re.loading(i.render,{...r,...i}));const o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(v,d,g)=>{if(d==null)return void re.dismiss(s);const x={type:v,...o,...r,data:g},_=Qs(d)?{render:d}:d;return s?re.update(s,{...x,..._}):re(_.render,{...x,..._}),g},h=ft(e)?e():e;return h.then(v=>c("success",l,v)).catch(v=>c("error",a,v)),h},re.success=_a("success"),re.info=_a("info"),re.error=_a("error"),re.warning=_a("warning"),re.warn=re.warning,re.dark=(e,t)=>Mi(e,wl("default",{theme:"dark",...t})),re.dismiss=e=>{ks.size>0?Tt.emit(1,e):ki=ki.filter(t=>e!=null&&t.options.toastId!==e)},re.clearWaitingQueue=function(e){return e===void 0&&(e={}),Tt.emit(5,e)},re.isActive=e=>{let t=!1;return ks.forEach(r=>{r.isToastActive&&r.isToastActive(e)&&(t=!0)}),t},re.update=function(e,t){t===void 0&&(t={}),setTimeout(()=>{const r=function(s,i){let{containerId:a}=i;const l=ks.get(a||ud);return l&&l.getToast(s)}(e,t);if(r){const{props:s,content:i}=r,a={delay:100,...s,...t,toastId:t.toastId||e,updateId:yx()};a.toastId!==e&&(a.staleId=e);const l=a.render||i;delete a.render,Mi(l,a)}},0)},re.done=e=>{re.update(e,{progress:1})},re.onChange=e=>(Tt.on(4,e),()=>{Tt.off(4,e)}),re.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},re.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},Tt.on(2,e=>{ud=e.containerId||e,ks.set(ud,e),ki.forEach(t=>{Tt.emit(0,t.content,t.options)}),ki=[]}).on(3,e=>{ks.delete(e.containerId||e),ks.size===0&&Tt.off(0).off(1).off(5)});function $S({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const HS=E.forwardRef($S),Sl=HS;function US({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6 9 12.75l4.286-4.286a11.948 11.948 0 0 1 4.306 6.43l.776 2.898m0 0 3.182-5.511m-3.182 5.51-5.511-3.181"}))}const WS=E.forwardRef(US),zS=WS;function VS({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"}))}const qS=E.forwardRef(VS),wm=qS;function GS({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9V4.5M9 9H4.5M9 9 3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5 5.25 5.25"}))}const KS=E.forwardRef(GS),QS=KS;function YS({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"}))}const XS=E.forwardRef(YS),Hu=XS;function JS({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 21 3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5"}))}const ZS=E.forwardRef(JS),e2=ZS;function t2({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const r2=E.forwardRef(t2),s2=r2;function n2({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const i2=E.forwardRef(n2),sf=i2;function o2({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const a2=E.forwardRef(o2),Cl=a2;function l2({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const c2=E.forwardRef(l2),bx=c2;function d2({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const u2=E.forwardRef(d2),h2=u2;function f2({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}const p2=E.forwardRef(f2),m2=p2;function g2({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"}))}const v2=E.forwardRef(g2),Uu=v2;function x2({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const y2=E.forwardRef(x2),Ys=y2;function b2({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 6.75 22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3-4.5 16.5"}))}const _2=E.forwardRef(b2),uo=_2;function w2({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"}))}const S2=E.forwardRef(w2),kl=S2;function C2({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m6.75 7.5 3 2.25-3 2.25m4.5 0h3m-9 8.25h13.5A2.25 2.25 0 0 0 21 18V6a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 6v12a2.25 2.25 0 0 0 2.25 2.25Z"}))}const k2=E.forwardRef(C2),Xs=k2;function E2({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25"}))}const j2=E.forwardRef(E2),N2=j2;function D2({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 0 0 2.25-2.25V6.75a2.25 2.25 0 0 0-2.25-2.25H6.75A2.25 2.25 0 0 0 4.5 6.75v10.5a2.25 2.25 0 0 0 2.25 2.25Zm.75-12h9v9h-9v-9Z"}))}const R2=E.forwardRef(D2),_x=R2;function A2({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"}))}const T2=E.forwardRef(A2),P2=T2;function L2({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 12.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 18.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5Z"}))}const I2=E.forwardRef(L2),Sm=I2;function O2({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const M2=E.forwardRef(O2),El=M2;function B2({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"}))}const F2=E.forwardRef(B2),Bi=F2;function $2({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const H2=E.forwardRef($2),U2=H2;function W2({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"}))}const z2=E.forwardRef(W2),V2=z2;function q2({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const G2=E.forwardRef(q2),wx=G2;function K2({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const Q2=E.forwardRef(K2),nf=Q2;function Y2({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}const X2=E.forwardRef(Y2),qn=X2;function J2({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const Z2=E.forwardRef(J2),ho=Z2;function eC({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"}))}const tC=E.forwardRef(eC),rC=tC;function sC({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.59 14.37a6 6 0 0 1-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 0 0 6.16-12.12A14.98 14.98 0 0 0 9.631 8.41m5.96 5.96a14.926 14.926 0 0 1-5.841 2.58m-.119-8.54a6 6 0 0 0-7.381 5.84h4.8m2.581-5.84a14.927 14.927 0 0 0-2.58 5.84m2.699 2.7c-.103.021-.207.041-.311.06a15.09 15.09 0 0 1-2.448-2.448 14.9 14.9 0 0 1 .06-.312m-2.24 2.39a4.493 4.493 0 0 0-1.757 4.306 4.493 4.493 0 0 0 4.306-1.758M16.5 9a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"}))}const nC=E.forwardRef(sC),iC=nC;function oC({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 17.25v-.228a4.5 4.5 0 0 0-.12-1.03l-2.268-9.64a3.375 3.375 0 0 0-3.285-2.602H7.923a3.375 3.375 0 0 0-3.285 2.602l-2.268 9.64a4.5 4.5 0 0 0-.12 1.03v.228m19.5 0a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3m19.5 0a3 3 0 0 0-3-3H5.25a3 3 0 0 0-3 3m16.5 0h.008v.008h-.008v-.008Zm-3 0h.008v.008h-.008v-.008Z"}))}const aC=E.forwardRef(oC),ds=aC;function lC({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.348 14.652a3.75 3.75 0 0 1 0-5.304m5.304 0a3.75 3.75 0 0 1 0 5.304m-7.425 2.121a6.75 6.75 0 0 1 0-9.546m9.546 0a6.75 6.75 0 0 1 0 9.546M5.106 18.894c-3.808-3.807-3.808-9.98 0-13.788m13.788 0c3.808 3.807 3.808 9.98 0 13.788M12 12h.008v.008H12V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const cC=E.forwardRef(lC),dC=cC;function uC({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"}))}const hC=E.forwardRef(uC),Sx=hC;function fC({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"}))}const pC=E.forwardRef(fC),fo=pC;function mC({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const gC=E.forwardRef(mC),Cm=gC;function vC({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const xC=E.forwardRef(vC),yC=xC;function bC({title:e,titleId:t,...r},s){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?E.createElement("title",{id:t},e):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const _C=E.forwardRef(bC),po=_C,wC=[{name:"Dashboard",href:"/",icon:U2},{name:"Agents",href:"/agents",icon:ds,badge:12},{name:"Projects",href:"/projects",icon:Bi,badge:5},{name:"Tasks",icon:Uu,children:[{name:"Browse",href:"/tasks",icon:Uu},{name:"Assign",href:"/tasks/assign",icon:e2}]},{name:"Analytics",href:"/analytics",icon:sf},{name:"Settings",href:"/settings",icon:kl}],SC=[{name:"Terminal",href:"/terminal",icon:Xs}],CC=()=>{const e=xs(),[t,r]=E.useState(["Tasks"]),s=a=>{r(l=>l.includes(a)?l.filter(o=>o!==a):[...l,a])},i=a=>{var h,v;const l=a.children&&a.children.length>0,o=t.includes(a.name);a.href&&(e.pathname,a.href);const c=l&&((h=a.children)==null?void 0:h.some(d=>d.href&&e.pathname===d.href));return l?n.jsxs("div",{children:[n.jsxs("button",{onClick:()=>s(a.name),className:`w-full group flex items-center px-3 py-2 text-sm font-medium rounded-md transition-all duration-200 ${c?"text-foreground bg-background-tertiary":"text-foreground-secondary hover:bg-background-tertiary hover:text-foreground"}`,children:[n.jsx(a.icon,{className:"mr-3 h-5 w-5 flex-shrink-0"}),n.jsx("span",{className:"flex-1 text-left",children:a.name}),o?n.jsx(bx,{className:"h-4 w-4"}):n.jsx(h2,{className:"h-4 w-4"})]}),o&&n.jsx("div",{className:"ml-8 mt-1 space-y-1",children:(v=a.children)==null?void 0:v.map(d=>n.jsxs(lm,{to:d.href,className:({isActive:g})=>`group flex items-center px-3 py-2 text-sm font-medium rounded-md transition-all duration-200 ${g?"bg-background-tertiary text-foreground":"text-foreground-secondary hover:bg-background-tertiary hover:text-foreground"}`,children:[n.jsx(d.icon,{className:"mr-3 h-4 w-4 flex-shrink-0"}),d.name]},d.name))})]},a.name):n.jsxs(lm,{to:a.href,className:({isActive:d})=>`group flex items-center px-3 py-2 text-sm font-medium rounded-md transition-all duration-200 ${d?"bg-background-tertiary text-foreground":"text-foreground-secondary hover:bg-background-tertiary hover:text-foreground"}`,children:[n.jsx(a.icon,{className:"mr-3 h-5 w-5 flex-shrink-0"}),n.jsx("span",{className:"flex-1",children:a.name}),a.badge&&n.jsx("span",{className:"ml-auto inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-background-tertiary text-foreground-secondary",children:a.badge})]},a.name)};return n.jsxs("div",{className:"w-64 bg-background-sidebar border-r border-border flex flex-col h-full",children:[n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"h-8 w-8 rounded-lg bg-brand flex items-center justify-center",children:n.jsx("span",{className:"text-white font-bold text-lg",children:"M"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-semibold text-foreground",children:"Magents"}),n.jsx("p",{className:"text-foreground-tertiary text-xs",children:"Multi-Agent Dev"})]})]})}),n.jsx("nav",{className:"flex-1 px-3",children:n.jsxs("div",{className:"space-y-1",children:[n.jsx("h3",{className:"px-3 text-xs font-semibold text-foreground-tertiary uppercase tracking-wider mb-4",children:"Navigation"}),wC.map(i)]})}),n.jsx("div",{className:"px-3 pb-4 space-y-1",children:SC.map(i)}),n.jsx("div",{className:"p-4 border-t border-border",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"h-2 w-2 bg-status-success rounded-full mr-2 animate-pulse"}),n.jsx("span",{className:"text-xs text-foreground-tertiary",children:"System Online"})]})})]})},fr=Object.create(null);fr.open="0";fr.close="1";fr.ping="2";fr.pong="3";fr.message="4";fr.upgrade="5";fr.noop="6";const Wa=Object.create(null);Object.keys(fr).forEach(e=>{Wa[fr[e]]=e});const Wu={type:"error",data:"parser error"},Cx=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",kx=typeof ArrayBuffer=="function",Ex=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,of=({type:e,data:t},r,s)=>Cx&&t instanceof Blob?r?s(t):km(t,s):kx&&(t instanceof ArrayBuffer||Ex(t))?r?s(t):km(new Blob([t]),s):s(fr[e]+(t||"")),km=(e,t)=>{const r=new FileReader;return r.onload=function(){const s=r.result.split(",")[1];t("b"+(s||""))},r.readAsDataURL(e)};function Em(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let hd;function kC(e,t){if(Cx&&e.data instanceof Blob)return e.data.arrayBuffer().then(Em).then(t);if(kx&&(e.data instanceof ArrayBuffer||Ex(e.data)))return t(Em(e.data));of(e,!1,r=>{hd||(hd=new TextEncoder),t(hd.encode(r))})}const jm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ei=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<jm.length;e++)Ei[jm.charCodeAt(e)]=e;const EC=e=>{let t=e.length*.75,r=e.length,s,i=0,a,l,o,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const h=new ArrayBuffer(t),v=new Uint8Array(h);for(s=0;s<r;s+=4)a=Ei[e.charCodeAt(s)],l=Ei[e.charCodeAt(s+1)],o=Ei[e.charCodeAt(s+2)],c=Ei[e.charCodeAt(s+3)],v[i++]=a<<2|l>>4,v[i++]=(l&15)<<4|o>>2,v[i++]=(o&3)<<6|c&63;return h},jC=typeof ArrayBuffer=="function",af=(e,t)=>{if(typeof e!="string")return{type:"message",data:jx(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:NC(e.substring(1),t)}:Wa[r]?e.length>1?{type:Wa[r],data:e.substring(1)}:{type:Wa[r]}:Wu},NC=(e,t)=>{if(jC){const r=EC(e);return jx(r,t)}else return{base64:!0,data:e}},jx=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},Nx=String.fromCharCode(30),DC=(e,t)=>{const r=e.length,s=new Array(r);let i=0;e.forEach((a,l)=>{of(a,!1,o=>{s[l]=o,++i===r&&t(s.join(Nx))})})},RC=(e,t)=>{const r=e.split(Nx),s=[];for(let i=0;i<r.length;i++){const a=af(r[i],t);if(s.push(a),a.type==="error")break}return s};function AC(){return new TransformStream({transform(e,t){kC(e,r=>{const s=r.length;let i;if(s<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,s);else if(s<65536){i=new Uint8Array(3);const a=new DataView(i.buffer);a.setUint8(0,126),a.setUint16(1,s)}else{i=new Uint8Array(9);const a=new DataView(i.buffer);a.setUint8(0,127),a.setBigUint64(1,BigInt(s))}e.data&&typeof e.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(r)})}})}let fd;function wa(e){return e.reduce((t,r)=>t+r.length,0)}function Sa(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let s=0;for(let i=0;i<t;i++)r[i]=e[0][s++],s===e[0].length&&(e.shift(),s=0);return e.length&&s<e[0].length&&(e[0]=e[0].slice(s)),r}function TC(e,t){fd||(fd=new TextDecoder);const r=[];let s=0,i=-1,a=!1;return new TransformStream({transform(l,o){for(r.push(l);;){if(s===0){if(wa(r)<1)break;const c=Sa(r,1);a=(c[0]&128)===128,i=c[0]&127,i<126?s=3:i===126?s=1:s=2}else if(s===1){if(wa(r)<2)break;const c=Sa(r,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),s=3}else if(s===2){if(wa(r)<8)break;const c=Sa(r,8),h=new DataView(c.buffer,c.byteOffset,c.length),v=h.getUint32(0);if(v>Math.pow(2,53-32)-1){o.enqueue(Wu);break}i=v*Math.pow(2,32)+h.getUint32(4),s=3}else{if(wa(r)<i)break;const c=Sa(r,i);o.enqueue(af(a?c:fd.decode(c),t)),s=0}if(i===0||i>e){o.enqueue(Wu);break}}}})}const Dx=4;function Ie(e){if(e)return PC(e)}function PC(e){for(var t in Ie.prototype)e[t]=Ie.prototype[t];return e}Ie.prototype.on=Ie.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Ie.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};Ie.prototype.off=Ie.prototype.removeListener=Ie.prototype.removeAllListeners=Ie.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var s,i=0;i<r.length;i++)if(s=r[i],s===t||s.fn===t){r.splice(i,1);break}return r.length===0&&delete this._callbacks["$"+e],this};Ie.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(r){r=r.slice(0);for(var s=0,i=r.length;s<i;++s)r[s].apply(this,t)}return this};Ie.prototype.emitReserved=Ie.prototype.emit;Ie.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Ie.prototype.hasListeners=function(e){return!!this.listeners(e).length};const lc=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0))(),It=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())(),LC="arraybuffer";function Rx(e,...t){return t.reduce((r,s)=>(e.hasOwnProperty(s)&&(r[s]=e[s]),r),{})}const IC=It.setTimeout,OC=It.clearTimeout;function cc(e,t){t.useNativeTimers?(e.setTimeoutFn=IC.bind(It),e.clearTimeoutFn=OC.bind(It)):(e.setTimeoutFn=It.setTimeout.bind(It),e.clearTimeoutFn=It.clearTimeout.bind(It))}const MC=1.33;function BC(e){return typeof e=="string"?FC(e):Math.ceil((e.byteLength||e.size)*MC)}function FC(e){let t=0,r=0;for(let s=0,i=e.length;s<i;s++)t=e.charCodeAt(s),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(s++,r+=4);return r}function Ax(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function $C(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function HC(e){let t={},r=e.split("&");for(let s=0,i=r.length;s<i;s++){let a=r[s].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t}class UC extends Error{constructor(t,r,s){super(t),this.description=r,this.context=s,this.type="TransportError"}}class lf extends Ie{constructor(t){super(),this.writable=!1,cc(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,s){return super.emitReserved("error",new UC(t,r,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=af(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=$C(t);return r.length?"?"+r:""}}class WC extends lf{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||r()})),this.writable||(s++,this.once("drain",function(){--s||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};RC(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,DC(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=Ax()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let Tx=!1;try{Tx=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const zC=Tx;function VC(){}class qC extends WC{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let s=location.port;s||(s=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||s!==t.port}}doWrite(t,r){const s=this.request({method:"POST",data:t});s.on("success",r),s.on("error",(i,a)=>{this.onError("xhr post error",i,a)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,s)=>{this.onError("xhr poll error",r,s)}),this.pollXhr=t}}class ur extends Ie{constructor(t,r,s){super(),this.createRequest=t,cc(this,s),this._opts=s,this._method=s.method||"GET",this._uri=r,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var t;const r=Rx(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(r);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&s.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var i;s.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=ur.requestsCount++,ur.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=VC,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete ur.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}ur.requestsCount=0;ur.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Nm);else if(typeof addEventListener=="function"){const e="onpagehide"in It?"pagehide":"unload";addEventListener(e,Nm,!1)}}function Nm(){for(let e in ur.requests)ur.requests.hasOwnProperty(e)&&ur.requests[e].abort()}const GC=function(){const e=Px({xdomain:!1});return e&&e.responseType!==null}();class KC extends qC{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=GC&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new ur(Px,this.uri(),t)}}function Px(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||zC))return new XMLHttpRequest}catch{}if(!t)try{return new It[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Lx=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class QC extends lf{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,s=Lx?{}:Rx(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,s)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const s=t[r],i=r===t.length-1;of(s,this.supportsBinary,a=>{try{this.doWrite(s,a)}catch{}i&&lc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=Ax()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const pd=It.WebSocket||It.MozWebSocket;class YC extends QC{createSocket(t,r,s){return Lx?new pd(t,r,s):r?new pd(t,r):new pd(t)}doWrite(t,r){this.ws.send(r)}}class XC extends lf{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=TC(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=t.readable.pipeThrough(r).getReader(),i=AC();i.readable.pipeTo(t.writable),this._writer=i.writable.getWriter();const a=()=>{s.read().then(({done:o,value:c})=>{o||(this.onPacket(c),a())}).catch(o=>{})};a();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const s=t[r],i=r===t.length-1;this._writer.write(s).then(()=>{i&&lc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const JC={websocket:YC,webtransport:XC,polling:KC},ZC=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ek=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function zu(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),s=e.indexOf("]");r!=-1&&s!=-1&&(e=e.substring(0,r)+e.substring(r,s).replace(/:/g,";")+e.substring(s,e.length));let i=ZC.exec(e||""),a={},l=14;for(;l--;)a[ek[l]]=i[l]||"";return r!=-1&&s!=-1&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=tk(a,a.path),a.queryKey=rk(a,a.query),a}function tk(e,t){const r=/\/{2,9}/g,s=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&s.splice(0,1),t.slice(-1)=="/"&&s.splice(s.length-1,1),s}function rk(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,i,a){i&&(r[i]=a)}),r}const Vu=typeof addEventListener=="function"&&typeof removeEventListener=="function",za=[];Vu&&addEventListener("offline",()=>{za.forEach(e=>e())},!1);class ns extends Ie{constructor(t,r){if(super(),this.binaryType=LC,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const s=zu(t);r.hostname=s.host,r.secure=s.protocol==="https"||s.protocol==="wss",r.port=s.port,s.query&&(r.query=s.query)}else r.host&&(r.hostname=zu(r.host).host);cc(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(s=>{const i=s.prototype.name;this.transports.push(i),this._transportsByName[i]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=HC(this.opts.query)),Vu&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},za.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=Dx,r.transport=t,this.id&&(r.sid=this.id);const s=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&ns.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",ns.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let s=0;s<this.writeBuffer.length;s++){const i=this.writeBuffer[s].data;if(i&&(r+=BC(i)),s>0&&r>this._maxPayload)return this.writeBuffer.slice(0,s);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,lc(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,s){return this._sendPacket("message",t,r,s),this}send(t,r,s){return this._sendPacket("message",t,r,s),this}_sendPacket(t,r,s,i){if(typeof r=="function"&&(i=r,r=void 0),typeof s=="function"&&(i=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const a={type:t,data:r,options:s};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},s=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():t()}):this.upgrading?s():t()),this}_onError(t){if(ns.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Vu&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=za.indexOf(this._offlineEventListener);s!==-1&&za.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}ns.protocol=Dx;class sk extends ns{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),s=!1;ns.priorWebsocketSuccess=!1;const i=()=>{s||(r.send([{type:"ping",data:"probe"}]),r.once("packet",d=>{if(!s)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;ns.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(v(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const g=new Error("probe error");g.transport=r.name,this.emitReserved("upgradeError",g)}}))};function a(){s||(s=!0,v(),r.close(),r=null)}const l=d=>{const g=new Error("probe error: "+d);g.transport=r.name,a(),this.emitReserved("upgradeError",g)};function o(){l("transport closed")}function c(){l("socket closed")}function h(d){r&&d.name!==r.name&&a()}const v=()=>{r.removeListener("open",i),r.removeListener("error",l),r.removeListener("close",o),this.off("close",c),this.off("upgrading",h)};r.once("open",i),r.once("error",l),r.once("close",o),this.once("close",c),this.once("upgrading",h),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{s||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let s=0;s<t.length;s++)~this.transports.indexOf(t[s])&&r.push(t[s]);return r}}let nk=class extends sk{constructor(t,r={}){const s=typeof t=="object"?t:r;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(i=>JC[i]).filter(i=>!!i)),super(t,s)}};function ik(e,t="",r){let s=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),s=zu(e)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const a=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+a+":"+s.port+t,s.href=s.protocol+"://"+a+(r&&r.port===s.port?"":":"+s.port),s}const ok=typeof ArrayBuffer=="function",ak=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Ix=Object.prototype.toString,lk=typeof Blob=="function"||typeof Blob<"u"&&Ix.call(Blob)==="[object BlobConstructor]",ck=typeof File=="function"||typeof File<"u"&&Ix.call(File)==="[object FileConstructor]";function cf(e){return ok&&(e instanceof ArrayBuffer||ak(e))||lk&&e instanceof Blob||ck&&e instanceof File}function Va(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,s=e.length;r<s;r++)if(Va(e[r]))return!0;return!1}if(cf(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Va(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&Va(e[r]))return!0;return!1}function dk(e){const t=[],r=e.data,s=e;return s.data=qu(r,t),s.attachments=t.length,{packet:s,buffers:t}}function qu(e,t){if(!e)return e;if(cf(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let s=0;s<e.length;s++)r[s]=qu(e[s],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=qu(e[s],t));return r}return e}function uk(e,t){return e.data=Gu(e.data,t),delete e.attachments,e}function Gu(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=Gu(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=Gu(e[r],t));return e}const hk=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],fk=5;var fe;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(fe||(fe={}));class pk{constructor(t){this.replacer=t}encode(t){return(t.type===fe.EVENT||t.type===fe.ACK)&&Va(t)?this.encodeAsBinary({type:t.type===fe.EVENT?fe.BINARY_EVENT:fe.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===fe.BINARY_EVENT||t.type===fe.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=dk(t),s=this.encodeAsString(r.packet),i=r.buffers;return i.unshift(s),i}}function Dm(e){return Object.prototype.toString.call(e)==="[object Object]"}class df extends Ie{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const s=r.type===fe.BINARY_EVENT;s||r.type===fe.BINARY_ACK?(r.type=s?fe.EVENT:fe.ACK,this.reconstructor=new mk(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(cf(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const s={type:Number(t.charAt(0))};if(fe[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===fe.BINARY_EVENT||s.type===fe.BINARY_ACK){const a=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const l=t.substring(a,r);if(l!=Number(l)||t.charAt(r)!=="-")throw new Error("Illegal attachments");s.attachments=Number(l)}if(t.charAt(r+1)==="/"){const a=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););s.nsp=t.substring(a,r)}else s.nsp="/";const i=t.charAt(r+1);if(i!==""&&Number(i)==i){const a=r+1;for(;++r;){const l=t.charAt(r);if(l==null||Number(l)!=l){--r;break}if(r===t.length)break}s.id=Number(t.substring(a,r+1))}if(t.charAt(++r)){const a=this.tryParse(t.substr(r));if(df.isPayloadValid(s.type,a))s.data=a;else throw new Error("invalid payload")}return s}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case fe.CONNECT:return Dm(r);case fe.DISCONNECT:return r===void 0;case fe.CONNECT_ERROR:return typeof r=="string"||Dm(r);case fe.EVENT:case fe.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&hk.indexOf(r[0])===-1);case fe.ACK:case fe.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class mk{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=uk(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const gk=Object.freeze(Object.defineProperty({__proto__:null,Decoder:df,Encoder:pk,get PacketType(){return fe},protocol:fk},Symbol.toStringTag,{value:"Module"}));function Kt(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const vk=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Ox extends Ie{constructor(t,r,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Kt(t,"open",this.onopen.bind(this)),Kt(t,"packet",this.onpacket.bind(this)),Kt(t,"error",this.onerror.bind(this)),Kt(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var s,i,a;if(vk.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const l={type:fe.EVENT,data:r};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const v=this.ids++,d=r.pop();this._registerAckCallback(v,d),l.id=v}const o=(i=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((a=this.io.engine)===null||a===void 0)&&a._hasPingExpired());return this.flags.volatile&&!o||(c?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(t,r){var s;const i=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(i===void 0){this.acks[t]=r;return}const a=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===t&&this.sendBuffer.splice(o,1);r.call(this,new Error("operation has timed out"))},i),l=(...o)=>{this.io.clearTimeoutFn(a),r.apply(this,o)};l.withError=!0,this.acks[t]=l}emitWithAck(t,...r){return new Promise((s,i)=>{const a=(l,o)=>l?i(l):s(o);a.withError=!0,r.push(a),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...a)=>s!==this._queue[0]?void 0:(i!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(i)):(this._queue.shift(),r&&r(null,...a)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:fe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(s=>String(s.id)===t)){const s=this.acks[t];delete this.acks[t],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case fe.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case fe.EVENT:case fe.BINARY_EVENT:this.onevent(t);break;case fe.ACK:case fe.BINARY_ACK:this.onack(t);break;case fe.DISCONNECT:this.ondisconnect();break;case fe.CONNECT_ERROR:this.destroy();const s=new Error(t.data.message);s.data=t.data.data,this.emitReserved("connect_error",s);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const s of r)s.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let s=!1;return function(...i){s||(s=!0,r.packet({type:fe.ACK,id:t,data:i}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:fe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let s=0;s<r.length;s++)if(t===r[s])return r.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let s=0;s<r.length;s++)if(t===r[s])return r.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const s of r)s.apply(this,t.data)}}}function ti(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}ti.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};ti.prototype.reset=function(){this.attempts=0};ti.prototype.setMin=function(e){this.ms=e};ti.prototype.setMax=function(e){this.max=e};ti.prototype.setJitter=function(e){this.jitter=e};class Ku extends Ie{constructor(t,r){var s;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,cc(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((s=r.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new ti({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const i=r.parser||gk;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new nk(this.uri,this.opts);const r=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const i=Kt(r,"open",function(){s.onopen(),t&&t()}),a=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),t?t(o):this.maybeReconnectOnOpen()},l=Kt(r,"error",a);if(this._timeout!==!1){const o=this._timeout,c=this.setTimeoutFn(()=>{i(),a(new Error("timeout")),r.close()},o);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(l),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Kt(t,"ping",this.onping.bind(this)),Kt(t,"data",this.ondata.bind(this)),Kt(t,"error",this.onerror.bind(this)),Kt(t,"close",this.onclose.bind(this)),Kt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){lc(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let s=this.nsps[t];return s?this._autoConnect&&!s.active&&s.connect():(s=new Ox(this,t,r),this.nsps[t]=s),s}_destroy(t){const r=Object.keys(this.nsps);for(const s of r)if(this.nsps[s].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let s=0;s<r.length;s++)this.engine.write(r[s],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},r);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const gi={};function Fi(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=ik(e,t.path||"/socket.io"),s=r.source,i=r.id,a=r.path,l=gi[i]&&a in gi[i].nsps,o=t.forceNew||t["force new connection"]||t.multiplex===!1||l;let c;return o?c=new Ku(s,t):(gi[i]||(gi[i]=new Ku(s,t)),c=gi[i]),r.query&&!t.query&&(t.query=r.queryKey),c.socket(r.path,t)}Object.assign(Fi,{Manager:Ku,Socket:Ox,io:Fi,connect:Fi});const Mx=E.createContext(void 0),xk=({children:e})=>{const[t,r]=E.useState(null),[s,i]=E.useState(!1),[a,l]=E.useState({});E.useEffect(()=>{const h={}.VITE_WS_URL||"http://localhost:3001",v=Fi(h,{transports:["websocket","polling"]});v.on("connect",()=>{console.log("WebSocket connected"),i(!0),re.success("Connected to Magents server")}),v.on("disconnect",g=>{console.log("WebSocket disconnected:",g),i(!1),re.warning("Disconnected from Magents server")}),v.on("message",g=>{console.log("WebSocket message:",g)}),v.on("agent:event",g=>{const{data:x}=g,_=`Agent ${x.agentId} ${x.event}`;switch(x.event){case"created":re.info(_);break;case"started":re.success(_);break;case"stopped":re.info(_);break;case"error":re.error(_);break}}),v.on("project:update",g=>{console.log("Project update:",g),re.info("Project updated")}),v.on("config:change",g=>{console.log("Config change:",g),re.info("Configuration updated")}),v.on("agent:progress",g=>{console.log("Agent progress:",g);const{agentId:x,data:_}=g;x&&l(y=>({...y,[x]:_}))});const d=setInterval(()=>{v.connected&&v.emit("ping")},3e4);return v.on("pong",g=>{console.log("Pong received:",g)}),r(v),()=>{clearInterval(d),v.close()}},[]);const o=h=>{t&&t.connected&&t.emit(`subscribe:${h}`)},c=h=>{t&&t.connected&&t.emit(`unsubscribe:${h}`)};return n.jsx(Mx.Provider,{value:{socket:t,isConnected:s,subscribe:o,unsubscribe:c,agentProgress:a},children:e})},$o=()=>{const e=E.useContext(Mx);if(e===void 0)throw new Error("useWebSocket must be used within a WebSocketProvider");return e},yk={"/":"Dashboard","/agents":"Agents","/projects":"Projects","/tasks":"TaskMaster Tasks","/tasks/assign":"Assign Tasks","/analytics":"Analytics","/settings":"Settings","/terminal":"Terminal"},bk=()=>{const{isConnected:e}=$o(),t=xs(),r=yk[t.pathname]||"Dashboard";return n.jsx("header",{className:"bg-background border-b border-border",children:n.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[n.jsx("div",{className:"flex items-center flex-1",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-foreground",children:r}),n.jsx("p",{className:"text-sm text-foreground-tertiary mt-0.5",children:"Overview of your multi-agent development environment"})]})}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",placeholder:"Search...",className:"w-64 pl-10 pr-4 py-2 bg-background-tertiary border border-border rounded-lg text-sm text-foreground placeholder-foreground-tertiary focus:outline-none focus:border-brand focus:ring-1 focus:ring-brand"}),n.jsx(nf,{className:"absolute left-3 top-2.5 h-5 w-5 text-foreground-tertiary"})]}),n.jsxs("div",{className:"flex items-center space-x-2 px-3 py-1.5 bg-background-tertiary rounded-lg",children:[n.jsx("div",{className:`h-2 w-2 rounded-full ${e?"bg-status-success":"bg-status-error"}`}),n.jsx("span",{className:"text-xs text-foreground-secondary font-medium",children:e?"Connected":"Disconnected"})]}),n.jsxs("button",{className:"relative p-2 text-foreground-secondary hover:text-foreground hover:bg-background-tertiary rounded-lg transition-colors",children:[n.jsx(s2,{className:"h-5 w-5"}),n.jsx("span",{className:"absolute top-1 right-1 h-2 w-2 bg-status-error rounded-full"})]}),n.jsxs("button",{className:"flex items-center space-x-3 px-3 py-1.5 text-foreground-secondary hover:text-foreground hover:bg-background-tertiary rounded-lg transition-colors",children:[n.jsx(yC,{className:"h-6 w-6"}),n.jsx("span",{className:"text-sm font-medium",children:"Admin"})]})]})]})})},_k=({children:e})=>n.jsxs("div",{className:"flex h-screen bg-background",children:[n.jsx(CC,{}),n.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[n.jsx(bk,{}),n.jsx("main",{className:"flex-1 overflow-y-auto bg-background p-6",children:e})]})]}),wk={}.VITE_API_URL||"http://localhost:3001";class Sk{async request(t,r){const s=await fetch(`${wk}${t}`,{headers:{"Content-Type":"application/json",...r==null?void 0:r.headers},...r});if(!s.ok){const a=await s.json().catch(()=>({message:"Request failed"}));throw new Error(a.message||`HTTP ${s.status}`)}const i=await s.json();if(!i.success)throw new Error(i.error||i.message||"Request failed");return i.data}async getHealth(){return this.request("/api/health")}async getAgents(t){const r=t?"?"+new URLSearchParams(t).toString():"",s=await this.request(`/api/agents${r}`);return Array.isArray(s)?s:[]}async getAgent(t){return this.request(`/api/agents/${t}`)}async createAgent(t){console.log("Creating agent with options:",t);try{const r=await this.request("/api/agents",{method:"POST",body:JSON.stringify(t)});return console.log("Agent created successfully:",r),r}catch(r){throw console.error("Failed to create agent:",r),r instanceof Error?r.message.includes("already exists")?new Error(`Agent with ID "${t.agentId||t.branch}" already exists. Please use a different ID or branch name.`):r.message.includes("branch")?new Error(`Invalid branch name "${t.branch}". Please check that the branch exists or can be created.`):r.message.includes("network")||r.message.includes("fetch")?new Error("Network error: Please check your connection and try again."):r.message.includes("validation")?new Error("Validation error: Please check your input and try again."):r:new Error("Unknown error occurred while creating agent")}}async updateAgentStatus(t,r){return this.request(`/api/agents/${t}/status`,{method:"PUT",body:JSON.stringify({status:r})})}async startAgent(t){return this.request(`/api/agents/${t}/start`,{method:"POST"})}async stopAgent(t){return this.request(`/api/agents/${t}/stop`,{method:"POST"})}async deleteAgent(t,r=!1){return this.request(`/api/agents/${t}?removeWorktree=${r}`,{method:"DELETE"})}async assignAgentToProject(t,r){return this.request(`/api/agents/${t}/project`,{method:"PUT",body:JSON.stringify({projectId:r})})}async unassignAgentFromProject(t){return this.request(`/api/agents/${t}/project`,{method:"DELETE"})}async getAgentsByProject(t){const r=await this.request(`/api/agents/project/${t}`);return Array.isArray(r)?r:[]}async getProjects(){const t=await this.request("/api/projects");return Array.isArray(t)?t:[]}async getProject(t){return this.request(`/api/projects/${t}`)}async createProject(t){return this.request("/api/projects",{method:"POST",body:JSON.stringify(t)})}async updateProject(t,r){return this.request(`/api/projects/${t}`,{method:"PUT",body:JSON.stringify(r)})}async deleteProject(t){return this.request(`/api/projects/${t}`,{method:"DELETE"})}async addAgentToProject(t,r){return this.request(`/api/projects/${t}/agents/${r}`,{method:"POST"})}async removeAgentFromProject(t,r){return this.request(`/api/projects/${t}/agents/${r}`,{method:"DELETE"})}async getProjectStats(t){return this.request(`/api/projects/${t}/stats`)}async searchProjects(t){const r=await this.request(`/api/projects/search/${encodeURIComponent(t)}`);return Array.isArray(r)?r:[]}async getProjectsByStatus(t){const r=await this.request(`/api/projects/status/${t}`);return Array.isArray(r)?r:[]}async discoverProjects(t){const r=new URLSearchParams({path:t.path,...t.maxDepth&&{maxDepth:t.maxDepth.toString()},...t.includeHidden&&{includeHidden:"true"}});return this.request(`/api/projects/discover?${r}`)}async validateProject(t){const r=new URLSearchParams({path:t});return this.request(`/api/projects/validate?${r}`)}async getProjectMetadata(t){const r=new URLSearchParams({path:t});return this.request(`/api/projects/metadata?${r}`)}async getConfig(){return this.request("/api/config")}async updateConfig(t){return this.request("/api/config",{method:"PUT",body:JSON.stringify(t)})}async resetConfig(){return this.request("/api/config/reset",{method:"POST"})}async detectTaskMaster(t){const r=new URLSearchParams({path:t});return this.request(`/api/taskmaster/detect?${r}`)}async getTaskMasterTasks(t){const r=new URLSearchParams({path:t});return this.request(`/api/taskmaster/tasks?${r}`)}async getTaskMasterTask(t,r){const s=new URLSearchParams({path:t});return this.request(`/api/taskmaster/tasks/${r}?${s}`)}async createTaskMasterTask(t,r,s,i){return this.request("/api/taskmaster/tasks",{method:"POST",body:JSON.stringify({path:t,title:r,description:s,priority:i})})}async updateTaskMasterStatus(t,r,s){const i=new URLSearchParams({path:t});return this.request(`/api/taskmaster/tasks/${r}/status?${i}`,{method:"PUT",body:JSON.stringify({status:s})})}async assignTaskToAgent(t,r,s){return this.request(`/api/agents/${t}/assign-task`,{method:"POST",body:JSON.stringify({taskId:r,projectPath:s})})}async getTaskMasterStatistics(t){const r=new URLSearchParams({path:t});return this.request(`/api/taskmaster/statistics?${r}`)}}const _e=new Sk,Wt=[{id:"demo-agent-1",branch:"feature/dashboard",worktreePath:"/tmp/magents-demo-agent-1",tmuxSession:"magent-demo-agent-1",status:"RUNNING",createdAt:new Date(Date.now()-864e5),updatedAt:new Date(Date.now()-36e5),projectId:"demo-project"},{id:"demo-agent-2",branch:"main",worktreePath:"/tmp/magents-demo-agent-2",tmuxSession:"magent-demo-agent-2",status:"STOPPED",createdAt:new Date(Date.now()-1728e5),updatedAt:new Date(Date.now()-72e5),projectId:"demo-project"},{id:"demo-agent-3",branch:"hotfix/urgent-fix",worktreePath:"/tmp/magents-demo-agent-3",tmuxSession:"magent-demo-agent-3",status:"ERROR",createdAt:new Date(Date.now()-2592e5),updatedAt:new Date(Date.now()-18e5),projectId:"demo-project-2"}],nn=[{id:"demo-project",name:"Magents Dashboard",path:"/Users/dev/magents",agents:["demo-agent-1","demo-agent-2"],status:"ACTIVE",createdAt:new Date(Date.now()-6048e5),description:"Multi-agent development workflow manager"},{id:"demo-project-2",name:"Claude Integration",path:"/Users/dev/claude-integration",agents:["demo-agent-3"],status:"ACTIVE",createdAt:new Date(Date.now()-12096e5),description:"Claude Code integration and automation"}],Ca={DEFAULT_BASE_BRANCH:"main",TMUX_SESSION_PREFIX:"magent",WORKTREE_PREFIX:"magent",MAX_AGENTS:10,CLAUDE_CODE_PATH:"claude",CLAUDE_AUTO_ACCEPT:!0,DOCKER_ENABLED:!1,DOCKER_IMAGE:"node:18-alpine"};class Ck{delay(t=500){return new Promise(r=>setTimeout(r,t))}success(t){return t}async getHealth(){return await this.delay(100),this.success({status:"ok",timestamp:Date.now()})}async getAgents(){return await this.delay(300),this.success(Wt)}async getAgent(t){await this.delay(200);const r=Wt.find(s=>s.id===t);if(!r)throw new Error(`Agent ${t} not found`);return this.success(r)}async startAgent(t){await this.delay(1e3);const r=Wt.find(s=>s.id===t);if(!r)throw new Error(`Agent ${t} not found`);return r.status="RUNNING",r.updatedAt=new Date,this.success(r)}async stopAgent(t){await this.delay(800);const r=Wt.find(s=>s.id===t);if(!r)throw new Error(`Agent ${t} not found`);return r.status="STOPPED",r.updatedAt=new Date,this.success(r)}async deleteAgent(t){await this.delay(600);const r=Wt.findIndex(s=>s.id===t);if(r===-1)throw new Error(`Agent ${t} not found`);return Wt.splice(r,1),this.success(void 0)}async getProjects(){return await this.delay(400),this.success(nn)}async getProject(t){await this.delay(200);const r=nn.find(s=>s.id===t);if(!r)throw new Error(`Project ${t} not found`);return this.success(r)}async getConfig(){return await this.delay(150),this.success(Ca)}async createAgent(t){await this.delay(2e3);const r={id:t.agentId||`agent-${Date.now()}`,branch:t.branch,worktreePath:`/tmp/magents-${t.agentId||Date.now()}`,tmuxSession:`magent-${t.agentId||Date.now()}`,status:"STOPPED",createdAt:new Date,projectId:t.projectId};return Wt.push(r),this.success(r)}async updateAgentStatus(t,r){await this.delay(300);const s=Wt.find(i=>i.id===t);if(!s)throw new Error(`Agent ${t} not found`);return s.status=r,s.updatedAt=new Date,this.success(s)}async assignAgentToProject(t,r){await this.delay(400);const s=Wt.find(i=>i.id===t);if(!s)throw new Error(`Agent ${t} not found`);return s.projectId=r,this.success(s)}async unassignAgentFromProject(t){await this.delay(400);const r=Wt.find(s=>s.id===t);if(!r)throw new Error(`Agent ${t} not found`);return delete r.projectId,this.success(r)}async getAgentsByProject(t){return await this.delay(300),this.success(Wt.filter(r=>r.projectId===t))}async createProject(t){await this.delay(1500);const r={id:`project-${Date.now()}`,name:t.name||"New Project",path:t.path||"/tmp/new-project",agents:[],status:"ACTIVE",createdAt:new Date,description:t.description};return nn.push(r),this.success(r)}async updateProject(t,r){await this.delay(400);const s=nn.find(i=>i.id===t);if(!s)throw new Error(`Project ${t} not found`);return Object.assign(s,r),this.success(s)}async deleteProject(t){await this.delay(500);const r=nn.findIndex(s=>s.id===t);if(r===-1)throw new Error(`Project ${t} not found`);return nn.splice(r,1),this.success(void 0)}async updateConfig(t){return await this.delay(300),Object.assign(Ca,t),this.success(Ca)}async resetConfig(){return await this.delay(500),this.success(Ca)}async addAgentToProject(){return this.success({})}async removeAgentFromProject(){return this.success({})}async getProjectStats(){return this.success({})}async searchProjects(){return this.success([])}async getProjectsByStatus(){return this.success([])}async discoverProjects(){return this.success([])}async validateProject(){return this.success({})}async getProjectMetadata(){return this.success({})}async detectTaskMaster(){return this.success({})}async getTaskMasterTasks(){return this.success([])}async getTaskMasterTask(){return this.success({})}async createTaskMasterTask(){return this.success({})}async updateTaskMasterStatus(){return this.success({})}async assignTaskToAgent(){return this.success({})}async getTaskMasterStatistics(){return this.success({})}}const uf=new Ck,Bx=E.createContext(null),kk=({children:e})=>{const[t,r]=E.useState(!1);E.useEffect(()=>{(async()=>{try{const a=await fetch("/api/health",{method:"GET",timeout:2e3});r(!a.ok)}catch{r(!0),console.log(" Demo mode enabled - API not available")}})()},[]);const s=i=>{r(i),console.log(i?" Demo mode enabled manually":" Demo mode disabled - using real API")};return n.jsx(Bx.Provider,{value:{isDemoMode:t,setDemoMode:s},children:e})},hf=()=>{const e=E.useContext(Bx);if(!e)throw new Error("useDemoMode must be used within a DemoModeProvider");return e},md=({agent:e,viewMode:t,onRefresh:r})=>{const[s,i]=E.useState(!1),[a,l]=E.useState(!1),{isDemoMode:o}=hf(),c=o?uf:_e,h=async()=>{l(!0);try{await c.startAgent(e.id),re.success(`Agent ${e.id} started successfully`),r==null||r()}catch(f){re.error(`Failed to start agent ${e.id}`),console.error("Failed to start agent:",f)}finally{l(!1)}},v=async()=>{l(!0);try{await c.stopAgent(e.id),re.success(`Agent ${e.id} stopped successfully`),r==null||r()}catch(f){re.error(`Failed to stop agent ${e.id}`),console.error("Failed to stop agent:",f)}finally{l(!1)}},d=()=>{window.innerWidth>=1024?window.dispatchEvent(new CustomEvent("open-terminal",{detail:{agentId:e.id}})):window.open(`/terminal?agent=${e.id}`,"_blank")},g=async()=>{if(confirm(`Are you sure you want to delete agent ${e.id}?`)){l(!0);try{await c.deleteAgent(e.id),re.success(`Agent ${e.id} deleted successfully`),r==null||r()}catch(f){re.error(`Failed to delete agent ${e.id}`),console.error("Failed to delete agent:",f)}finally{l(!1)}}},x=f=>{switch(f){case"RUNNING":return"text-status-success bg-status-success/20";case"ERROR":return"text-status-error bg-status-error/20";default:return"text-foreground-tertiary bg-foreground-tertiary/20"}},_=f=>{switch(f){case"RUNNING":return n.jsx(Cl,{className:"w-4 h-4"});case"ERROR":return n.jsx(El,{className:"w-4 h-4"});default:return n.jsx(Ys,{className:"w-4 h-4"})}},y=f=>{if(!f)return"Never";const p=f instanceof Date?f:new Date(f),m=new Date().getTime()-p.getTime();return m<6e4?"Just now":m<36e5?`${Math.floor(m/6e4)}m ago`:m<864e5?`${Math.floor(m/36e5)}h ago`:p.toLocaleDateString()};return t==="list"?n.jsx("div",{className:"bg-background-card border border-border rounded-lg p-4 hover:bg-background-card-hover transition-colors",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`w-3 h-3 rounded-full ${e.status==="RUNNING"?"bg-status-success":e.status==="ERROR"?"bg-status-error":"bg-foreground-tertiary"}`}),n.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${x(e.status)}`,children:e.status})]}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:"font-medium text-foreground",children:e.id}),n.jsx(uo,{className:"w-4 h-4 text-foreground-secondary"}),n.jsx("span",{className:"text-sm text-foreground-secondary",children:e.branch})]}),n.jsxs("div",{className:"flex items-center gap-4 mt-1 text-xs text-foreground-tertiary",children:[n.jsxs("span",{children:["Last: ",y(e.lastActivity)]}),e.cpuUsage&&n.jsxs("span",{children:["CPU: ",e.cpuUsage.toFixed(1),"%"]}),e.memoryUsage&&n.jsxs("span",{children:["Memory: ",e.memoryUsage.toFixed(1),"%"]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[e.status==="RUNNING"?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:d,className:"p-2 text-brand hover:bg-brand/20 rounded-lg transition-colors",title:"Attach to agent",disabled:a,children:n.jsx(N2,{className:"w-4 h-4"})}),n.jsx("button",{onClick:v,className:"p-2 text-foreground-secondary hover:bg-background-tertiary rounded-lg transition-colors disabled:opacity-50",title:"Stop agent",disabled:a,children:n.jsx(fo,{className:`w-4 h-4 ${a?"animate-spin":""}`})})]}):n.jsx("button",{onClick:h,className:"p-2 text-status-success hover:bg-status-success/20 rounded-lg transition-colors disabled:opacity-50",title:"Start agent",disabled:a,children:n.jsx(qn,{className:`w-4 h-4 ${a?"animate-spin":""}`})}),n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:()=>i(!s),className:"p-2 text-foreground-secondary hover:bg-background-tertiary rounded-lg transition-colors",children:n.jsx(Sm,{className:"w-4 h-4"})}),s&&n.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-background-card border border-border rounded-lg shadow-lg py-1 z-10 min-w-[120px]",children:[n.jsx("button",{className:"w-full px-3 py-2 text-left text-sm text-foreground hover:bg-background-tertiary transition-colors",children:"View Details"}),n.jsx("button",{className:"w-full px-3 py-2 text-left text-sm text-foreground hover:bg-background-tertiary transition-colors",children:"View Logs"}),n.jsx("button",{className:"w-full px-3 py-2 text-left text-sm text-foreground hover:bg-background-tertiary transition-colors",children:"Clone Agent"}),n.jsx("hr",{className:"my-1 border-border"}),n.jsx("button",{onClick:g,className:"w-full px-3 py-2 text-left text-sm text-status-error hover:bg-status-error/20 transition-colors disabled:opacity-50",disabled:a,children:a?"Deleting...":"Delete Agent"})]})]})]})]})}):n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-4 hover:bg-background-card-hover transition-colors relative",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[_(e.status),n.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${x(e.status)}`,children:e.status})]}),n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:()=>i(!s),className:"p-1 text-foreground-secondary hover:bg-background-tertiary rounded transition-colors",children:n.jsx(Sm,{className:"w-4 h-4"})}),s&&n.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-background-card border border-border rounded-lg shadow-lg py-1 z-10 min-w-[120px]",children:[n.jsx("button",{className:"w-full px-3 py-2 text-left text-sm text-foreground hover:bg-background-tertiary transition-colors",children:"View Details"}),n.jsx("button",{className:"w-full px-3 py-2 text-left text-sm text-foreground hover:bg-background-tertiary transition-colors",children:"View Logs"}),n.jsx("button",{className:"w-full px-3 py-2 text-left text-sm text-foreground hover:bg-background-tertiary transition-colors",children:"Clone Agent"}),n.jsx("hr",{className:"my-1 border-border"}),n.jsx("button",{onClick:g,className:"w-full px-3 py-2 text-left text-sm text-status-error hover:bg-status-error/20 transition-colors disabled:opacity-50",disabled:a,children:a?"Deleting...":"Delete Agent"})]})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("h3",{className:"font-medium text-foreground mb-1 truncate",title:e.id,children:e.id}),n.jsxs("div",{className:"flex items-center gap-1 text-sm text-foreground-secondary mb-2",children:[n.jsx(uo,{className:"w-3 h-3"}),n.jsx("span",{className:"truncate",title:e.branch,children:e.branch})]}),(e.cpuUsage||e.memoryUsage)&&n.jsxs("div",{className:"flex items-center gap-3 text-xs text-foreground-tertiary",children:[e.cpuUsage&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(_x,{className:"w-3 h-3"}),n.jsxs("span",{children:[e.cpuUsage.toFixed(1),"%"]})]}),e.memoryUsage&&n.jsx("div",{className:"flex items-center gap-1",children:n.jsxs("span",{children:["RAM: ",e.memoryUsage.toFixed(1),"%"]})})]})]}),n.jsxs("div",{className:"text-xs text-foreground-tertiary mb-4",children:[n.jsxs("div",{children:["Last activity: ",y(e.lastActivity)]}),n.jsxs("div",{children:["Created: ",y(e.createdAt)]})]}),n.jsx("div",{className:"flex gap-2",children:e.status==="RUNNING"?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:d,className:"flex-1 px-3 py-2 bg-brand text-white rounded-lg hover:bg-brand-hover transition-colors text-sm font-medium disabled:opacity-50",disabled:a,children:"Attach"}),n.jsx("button",{onClick:v,className:"px-3 py-2 bg-background-tertiary text-foreground-secondary rounded-lg hover:bg-background-card-hover transition-colors text-sm disabled:opacity-50",disabled:a,children:a?"Stopping...":"Stop"})]}):n.jsxs("button",{onClick:h,className:"w-full px-3 py-2 bg-status-success text-white rounded-lg hover:bg-status-success/80 transition-colors text-sm font-medium flex items-center justify-center gap-2 disabled:opacity-50",disabled:a,children:[n.jsx(qn,{className:`w-4 h-4 ${a?"animate-spin":""}`}),a?"Starting...":"Start"]})})]})},Ek=({agents:e,onRefresh:t})=>{const r=rn(),[s,i]=E.useState(!1),[a,l]=E.useState({}),{isDemoMode:o}=hf(),c=o?uf:_e,h=e.filter(b=>b.status==="RUNNING"),v=e.filter(b=>b.status==="STOPPED"),d=(b,S)=>{l(C=>({...C,[b]:S}))},g=()=>{r("/agents/new")},x=()=>{r("/tasks/assign")},_=async()=>{d("start-all",!0);try{const b=v.map(S=>c.startAgent(S.id));await Promise.all(b),re.success(`Started ${v.length} agents`),t==null||t()}catch(b){re.error("Failed to start some agents"),console.error("Failed to start agents:",b)}finally{d("start-all",!1)}},y=async()=>{d("stop-all",!0);try{const b=h.map(S=>c.stopAgent(S.id));await Promise.all(b),re.success(`Stopped ${h.length} agents`),t==null||t()}catch(b){re.error("Failed to stop some agents"),console.error("Failed to stop agents:",b)}finally{d("stop-all",!1)}},f=async()=>{d("restart-all",!0);try{const b=h.map(C=>c.stopAgent(C.id));await Promise.all(b),await new Promise(C=>setTimeout(C,2e3));const S=e.map(C=>c.startAgent(C.id));await Promise.all(S),re.success(`Restarted ${e.length} agents`),t==null||t()}catch(b){re.error("Failed to restart agents"),console.error("Failed to restart agents:",b)}finally{d("restart-all",!1)}},p=async()=>{d("cleanup",!0);try{const b=v.map(S=>c.deleteAgent(S.id));await Promise.all(b),re.success(`Cleaned up ${v.length} stopped agents`),t==null||t()}catch(b){re.error("Failed to clean up stopped agents"),console.error("Failed to clean up agents:",b)}finally{d("cleanup",!1)}},u=()=>{r("/terminal")},m=()=>{r("/settings")};return n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Quick Actions"}),n.jsxs("button",{onClick:()=>i(!s),className:"text-sm text-brand hover:text-brand-hover",children:[s?"Hide":"Show"," Bulk Actions"]})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3",children:[n.jsxs("button",{onClick:g,className:"flex flex-col items-center gap-2 p-4 bg-brand text-white rounded-lg hover:bg-brand-hover transition-colors group",children:[n.jsx(ho,{className:"w-6 h-6"}),n.jsx("span",{className:"text-sm font-medium",children:"Create Agent"})]}),n.jsxs("button",{onClick:x,className:"flex flex-col items-center gap-2 p-4 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors group",children:[n.jsx(Uu,{className:"w-6 h-6"}),n.jsx("span",{className:"text-sm font-medium",children:"Assign Tasks"})]}),n.jsxs("button",{onClick:u,className:"flex flex-col items-center gap-2 p-4 bg-background-tertiary text-foreground rounded-lg hover:bg-background-card-hover transition-colors border border-border",children:[n.jsx(Xs,{className:"w-6 h-6"}),n.jsx("span",{className:"text-sm font-medium",children:"Terminal"})]}),n.jsxs("button",{onClick:m,className:"flex flex-col items-center gap-2 p-4 bg-background-tertiary text-foreground rounded-lg hover:bg-background-card-hover transition-colors border border-border",children:[n.jsx(kl,{className:"w-6 h-6"}),n.jsx("span",{className:"text-sm font-medium",children:"Settings"})]}),v.length>0&&n.jsxs("button",{onClick:_,disabled:a["start-all"],className:"flex flex-col items-center gap-2 p-4 bg-status-success text-white rounded-lg hover:bg-status-success/80 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(qn,{className:`w-6 h-6 ${a["start-all"]?"animate-spin":""}`}),n.jsx("span",{className:"text-sm font-medium",children:a["start-all"]?"Starting...":`Start (${v.length})`})]}),h.length>0&&n.jsxs("button",{onClick:y,disabled:a["stop-all"],className:"flex flex-col items-center gap-2 p-4 bg-foreground-tertiary text-white rounded-lg hover:bg-foreground-secondary transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(fo,{className:`w-6 h-6 ${a["stop-all"]?"animate-spin":""}`}),n.jsx("span",{className:"text-sm font-medium",children:a["stop-all"]?"Stopping...":`Stop (${h.length})`})]})]}),s&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-border",children:[n.jsx("h3",{className:"text-sm font-medium text-foreground mb-3",children:"Bulk Operations"}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[v.length>0&&n.jsxs("button",{onClick:_,className:"px-3 py-2 bg-status-success text-white rounded-lg hover:bg-status-success/80 transition-colors text-sm flex items-center gap-2",children:[n.jsx(qn,{className:"w-4 h-4"}),"Start All Stopped (",v.length,")"]}),h.length>0&&n.jsxs("button",{onClick:y,className:"px-3 py-2 bg-foreground-tertiary text-white rounded-lg hover:bg-foreground-secondary transition-colors text-sm flex items-center gap-2",children:[n.jsx(fo,{className:"w-4 h-4"}),"Stop All Running (",h.length,")"]}),n.jsxs("button",{onClick:f,disabled:a["restart-all"],className:"px-3 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors text-sm flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(iC,{className:`w-4 h-4 ${a["restart-all"]?"animate-spin":""}`}),a["restart-all"]?"Restarting...":"Restart All"]}),n.jsx("button",{onClick:p,disabled:a.cleanup||v.length===0,className:"px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:a.cleanup?"Cleaning...":"Clean Up Stopped"})]})]}),n.jsx("div",{className:"mt-4 pt-4 border-t border-border",children:n.jsxs("div",{className:"text-xs text-foreground-tertiary space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{children:" Use keyboard shortcuts for faster access"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("kbd",{className:"px-2 py-1 bg-background-tertiary rounded border border-border text-foreground-secondary",children:"Ctrl+?"}),n.jsx("span",{children:"Show all shortcuts"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("kbd",{className:"px-1.5 py-0.5 bg-background-tertiary rounded border border-border text-foreground-secondary",children:"Ctrl+N"}),n.jsx("span",{children:"Create Agent"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("kbd",{className:"px-1.5 py-0.5 bg-background-tertiary rounded border border-border text-foreground-secondary",children:"Ctrl+T"}),n.jsx("span",{children:"Open Terminal"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("kbd",{className:"px-1.5 py-0.5 bg-background-tertiary rounded border border-border text-foreground-secondary",children:"Ctrl+V"}),n.jsx("span",{children:"Toggle View"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("kbd",{className:"px-1.5 py-0.5 bg-background-tertiary rounded border border-border text-foreground-secondary",children:"Ctrl+R"}),n.jsx("span",{children:"Refresh"})]})]})]})})]})},ka=({title:e,children:t,isExpanded:r,onToggle:s,className:i="",headerActions:a})=>n.jsxs("div",{className:`bg-background-card border border-border rounded-lg ${i}`,children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[n.jsxs("button",{onClick:s,className:"flex items-center gap-2 text-left flex-1 group",children:[n.jsx("h2",{className:"text-lg font-semibold text-foreground group-hover:text-brand transition-colors",children:e}),r?n.jsx(m2,{className:"w-5 h-5 text-foreground-secondary group-hover:text-brand transition-colors"}):n.jsx(bx,{className:"w-5 h-5 text-foreground-secondary group-hover:text-brand transition-colors"})]}),a&&n.jsx("div",{className:"flex items-center gap-2",children:a})]}),r&&n.jsx("div",{className:"p-4",children:t})]}),Fx=(e,t={})=>{const{onEvent:r,onError:s,onOpen:i,onClose:a,reconnectInterval:l=3e3,maxReconnectAttempts:o=5}=t,[c,h]=E.useState(!1),[v,d]=E.useState(!1),[g,x]=E.useState(null),[_,y]=E.useState([]),f=E.useRef(null),p=E.useRef(0),u=E.useRef(null),m=E.useRef(t);m.current=t;const b=()=>{var k;if(((k=f.current)==null?void 0:k.readyState)!==EventSource.OPEN){d(!0),x(null);try{const w=new EventSource(e);f.current=w,w.onopen=()=>{var j,D;h(!0),d(!1),x(null),p.current=0,(D=(j=m.current).onOpen)==null||D.call(j)},w.onmessage=j=>{var D,I;try{const T={type:"message",data:JSON.parse(j.data),timestamp:new Date().toISOString()};y(A=>[...A.slice(-99),T]),(I=(D=m.current).onEvent)==null||I.call(D,T)}catch(T){console.error("Failed to parse SSE event data:",T)}},w.onerror=j=>{var I,T;h(!1),d(!1),x("SSE connection error"),(T=(I=m.current).onError)==null||T.call(I,j),p.current<o&&(p.current++,u.current=setTimeout(()=>{b()},l))},w.addEventListener("agent-status-changed",j=>{var I,T;const D={type:"agent-status-changed",data:JSON.parse(j.data),timestamp:new Date().toISOString()};y(A=>[...A.slice(-99),D]),(T=(I=m.current).onEvent)==null||T.call(I,D)}),w.addEventListener("agent-created",j=>{var I,T;const D={type:"agent-created",data:JSON.parse(j.data),timestamp:new Date().toISOString()};y(A=>[...A.slice(-99),D]),(T=(I=m.current).onEvent)==null||T.call(I,D)}),w.addEventListener("agent-deleted",j=>{var I,T;const D={type:"agent-deleted",data:JSON.parse(j.data),timestamp:new Date().toISOString()};y(A=>[...A.slice(-99),D]),(T=(I=m.current).onEvent)==null||T.call(I,D)}),w.addEventListener("system-metrics",j=>{var I,T;const D={type:"system-metrics",data:JSON.parse(j.data),timestamp:new Date().toISOString()};y(A=>[...A.slice(-99),D]),(T=(I=m.current).onEvent)==null||T.call(I,D)})}catch(w){d(!1),x(w.message)}}},S=()=>{var k,w;u.current&&(clearTimeout(u.current),u.current=null),f.current&&(f.current.close(),f.current=null),h(!1),d(!1),p.current=0,(w=(k=m.current).onClose)==null||w.call(k)},C=()=>{S(),setTimeout(b,100)};return E.useEffect(()=>(b(),()=>{S()}),[e]),E.useEffect(()=>()=>{S()},[]),{isConnected:c,isConnecting:v,error:g,events:_,reconnect:C,disconnect:S}},jk=({className:e=""})=>{const[t,r]=E.useState(null),[s,i]=E.useState([]),{isConnected:a,error:l}=Fx("/api/metrics",{onEvent:x=>{if(x.type==="system-metrics"){const _=x.data;r(_),i(y=>[...y.slice(-29),_])}}}),o=x=>{const _=Math.floor(x/3600),y=Math.floor(x%3600/60);return`${_}h ${y}m`},c=x=>{const _=["B","KB","MB","GB"];let y=x,f=0;for(;y>=1024&&f<_.length-1;)y/=1024,f++;return`${y.toFixed(1)} ${_[f]}`},h=x=>{if(x.length<2)return"stable";const _=x.slice(-3),y=_.reduce((u,m)=>u+m,0)/_.length,f=x.slice(-6,-3),p=f.reduce((u,m)=>u+m,0)/f.length;return y>p*1.1?"increasing":y<p*.9?"decreasing":"stable"},v=x=>{switch(x){case"increasing":return"text-status-error";case"decreasing":return"text-status-success";default:return"text-foreground-secondary"}},d=s.map(x=>x.cpu),g=s.map(x=>x.memory);return n.jsxs("div",{className:`grid grid-cols-2 lg:grid-cols-4 gap-4 ${e}`,children:[n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("div",{className:"p-2 rounded-lg bg-blue-500/20",children:n.jsx(_x,{className:"w-4 h-4 text-blue-500"})}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${a?"bg-status-success":"bg-status-error"}`}),n.jsx("span",{className:"text-xs text-foreground-tertiary",children:a?"Live":"Offline"})]})]}),n.jsxs("div",{className:"mb-2",children:[n.jsx("div",{className:"text-lg font-semibold text-foreground",children:t?`${t.cpu.toFixed(1)}%`:"--"}),n.jsx("div",{className:"text-xs text-foreground-secondary",children:"CPU Usage"})]}),s.length>1&&n.jsxs("div",{className:`text-xs ${v(h(d))}`,children:["Trend: ",h(d)]})]}),n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("div",{className:"p-2 rounded-lg bg-purple-500/20",children:n.jsx(sf,{className:"w-4 h-4 text-purple-500"})}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${a?"bg-status-success":"bg-status-error"}`}),n.jsx("span",{className:"text-xs text-foreground-tertiary",children:a?"Live":"Offline"})]})]}),n.jsxs("div",{className:"mb-2",children:[n.jsx("div",{className:"text-lg font-semibold text-foreground",children:t?`${t.memory.toFixed(1)}%`:"--"}),n.jsx("div",{className:"text-xs text-foreground-secondary",children:"Memory Usage"})]}),s.length>1&&n.jsxs("div",{className:`text-xs ${v(h(g))}`,children:["Trend: ",h(g)]})]}),n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("div",{className:"p-2 rounded-lg bg-green-500/20",children:n.jsx(dC,{className:"w-4 h-4 text-green-500"})}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${a?"bg-status-success":"bg-status-error"}`}),n.jsx("span",{className:"text-xs text-foreground-tertiary",children:a?"Live":"Offline"})]})]}),n.jsxs("div",{className:"mb-1",children:[n.jsxs("div",{className:"text-sm font-medium text-foreground",children:[" ",t?c(t.networkIn):"--"]}),n.jsxs("div",{className:"text-sm font-medium text-foreground",children:[" ",t?c(t.networkOut):"--"]})]}),n.jsx("div",{className:"text-xs text-foreground-secondary",children:"Network I/O"})]}),n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("div",{className:"p-2 rounded-lg bg-yellow-500/20",children:n.jsx(Ys,{className:"w-4 h-4 text-yellow-500"})}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${a?"bg-status-success":"bg-status-error"}`}),n.jsx("span",{className:"text-xs text-foreground-tertiary",children:a?"Live":"Offline"})]})]}),n.jsxs("div",{className:"mb-2",children:[n.jsx("div",{className:"text-lg font-semibold text-foreground",children:t?o(t.uptime):"--"}),n.jsx("div",{className:"text-xs text-foreground-secondary",children:"System Uptime"})]}),t&&n.jsxs("div",{className:"text-xs text-foreground-tertiary",children:["Since ",new Date(Date.now()-t.uptime*1e3).toLocaleDateString()]})]}),l&&n.jsx("div",{className:"col-span-full bg-status-error/20 border border-status-error rounded-lg p-3",children:n.jsxs("div",{className:"text-sm text-status-error",children:["Connection Error: ",l]})})]})},Nk=({agents:e,projects:t,isLoading:r})=>{const s=e.filter(c=>c.status==="RUNNING");e.filter(c=>c.status==="STOPPED");const i=e.filter(c=>c.status==="ERROR");s.length>0&&s.reduce((c,h)=>c+(h.cpuUsage||0),0)/s.length,s.length>0&&s.reduce((c,h)=>c+(h.memoryUsage||0),0)/s.length;const a=e.length>0?Math.round((e.length-i.length)/e.length*100):100,l=c=>c>=90?"text-status-success":c>=70?"text-yellow-500":"text-status-error",o=c=>c>=90?n.jsx(Cl,{className:"w-6 h-6"}):c>=70?n.jsx(El,{className:"w-6 h-6"}):n.jsx(El,{className:"w-6 h-6"});return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-background-tertiary rounded-lg p-4 border border-border",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("div",{className:"p-2 rounded-lg bg-status-success/20",children:n.jsx(ds,{className:"h-5 w-5 text-status-success"})}),n.jsx("div",{className:`w-2 h-2 rounded-full ${s.length>0?"bg-status-success":"bg-foreground-tertiary"}`})]}),n.jsx("p",{className:"text-sm font-medium text-foreground-secondary mb-1",children:"Active Agents"}),n.jsx("p",{className:"text-2xl font-bold text-foreground",children:r?"...":s.length}),n.jsxs("p",{className:"text-xs text-foreground-tertiary mt-1",children:[e.length," total"]})]}),n.jsxs("div",{className:"bg-background-tertiary rounded-lg p-4 border border-border",children:[n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsx("div",{className:"p-2 rounded-lg bg-brand/20",children:n.jsx(Bi,{className:"h-5 w-5 text-brand"})})}),n.jsx("p",{className:"text-sm font-medium text-foreground-secondary mb-1",children:"Projects"}),n.jsx("p",{className:"text-2xl font-bold text-foreground",children:r?"...":t.length}),n.jsx("p",{className:"text-xs text-foreground-tertiary mt-1",children:"Active workspaces"})]}),n.jsxs("div",{className:"bg-background-tertiary rounded-lg p-4 border border-border",children:[n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsx("div",{className:`p-2 rounded-lg ${l(a)}/20`,children:o(a)})}),n.jsx("p",{className:"text-sm font-medium text-foreground-secondary mb-1",children:"System Health"}),n.jsx("p",{className:`text-2xl font-bold ${l(a)}`,children:r?"...":`${a}%`}),n.jsxs("p",{className:"text-xs text-foreground-tertiary mt-1",children:[i.length," error",i.length!==1?"s":""]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-foreground-secondary mb-3",children:"Live System Metrics"}),n.jsx(jk,{})]})]})};var $x={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(globalThis,()=>(()=>{var r={4567:function(l,o,c){var h=this&&this.__decorate||function(u,m,b,S){var C,k=arguments.length,w=k<3?m:S===null?S=Object.getOwnPropertyDescriptor(m,b):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(u,m,b,S);else for(var j=u.length-1;j>=0;j--)(C=u[j])&&(w=(k<3?C(w):k>3?C(m,b,w):C(m,b))||w);return k>3&&w&&Object.defineProperty(m,b,w),w},v=this&&this.__param||function(u,m){return function(b,S){m(b,S,u)}};Object.defineProperty(o,"__esModule",{value:!0}),o.AccessibilityManager=void 0;const d=c(9042),g=c(9924),x=c(844),_=c(4725),y=c(2585),f=c(3656);let p=o.AccessibilityManager=class extends x.Disposable{constructor(u,m,b,S){super(),this._terminal=u,this._coreBrowserService=b,this._renderService=S,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let C=0;C<this._terminal.rows;C++)this._rowElements[C]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[C]);if(this._topBoundaryFocusListener=C=>this._handleBoundaryFocus(C,0),this._bottomBoundaryFocusListener=C=>this._handleBoundaryFocus(C,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new g.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(C=>this._handleResize(C.rows))),this.register(this._terminal.onRender(C=>this._refreshRows(C.start,C.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(C=>this._handleChar(C))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(C=>this._handleTab(C))),this.register(this._terminal.onKey(C=>this._handleKey(C.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,f.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,x.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(u){for(let m=0;m<u;m++)this._handleChar(" ")}_handleChar(u){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==u&&(this._charsToAnnounce+=u):this._charsToAnnounce+=u,u===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=d.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(u){this._clearLiveRegion(),/\p{Control}/u.test(u)||this._charsToConsume.push(u)}_refreshRows(u,m){this._liveRegionDebouncer.refresh(u,m,this._terminal.rows)}_renderRows(u,m){const b=this._terminal.buffer,S=b.lines.length.toString();for(let C=u;C<=m;C++){const k=b.lines.get(b.ydisp+C),w=[],j=(k==null?void 0:k.translateToString(!0,void 0,void 0,w))||"",D=(b.ydisp+C+1).toString(),I=this._rowElements[C];I&&(j.length===0?(I.innerText="",this._rowColumns.set(I,[0,1])):(I.textContent=j,this._rowColumns.set(I,w)),I.setAttribute("aria-posinset",D),I.setAttribute("aria-setsize",S))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(u,m){const b=u.target,S=this._rowElements[m===0?1:this._rowElements.length-2];if(b.getAttribute("aria-posinset")===(m===0?"1":`${this._terminal.buffer.lines.length}`)||u.relatedTarget!==S)return;let C,k;if(m===0?(C=b,k=this._rowElements.pop(),this._rowContainer.removeChild(k)):(C=this._rowElements.shift(),k=b,this._rowContainer.removeChild(C)),C.removeEventListener("focus",this._topBoundaryFocusListener),k.removeEventListener("focus",this._bottomBoundaryFocusListener),m===0){const w=this._createAccessibilityTreeNode();this._rowElements.unshift(w),this._rowContainer.insertAdjacentElement("afterbegin",w)}else{const w=this._createAccessibilityTreeNode();this._rowElements.push(w),this._rowContainer.appendChild(w)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(m===0?-1:1),this._rowElements[m===0?1:this._rowElements.length-2].focus(),u.preventDefault(),u.stopImmediatePropagation()}_handleSelectionChange(){var j;if(this._rowElements.length===0)return;const u=document.getSelection();if(!u)return;if(u.isCollapsed)return void(this._rowContainer.contains(u.anchorNode)&&this._terminal.clearSelection());if(!u.anchorNode||!u.focusNode)return void console.error("anchorNode and/or focusNode are null");let m={node:u.anchorNode,offset:u.anchorOffset},b={node:u.focusNode,offset:u.focusOffset};if((m.node.compareDocumentPosition(b.node)&Node.DOCUMENT_POSITION_PRECEDING||m.node===b.node&&m.offset>b.offset)&&([m,b]=[b,m]),m.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(m={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(m.node))return;const S=this._rowElements.slice(-1)[0];if(b.node.compareDocumentPosition(S)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(b={node:S,offset:((j=S.textContent)==null?void 0:j.length)??0}),!this._rowContainer.contains(b.node))return;const C=({node:D,offset:I})=>{const T=D instanceof Text?D.parentNode:D;let A=parseInt(T==null?void 0:T.getAttribute("aria-posinset"),10)-1;if(isNaN(A))return console.warn("row is invalid. Race condition?"),null;const O=this._rowColumns.get(T);if(!O)return console.warn("columns is null. Race condition?"),null;let R=I<O.length?O[I]:O.slice(-1)[0]+1;return R>=this._terminal.cols&&(++A,R=0),{row:A,column:R}},k=C(m),w=C(b);if(k&&w){if(k.row>w.row||k.row===w.row&&k.column>=w.column)throw new Error("invalid range");this._terminal.select(k.column,k.row,(w.row-k.row)*this._terminal.cols-k.column+w.column)}}_handleResize(u){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let m=this._rowContainer.children.length;m<this._terminal.rows;m++)this._rowElements[m]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[m]);for(;this._rowElements.length>u;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const u=this._coreBrowserService.mainDocument.createElement("div");return u.setAttribute("role","listitem"),u.tabIndex=-1,this._refreshRowDimensions(u),u}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let u=0;u<this._terminal.rows;u++)this._refreshRowDimensions(this._rowElements[u])}}_refreshRowDimensions(u){u.style.height=`${this._renderService.dimensions.css.cell.height}px`}};o.AccessibilityManager=p=h([v(1,y.IInstantiationService),v(2,_.ICoreBrowserService),v(3,_.IRenderService)],p)},3614:(l,o)=>{function c(g){return g.replace(/\r?\n/g,"\r")}function h(g,x){return x?"\x1B[200~"+g+"\x1B[201~":g}function v(g,x,_,y){g=h(g=c(g),_.decPrivateModes.bracketedPasteMode&&y.rawOptions.ignoreBracketedPasteMode!==!0),_.triggerDataEvent(g,!0),x.value=""}function d(g,x,_){const y=_.getBoundingClientRect(),f=g.clientX-y.left-10,p=g.clientY-y.top-10;x.style.width="20px",x.style.height="20px",x.style.left=`${f}px`,x.style.top=`${p}px`,x.style.zIndex="1000",x.focus()}Object.defineProperty(o,"__esModule",{value:!0}),o.rightClickHandler=o.moveTextAreaUnderMouseCursor=o.paste=o.handlePasteEvent=o.copyHandler=o.bracketTextForPaste=o.prepareTextForTerminal=void 0,o.prepareTextForTerminal=c,o.bracketTextForPaste=h,o.copyHandler=function(g,x){g.clipboardData&&g.clipboardData.setData("text/plain",x.selectionText),g.preventDefault()},o.handlePasteEvent=function(g,x,_,y){g.stopPropagation(),g.clipboardData&&v(g.clipboardData.getData("text/plain"),x,_,y)},o.paste=v,o.moveTextAreaUnderMouseCursor=d,o.rightClickHandler=function(g,x,_,y,f){d(g,x,_),f&&y.rightClickSelect(g),x.value=y.selectionText,x.select()}},7239:(l,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ColorContrastCache=void 0;const h=c(1505);o.ColorContrastCache=class{constructor(){this._color=new h.TwoKeyMap,this._css=new h.TwoKeyMap}setCss(v,d,g){this._css.set(v,d,g)}getCss(v,d){return this._css.get(v,d)}setColor(v,d,g){this._color.set(v,d,g)}getColor(v,d){return this._color.get(v,d)}clear(){this._color.clear(),this._css.clear()}}},3656:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.addDisposableDomListener=void 0,o.addDisposableDomListener=function(c,h,v,d){c.addEventListener(h,v,d);let g=!1;return{dispose:()=>{g||(g=!0,c.removeEventListener(h,v,d))}}}},3551:function(l,o,c){var h=this&&this.__decorate||function(p,u,m,b){var S,C=arguments.length,k=C<3?u:b===null?b=Object.getOwnPropertyDescriptor(u,m):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(p,u,m,b);else for(var w=p.length-1;w>=0;w--)(S=p[w])&&(k=(C<3?S(k):C>3?S(u,m,k):S(u,m))||k);return C>3&&k&&Object.defineProperty(u,m,k),k},v=this&&this.__param||function(p,u){return function(m,b){u(m,b,p)}};Object.defineProperty(o,"__esModule",{value:!0}),o.Linkifier=void 0;const d=c(3656),g=c(8460),x=c(844),_=c(2585),y=c(4725);let f=o.Linkifier=class extends x.Disposable{get currentLink(){return this._currentLink}constructor(p,u,m,b,S){super(),this._element=p,this._mouseService=u,this._renderService=m,this._bufferService=b,this._linkProviderService=S,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new g.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new g.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,x.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,x.toDisposable)(()=>{var C;this._lastMouseEvent=void 0,(C=this._activeProviderReplies)==null||C.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,d.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,d.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(p){this._lastMouseEvent=p;const u=this._positionFromMouseEvent(p,this._element,this._mouseService);if(!u)return;this._isMouseOut=!1;const m=p.composedPath();for(let b=0;b<m.length;b++){const S=m[b];if(S.classList.contains("xterm"))break;if(S.classList.contains("xterm-hover"))return}this._lastBufferCell&&u.x===this._lastBufferCell.x&&u.y===this._lastBufferCell.y||(this._handleHover(u),this._lastBufferCell=u)}_handleHover(p){if(this._activeLine!==p.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(p,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,p)||(this._clearCurrentLink(),this._askForLink(p,!0))}_askForLink(p,u){var b,S;this._activeProviderReplies&&u||((b=this._activeProviderReplies)==null||b.forEach(C=>{C==null||C.forEach(k=>{k.link.dispose&&k.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=p.y);let m=!1;for(const[C,k]of this._linkProviderService.linkProviders.entries())u?(S=this._activeProviderReplies)!=null&&S.get(C)&&(m=this._checkLinkProviderResult(C,p,m)):k.provideLinks(p.y,w=>{var D,I;if(this._isMouseOut)return;const j=w==null?void 0:w.map(T=>({link:T}));(D=this._activeProviderReplies)==null||D.set(C,j),m=this._checkLinkProviderResult(C,p,m),((I=this._activeProviderReplies)==null?void 0:I.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(p.y,this._activeProviderReplies)})}_removeIntersectingLinks(p,u){const m=new Set;for(let b=0;b<u.size;b++){const S=u.get(b);if(S)for(let C=0;C<S.length;C++){const k=S[C],w=k.link.range.start.y<p?0:k.link.range.start.x,j=k.link.range.end.y>p?this._bufferService.cols:k.link.range.end.x;for(let D=w;D<=j;D++){if(m.has(D)){S.splice(C--,1);break}m.add(D)}}}}_checkLinkProviderResult(p,u,m){var C;if(!this._activeProviderReplies)return m;const b=this._activeProviderReplies.get(p);let S=!1;for(let k=0;k<p;k++)this._activeProviderReplies.has(k)&&!this._activeProviderReplies.get(k)||(S=!0);if(!S&&b){const k=b.find(w=>this._linkAtPosition(w.link,u));k&&(m=!0,this._handleNewLink(k))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!m)for(let k=0;k<this._activeProviderReplies.size;k++){const w=(C=this._activeProviderReplies.get(k))==null?void 0:C.find(j=>this._linkAtPosition(j.link,u));if(w){m=!0,this._handleNewLink(w);break}}return m}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(p){if(!this._currentLink)return;const u=this._positionFromMouseEvent(p,this._element,this._mouseService);u&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,u)&&this._currentLink.link.activate(p,this._currentLink.link.text)}_clearCurrentLink(p,u){this._currentLink&&this._lastMouseEvent&&(!p||!u||this._currentLink.link.range.start.y>=p&&this._currentLink.link.range.end.y<=u)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,x.disposeArray)(this._linkCacheDisposables))}_handleNewLink(p){if(!this._lastMouseEvent)return;const u=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);u&&this._linkAtPosition(p.link,u)&&(this._currentLink=p,this._currentLink.state={decorations:{underline:p.link.decorations===void 0||p.link.decorations.underline,pointerCursor:p.link.decorations===void 0||p.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,p.link,this._lastMouseEvent),p.link.decorations={},Object.defineProperties(p.link.decorations,{pointerCursor:{get:()=>{var m,b;return(b=(m=this._currentLink)==null?void 0:m.state)==null?void 0:b.decorations.pointerCursor},set:m=>{var b;(b=this._currentLink)!=null&&b.state&&this._currentLink.state.decorations.pointerCursor!==m&&(this._currentLink.state.decorations.pointerCursor=m,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",m))}},underline:{get:()=>{var m,b;return(b=(m=this._currentLink)==null?void 0:m.state)==null?void 0:b.decorations.underline},set:m=>{var b,S,C;(b=this._currentLink)!=null&&b.state&&((C=(S=this._currentLink)==null?void 0:S.state)==null?void 0:C.decorations.underline)!==m&&(this._currentLink.state.decorations.underline=m,this._currentLink.state.isHovered&&this._fireUnderlineEvent(p.link,m))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(m=>{if(!this._currentLink)return;const b=m.start===0?0:m.start+1+this._bufferService.buffer.ydisp,S=this._bufferService.buffer.ydisp+1+m.end;if(this._currentLink.link.range.start.y>=b&&this._currentLink.link.range.end.y<=S&&(this._clearCurrentLink(b,S),this._lastMouseEvent)){const C=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);C&&this._askForLink(C,!1)}})))}_linkHover(p,u,m){var b;(b=this._currentLink)!=null&&b.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(u,!0),this._currentLink.state.decorations.pointerCursor&&p.classList.add("xterm-cursor-pointer")),u.hover&&u.hover(m,u.text)}_fireUnderlineEvent(p,u){const m=p.range,b=this._bufferService.buffer.ydisp,S=this._createLinkUnderlineEvent(m.start.x-1,m.start.y-b-1,m.end.x,m.end.y-b-1,void 0);(u?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(S)}_linkLeave(p,u,m){var b;(b=this._currentLink)!=null&&b.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(u,!1),this._currentLink.state.decorations.pointerCursor&&p.classList.remove("xterm-cursor-pointer")),u.leave&&u.leave(m,u.text)}_linkAtPosition(p,u){const m=p.range.start.y*this._bufferService.cols+p.range.start.x,b=p.range.end.y*this._bufferService.cols+p.range.end.x,S=u.y*this._bufferService.cols+u.x;return m<=S&&S<=b}_positionFromMouseEvent(p,u,m){const b=m.getCoords(p,u,this._bufferService.cols,this._bufferService.rows);if(b)return{x:b[0],y:b[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(p,u,m,b,S){return{x1:p,y1:u,x2:m,y2:b,cols:this._bufferService.cols,fg:S}}};o.Linkifier=f=h([v(1,y.IMouseService),v(2,y.IRenderService),v(3,_.IBufferService),v(4,y.ILinkProviderService)],f)},9042:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.tooMuchOutput=o.promptLabel=void 0,o.promptLabel="Terminal input",o.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(l,o,c){var h=this&&this.__decorate||function(y,f,p,u){var m,b=arguments.length,S=b<3?f:u===null?u=Object.getOwnPropertyDescriptor(f,p):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(y,f,p,u);else for(var C=y.length-1;C>=0;C--)(m=y[C])&&(S=(b<3?m(S):b>3?m(f,p,S):m(f,p))||S);return b>3&&S&&Object.defineProperty(f,p,S),S},v=this&&this.__param||function(y,f){return function(p,u){f(p,u,y)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OscLinkProvider=void 0;const d=c(511),g=c(2585);let x=o.OscLinkProvider=class{constructor(y,f,p){this._bufferService=y,this._optionsService=f,this._oscLinkService=p}provideLinks(y,f){var j;const p=this._bufferService.buffer.lines.get(y-1);if(!p)return void f(void 0);const u=[],m=this._optionsService.rawOptions.linkHandler,b=new d.CellData,S=p.getTrimmedLength();let C=-1,k=-1,w=!1;for(let D=0;D<S;D++)if(k!==-1||p.hasContent(D)){if(p.loadCell(D,b),b.hasExtendedAttrs()&&b.extended.urlId){if(k===-1){k=D,C=b.extended.urlId;continue}w=b.extended.urlId!==C}else k!==-1&&(w=!0);if(w||k!==-1&&D===S-1){const I=(j=this._oscLinkService.getLinkData(C))==null?void 0:j.uri;if(I){const T={start:{x:k+1,y},end:{x:D+(w||D!==S-1?0:1),y}};let A=!1;if(!(m!=null&&m.allowNonHttpProtocols))try{const O=new URL(I);["http:","https:"].includes(O.protocol)||(A=!0)}catch{A=!0}A||u.push({text:I,range:T,activate:(O,R)=>m?m.activate(O,R,T):_(0,R),hover:(O,R)=>{var B;return(B=m==null?void 0:m.hover)==null?void 0:B.call(m,O,R,T)},leave:(O,R)=>{var B;return(B=m==null?void 0:m.leave)==null?void 0:B.call(m,O,R,T)}})}w=!1,b.hasExtendedAttrs()&&b.extended.urlId?(k=D,C=b.extended.urlId):(k=-1,C=-1)}}f(u)}};function _(y,f){if(confirm(`Do you want to navigate to ${f}?

WARNING: This link could potentially be dangerous`)){const p=window.open();if(p){try{p.opener=null}catch{}p.location.href=f}else console.warn("Opening link blocked as opener could not be cleared")}}o.OscLinkProvider=x=h([v(0,g.IBufferService),v(1,g.IOptionsService),v(2,g.IOscLinkService)],x)},6193:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.RenderDebouncer=void 0,o.RenderDebouncer=class{constructor(c,h){this._renderCallback=c,this._coreBrowserService=h,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(c){return this._refreshCallbacks.push(c),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(c,h,v){this._rowCount=v,c=c!==void 0?c:0,h=h!==void 0?h:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,c):c,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,h):h,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const c=Math.max(this._rowStart,0),h=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(c,h),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const c of this._refreshCallbacks)c(0);this._refreshCallbacks=[]}}},3236:(l,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Terminal=void 0;const h=c(3614),v=c(3656),d=c(3551),g=c(9042),x=c(3730),_=c(1680),y=c(3107),f=c(5744),p=c(2950),u=c(1296),m=c(428),b=c(4269),S=c(5114),C=c(8934),k=c(3230),w=c(9312),j=c(4725),D=c(6731),I=c(8055),T=c(8969),A=c(8460),O=c(844),R=c(6114),B=c(8437),U=c(2584),$=c(7399),N=c(5941),P=c(9074),M=c(2585),F=c(5435),V=c(4567),K=c(779);class J extends T.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(W={}){super(W),this.browser=R,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new O.MutableDisposable),this._onCursorMove=this.register(new A.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new A.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new A.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new A.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new A.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new A.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new A.EventEmitter),this._onBlur=this.register(new A.EventEmitter),this._onA11yCharEmitter=this.register(new A.EventEmitter),this._onA11yTabEmitter=this.register(new A.EventEmitter),this._onWillOpen=this.register(new A.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(P.DecorationService),this._instantiationService.setService(M.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(K.LinkProviderService),this._instantiationService.setService(j.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(x.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((L,q)=>this.refresh(L,q))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(L=>this._reportWindowsOptions(L))),this.register(this._inputHandler.onColor(L=>this._handleColorEvent(L))),this.register((0,A.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,A.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(L=>this._afterResize(L.cols,L.rows))),this.register((0,O.toDisposable)(()=>{var L,q;this._customKeyEventHandler=void 0,(q=(L=this.element)==null?void 0:L.parentNode)==null||q.removeChild(this.element)}))}_handleColorEvent(W){if(this._themeService)for(const L of W){let q,z="";switch(L.index){case 256:q="foreground",z="10";break;case 257:q="background",z="11";break;case 258:q="cursor",z="12";break;default:q="ansi",z="4;"+L.index}switch(L.type){case 0:const X=I.color.toColorRGB(q==="ansi"?this._themeService.colors.ansi[L.index]:this._themeService.colors[q]);this.coreService.triggerDataEvent(`${U.C0.ESC}]${z};${(0,N.toRgbString)(X)}${U.C1_ESCAPED.ST}`);break;case 1:if(q==="ansi")this._themeService.modifyColors(Y=>Y.ansi[L.index]=I.channels.toColor(...L.color));else{const Y=q;this._themeService.modifyColors(ce=>ce[Y]=I.channels.toColor(...L.color))}break;case 2:this._themeService.restoreColor(L.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(W){W?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(V.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(W){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(U.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var W;return(W=this.textarea)==null?void 0:W.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(U.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const W=this.buffer.ybase+this.buffer.y,L=this.buffer.lines.get(W);if(!L)return;const q=Math.min(this.buffer.x,this.cols-1),z=this._renderService.dimensions.css.cell.height,X=L.getWidth(q),Y=this._renderService.dimensions.css.cell.width*X,ce=this.buffer.y*this._renderService.dimensions.css.cell.height,xe=q*this._renderService.dimensions.css.cell.width;this.textarea.style.left=xe+"px",this.textarea.style.top=ce+"px",this.textarea.style.width=Y+"px",this.textarea.style.height=z+"px",this.textarea.style.lineHeight=z+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,v.addDisposableDomListener)(this.element,"copy",L=>{this.hasSelection()&&(0,h.copyHandler)(L,this._selectionService)}));const W=L=>(0,h.handlePasteEvent)(L,this.textarea,this.coreService,this.optionsService);this.register((0,v.addDisposableDomListener)(this.textarea,"paste",W)),this.register((0,v.addDisposableDomListener)(this.element,"paste",W)),R.isFirefox?this.register((0,v.addDisposableDomListener)(this.element,"mousedown",L=>{L.button===2&&(0,h.rightClickHandler)(L,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,v.addDisposableDomListener)(this.element,"contextmenu",L=>{(0,h.rightClickHandler)(L,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),R.isLinux&&this.register((0,v.addDisposableDomListener)(this.element,"auxclick",L=>{L.button===1&&(0,h.moveTextAreaUnderMouseCursor)(L,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,v.addDisposableDomListener)(this.textarea,"keyup",W=>this._keyUp(W),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"keydown",W=>this._keyDown(W),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"keypress",W=>this._keyPress(W),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionupdate",W=>this._compositionHelper.compositionupdate(W))),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,v.addDisposableDomListener)(this.textarea,"input",W=>this._inputEvent(W),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(W){var q;if(!W)throw new Error("Terminal requires a parent element.");if(W.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((q=this.element)==null?void 0:q.ownerDocument.defaultView)&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=W.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),W.appendChild(this.element);const L=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),L.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,v.addDisposableDomListener)(this.screenElement,"mousemove",z=>this.updateCursorStyle(z))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),L.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",g.promptLabel),R.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(S.CoreBrowserService,this.textarea,W.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(j.ICoreBrowserService,this._coreBrowserService),this.register((0,v.addDisposableDomListener)(this.textarea,"focus",z=>this._handleTextAreaFocus(z))),this.register((0,v.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(m.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(j.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(D.ThemeService),this._instantiationService.setService(j.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(b.CharacterJoinerService),this._instantiationService.setService(j.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(k.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(j.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(z=>this._onRender.fire(z))),this.onResize(z=>this._renderService.resize(z.cols,z.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(p.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(C.MouseService),this._instantiationService.setService(j.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(d.Linkifier,this.screenElement)),this.element.appendChild(L);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(_.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(z=>this.scrollLines(z.amount,z.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(w.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(j.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(z=>this.scrollLines(z.amount,z.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(z=>this._renderService.handleSelectionChanged(z.start,z.end,z.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(z=>{this.textarea.value=z,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(z=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,v.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(y.BufferDecorationRenderer,this.screenElement)),this.register((0,v.addDisposableDomListener)(this.element,"mousedown",z=>this._selectionService.handleMouseDown(z))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(V.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",z=>this._handleScreenReaderModeOptionChange(z))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(f.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",z=>{!this._overviewRulerRenderer&&z&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(f.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(u.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const W=this,L=this.element;function q(Y){const ce=W._mouseService.getMouseReportCoords(Y,W.screenElement);if(!ce)return!1;let xe,we;switch(Y.overrideType||Y.type){case"mousemove":we=32,Y.buttons===void 0?(xe=3,Y.button!==void 0&&(xe=Y.button<3?Y.button:3)):xe=1&Y.buttons?0:4&Y.buttons?1:2&Y.buttons?2:3;break;case"mouseup":we=0,xe=Y.button<3?Y.button:3;break;case"mousedown":we=1,xe=Y.button<3?Y.button:3;break;case"wheel":if(W._customWheelEventHandler&&W._customWheelEventHandler(Y)===!1||W.viewport.getLinesScrolled(Y)===0)return!1;we=Y.deltaY<0?0:1,xe=4;break;default:return!1}return!(we===void 0||xe===void 0||xe>4)&&W.coreMouseService.triggerMouseEvent({col:ce.col,row:ce.row,x:ce.x,y:ce.y,button:xe,action:we,ctrl:Y.ctrlKey,alt:Y.altKey,shift:Y.shiftKey})}const z={mouseup:null,wheel:null,mousedrag:null,mousemove:null},X={mouseup:Y=>(q(Y),Y.buttons||(this._document.removeEventListener("mouseup",z.mouseup),z.mousedrag&&this._document.removeEventListener("mousemove",z.mousedrag)),this.cancel(Y)),wheel:Y=>(q(Y),this.cancel(Y,!0)),mousedrag:Y=>{Y.buttons&&q(Y)},mousemove:Y=>{Y.buttons||q(Y)}};this.register(this.coreMouseService.onProtocolChange(Y=>{Y?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(Y)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&Y?z.mousemove||(L.addEventListener("mousemove",X.mousemove),z.mousemove=X.mousemove):(L.removeEventListener("mousemove",z.mousemove),z.mousemove=null),16&Y?z.wheel||(L.addEventListener("wheel",X.wheel,{passive:!1}),z.wheel=X.wheel):(L.removeEventListener("wheel",z.wheel),z.wheel=null),2&Y?z.mouseup||(z.mouseup=X.mouseup):(this._document.removeEventListener("mouseup",z.mouseup),z.mouseup=null),4&Y?z.mousedrag||(z.mousedrag=X.mousedrag):(this._document.removeEventListener("mousemove",z.mousedrag),z.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,v.addDisposableDomListener)(L,"mousedown",Y=>{if(Y.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(Y))return q(Y),z.mouseup&&this._document.addEventListener("mouseup",z.mouseup),z.mousedrag&&this._document.addEventListener("mousemove",z.mousedrag),this.cancel(Y)})),this.register((0,v.addDisposableDomListener)(L,"wheel",Y=>{if(!z.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(Y)===!1)return!1;if(!this.buffer.hasScrollback){const ce=this.viewport.getLinesScrolled(Y);if(ce===0)return;const xe=U.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(Y.deltaY<0?"A":"B");let we="";for(let Be=0;Be<Math.abs(ce);Be++)we+=xe;return this.coreService.triggerDataEvent(we,!0),this.cancel(Y,!0)}return this.viewport.handleWheel(Y)?this.cancel(Y):void 0}},{passive:!1})),this.register((0,v.addDisposableDomListener)(L,"touchstart",Y=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(Y),this.cancel(Y)},{passive:!0})),this.register((0,v.addDisposableDomListener)(L,"touchmove",Y=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(Y)?void 0:this.cancel(Y)},{passive:!1}))}refresh(W,L){var q;(q=this._renderService)==null||q.refreshRows(W,L)}updateCursorStyle(W){var L;(L=this._selectionService)!=null&&L.shouldColumnSelect(W)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(W,L,q=0){var z;q===1?(super.scrollLines(W,L,q),this.refresh(0,this.rows-1)):(z=this.viewport)==null||z.scrollLines(W)}paste(W){(0,h.paste)(W,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(W){this._customKeyEventHandler=W}attachCustomWheelEventHandler(W){this._customWheelEventHandler=W}registerLinkProvider(W){return this._linkProviderService.registerLinkProvider(W)}registerCharacterJoiner(W){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const L=this._characterJoinerService.register(W);return this.refresh(0,this.rows-1),L}deregisterCharacterJoiner(W){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(W)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(W){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+W)}registerDecoration(W){return this._decorationService.registerDecoration(W)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(W,L,q){this._selectionService.setSelection(W,L,q)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var W;(W=this._selectionService)==null||W.clearSelection()}selectAll(){var W;(W=this._selectionService)==null||W.selectAll()}selectLines(W,L){var q;(q=this._selectionService)==null||q.selectLines(W,L)}_keyDown(W){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(W)===!1)return!1;const L=this.browser.isMac&&this.options.macOptionIsMeta&&W.altKey;if(!L&&!this._compositionHelper.keydown(W))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;L||W.key!=="Dead"&&W.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const q=(0,$.evaluateKeyboardEvent)(W,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(W),q.type===3||q.type===2){const z=this.rows-1;return this.scrollLines(q.type===2?-z:z),this.cancel(W,!0)}return q.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,W)||(q.cancel&&this.cancel(W,!0),!q.key||!!(W.key&&!W.ctrlKey&&!W.altKey&&!W.metaKey&&W.key.length===1&&W.key.charCodeAt(0)>=65&&W.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(q.key!==U.C0.ETX&&q.key!==U.C0.CR||(this.textarea.value=""),this._onKey.fire({key:q.key,domEvent:W}),this._showCursor(),this.coreService.triggerDataEvent(q.key,!0),!this.optionsService.rawOptions.screenReaderMode||W.altKey||W.ctrlKey?this.cancel(W,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(W,L){const q=W.isMac&&!this.options.macOptionIsMeta&&L.altKey&&!L.ctrlKey&&!L.metaKey||W.isWindows&&L.altKey&&L.ctrlKey&&!L.metaKey||W.isWindows&&L.getModifierState("AltGraph");return L.type==="keypress"?q:q&&(!L.keyCode||L.keyCode>47)}_keyUp(W){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(W)===!1||(function(L){return L.keyCode===16||L.keyCode===17||L.keyCode===18}(W)||this.focus(),this.updateCursorStyle(W),this._keyPressHandled=!1)}_keyPress(W){let L;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(W)===!1)return!1;if(this.cancel(W),W.charCode)L=W.charCode;else if(W.which===null||W.which===void 0)L=W.keyCode;else{if(W.which===0||W.charCode===0)return!1;L=W.which}return!(!L||(W.altKey||W.ctrlKey||W.metaKey)&&!this._isThirdLevelShift(this.browser,W)||(L=String.fromCharCode(L),this._onKey.fire({key:L,domEvent:W}),this._showCursor(),this.coreService.triggerDataEvent(L,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(W){if(W.data&&W.inputType==="insertText"&&(!W.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const L=W.data;return this.coreService.triggerDataEvent(L,!0),this.cancel(W),!0}return!1}resize(W,L){W!==this.cols||L!==this.rows?super.resize(W,L):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(W,L){var q,z;(q=this._charSizeService)==null||q.measure(),(z=this.viewport)==null||z.syncScrollArea(!0)}clear(){var W;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let L=1;L<this.rows;L++)this.buffer.lines.push(this.buffer.getBlankLine(B.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(W=this.viewport)==null||W.reset(),this.refresh(0,this.rows-1)}}reset(){var L,q;this.options.rows=this.rows,this.options.cols=this.cols;const W=this._customKeyEventHandler;this._setup(),super.reset(),(L=this._selectionService)==null||L.reset(),this._decorationService.reset(),(q=this.viewport)==null||q.reset(),this._customKeyEventHandler=W,this.refresh(0,this.rows-1)}clearTextureAtlas(){var W;(W=this._renderService)==null||W.clearTextureAtlas()}_reportFocus(){var W;(W=this.element)!=null&&W.classList.contains("focus")?this.coreService.triggerDataEvent(U.C0.ESC+"[I"):this.coreService.triggerDataEvent(U.C0.ESC+"[O")}_reportWindowsOptions(W){if(this._renderService)switch(W){case F.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const L=this._renderService.dimensions.css.canvas.width.toFixed(0),q=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${U.C0.ESC}[4;${q};${L}t`);break;case F.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const z=this._renderService.dimensions.css.cell.width.toFixed(0),X=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${U.C0.ESC}[6;${X};${z}t`)}}cancel(W,L){if(this.options.cancelEvents||L)return W.preventDefault(),W.stopPropagation(),!1}}o.Terminal=J},9924:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TimeBasedDebouncer=void 0,o.TimeBasedDebouncer=class{constructor(c,h=1e3){this._renderCallback=c,this._debounceThresholdMS=h,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(c,h,v){this._rowCount=v,c=c!==void 0?c:0,h=h!==void 0?h:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,c):c,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,h):h;const d=Date.now();if(d-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=d,this._innerRefresh();else if(!this._additionalRefreshRequested){const g=d-this._lastRefreshMs,x=this._debounceThresholdMS-g;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},x)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const c=Math.max(this._rowStart,0),h=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(c,h)}}},1680:function(l,o,c){var h=this&&this.__decorate||function(p,u,m,b){var S,C=arguments.length,k=C<3?u:b===null?b=Object.getOwnPropertyDescriptor(u,m):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(p,u,m,b);else for(var w=p.length-1;w>=0;w--)(S=p[w])&&(k=(C<3?S(k):C>3?S(u,m,k):S(u,m))||k);return C>3&&k&&Object.defineProperty(u,m,k),k},v=this&&this.__param||function(p,u){return function(m,b){u(m,b,p)}};Object.defineProperty(o,"__esModule",{value:!0}),o.Viewport=void 0;const d=c(3656),g=c(4725),x=c(8460),_=c(844),y=c(2585);let f=o.Viewport=class extends _.Disposable{constructor(p,u,m,b,S,C,k,w){super(),this._viewportElement=p,this._scrollArea=u,this._bufferService=m,this._optionsService=b,this._charSizeService=S,this._renderService=C,this._coreBrowserService=k,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new x.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,d.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(j=>this._activeBuffer=j.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(j=>this._renderDimensions=j)),this._handleThemeChange(w.colors),this.register(w.onChangeColors(j=>this._handleThemeChange(j))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(p){this._viewportElement.style.backgroundColor=p.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(p){if(p)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const u=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==u&&(this._lastRecordedBufferHeight=u,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const p=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==p&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=p),this._refreshAnimationFrame=null}syncScrollArea(p=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(p);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(p)}_handleScroll(p){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const u=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:u,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const p=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(p*(this._smoothScrollState.target-this._smoothScrollState.origin)),p<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(p,u){const m=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(u<0&&this._viewportElement.scrollTop!==0||u>0&&m<this._lastRecordedBufferHeight)||(p.cancelable&&p.preventDefault(),!1)}handleWheel(p){const u=this._getPixelsScrolled(p);return u!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+u:this._smoothScrollState.target+=u,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=u,this._bubbleScroll(p,u))}scrollLines(p){if(p!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const u=p*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+u,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:p,suppressScrollEvent:!1})}_getPixelsScrolled(p){if(p.deltaY===0||p.shiftKey)return 0;let u=this._applyScrollModifier(p.deltaY,p);return p.deltaMode===WheelEvent.DOM_DELTA_LINE?u*=this._currentRowHeight:p.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(u*=this._currentRowHeight*this._bufferService.rows),u}getBufferElements(p,u){var w;let m,b="";const S=[],C=u??this._bufferService.buffer.lines.length,k=this._bufferService.buffer.lines;for(let j=p;j<C;j++){const D=k.get(j);if(!D)continue;const I=(w=k.get(j+1))==null?void 0:w.isWrapped;if(b+=D.translateToString(!I),!I||j===k.length-1){const T=document.createElement("div");T.textContent=b,S.push(T),b.length>0&&(m=T),b=""}}return{bufferElements:S,cursorElement:m}}getLinesScrolled(p){if(p.deltaY===0||p.shiftKey)return 0;let u=this._applyScrollModifier(p.deltaY,p);return p.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(u/=this._currentRowHeight+0,this._wheelPartialScroll+=u,u=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):p.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(u*=this._bufferService.rows),u}_applyScrollModifier(p,u){const m=this._optionsService.rawOptions.fastScrollModifier;return m==="alt"&&u.altKey||m==="ctrl"&&u.ctrlKey||m==="shift"&&u.shiftKey?p*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:p*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(p){this._lastTouchY=p.touches[0].pageY}handleTouchMove(p){const u=this._lastTouchY-p.touches[0].pageY;return this._lastTouchY=p.touches[0].pageY,u!==0&&(this._viewportElement.scrollTop+=u,this._bubbleScroll(p,u))}};o.Viewport=f=h([v(2,y.IBufferService),v(3,y.IOptionsService),v(4,g.ICharSizeService),v(5,g.IRenderService),v(6,g.ICoreBrowserService),v(7,g.IThemeService)],f)},3107:function(l,o,c){var h=this&&this.__decorate||function(y,f,p,u){var m,b=arguments.length,S=b<3?f:u===null?u=Object.getOwnPropertyDescriptor(f,p):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(y,f,p,u);else for(var C=y.length-1;C>=0;C--)(m=y[C])&&(S=(b<3?m(S):b>3?m(f,p,S):m(f,p))||S);return b>3&&S&&Object.defineProperty(f,p,S),S},v=this&&this.__param||function(y,f){return function(p,u){f(p,u,y)}};Object.defineProperty(o,"__esModule",{value:!0}),o.BufferDecorationRenderer=void 0;const d=c(4725),g=c(844),x=c(2585);let _=o.BufferDecorationRenderer=class extends g.Disposable{constructor(y,f,p,u,m){super(),this._screenElement=y,this._bufferService=f,this._coreBrowserService=p,this._decorationService=u,this._renderService=m,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(b=>this._removeDecoration(b))),this.register((0,g.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const y of this._decorationService.decorations)this._renderDecoration(y);this._dimensionsChanged=!1}_renderDecoration(y){this._refreshStyle(y),this._dimensionsChanged&&this._refreshXPosition(y)}_createElement(y){var u;const f=this._coreBrowserService.mainDocument.createElement("div");f.classList.add("xterm-decoration"),f.classList.toggle("xterm-decoration-top-layer",((u=y==null?void 0:y.options)==null?void 0:u.layer)==="top"),f.style.width=`${Math.round((y.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,f.style.height=(y.options.height||1)*this._renderService.dimensions.css.cell.height+"px",f.style.top=(y.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",f.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const p=y.options.x??0;return p&&p>this._bufferService.cols&&(f.style.display="none"),this._refreshXPosition(y,f),f}_refreshStyle(y){const f=y.marker.line-this._bufferService.buffers.active.ydisp;if(f<0||f>=this._bufferService.rows)y.element&&(y.element.style.display="none",y.onRenderEmitter.fire(y.element));else{let p=this._decorationElements.get(y);p||(p=this._createElement(y),y.element=p,this._decorationElements.set(y,p),this._container.appendChild(p),y.onDispose(()=>{this._decorationElements.delete(y),p.remove()})),p.style.top=f*this._renderService.dimensions.css.cell.height+"px",p.style.display=this._altBufferIsActive?"none":"block",y.onRenderEmitter.fire(p)}}_refreshXPosition(y,f=y.element){if(!f)return;const p=y.options.x??0;(y.options.anchor||"left")==="right"?f.style.right=p?p*this._renderService.dimensions.css.cell.width+"px":"":f.style.left=p?p*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(y){var f;(f=this._decorationElements.get(y))==null||f.remove(),this._decorationElements.delete(y),y.dispose()}};o.BufferDecorationRenderer=_=h([v(1,x.IBufferService),v(2,d.ICoreBrowserService),v(3,x.IDecorationService),v(4,d.IRenderService)],_)},5871:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ColorZoneStore=void 0,o.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(c){if(c.options.overviewRulerOptions){for(const h of this._zones)if(h.color===c.options.overviewRulerOptions.color&&h.position===c.options.overviewRulerOptions.position){if(this._lineIntersectsZone(h,c.marker.line))return;if(this._lineAdjacentToZone(h,c.marker.line,c.options.overviewRulerOptions.position))return void this._addLineToZone(h,c.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=c.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=c.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=c.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=c.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:c.options.overviewRulerOptions.color,position:c.options.overviewRulerOptions.position,startBufferLine:c.marker.line,endBufferLine:c.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(c){this._linePadding=c}_lineIntersectsZone(c,h){return h>=c.startBufferLine&&h<=c.endBufferLine}_lineAdjacentToZone(c,h,v){return h>=c.startBufferLine-this._linePadding[v||"full"]&&h<=c.endBufferLine+this._linePadding[v||"full"]}_addLineToZone(c,h){c.startBufferLine=Math.min(c.startBufferLine,h),c.endBufferLine=Math.max(c.endBufferLine,h)}}},5744:function(l,o,c){var h=this&&this.__decorate||function(m,b,S,C){var k,w=arguments.length,j=w<3?b:C===null?C=Object.getOwnPropertyDescriptor(b,S):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(m,b,S,C);else for(var D=m.length-1;D>=0;D--)(k=m[D])&&(j=(w<3?k(j):w>3?k(b,S,j):k(b,S))||j);return w>3&&j&&Object.defineProperty(b,S,j),j},v=this&&this.__param||function(m,b){return function(S,C){b(S,C,m)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OverviewRulerRenderer=void 0;const d=c(5871),g=c(4725),x=c(844),_=c(2585),y={full:0,left:0,center:0,right:0},f={full:0,left:0,center:0,right:0},p={full:0,left:0,center:0,right:0};let u=o.OverviewRulerRenderer=class extends x.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(m,b,S,C,k,w,j){var I;super(),this._viewportElement=m,this._screenElement=b,this._bufferService=S,this._decorationService=C,this._renderService=k,this._optionsService=w,this._coreBrowserService=j,this._colorZoneStore=new d.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(I=this._viewportElement.parentElement)==null||I.insertBefore(this._canvas,this._viewportElement);const D=this._canvas.getContext("2d");if(!D)throw new Error("Ctx cannot be null");this._ctx=D,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,x.toDisposable)(()=>{var T;(T=this._canvas)==null||T.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const m=Math.floor(this._canvas.width/3),b=Math.ceil(this._canvas.width/3);f.full=this._canvas.width,f.left=m,f.center=b,f.right=m,this._refreshDrawHeightConstants(),p.full=0,p.left=0,p.center=f.left,p.right=f.left+f.center}_refreshDrawHeightConstants(){y.full=Math.round(2*this._coreBrowserService.dpr);const m=this._canvas.height/this._bufferService.buffer.lines.length,b=Math.round(Math.max(Math.min(m,12),6)*this._coreBrowserService.dpr);y.left=b,y.center=b,y.right=b}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*y.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*y.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*y.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*y.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const b of this._decorationService.decorations)this._colorZoneStore.addDecoration(b);this._ctx.lineWidth=1;const m=this._colorZoneStore.zones;for(const b of m)b.position!=="full"&&this._renderColorZone(b);for(const b of m)b.position==="full"&&this._renderColorZone(b);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(m){this._ctx.fillStyle=m.color,this._ctx.fillRect(p[m.position||"full"],Math.round((this._canvas.height-1)*(m.startBufferLine/this._bufferService.buffers.active.lines.length)-y[m.position||"full"]/2),f[m.position||"full"],Math.round((this._canvas.height-1)*((m.endBufferLine-m.startBufferLine)/this._bufferService.buffers.active.lines.length)+y[m.position||"full"]))}_queueRefresh(m,b){this._shouldUpdateDimensions=m||this._shouldUpdateDimensions,this._shouldUpdateAnchor=b||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};o.OverviewRulerRenderer=u=h([v(2,_.IBufferService),v(3,_.IDecorationService),v(4,g.IRenderService),v(5,_.IOptionsService),v(6,g.ICoreBrowserService)],u)},2950:function(l,o,c){var h=this&&this.__decorate||function(y,f,p,u){var m,b=arguments.length,S=b<3?f:u===null?u=Object.getOwnPropertyDescriptor(f,p):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(y,f,p,u);else for(var C=y.length-1;C>=0;C--)(m=y[C])&&(S=(b<3?m(S):b>3?m(f,p,S):m(f,p))||S);return b>3&&S&&Object.defineProperty(f,p,S),S},v=this&&this.__param||function(y,f){return function(p,u){f(p,u,y)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CompositionHelper=void 0;const d=c(4725),g=c(2585),x=c(2584);let _=o.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(y,f,p,u,m,b){this._textarea=y,this._compositionView=f,this._bufferService=p,this._optionsService=u,this._coreService=m,this._renderService=b,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(y){this._compositionView.textContent=y.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(y){if(this._isComposing||this._isSendingComposition){if(y.keyCode===229||y.keyCode===16||y.keyCode===17||y.keyCode===18)return!1;this._finalizeComposition(!1)}return y.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(y){if(this._compositionView.classList.remove("active"),this._isComposing=!1,y){const f={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let p;this._isSendingComposition=!1,f.start+=this._dataAlreadySent.length,p=this._isComposing?this._textarea.value.substring(f.start,f.end):this._textarea.value.substring(f.start),p.length>0&&this._coreService.triggerDataEvent(p,!0)}},0)}else{this._isSendingComposition=!1;const f=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(f,!0)}}_handleAnyTextareaChanges(){const y=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const f=this._textarea.value,p=f.replace(y,"");this._dataAlreadySent=p,f.length>y.length?this._coreService.triggerDataEvent(p,!0):f.length<y.length?this._coreService.triggerDataEvent(`${x.C0.DEL}`,!0):f.length===y.length&&f!==y&&this._coreService.triggerDataEvent(f,!0)}},0)}updateCompositionElements(y){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const f=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),p=this._renderService.dimensions.css.cell.height,u=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,m=f*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=m+"px",this._compositionView.style.top=u+"px",this._compositionView.style.height=p+"px",this._compositionView.style.lineHeight=p+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const b=this._compositionView.getBoundingClientRect();this._textarea.style.left=m+"px",this._textarea.style.top=u+"px",this._textarea.style.width=Math.max(b.width,1)+"px",this._textarea.style.height=Math.max(b.height,1)+"px",this._textarea.style.lineHeight=b.height+"px"}y||setTimeout(()=>this.updateCompositionElements(!0),0)}}};o.CompositionHelper=_=h([v(2,g.IBufferService),v(3,g.IOptionsService),v(4,g.ICoreService),v(5,d.IRenderService)],_)},9806:(l,o)=>{function c(h,v,d){const g=d.getBoundingClientRect(),x=h.getComputedStyle(d),_=parseInt(x.getPropertyValue("padding-left")),y=parseInt(x.getPropertyValue("padding-top"));return[v.clientX-g.left-_,v.clientY-g.top-y]}Object.defineProperty(o,"__esModule",{value:!0}),o.getCoords=o.getCoordsRelativeToElement=void 0,o.getCoordsRelativeToElement=c,o.getCoords=function(h,v,d,g,x,_,y,f,p){if(!_)return;const u=c(h,v,d);return u?(u[0]=Math.ceil((u[0]+(p?y/2:0))/y),u[1]=Math.ceil(u[1]/f),u[0]=Math.min(Math.max(u[0],1),g+(p?1:0)),u[1]=Math.min(Math.max(u[1],1),x),u):void 0}},9504:(l,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.moveToCellSequence=void 0;const h=c(2584);function v(f,p,u,m){const b=f-d(f,u),S=p-d(p,u),C=Math.abs(b-S)-function(k,w,j){let D=0;const I=k-d(k,j),T=w-d(w,j);for(let A=0;A<Math.abs(I-T);A++){const O=g(k,w)==="A"?-1:1,R=j.buffer.lines.get(I+O*A);R!=null&&R.isWrapped&&D++}return D}(f,p,u);return y(C,_(g(f,p),m))}function d(f,p){let u=0,m=p.buffer.lines.get(f),b=m==null?void 0:m.isWrapped;for(;b&&f>=0&&f<p.rows;)u++,m=p.buffer.lines.get(--f),b=m==null?void 0:m.isWrapped;return u}function g(f,p){return f>p?"A":"B"}function x(f,p,u,m,b,S){let C=f,k=p,w="";for(;C!==u||k!==m;)C+=b?1:-1,b&&C>S.cols-1?(w+=S.buffer.translateBufferLineToString(k,!1,f,C),C=0,f=0,k++):!b&&C<0&&(w+=S.buffer.translateBufferLineToString(k,!1,0,f+1),C=S.cols-1,f=C,k--);return w+S.buffer.translateBufferLineToString(k,!1,f,C)}function _(f,p){const u=p?"O":"[";return h.C0.ESC+u+f}function y(f,p){f=Math.floor(f);let u="";for(let m=0;m<f;m++)u+=p;return u}o.moveToCellSequence=function(f,p,u,m){const b=u.buffer.x,S=u.buffer.y;if(!u.buffer.hasScrollback)return function(w,j,D,I,T,A){return v(j,I,T,A).length===0?"":y(x(w,j,w,j-d(j,T),!1,T).length,_("D",A))}(b,S,0,p,u,m)+v(S,p,u,m)+function(w,j,D,I,T,A){let O;O=v(j,I,T,A).length>0?I-d(I,T):j;const R=I,B=function(U,$,N,P,M,F){let V;return V=v(N,P,M,F).length>0?P-d(P,M):$,U<N&&V<=P||U>=N&&V<P?"C":"D"}(w,j,D,I,T,A);return y(x(w,O,D,R,B==="C",T).length,_(B,A))}(b,S,f,p,u,m);let C;if(S===p)return C=b>f?"D":"C",y(Math.abs(b-f),_(C,m));C=S>p?"D":"C";const k=Math.abs(S-p);return y(function(w,j){return j.cols-w}(S>p?f:b,u)+(k-1)*u.cols+1+((S>p?b:f)-1),_(C,m))}},1296:function(l,o,c){var h=this&&this.__decorate||function(A,O,R,B){var U,$=arguments.length,N=$<3?O:B===null?B=Object.getOwnPropertyDescriptor(O,R):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(A,O,R,B);else for(var P=A.length-1;P>=0;P--)(U=A[P])&&(N=($<3?U(N):$>3?U(O,R,N):U(O,R))||N);return $>3&&N&&Object.defineProperty(O,R,N),N},v=this&&this.__param||function(A,O){return function(R,B){O(R,B,A)}};Object.defineProperty(o,"__esModule",{value:!0}),o.DomRenderer=void 0;const d=c(3787),g=c(2550),x=c(2223),_=c(6171),y=c(6052),f=c(4725),p=c(8055),u=c(8460),m=c(844),b=c(2585),S="xterm-dom-renderer-owner-",C="xterm-rows",k="xterm-fg-",w="xterm-bg-",j="xterm-focus",D="xterm-selection";let I=1,T=o.DomRenderer=class extends m.Disposable{constructor(A,O,R,B,U,$,N,P,M,F,V,K,J){super(),this._terminal=A,this._document=O,this._element=R,this._screenElement=B,this._viewportElement=U,this._helperContainer=$,this._linkifier2=N,this._charSizeService=M,this._optionsService=F,this._bufferService=V,this._coreBrowserService=K,this._themeService=J,this._terminalClass=I++,this._rowElements=[],this._selectionRenderModel=(0,y.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new u.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(C),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(D),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,_.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(te=>this._injectCss(te))),this._injectCss(this._themeService.colors),this._rowFactory=P.createInstance(d.DomRendererRowFactory,document),this._element.classList.add(S+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(te=>this._handleLinkHover(te))),this.register(this._linkifier2.onHideLinkUnderline(te=>this._handleLinkLeave(te))),this.register((0,m.toDisposable)(()=>{this._element.classList.remove(S+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new g.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const A=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*A,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*A),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/A),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/A),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const R of this._rowElements)R.style.width=`${this.dimensions.css.canvas.width}px`,R.style.height=`${this.dimensions.css.cell.height}px`,R.style.lineHeight=`${this.dimensions.css.cell.height}px`,R.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const O=`${this._terminalSelector} .${C} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=O,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(A){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let O=`${this._terminalSelector} .${C} { color: ${A.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;O+=`${this._terminalSelector} .${C} .xterm-dim { color: ${p.color.multiplyOpacity(A.foreground,.5).css};}`,O+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const R=`blink_underline_${this._terminalClass}`,B=`blink_bar_${this._terminalClass}`,U=`blink_block_${this._terminalClass}`;O+=`@keyframes ${R} { 50% {  border-bottom-style: hidden; }}`,O+=`@keyframes ${B} { 50% {  box-shadow: none; }}`,O+=`@keyframes ${U} { 0% {  background-color: ${A.cursor.css};  color: ${A.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${A.cursor.css}; }}`,O+=`${this._terminalSelector} .${C}.${j} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${R} 1s step-end infinite;}${this._terminalSelector} .${C}.${j} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${B} 1s step-end infinite;}${this._terminalSelector} .${C}.${j} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${U} 1s step-end infinite;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-block { background-color: ${A.cursor.css}; color: ${A.cursorAccent.css};}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${A.cursor.css} !important; color: ${A.cursorAccent.css} !important;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${A.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${A.cursor.css} inset;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${A.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,O+=`${this._terminalSelector} .${D} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${D} div { position: absolute; background-color: ${A.selectionBackgroundOpaque.css};}${this._terminalSelector} .${D} div { position: absolute; background-color: ${A.selectionInactiveBackgroundOpaque.css};}`;for(const[$,N]of A.ansi.entries())O+=`${this._terminalSelector} .${k}${$} { color: ${N.css}; }${this._terminalSelector} .${k}${$}.xterm-dim { color: ${p.color.multiplyOpacity(N,.5).css}; }${this._terminalSelector} .${w}${$} { background-color: ${N.css}; }`;O+=`${this._terminalSelector} .${k}${x.INVERTED_DEFAULT_COLOR} { color: ${p.color.opaque(A.background).css}; }${this._terminalSelector} .${k}${x.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${p.color.multiplyOpacity(p.color.opaque(A.background),.5).css}; }${this._terminalSelector} .${w}${x.INVERTED_DEFAULT_COLOR} { background-color: ${A.foreground.css}; }`,this._themeStyleElement.textContent=O}_setDefaultSpacing(){const A=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${A}px`,this._rowFactory.defaultSpacing=A}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(A,O){for(let R=this._rowElements.length;R<=O;R++){const B=this._document.createElement("div");this._rowContainer.appendChild(B),this._rowElements.push(B)}for(;this._rowElements.length>O;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(A,O){this._refreshRowElements(A,O),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(j),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(j),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(A,O,R){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(A,O,R),this.renderRows(0,this._bufferService.rows-1),!A||!O)return;this._selectionRenderModel.update(this._terminal,A,O,R);const B=this._selectionRenderModel.viewportStartRow,U=this._selectionRenderModel.viewportEndRow,$=this._selectionRenderModel.viewportCappedStartRow,N=this._selectionRenderModel.viewportCappedEndRow;if($>=this._bufferService.rows||N<0)return;const P=this._document.createDocumentFragment();if(R){const M=A[0]>O[0];P.appendChild(this._createSelectionElement($,M?O[0]:A[0],M?A[0]:O[0],N-$+1))}else{const M=B===$?A[0]:0,F=$===U?O[0]:this._bufferService.cols;P.appendChild(this._createSelectionElement($,M,F));const V=N-$-1;if(P.appendChild(this._createSelectionElement($+1,0,this._bufferService.cols,V)),$!==N){const K=U===N?O[0]:this._bufferService.cols;P.appendChild(this._createSelectionElement(N,0,K))}}this._selectionContainer.appendChild(P)}_createSelectionElement(A,O,R,B=1){const U=this._document.createElement("div"),$=O*this.dimensions.css.cell.width;let N=this.dimensions.css.cell.width*(R-O);return $+N>this.dimensions.css.canvas.width&&(N=this.dimensions.css.canvas.width-$),U.style.height=B*this.dimensions.css.cell.height+"px",U.style.top=A*this.dimensions.css.cell.height+"px",U.style.left=`${$}px`,U.style.width=`${N}px`,U}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const A of this._rowElements)A.replaceChildren()}renderRows(A,O){const R=this._bufferService.buffer,B=R.ybase+R.y,U=Math.min(R.x,this._bufferService.cols-1),$=this._optionsService.rawOptions.cursorBlink,N=this._optionsService.rawOptions.cursorStyle,P=this._optionsService.rawOptions.cursorInactiveStyle;for(let M=A;M<=O;M++){const F=M+R.ydisp,V=this._rowElements[M],K=R.lines.get(F);if(!V||!K)break;V.replaceChildren(...this._rowFactory.createRow(K,F,F===B,N,P,U,$,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${S}${this._terminalClass}`}_handleLinkHover(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!0)}_handleLinkLeave(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!1)}_setCellUnderline(A,O,R,B,U,$){R<0&&(A=0),B<0&&(O=0);const N=this._bufferService.rows-1;R=Math.max(Math.min(R,N),0),B=Math.max(Math.min(B,N),0),U=Math.min(U,this._bufferService.cols);const P=this._bufferService.buffer,M=P.ybase+P.y,F=Math.min(P.x,U-1),V=this._optionsService.rawOptions.cursorBlink,K=this._optionsService.rawOptions.cursorStyle,J=this._optionsService.rawOptions.cursorInactiveStyle;for(let te=R;te<=B;++te){const W=te+P.ydisp,L=this._rowElements[te],q=P.lines.get(W);if(!L||!q)break;L.replaceChildren(...this._rowFactory.createRow(q,W,W===M,K,J,F,V,this.dimensions.css.cell.width,this._widthCache,$?te===R?A:0:-1,$?(te===B?O:U)-1:-1))}}};o.DomRenderer=T=h([v(7,b.IInstantiationService),v(8,f.ICharSizeService),v(9,b.IOptionsService),v(10,b.IBufferService),v(11,f.ICoreBrowserService),v(12,f.IThemeService)],T)},3787:function(l,o,c){var h=this&&this.__decorate||function(C,k,w,j){var D,I=arguments.length,T=I<3?k:j===null?j=Object.getOwnPropertyDescriptor(k,w):j;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(C,k,w,j);else for(var A=C.length-1;A>=0;A--)(D=C[A])&&(T=(I<3?D(T):I>3?D(k,w,T):D(k,w))||T);return I>3&&T&&Object.defineProperty(k,w,T),T},v=this&&this.__param||function(C,k){return function(w,j){k(w,j,C)}};Object.defineProperty(o,"__esModule",{value:!0}),o.DomRendererRowFactory=void 0;const d=c(2223),g=c(643),x=c(511),_=c(2585),y=c(8055),f=c(4725),p=c(4269),u=c(6171),m=c(3734);let b=o.DomRendererRowFactory=class{constructor(C,k,w,j,D,I,T){this._document=C,this._characterJoinerService=k,this._optionsService=w,this._coreBrowserService=j,this._coreService=D,this._decorationService=I,this._themeService=T,this._workCell=new x.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(C,k,w){this._selectionStart=C,this._selectionEnd=k,this._columnSelectMode=w}createRow(C,k,w,j,D,I,T,A,O,R,B){const U=[],$=this._characterJoinerService.getJoinedCharacters(k),N=this._themeService.colors;let P,M=C.getNoBgTrimmedLength();w&&M<I+1&&(M=I+1);let F=0,V="",K=0,J=0,te=0,W=!1,L=0,q=!1,z=0;const X=[],Y=R!==-1&&B!==-1;for(let ce=0;ce<M;ce++){C.loadCell(ce,this._workCell);let xe=this._workCell.getWidth();if(xe===0)continue;let we=!1,Be=ce,le=this._workCell;if($.length>0&&ce===$[0][0]){we=!0;const Ee=$.shift();le=new p.JoinedCellData(this._workCell,C.translateToString(!0,Ee[0],Ee[1]),Ee[1]-Ee[0]),Be=Ee[1]-1,xe=le.getWidth()}const bs=this._isCellInSelection(ce,k),pr=w&&ce===I,_s=Y&&ce>=R&&ce<=B;let Tc=!1;this._decorationService.forEachDecorationAtCell(ce,k,void 0,Ee=>{Tc=!0});let Zo=le.getChars()||g.WHITESPACE_CELL_CHAR;if(Zo===" "&&(le.isUnderline()||le.isOverline())&&(Zo=""),z=xe*A-O.get(Zo,le.isBold(),le.isItalic()),P){if(F&&(bs&&q||!bs&&!q&&le.bg===K)&&(bs&&q&&N.selectionForeground||le.fg===J)&&le.extended.ext===te&&_s===W&&z===L&&!pr&&!we&&!Tc){le.isInvisible()?V+=g.WHITESPACE_CELL_CHAR:V+=Zo,F++;continue}F&&(P.textContent=V),P=this._document.createElement("span"),F=0,V=""}else P=this._document.createElement("span");if(K=le.bg,J=le.fg,te=le.extended.ext,W=_s,L=z,q=bs,we&&I>=ce&&I<=Be&&(I=ce),!this._coreService.isCursorHidden&&pr&&this._coreService.isCursorInitialized){if(X.push("xterm-cursor"),this._coreBrowserService.isFocused)T&&X.push("xterm-cursor-blink"),X.push(j==="bar"?"xterm-cursor-bar":j==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(D)switch(D){case"outline":X.push("xterm-cursor-outline");break;case"block":X.push("xterm-cursor-block");break;case"bar":X.push("xterm-cursor-bar");break;case"underline":X.push("xterm-cursor-underline")}}if(le.isBold()&&X.push("xterm-bold"),le.isItalic()&&X.push("xterm-italic"),le.isDim()&&X.push("xterm-dim"),V=le.isInvisible()?g.WHITESPACE_CELL_CHAR:le.getChars()||g.WHITESPACE_CELL_CHAR,le.isUnderline()&&(X.push(`xterm-underline-${le.extended.underlineStyle}`),V===" "&&(V=""),!le.isUnderlineColorDefault()))if(le.isUnderlineColorRGB())P.style.textDecorationColor=`rgb(${m.AttributeData.toColorRGB(le.getUnderlineColor()).join(",")})`;else{let Ee=le.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&le.isBold()&&Ee<8&&(Ee+=8),P.style.textDecorationColor=N.ansi[Ee].css}le.isOverline()&&(X.push("xterm-overline"),V===" "&&(V="")),le.isStrikethrough()&&X.push("xterm-strikethrough"),_s&&(P.style.textDecoration="underline");let Nt=le.getFgColor(),ii=le.getFgColorMode(),rr=le.getBgColor(),oi=le.getBgColorMode();const Pc=!!le.isInverse();if(Pc){const Ee=Nt;Nt=rr,rr=Ee;const xb=ii;ii=oi,oi=xb}let jr,ea,Nr,ai=!1;switch(this._decorationService.forEachDecorationAtCell(ce,k,void 0,Ee=>{Ee.options.layer!=="top"&&ai||(Ee.backgroundColorRGB&&(oi=50331648,rr=Ee.backgroundColorRGB.rgba>>8&16777215,jr=Ee.backgroundColorRGB),Ee.foregroundColorRGB&&(ii=50331648,Nt=Ee.foregroundColorRGB.rgba>>8&16777215,ea=Ee.foregroundColorRGB),ai=Ee.options.layer==="top")}),!ai&&bs&&(jr=this._coreBrowserService.isFocused?N.selectionBackgroundOpaque:N.selectionInactiveBackgroundOpaque,rr=jr.rgba>>8&16777215,oi=50331648,ai=!0,N.selectionForeground&&(ii=50331648,Nt=N.selectionForeground.rgba>>8&16777215,ea=N.selectionForeground)),ai&&X.push("xterm-decoration-top"),oi){case 16777216:case 33554432:Nr=N.ansi[rr],X.push(`xterm-bg-${rr}`);break;case 50331648:Nr=y.channels.toColor(rr>>16,rr>>8&255,255&rr),this._addStyle(P,`background-color:#${S((rr>>>0).toString(16),"0",6)}`);break;default:Pc?(Nr=N.foreground,X.push(`xterm-bg-${d.INVERTED_DEFAULT_COLOR}`)):Nr=N.background}switch(jr||le.isDim()&&(jr=y.color.multiplyOpacity(Nr,.5)),ii){case 16777216:case 33554432:le.isBold()&&Nt<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Nt+=8),this._applyMinimumContrast(P,Nr,N.ansi[Nt],le,jr,void 0)||X.push(`xterm-fg-${Nt}`);break;case 50331648:const Ee=y.channels.toColor(Nt>>16&255,Nt>>8&255,255&Nt);this._applyMinimumContrast(P,Nr,Ee,le,jr,ea)||this._addStyle(P,`color:#${S(Nt.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(P,Nr,N.foreground,le,jr,ea)||Pc&&X.push(`xterm-fg-${d.INVERTED_DEFAULT_COLOR}`)}X.length&&(P.className=X.join(" "),X.length=0),pr||we||Tc?P.textContent=V:F++,z!==this.defaultSpacing&&(P.style.letterSpacing=`${z}px`),U.push(P),ce=Be}return P&&F&&(P.textContent=V),U}_applyMinimumContrast(C,k,w,j,D,I){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,u.treatGlyphAsBackgroundColor)(j.getCode()))return!1;const T=this._getContrastCache(j);let A;if(D||I||(A=T.getColor(k.rgba,w.rgba)),A===void 0){const O=this._optionsService.rawOptions.minimumContrastRatio/(j.isDim()?2:1);A=y.color.ensureContrastRatio(D||k,I||w,O),T.setColor((D||k).rgba,(I||w).rgba,A??null)}return!!A&&(this._addStyle(C,`color:${A.css}`),!0)}_getContrastCache(C){return C.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(C,k){C.setAttribute("style",`${C.getAttribute("style")||""}${k};`)}_isCellInSelection(C,k){const w=this._selectionStart,j=this._selectionEnd;return!(!w||!j)&&(this._columnSelectMode?w[0]<=j[0]?C>=w[0]&&k>=w[1]&&C<j[0]&&k<=j[1]:C<w[0]&&k>=w[1]&&C>=j[0]&&k<=j[1]:k>w[1]&&k<j[1]||w[1]===j[1]&&k===w[1]&&C>=w[0]&&C<j[0]||w[1]<j[1]&&k===j[1]&&C<j[0]||w[1]<j[1]&&k===w[1]&&C>=w[0])}};function S(C,k,w){for(;C.length<w;)C=k+C;return C}o.DomRendererRowFactory=b=h([v(1,f.ICharacterJoinerService),v(2,_.IOptionsService),v(3,f.ICoreBrowserService),v(4,_.ICoreService),v(5,_.IDecorationService),v(6,f.IThemeService)],b)},2550:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WidthCache=void 0,o.WidthCache=class{constructor(c,h){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=c.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const v=c.createElement("span");v.classList.add("xterm-char-measure-element");const d=c.createElement("span");d.classList.add("xterm-char-measure-element"),d.style.fontWeight="bold";const g=c.createElement("span");g.classList.add("xterm-char-measure-element"),g.style.fontStyle="italic";const x=c.createElement("span");x.classList.add("xterm-char-measure-element"),x.style.fontWeight="bold",x.style.fontStyle="italic",this._measureElements=[v,d,g,x],this._container.appendChild(v),this._container.appendChild(d),this._container.appendChild(g),this._container.appendChild(x),h.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(c,h,v,d){c===this._font&&h===this._fontSize&&v===this._weight&&d===this._weightBold||(this._font=c,this._fontSize=h,this._weight=v,this._weightBold=d,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${v}`,this._measureElements[1].style.fontWeight=`${d}`,this._measureElements[2].style.fontWeight=`${v}`,this._measureElements[3].style.fontWeight=`${d}`,this.clear())}get(c,h,v){let d=0;if(!h&&!v&&c.length===1&&(d=c.charCodeAt(0))<256){if(this._flat[d]!==-9999)return this._flat[d];const _=this._measure(c,0);return _>0&&(this._flat[d]=_),_}let g=c;h&&(g+="B"),v&&(g+="I");let x=this._holey.get(g);if(x===void 0){let _=0;h&&(_|=1),v&&(_|=2),x=this._measure(c,_),x>0&&this._holey.set(g,x)}return x}_measure(c,h){const v=this._measureElements[h];return v.textContent=c.repeat(32),v.offsetWidth/32}}},2223:(l,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TEXT_BASELINE=o.DIM_OPACITY=o.INVERTED_DEFAULT_COLOR=void 0;const h=c(6114);o.INVERTED_DEFAULT_COLOR=257,o.DIM_OPACITY=.5,o.TEXT_BASELINE=h.isFirefox||h.isLegacyEdge?"bottom":"ideographic"},6171:(l,o)=>{function c(v){return 57508<=v&&v<=57558}function h(v){return v>=128512&&v<=128591||v>=127744&&v<=128511||v>=128640&&v<=128767||v>=9728&&v<=9983||v>=9984&&v<=10175||v>=65024&&v<=65039||v>=129280&&v<=129535||v>=127462&&v<=127487}Object.defineProperty(o,"__esModule",{value:!0}),o.computeNextVariantOffset=o.createRenderDimensions=o.treatGlyphAsBackgroundColor=o.allowRescaling=o.isEmoji=o.isRestrictedPowerlineGlyph=o.isPowerlineGlyph=o.throwIfFalsy=void 0,o.throwIfFalsy=function(v){if(!v)throw new Error("value must not be falsy");return v},o.isPowerlineGlyph=c,o.isRestrictedPowerlineGlyph=function(v){return 57520<=v&&v<=57527},o.isEmoji=h,o.allowRescaling=function(v,d,g,x){return d===1&&g>Math.ceil(1.5*x)&&v!==void 0&&v>255&&!h(v)&&!c(v)&&!function(_){return 57344<=_&&_<=63743}(v)},o.treatGlyphAsBackgroundColor=function(v){return c(v)||function(d){return 9472<=d&&d<=9631}(v)},o.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},o.computeNextVariantOffset=function(v,d,g=0){return(v-(2*Math.round(d)-g))%(2*Math.round(d))}},6052:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createSelectionRenderModel=void 0;class c{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(v,d,g,x=!1){if(this.selectionStart=d,this.selectionEnd=g,!d||!g||d[0]===g[0]&&d[1]===g[1])return void this.clear();const _=v.buffers.active.ydisp,y=d[1]-_,f=g[1]-_,p=Math.max(y,0),u=Math.min(f,v.rows-1);p>=v.rows||u<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=x,this.viewportStartRow=y,this.viewportEndRow=f,this.viewportCappedStartRow=p,this.viewportCappedEndRow=u,this.startCol=d[0],this.endCol=g[0])}isCellSelected(v,d,g){return!!this.hasSelection&&(g-=v.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?d>=this.startCol&&g>=this.viewportCappedStartRow&&d<this.endCol&&g<=this.viewportCappedEndRow:d<this.startCol&&g>=this.viewportCappedStartRow&&d>=this.endCol&&g<=this.viewportCappedEndRow:g>this.viewportStartRow&&g<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&g===this.viewportStartRow&&d>=this.startCol&&d<this.endCol||this.viewportStartRow<this.viewportEndRow&&g===this.viewportEndRow&&d<this.endCol||this.viewportStartRow<this.viewportEndRow&&g===this.viewportStartRow&&d>=this.startCol)}}o.createSelectionRenderModel=function(){return new c}},456:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SelectionModel=void 0,o.SelectionModel=class{constructor(c){this._bufferService=c,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const c=this.selectionStart[0]+this.selectionStartLength;return c>this._bufferService.cols?c%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(c/this._bufferService.cols)-1]:[c%this._bufferService.cols,this.selectionStart[1]+Math.floor(c/this._bufferService.cols)]:[c,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const c=this.selectionStart[0]+this.selectionStartLength;return c>this._bufferService.cols?[c%this._bufferService.cols,this.selectionStart[1]+Math.floor(c/this._bufferService.cols)]:[Math.max(c,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const c=this.selectionStart,h=this.selectionEnd;return!(!c||!h)&&(c[1]>h[1]||c[1]===h[1]&&c[0]>h[0])}handleTrim(c){return this.selectionStart&&(this.selectionStart[1]-=c),this.selectionEnd&&(this.selectionEnd[1]-=c),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(l,o,c){var h=this&&this.__decorate||function(u,m,b,S){var C,k=arguments.length,w=k<3?m:S===null?S=Object.getOwnPropertyDescriptor(m,b):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(u,m,b,S);else for(var j=u.length-1;j>=0;j--)(C=u[j])&&(w=(k<3?C(w):k>3?C(m,b,w):C(m,b))||w);return k>3&&w&&Object.defineProperty(m,b,w),w},v=this&&this.__param||function(u,m){return function(b,S){m(b,S,u)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CharSizeService=void 0;const d=c(2585),g=c(8460),x=c(844);let _=o.CharSizeService=class extends x.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(u,m,b){super(),this._optionsService=b,this.width=0,this.height=0,this._onCharSizeChange=this.register(new g.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new p(this._optionsService))}catch{this._measureStrategy=this.register(new f(u,m,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const u=this._measureStrategy.measure();u.width===this.width&&u.height===this.height||(this.width=u.width,this.height=u.height,this._onCharSizeChange.fire())}};o.CharSizeService=_=h([v(2,d.IOptionsService)],_);class y extends x.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(m,b){m!==void 0&&m>0&&b!==void 0&&b>0&&(this._result.width=m,this._result.height=b)}}class f extends y{constructor(m,b,S){super(),this._document=m,this._parentElement=b,this._optionsService=S,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class p extends y{constructor(m){super(),this._optionsService=m,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const b=this._ctx.measureText("W");if(!("width"in b&&"fontBoundingBoxAscent"in b&&"fontBoundingBoxDescent"in b))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const m=this._ctx.measureText("W");return this._validateAndSet(m.width,m.fontBoundingBoxAscent+m.fontBoundingBoxDescent),this._result}}},4269:function(l,o,c){var h=this&&this.__decorate||function(p,u,m,b){var S,C=arguments.length,k=C<3?u:b===null?b=Object.getOwnPropertyDescriptor(u,m):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(p,u,m,b);else for(var w=p.length-1;w>=0;w--)(S=p[w])&&(k=(C<3?S(k):C>3?S(u,m,k):S(u,m))||k);return C>3&&k&&Object.defineProperty(u,m,k),k},v=this&&this.__param||function(p,u){return function(m,b){u(m,b,p)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CharacterJoinerService=o.JoinedCellData=void 0;const d=c(3734),g=c(643),x=c(511),_=c(2585);class y extends d.AttributeData{constructor(u,m,b){super(),this.content=0,this.combinedData="",this.fg=u.fg,this.bg=u.bg,this.combinedData=m,this._width=b}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(u){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}o.JoinedCellData=y;let f=o.CharacterJoinerService=class Hx{constructor(u){this._bufferService=u,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new x.CellData}register(u){const m={id:this._nextCharacterJoinerId++,handler:u};return this._characterJoiners.push(m),m.id}deregister(u){for(let m=0;m<this._characterJoiners.length;m++)if(this._characterJoiners[m].id===u)return this._characterJoiners.splice(m,1),!0;return!1}getJoinedCharacters(u){if(this._characterJoiners.length===0)return[];const m=this._bufferService.buffer.lines.get(u);if(!m||m.length===0)return[];const b=[],S=m.translateToString(!0);let C=0,k=0,w=0,j=m.getFg(0),D=m.getBg(0);for(let I=0;I<m.getTrimmedLength();I++)if(m.loadCell(I,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==j||this._workCell.bg!==D){if(I-C>1){const T=this._getJoinedRanges(S,w,k,m,C);for(let A=0;A<T.length;A++)b.push(T[A])}C=I,w=k,j=this._workCell.fg,D=this._workCell.bg}k+=this._workCell.getChars().length||g.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-C>1){const I=this._getJoinedRanges(S,w,k,m,C);for(let T=0;T<I.length;T++)b.push(I[T])}return b}_getJoinedRanges(u,m,b,S,C){const k=u.substring(m,b);let w=[];try{w=this._characterJoiners[0].handler(k)}catch(j){console.error(j)}for(let j=1;j<this._characterJoiners.length;j++)try{const D=this._characterJoiners[j].handler(k);for(let I=0;I<D.length;I++)Hx._mergeRanges(w,D[I])}catch(D){console.error(D)}return this._stringRangesToCellRanges(w,S,C),w}_stringRangesToCellRanges(u,m,b){let S=0,C=!1,k=0,w=u[S];if(w){for(let j=b;j<this._bufferService.cols;j++){const D=m.getWidth(j),I=m.getString(j).length||g.WHITESPACE_CELL_CHAR.length;if(D!==0){if(!C&&w[0]<=k&&(w[0]=j,C=!0),w[1]<=k){if(w[1]=j,w=u[++S],!w)break;w[0]<=k?(w[0]=j,C=!0):C=!1}k+=I}}w&&(w[1]=this._bufferService.cols)}}static _mergeRanges(u,m){let b=!1;for(let S=0;S<u.length;S++){const C=u[S];if(b){if(m[1]<=C[0])return u[S-1][1]=m[1],u;if(m[1]<=C[1])return u[S-1][1]=Math.max(m[1],C[1]),u.splice(S,1),u;u.splice(S,1),S--}else{if(m[1]<=C[0])return u.splice(S,0,m),u;if(m[1]<=C[1])return C[0]=Math.min(m[0],C[0]),u;m[0]<C[1]&&(C[0]=Math.min(m[0],C[0]),b=!0)}}return b?u[u.length-1][1]=m[1]:u.push(m),u}};o.CharacterJoinerService=f=h([v(0,_.IBufferService)],f)},5114:(l,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CoreBrowserService=void 0;const h=c(844),v=c(8460),d=c(3656);class g extends h.Disposable{constructor(y,f,p){super(),this._textarea=y,this._window=f,this.mainDocument=p,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new x(this._window),this._onDprChange=this.register(new v.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new v.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(u=>this._screenDprMonitor.setWindow(u))),this.register((0,v.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(y){this._window!==y&&(this._window=y,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}o.CoreBrowserService=g;class x extends h.Disposable{constructor(y){super(),this._parentWindow=y,this._windowResizeListener=this.register(new h.MutableDisposable),this._onDprChange=this.register(new v.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,h.toDisposable)(()=>this.clearListener()))}setWindow(y){this._parentWindow=y,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,d.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var y;this._outerListener&&((y=this._resolutionMediaMatchList)==null||y.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(l,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.LinkProviderService=void 0;const h=c(844);class v extends h.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,h.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(g){return this.linkProviders.push(g),{dispose:()=>{const x=this.linkProviders.indexOf(g);x!==-1&&this.linkProviders.splice(x,1)}}}}o.LinkProviderService=v},8934:function(l,o,c){var h=this&&this.__decorate||function(_,y,f,p){var u,m=arguments.length,b=m<3?y:p===null?p=Object.getOwnPropertyDescriptor(y,f):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(_,y,f,p);else for(var S=_.length-1;S>=0;S--)(u=_[S])&&(b=(m<3?u(b):m>3?u(y,f,b):u(y,f))||b);return m>3&&b&&Object.defineProperty(y,f,b),b},v=this&&this.__param||function(_,y){return function(f,p){y(f,p,_)}};Object.defineProperty(o,"__esModule",{value:!0}),o.MouseService=void 0;const d=c(4725),g=c(9806);let x=o.MouseService=class{constructor(_,y){this._renderService=_,this._charSizeService=y}getCoords(_,y,f,p,u){return(0,g.getCoords)(window,_,y,f,p,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,u)}getMouseReportCoords(_,y){const f=(0,g.getCoordsRelativeToElement)(window,_,y);if(this._charSizeService.hasValidSize)return f[0]=Math.min(Math.max(f[0],0),this._renderService.dimensions.css.canvas.width-1),f[1]=Math.min(Math.max(f[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(f[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(f[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(f[0]),y:Math.floor(f[1])}}};o.MouseService=x=h([v(0,d.IRenderService),v(1,d.ICharSizeService)],x)},3230:function(l,o,c){var h=this&&this.__decorate||function(u,m,b,S){var C,k=arguments.length,w=k<3?m:S===null?S=Object.getOwnPropertyDescriptor(m,b):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(u,m,b,S);else for(var j=u.length-1;j>=0;j--)(C=u[j])&&(w=(k<3?C(w):k>3?C(m,b,w):C(m,b))||w);return k>3&&w&&Object.defineProperty(m,b,w),w},v=this&&this.__param||function(u,m){return function(b,S){m(b,S,u)}};Object.defineProperty(o,"__esModule",{value:!0}),o.RenderService=void 0;const d=c(6193),g=c(4725),x=c(8460),_=c(844),y=c(7226),f=c(2585);let p=o.RenderService=class extends _.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(u,m,b,S,C,k,w,j){super(),this._rowCount=u,this._charSizeService=S,this._renderer=this.register(new _.MutableDisposable),this._pausedResizeTask=new y.DebouncedIdleTask,this._observerDisposable=this.register(new _.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new x.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new x.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new x.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new x.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new d.RenderDebouncer((D,I)=>this._renderRows(D,I),w),this.register(this._renderDebouncer),this.register(w.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(k.onResize(()=>this._fullRefresh())),this.register(k.buffers.onBufferActivate(()=>{var D;return(D=this._renderer.value)==null?void 0:D.clear()})),this.register(b.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(C.onDecorationRegistered(()=>this._fullRefresh())),this.register(C.onDecorationRemoved(()=>this._fullRefresh())),this.register(b.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(k.cols,k.rows),this._fullRefresh()})),this.register(b.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(k.buffer.y,k.buffer.y,!0))),this.register(j.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(w.window,m),this.register(w.onWindowChange(D=>this._registerIntersectionObserver(D,m)))}_registerIntersectionObserver(u,m){if("IntersectionObserver"in u){const b=new u.IntersectionObserver(S=>this._handleIntersectionChange(S[S.length-1]),{threshold:0});b.observe(m),this._observerDisposable.value=(0,_.toDisposable)(()=>b.disconnect())}}_handleIntersectionChange(u){this._isPaused=u.isIntersecting===void 0?u.intersectionRatio===0:!u.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(u,m,b=!1){this._isPaused?this._needsFullRefresh=!0:(b||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(u,m,this._rowCount))}_renderRows(u,m){this._renderer.value&&(u=Math.min(u,this._rowCount-1),m=Math.min(m,this._rowCount-1),this._renderer.value.renderRows(u,m),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:u,end:m}),this._onRender.fire({start:u,end:m}),this._isNextRenderRedrawOnly=!0)}resize(u,m){this._rowCount=m,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(u){this._renderer.value=u,this._renderer.value&&(this._renderer.value.onRequestRedraw(m=>this.refreshRows(m.start,m.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(u){return this._renderDebouncer.addRefreshCallback(u)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var u,m;this._renderer.value&&((m=(u=this._renderer.value).clearTextureAtlas)==null||m.call(u),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(u,m){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>{var b;return(b=this._renderer.value)==null?void 0:b.handleResize(u,m)}):this._renderer.value.handleResize(u,m),this._fullRefresh())}handleCharSizeChanged(){var u;(u=this._renderer.value)==null||u.handleCharSizeChanged()}handleBlur(){var u;(u=this._renderer.value)==null||u.handleBlur()}handleFocus(){var u;(u=this._renderer.value)==null||u.handleFocus()}handleSelectionChanged(u,m,b){var S;this._selectionState.start=u,this._selectionState.end=m,this._selectionState.columnSelectMode=b,(S=this._renderer.value)==null||S.handleSelectionChanged(u,m,b)}handleCursorMove(){var u;(u=this._renderer.value)==null||u.handleCursorMove()}clear(){var u;(u=this._renderer.value)==null||u.clear()}};o.RenderService=p=h([v(2,f.IOptionsService),v(3,g.ICharSizeService),v(4,f.IDecorationService),v(5,f.IBufferService),v(6,g.ICoreBrowserService),v(7,g.IThemeService)],p)},9312:function(l,o,c){var h=this&&this.__decorate||function(w,j,D,I){var T,A=arguments.length,O=A<3?j:I===null?I=Object.getOwnPropertyDescriptor(j,D):I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(w,j,D,I);else for(var R=w.length-1;R>=0;R--)(T=w[R])&&(O=(A<3?T(O):A>3?T(j,D,O):T(j,D))||O);return A>3&&O&&Object.defineProperty(j,D,O),O},v=this&&this.__param||function(w,j){return function(D,I){j(D,I,w)}};Object.defineProperty(o,"__esModule",{value:!0}),o.SelectionService=void 0;const d=c(9806),g=c(9504),x=c(456),_=c(4725),y=c(8460),f=c(844),p=c(6114),u=c(4841),m=c(511),b=c(2585),S=String.fromCharCode(160),C=new RegExp(S,"g");let k=o.SelectionService=class extends f.Disposable{constructor(w,j,D,I,T,A,O,R,B){super(),this._element=w,this._screenElement=j,this._linkifier=D,this._bufferService=I,this._coreService=T,this._mouseService=A,this._optionsService=O,this._renderService=R,this._coreBrowserService=B,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new m.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new y.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new y.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new y.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new y.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=U=>this._handleMouseMove(U),this._mouseUpListener=U=>this._handleMouseUp(U),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(U=>this._handleTrim(U)),this.register(this._bufferService.buffers.onBufferActivate(U=>this._handleBufferActivate(U))),this.enable(),this._model=new x.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,f.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const w=this._model.finalSelectionStart,j=this._model.finalSelectionEnd;return!(!w||!j||w[0]===j[0]&&w[1]===j[1])}get selectionText(){const w=this._model.finalSelectionStart,j=this._model.finalSelectionEnd;if(!w||!j)return"";const D=this._bufferService.buffer,I=[];if(this._activeSelectionMode===3){if(w[0]===j[0])return"";const T=w[0]<j[0]?w[0]:j[0],A=w[0]<j[0]?j[0]:w[0];for(let O=w[1];O<=j[1];O++){const R=D.translateBufferLineToString(O,!0,T,A);I.push(R)}}else{const T=w[1]===j[1]?j[0]:void 0;I.push(D.translateBufferLineToString(w[1],!0,w[0],T));for(let A=w[1]+1;A<=j[1]-1;A++){const O=D.lines.get(A),R=D.translateBufferLineToString(A,!0);O!=null&&O.isWrapped?I[I.length-1]+=R:I.push(R)}if(w[1]!==j[1]){const A=D.lines.get(j[1]),O=D.translateBufferLineToString(j[1],!0,0,j[0]);A&&A.isWrapped?I[I.length-1]+=O:I.push(O)}}return I.map(T=>T.replace(C," ")).join(p.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(w){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),p.isLinux&&w&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(w){const j=this._getMouseBufferCoords(w),D=this._model.finalSelectionStart,I=this._model.finalSelectionEnd;return!!(D&&I&&j)&&this._areCoordsInSelection(j,D,I)}isCellInSelection(w,j){const D=this._model.finalSelectionStart,I=this._model.finalSelectionEnd;return!(!D||!I)&&this._areCoordsInSelection([w,j],D,I)}_areCoordsInSelection(w,j,D){return w[1]>j[1]&&w[1]<D[1]||j[1]===D[1]&&w[1]===j[1]&&w[0]>=j[0]&&w[0]<D[0]||j[1]<D[1]&&w[1]===D[1]&&w[0]<D[0]||j[1]<D[1]&&w[1]===j[1]&&w[0]>=j[0]}_selectWordAtCursor(w,j){var T,A;const D=(A=(T=this._linkifier.currentLink)==null?void 0:T.link)==null?void 0:A.range;if(D)return this._model.selectionStart=[D.start.x-1,D.start.y-1],this._model.selectionStartLength=(0,u.getRangeLength)(D,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const I=this._getMouseBufferCoords(w);return!!I&&(this._selectWordAt(I,j),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(w,j){this._model.clearSelection(),w=Math.max(w,0),j=Math.min(j,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,w],this._model.selectionEnd=[this._bufferService.cols,j],this.refresh(),this._onSelectionChange.fire()}_handleTrim(w){this._model.handleTrim(w)&&this.refresh()}_getMouseBufferCoords(w){const j=this._mouseService.getCoords(w,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(j)return j[0]--,j[1]--,j[1]+=this._bufferService.buffer.ydisp,j}_getMouseEventScrollAmount(w){let j=(0,d.getCoordsRelativeToElement)(this._coreBrowserService.window,w,this._screenElement)[1];const D=this._renderService.dimensions.css.canvas.height;return j>=0&&j<=D?0:(j>D&&(j-=D),j=Math.min(Math.max(j,-50),50),j/=50,j/Math.abs(j)+Math.round(14*j))}shouldForceSelection(w){return p.isMac?w.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:w.shiftKey}handleMouseDown(w){if(this._mouseDownTimeStamp=w.timeStamp,(w.button!==2||!this.hasSelection)&&w.button===0){if(!this._enabled){if(!this.shouldForceSelection(w))return;w.stopPropagation()}w.preventDefault(),this._dragScrollAmount=0,this._enabled&&w.shiftKey?this._handleIncrementalClick(w):w.detail===1?this._handleSingleClick(w):w.detail===2?this._handleDoubleClick(w):w.detail===3&&this._handleTripleClick(w),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(w){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(w))}_handleSingleClick(w){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(w)?3:0,this._model.selectionStart=this._getMouseBufferCoords(w),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const j=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);j&&j.length!==this._model.selectionStart[0]&&j.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(w){this._selectWordAtCursor(w,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(w){const j=this._getMouseBufferCoords(w);j&&(this._activeSelectionMode=2,this._selectLineAt(j[1]))}shouldColumnSelect(w){return w.altKey&&!(p.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(w){if(w.stopImmediatePropagation(),!this._model.selectionStart)return;const j=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(w),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(w),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const D=this._bufferService.buffer;if(this._model.selectionEnd[1]<D.lines.length){const I=D.lines.get(this._model.selectionEnd[1]);I&&I.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}j&&j[0]===this._model.selectionEnd[0]&&j[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const w=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(w.ydisp+this._bufferService.rows,w.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=w.ydisp),this.refresh()}}_handleMouseUp(w){const j=w.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&j<500&&w.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const D=this._mouseService.getCoords(w,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(D&&D[0]!==void 0&&D[1]!==void 0){const I=(0,g.moveToCellSequence)(D[0]-1,D[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(I,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const w=this._model.finalSelectionStart,j=this._model.finalSelectionEnd,D=!(!w||!j||w[0]===j[0]&&w[1]===j[1]);D?w&&j&&(this._oldSelectionStart&&this._oldSelectionEnd&&w[0]===this._oldSelectionStart[0]&&w[1]===this._oldSelectionStart[1]&&j[0]===this._oldSelectionEnd[0]&&j[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(w,j,D)):this._oldHasSelection&&this._fireOnSelectionChange(w,j,D)}_fireOnSelectionChange(w,j,D){this._oldSelectionStart=w,this._oldSelectionEnd=j,this._oldHasSelection=D,this._onSelectionChange.fire()}_handleBufferActivate(w){this.clearSelection(),this._trimListener.dispose(),this._trimListener=w.activeBuffer.lines.onTrim(j=>this._handleTrim(j))}_convertViewportColToCharacterIndex(w,j){let D=j;for(let I=0;j>=I;I++){const T=w.loadCell(I,this._workCell).getChars().length;this._workCell.getWidth()===0?D--:T>1&&j!==I&&(D+=T-1)}return D}setSelection(w,j,D){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[w,j],this._model.selectionStartLength=D,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(w){this._isClickInSelection(w)||(this._selectWordAtCursor(w,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(w,j,D=!0,I=!0){if(w[0]>=this._bufferService.cols)return;const T=this._bufferService.buffer,A=T.lines.get(w[1]);if(!A)return;const O=T.translateBufferLineToString(w[1],!1);let R=this._convertViewportColToCharacterIndex(A,w[0]),B=R;const U=w[0]-R;let $=0,N=0,P=0,M=0;if(O.charAt(R)===" "){for(;R>0&&O.charAt(R-1)===" ";)R--;for(;B<O.length&&O.charAt(B+1)===" ";)B++}else{let K=w[0],J=w[0];A.getWidth(K)===0&&($++,K--),A.getWidth(J)===2&&(N++,J++);const te=A.getString(J).length;for(te>1&&(M+=te-1,B+=te-1);K>0&&R>0&&!this._isCharWordSeparator(A.loadCell(K-1,this._workCell));){A.loadCell(K-1,this._workCell);const W=this._workCell.getChars().length;this._workCell.getWidth()===0?($++,K--):W>1&&(P+=W-1,R-=W-1),R--,K--}for(;J<A.length&&B+1<O.length&&!this._isCharWordSeparator(A.loadCell(J+1,this._workCell));){A.loadCell(J+1,this._workCell);const W=this._workCell.getChars().length;this._workCell.getWidth()===2?(N++,J++):W>1&&(M+=W-1,B+=W-1),B++,J++}}B++;let F=R+U-$+P,V=Math.min(this._bufferService.cols,B-R+$+N-P-M);if(j||O.slice(R,B).trim()!==""){if(D&&F===0&&A.getCodePoint(0)!==32){const K=T.lines.get(w[1]-1);if(K&&A.isWrapped&&K.getCodePoint(this._bufferService.cols-1)!==32){const J=this._getWordAt([this._bufferService.cols-1,w[1]-1],!1,!0,!1);if(J){const te=this._bufferService.cols-J.start;F-=te,V+=te}}}if(I&&F+V===this._bufferService.cols&&A.getCodePoint(this._bufferService.cols-1)!==32){const K=T.lines.get(w[1]+1);if(K!=null&&K.isWrapped&&K.getCodePoint(0)!==32){const J=this._getWordAt([0,w[1]+1],!1,!1,!0);J&&(V+=J.length)}}return{start:F,length:V}}}_selectWordAt(w,j){const D=this._getWordAt(w,j);if(D){for(;D.start<0;)D.start+=this._bufferService.cols,w[1]--;this._model.selectionStart=[D.start,w[1]],this._model.selectionStartLength=D.length}}_selectToWordAt(w){const j=this._getWordAt(w,!0);if(j){let D=w[1];for(;j.start<0;)j.start+=this._bufferService.cols,D--;if(!this._model.areSelectionValuesReversed())for(;j.start+j.length>this._bufferService.cols;)j.length-=this._bufferService.cols,D++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?j.start:j.start+j.length,D]}}_isCharWordSeparator(w){return w.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(w.getChars())>=0}_selectLineAt(w){const j=this._bufferService.buffer.getWrappedRangeForLine(w),D={start:{x:0,y:j.first},end:{x:this._bufferService.cols-1,y:j.last}};this._model.selectionStart=[0,j.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,u.getRangeLength)(D,this._bufferService.cols)}};o.SelectionService=k=h([v(3,b.IBufferService),v(4,b.ICoreService),v(5,_.IMouseService),v(6,b.IOptionsService),v(7,_.IRenderService),v(8,_.ICoreBrowserService)],k)},4725:(l,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ILinkProviderService=o.IThemeService=o.ICharacterJoinerService=o.ISelectionService=o.IRenderService=o.IMouseService=o.ICoreBrowserService=o.ICharSizeService=void 0;const h=c(8343);o.ICharSizeService=(0,h.createDecorator)("CharSizeService"),o.ICoreBrowserService=(0,h.createDecorator)("CoreBrowserService"),o.IMouseService=(0,h.createDecorator)("MouseService"),o.IRenderService=(0,h.createDecorator)("RenderService"),o.ISelectionService=(0,h.createDecorator)("SelectionService"),o.ICharacterJoinerService=(0,h.createDecorator)("CharacterJoinerService"),o.IThemeService=(0,h.createDecorator)("ThemeService"),o.ILinkProviderService=(0,h.createDecorator)("LinkProviderService")},6731:function(l,o,c){var h=this&&this.__decorate||function(k,w,j,D){var I,T=arguments.length,A=T<3?w:D===null?D=Object.getOwnPropertyDescriptor(w,j):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(k,w,j,D);else for(var O=k.length-1;O>=0;O--)(I=k[O])&&(A=(T<3?I(A):T>3?I(w,j,A):I(w,j))||A);return T>3&&A&&Object.defineProperty(w,j,A),A},v=this&&this.__param||function(k,w){return function(j,D){w(j,D,k)}};Object.defineProperty(o,"__esModule",{value:!0}),o.ThemeService=o.DEFAULT_ANSI_COLORS=void 0;const d=c(7239),g=c(8055),x=c(8460),_=c(844),y=c(2585),f=g.css.toColor("#ffffff"),p=g.css.toColor("#000000"),u=g.css.toColor("#ffffff"),m=g.css.toColor("#000000"),b={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};o.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const k=[g.css.toColor("#2e3436"),g.css.toColor("#cc0000"),g.css.toColor("#4e9a06"),g.css.toColor("#c4a000"),g.css.toColor("#3465a4"),g.css.toColor("#75507b"),g.css.toColor("#06989a"),g.css.toColor("#d3d7cf"),g.css.toColor("#555753"),g.css.toColor("#ef2929"),g.css.toColor("#8ae234"),g.css.toColor("#fce94f"),g.css.toColor("#729fcf"),g.css.toColor("#ad7fa8"),g.css.toColor("#34e2e2"),g.css.toColor("#eeeeec")],w=[0,95,135,175,215,255];for(let j=0;j<216;j++){const D=w[j/36%6|0],I=w[j/6%6|0],T=w[j%6];k.push({css:g.channels.toCss(D,I,T),rgba:g.channels.toRgba(D,I,T)})}for(let j=0;j<24;j++){const D=8+10*j;k.push({css:g.channels.toCss(D,D,D),rgba:g.channels.toRgba(D,D,D)})}return k})());let S=o.ThemeService=class extends _.Disposable{get colors(){return this._colors}constructor(k){super(),this._optionsService=k,this._contrastCache=new d.ColorContrastCache,this._halfContrastCache=new d.ColorContrastCache,this._onChangeColors=this.register(new x.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:f,background:p,cursor:u,cursorAccent:m,selectionForeground:void 0,selectionBackgroundTransparent:b,selectionBackgroundOpaque:g.color.blend(p,b),selectionInactiveBackgroundTransparent:b,selectionInactiveBackgroundOpaque:g.color.blend(p,b),ansi:o.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(k={}){const w=this._colors;if(w.foreground=C(k.foreground,f),w.background=C(k.background,p),w.cursor=C(k.cursor,u),w.cursorAccent=C(k.cursorAccent,m),w.selectionBackgroundTransparent=C(k.selectionBackground,b),w.selectionBackgroundOpaque=g.color.blend(w.background,w.selectionBackgroundTransparent),w.selectionInactiveBackgroundTransparent=C(k.selectionInactiveBackground,w.selectionBackgroundTransparent),w.selectionInactiveBackgroundOpaque=g.color.blend(w.background,w.selectionInactiveBackgroundTransparent),w.selectionForeground=k.selectionForeground?C(k.selectionForeground,g.NULL_COLOR):void 0,w.selectionForeground===g.NULL_COLOR&&(w.selectionForeground=void 0),g.color.isOpaque(w.selectionBackgroundTransparent)&&(w.selectionBackgroundTransparent=g.color.opacity(w.selectionBackgroundTransparent,.3)),g.color.isOpaque(w.selectionInactiveBackgroundTransparent)&&(w.selectionInactiveBackgroundTransparent=g.color.opacity(w.selectionInactiveBackgroundTransparent,.3)),w.ansi=o.DEFAULT_ANSI_COLORS.slice(),w.ansi[0]=C(k.black,o.DEFAULT_ANSI_COLORS[0]),w.ansi[1]=C(k.red,o.DEFAULT_ANSI_COLORS[1]),w.ansi[2]=C(k.green,o.DEFAULT_ANSI_COLORS[2]),w.ansi[3]=C(k.yellow,o.DEFAULT_ANSI_COLORS[3]),w.ansi[4]=C(k.blue,o.DEFAULT_ANSI_COLORS[4]),w.ansi[5]=C(k.magenta,o.DEFAULT_ANSI_COLORS[5]),w.ansi[6]=C(k.cyan,o.DEFAULT_ANSI_COLORS[6]),w.ansi[7]=C(k.white,o.DEFAULT_ANSI_COLORS[7]),w.ansi[8]=C(k.brightBlack,o.DEFAULT_ANSI_COLORS[8]),w.ansi[9]=C(k.brightRed,o.DEFAULT_ANSI_COLORS[9]),w.ansi[10]=C(k.brightGreen,o.DEFAULT_ANSI_COLORS[10]),w.ansi[11]=C(k.brightYellow,o.DEFAULT_ANSI_COLORS[11]),w.ansi[12]=C(k.brightBlue,o.DEFAULT_ANSI_COLORS[12]),w.ansi[13]=C(k.brightMagenta,o.DEFAULT_ANSI_COLORS[13]),w.ansi[14]=C(k.brightCyan,o.DEFAULT_ANSI_COLORS[14]),w.ansi[15]=C(k.brightWhite,o.DEFAULT_ANSI_COLORS[15]),k.extendedAnsi){const j=Math.min(w.ansi.length-16,k.extendedAnsi.length);for(let D=0;D<j;D++)w.ansi[D+16]=C(k.extendedAnsi[D],o.DEFAULT_ANSI_COLORS[D+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(k){this._restoreColor(k),this._onChangeColors.fire(this.colors)}_restoreColor(k){if(k!==void 0)switch(k){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[k]=this._restoreColors.ansi[k]}else for(let w=0;w<this._restoreColors.ansi.length;++w)this._colors.ansi[w]=this._restoreColors.ansi[w]}modifyColors(k){k(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function C(k,w){if(k!==void 0)try{return g.css.toColor(k)}catch{}return w}o.ThemeService=S=h([v(0,y.IOptionsService)],S)},6349:(l,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CircularList=void 0;const h=c(8460),v=c(844);class d extends v.Disposable{constructor(x){super(),this._maxLength=x,this.onDeleteEmitter=this.register(new h.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new h.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new h.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(x){if(this._maxLength===x)return;const _=new Array(x);for(let y=0;y<Math.min(x,this.length);y++)_[y]=this._array[this._getCyclicIndex(y)];this._array=_,this._maxLength=x,this._startIndex=0}get length(){return this._length}set length(x){if(x>this._length)for(let _=this._length;_<x;_++)this._array[_]=void 0;this._length=x}get(x){return this._array[this._getCyclicIndex(x)]}set(x,_){this._array[this._getCyclicIndex(x)]=_}push(x){this._array[this._getCyclicIndex(this._length)]=x,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(x,_,...y){if(_){for(let f=x;f<this._length-_;f++)this._array[this._getCyclicIndex(f)]=this._array[this._getCyclicIndex(f+_)];this._length-=_,this.onDeleteEmitter.fire({index:x,amount:_})}for(let f=this._length-1;f>=x;f--)this._array[this._getCyclicIndex(f+y.length)]=this._array[this._getCyclicIndex(f)];for(let f=0;f<y.length;f++)this._array[this._getCyclicIndex(x+f)]=y[f];if(y.length&&this.onInsertEmitter.fire({index:x,amount:y.length}),this._length+y.length>this._maxLength){const f=this._length+y.length-this._maxLength;this._startIndex+=f,this._length=this._maxLength,this.onTrimEmitter.fire(f)}else this._length+=y.length}trimStart(x){x>this._length&&(x=this._length),this._startIndex+=x,this._length-=x,this.onTrimEmitter.fire(x)}shiftElements(x,_,y){if(!(_<=0)){if(x<0||x>=this._length)throw new Error("start argument out of range");if(x+y<0)throw new Error("Cannot shift elements in list beyond index 0");if(y>0){for(let p=_-1;p>=0;p--)this.set(x+p+y,this.get(x+p));const f=x+_+y-this._length;if(f>0)for(this._length+=f;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let f=0;f<_;f++)this.set(x+f+y,this.get(x+f))}}_getCyclicIndex(x){return(this._startIndex+x)%this._maxLength}}o.CircularList=d},1439:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.clone=void 0,o.clone=function c(h,v=5){if(typeof h!="object")return h;const d=Array.isArray(h)?[]:{};for(const g in h)d[g]=v<=1?h[g]:h[g]&&c(h[g],v-1);return d}},8055:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.contrastRatio=o.toPaddedHex=o.rgba=o.rgb=o.css=o.color=o.channels=o.NULL_COLOR=void 0;let c=0,h=0,v=0,d=0;var g,x,_,y,f;function p(m){const b=m.toString(16);return b.length<2?"0"+b:b}function u(m,b){return m<b?(b+.05)/(m+.05):(m+.05)/(b+.05)}o.NULL_COLOR={css:"#00000000",rgba:0},function(m){m.toCss=function(b,S,C,k){return k!==void 0?`#${p(b)}${p(S)}${p(C)}${p(k)}`:`#${p(b)}${p(S)}${p(C)}`},m.toRgba=function(b,S,C,k=255){return(b<<24|S<<16|C<<8|k)>>>0},m.toColor=function(b,S,C,k){return{css:m.toCss(b,S,C,k),rgba:m.toRgba(b,S,C,k)}}}(g||(o.channels=g={})),function(m){function b(S,C){return d=Math.round(255*C),[c,h,v]=f.toChannels(S.rgba),{css:g.toCss(c,h,v,d),rgba:g.toRgba(c,h,v,d)}}m.blend=function(S,C){if(d=(255&C.rgba)/255,d===1)return{css:C.css,rgba:C.rgba};const k=C.rgba>>24&255,w=C.rgba>>16&255,j=C.rgba>>8&255,D=S.rgba>>24&255,I=S.rgba>>16&255,T=S.rgba>>8&255;return c=D+Math.round((k-D)*d),h=I+Math.round((w-I)*d),v=T+Math.round((j-T)*d),{css:g.toCss(c,h,v),rgba:g.toRgba(c,h,v)}},m.isOpaque=function(S){return(255&S.rgba)==255},m.ensureContrastRatio=function(S,C,k){const w=f.ensureContrastRatio(S.rgba,C.rgba,k);if(w)return g.toColor(w>>24&255,w>>16&255,w>>8&255)},m.opaque=function(S){const C=(255|S.rgba)>>>0;return[c,h,v]=f.toChannels(C),{css:g.toCss(c,h,v),rgba:C}},m.opacity=b,m.multiplyOpacity=function(S,C){return d=255&S.rgba,b(S,d*C/255)},m.toColorRGB=function(S){return[S.rgba>>24&255,S.rgba>>16&255,S.rgba>>8&255]}}(x||(o.color=x={})),function(m){let b,S;try{const C=document.createElement("canvas");C.width=1,C.height=1;const k=C.getContext("2d",{willReadFrequently:!0});k&&(b=k,b.globalCompositeOperation="copy",S=b.createLinearGradient(0,0,1,1))}catch{}m.toColor=function(C){if(C.match(/#[\da-f]{3,8}/i))switch(C.length){case 4:return c=parseInt(C.slice(1,2).repeat(2),16),h=parseInt(C.slice(2,3).repeat(2),16),v=parseInt(C.slice(3,4).repeat(2),16),g.toColor(c,h,v);case 5:return c=parseInt(C.slice(1,2).repeat(2),16),h=parseInt(C.slice(2,3).repeat(2),16),v=parseInt(C.slice(3,4).repeat(2),16),d=parseInt(C.slice(4,5).repeat(2),16),g.toColor(c,h,v,d);case 7:return{css:C,rgba:(parseInt(C.slice(1),16)<<8|255)>>>0};case 9:return{css:C,rgba:parseInt(C.slice(1),16)>>>0}}const k=C.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(k)return c=parseInt(k[1]),h=parseInt(k[2]),v=parseInt(k[3]),d=Math.round(255*(k[5]===void 0?1:parseFloat(k[5]))),g.toColor(c,h,v,d);if(!b||!S)throw new Error("css.toColor: Unsupported css format");if(b.fillStyle=S,b.fillStyle=C,typeof b.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(b.fillRect(0,0,1,1),[c,h,v,d]=b.getImageData(0,0,1,1).data,d!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:g.toRgba(c,h,v,d),css:C}}}(_||(o.css=_={})),function(m){function b(S,C,k){const w=S/255,j=C/255,D=k/255;return .2126*(w<=.03928?w/12.92:Math.pow((w+.055)/1.055,2.4))+.7152*(j<=.03928?j/12.92:Math.pow((j+.055)/1.055,2.4))+.0722*(D<=.03928?D/12.92:Math.pow((D+.055)/1.055,2.4))}m.relativeLuminance=function(S){return b(S>>16&255,S>>8&255,255&S)},m.relativeLuminance2=b}(y||(o.rgb=y={})),function(m){function b(C,k,w){const j=C>>24&255,D=C>>16&255,I=C>>8&255;let T=k>>24&255,A=k>>16&255,O=k>>8&255,R=u(y.relativeLuminance2(T,A,O),y.relativeLuminance2(j,D,I));for(;R<w&&(T>0||A>0||O>0);)T-=Math.max(0,Math.ceil(.1*T)),A-=Math.max(0,Math.ceil(.1*A)),O-=Math.max(0,Math.ceil(.1*O)),R=u(y.relativeLuminance2(T,A,O),y.relativeLuminance2(j,D,I));return(T<<24|A<<16|O<<8|255)>>>0}function S(C,k,w){const j=C>>24&255,D=C>>16&255,I=C>>8&255;let T=k>>24&255,A=k>>16&255,O=k>>8&255,R=u(y.relativeLuminance2(T,A,O),y.relativeLuminance2(j,D,I));for(;R<w&&(T<255||A<255||O<255);)T=Math.min(255,T+Math.ceil(.1*(255-T))),A=Math.min(255,A+Math.ceil(.1*(255-A))),O=Math.min(255,O+Math.ceil(.1*(255-O))),R=u(y.relativeLuminance2(T,A,O),y.relativeLuminance2(j,D,I));return(T<<24|A<<16|O<<8|255)>>>0}m.blend=function(C,k){if(d=(255&k)/255,d===1)return k;const w=k>>24&255,j=k>>16&255,D=k>>8&255,I=C>>24&255,T=C>>16&255,A=C>>8&255;return c=I+Math.round((w-I)*d),h=T+Math.round((j-T)*d),v=A+Math.round((D-A)*d),g.toRgba(c,h,v)},m.ensureContrastRatio=function(C,k,w){const j=y.relativeLuminance(C>>8),D=y.relativeLuminance(k>>8);if(u(j,D)<w){if(D<j){const A=b(C,k,w),O=u(j,y.relativeLuminance(A>>8));if(O<w){const R=S(C,k,w);return O>u(j,y.relativeLuminance(R>>8))?A:R}return A}const I=S(C,k,w),T=u(j,y.relativeLuminance(I>>8));if(T<w){const A=b(C,k,w);return T>u(j,y.relativeLuminance(A>>8))?I:A}return I}},m.reduceLuminance=b,m.increaseLuminance=S,m.toChannels=function(C){return[C>>24&255,C>>16&255,C>>8&255,255&C]}}(f||(o.rgba=f={})),o.toPaddedHex=p,o.contrastRatio=u},8969:(l,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CoreTerminal=void 0;const h=c(844),v=c(2585),d=c(4348),g=c(7866),x=c(744),_=c(7302),y=c(6975),f=c(8460),p=c(1753),u=c(1480),m=c(7994),b=c(9282),S=c(5435),C=c(5981),k=c(2660);let w=!1;class j extends h.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new f.EventEmitter),this._onScroll.event(I=>{var T;(T=this._onScrollApi)==null||T.fire(I.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(I){for(const T in I)this.optionsService.options[T]=I[T]}constructor(I){super(),this._windowsWrappingHeuristics=this.register(new h.MutableDisposable),this._onBinary=this.register(new f.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new f.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new f.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new f.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new f.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new f.EventEmitter),this._instantiationService=new d.InstantiationService,this.optionsService=this.register(new _.OptionsService(I)),this._instantiationService.setService(v.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(x.BufferService)),this._instantiationService.setService(v.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(g.LogService)),this._instantiationService.setService(v.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(y.CoreService)),this._instantiationService.setService(v.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(p.CoreMouseService)),this._instantiationService.setService(v.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(u.UnicodeService)),this._instantiationService.setService(v.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(m.CharsetService),this._instantiationService.setService(v.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(k.OscLinkService),this._instantiationService.setService(v.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new S.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,f.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,f.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,f.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,f.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new C.WriteBuffer((T,A)=>this._inputHandler.parse(T,A))),this.register((0,f.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(I,T){this._writeBuffer.write(I,T)}writeSync(I,T){this._logService.logLevel<=v.LogLevelEnum.WARN&&!w&&(this._logService.warn("writeSync is unreliable and will be removed soon."),w=!0),this._writeBuffer.writeSync(I,T)}input(I,T=!0){this.coreService.triggerDataEvent(I,T)}resize(I,T){isNaN(I)||isNaN(T)||(I=Math.max(I,x.MINIMUM_COLS),T=Math.max(T,x.MINIMUM_ROWS),this._bufferService.resize(I,T))}scroll(I,T=!1){this._bufferService.scroll(I,T)}scrollLines(I,T,A){this._bufferService.scrollLines(I,T,A)}scrollPages(I){this.scrollLines(I*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(I){const T=I-this._bufferService.buffer.ydisp;T!==0&&this.scrollLines(T)}registerEscHandler(I,T){return this._inputHandler.registerEscHandler(I,T)}registerDcsHandler(I,T){return this._inputHandler.registerDcsHandler(I,T)}registerCsiHandler(I,T){return this._inputHandler.registerCsiHandler(I,T)}registerOscHandler(I,T){return this._inputHandler.registerOscHandler(I,T)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let I=!1;const T=this.optionsService.rawOptions.windowsPty;T&&T.buildNumber!==void 0&&T.buildNumber!==void 0?I=T.backend==="conpty"&&T.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(I=!0),I?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const I=[];I.push(this.onLineFeed(b.updateWindowsModeWrappedState.bind(null,this._bufferService))),I.push(this.registerCsiHandler({final:"H"},()=>((0,b.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,h.toDisposable)(()=>{for(const T of I)T.dispose()})}}}o.CoreTerminal=j},8460:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.runAndSubscribe=o.forwardEvent=o.EventEmitter=void 0,o.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=c=>(this._listeners.push(c),{dispose:()=>{if(!this._disposed){for(let h=0;h<this._listeners.length;h++)if(this._listeners[h]===c)return void this._listeners.splice(h,1)}}})),this._event}fire(c,h){const v=[];for(let d=0;d<this._listeners.length;d++)v.push(this._listeners[d]);for(let d=0;d<v.length;d++)v[d].call(void 0,c,h)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},o.forwardEvent=function(c,h){return c(v=>h.fire(v))},o.runAndSubscribe=function(c,h){return h(void 0),c(v=>h(v))}},5435:function(l,o,c){var h=this&&this.__decorate||function($,N,P,M){var F,V=arguments.length,K=V<3?N:M===null?M=Object.getOwnPropertyDescriptor(N,P):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")K=Reflect.decorate($,N,P,M);else for(var J=$.length-1;J>=0;J--)(F=$[J])&&(K=(V<3?F(K):V>3?F(N,P,K):F(N,P))||K);return V>3&&K&&Object.defineProperty(N,P,K),K},v=this&&this.__param||function($,N){return function(P,M){N(P,M,$)}};Object.defineProperty(o,"__esModule",{value:!0}),o.InputHandler=o.WindowsOptionsReportType=void 0;const d=c(2584),g=c(7116),x=c(2015),_=c(844),y=c(482),f=c(8437),p=c(8460),u=c(643),m=c(511),b=c(3734),S=c(2585),C=c(1480),k=c(6242),w=c(6351),j=c(5941),D={"(":0,")":1,"*":2,"+":3,"-":1,".":2},I=131072;function T($,N){if($>24)return N.setWinLines||!1;switch($){case 1:return!!N.restoreWin;case 2:return!!N.minimizeWin;case 3:return!!N.setWinPosition;case 4:return!!N.setWinSizePixels;case 5:return!!N.raiseWin;case 6:return!!N.lowerWin;case 7:return!!N.refreshWin;case 8:return!!N.setWinSizeChars;case 9:return!!N.maximizeWin;case 10:return!!N.fullscreenWin;case 11:return!!N.getWinState;case 13:return!!N.getWinPosition;case 14:return!!N.getWinSizePixels;case 15:return!!N.getScreenSizePixels;case 16:return!!N.getCellSizePixels;case 18:return!!N.getWinSizeChars;case 19:return!!N.getScreenSizeChars;case 20:return!!N.getIconTitle;case 21:return!!N.getWinTitle;case 22:return!!N.pushTitle;case 23:return!!N.popTitle;case 24:return!!N.setWinLines}return!1}var A;(function($){$[$.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",$[$.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(A||(o.WindowsOptionsReportType=A={}));let O=0;class R extends _.Disposable{getAttrData(){return this._curAttrData}constructor(N,P,M,F,V,K,J,te,W=new x.EscapeSequenceParser){super(),this._bufferService=N,this._charsetService=P,this._coreService=M,this._logService=F,this._optionsService=V,this._oscLinkService=K,this._coreMouseService=J,this._unicodeService=te,this._parser=W,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new y.StringToUtf32,this._utf8Decoder=new y.Utf8ToUtf32,this._workCell=new m.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=f.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=f.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new p.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new p.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new p.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new p.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new p.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new p.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new p.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new p.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new p.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new p.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new p.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new p.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new p.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new B(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(L=>this._activeBuffer=L.activeBuffer)),this._parser.setCsiHandlerFallback((L,q)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(L),params:q.toArray()})}),this._parser.setEscHandlerFallback(L=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(L)})}),this._parser.setExecuteHandlerFallback(L=>{this._logService.debug("Unknown EXECUTE code: ",{code:L})}),this._parser.setOscHandlerFallback((L,q,z)=>{this._logService.debug("Unknown OSC code: ",{identifier:L,action:q,data:z})}),this._parser.setDcsHandlerFallback((L,q,z)=>{q==="HOOK"&&(z=z.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(L),action:q,payload:z})}),this._parser.setPrintHandler((L,q,z)=>this.print(L,q,z)),this._parser.registerCsiHandler({final:"@"},L=>this.insertChars(L)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},L=>this.scrollLeft(L)),this._parser.registerCsiHandler({final:"A"},L=>this.cursorUp(L)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},L=>this.scrollRight(L)),this._parser.registerCsiHandler({final:"B"},L=>this.cursorDown(L)),this._parser.registerCsiHandler({final:"C"},L=>this.cursorForward(L)),this._parser.registerCsiHandler({final:"D"},L=>this.cursorBackward(L)),this._parser.registerCsiHandler({final:"E"},L=>this.cursorNextLine(L)),this._parser.registerCsiHandler({final:"F"},L=>this.cursorPrecedingLine(L)),this._parser.registerCsiHandler({final:"G"},L=>this.cursorCharAbsolute(L)),this._parser.registerCsiHandler({final:"H"},L=>this.cursorPosition(L)),this._parser.registerCsiHandler({final:"I"},L=>this.cursorForwardTab(L)),this._parser.registerCsiHandler({final:"J"},L=>this.eraseInDisplay(L,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},L=>this.eraseInDisplay(L,!0)),this._parser.registerCsiHandler({final:"K"},L=>this.eraseInLine(L,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},L=>this.eraseInLine(L,!0)),this._parser.registerCsiHandler({final:"L"},L=>this.insertLines(L)),this._parser.registerCsiHandler({final:"M"},L=>this.deleteLines(L)),this._parser.registerCsiHandler({final:"P"},L=>this.deleteChars(L)),this._parser.registerCsiHandler({final:"S"},L=>this.scrollUp(L)),this._parser.registerCsiHandler({final:"T"},L=>this.scrollDown(L)),this._parser.registerCsiHandler({final:"X"},L=>this.eraseChars(L)),this._parser.registerCsiHandler({final:"Z"},L=>this.cursorBackwardTab(L)),this._parser.registerCsiHandler({final:"`"},L=>this.charPosAbsolute(L)),this._parser.registerCsiHandler({final:"a"},L=>this.hPositionRelative(L)),this._parser.registerCsiHandler({final:"b"},L=>this.repeatPrecedingCharacter(L)),this._parser.registerCsiHandler({final:"c"},L=>this.sendDeviceAttributesPrimary(L)),this._parser.registerCsiHandler({prefix:">",final:"c"},L=>this.sendDeviceAttributesSecondary(L)),this._parser.registerCsiHandler({final:"d"},L=>this.linePosAbsolute(L)),this._parser.registerCsiHandler({final:"e"},L=>this.vPositionRelative(L)),this._parser.registerCsiHandler({final:"f"},L=>this.hVPosition(L)),this._parser.registerCsiHandler({final:"g"},L=>this.tabClear(L)),this._parser.registerCsiHandler({final:"h"},L=>this.setMode(L)),this._parser.registerCsiHandler({prefix:"?",final:"h"},L=>this.setModePrivate(L)),this._parser.registerCsiHandler({final:"l"},L=>this.resetMode(L)),this._parser.registerCsiHandler({prefix:"?",final:"l"},L=>this.resetModePrivate(L)),this._parser.registerCsiHandler({final:"m"},L=>this.charAttributes(L)),this._parser.registerCsiHandler({final:"n"},L=>this.deviceStatus(L)),this._parser.registerCsiHandler({prefix:"?",final:"n"},L=>this.deviceStatusPrivate(L)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},L=>this.softReset(L)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},L=>this.setCursorStyle(L)),this._parser.registerCsiHandler({final:"r"},L=>this.setScrollRegion(L)),this._parser.registerCsiHandler({final:"s"},L=>this.saveCursor(L)),this._parser.registerCsiHandler({final:"t"},L=>this.windowOptions(L)),this._parser.registerCsiHandler({final:"u"},L=>this.restoreCursor(L)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},L=>this.insertColumns(L)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},L=>this.deleteColumns(L)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},L=>this.selectProtected(L)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},L=>this.requestMode(L,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},L=>this.requestMode(L,!1)),this._parser.setExecuteHandler(d.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(d.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(d.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(d.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(d.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(d.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(d.C1.IND,()=>this.index()),this._parser.setExecuteHandler(d.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(d.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new k.OscHandler(L=>(this.setTitle(L),this.setIconName(L),!0))),this._parser.registerOscHandler(1,new k.OscHandler(L=>this.setIconName(L))),this._parser.registerOscHandler(2,new k.OscHandler(L=>this.setTitle(L))),this._parser.registerOscHandler(4,new k.OscHandler(L=>this.setOrReportIndexedColor(L))),this._parser.registerOscHandler(8,new k.OscHandler(L=>this.setHyperlink(L))),this._parser.registerOscHandler(10,new k.OscHandler(L=>this.setOrReportFgColor(L))),this._parser.registerOscHandler(11,new k.OscHandler(L=>this.setOrReportBgColor(L))),this._parser.registerOscHandler(12,new k.OscHandler(L=>this.setOrReportCursorColor(L))),this._parser.registerOscHandler(104,new k.OscHandler(L=>this.restoreIndexedColor(L))),this._parser.registerOscHandler(110,new k.OscHandler(L=>this.restoreFgColor(L))),this._parser.registerOscHandler(111,new k.OscHandler(L=>this.restoreBgColor(L))),this._parser.registerOscHandler(112,new k.OscHandler(L=>this.restoreCursorColor(L))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const L in g.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:L},()=>this.selectCharset("("+L)),this._parser.registerEscHandler({intermediates:")",final:L},()=>this.selectCharset(")"+L)),this._parser.registerEscHandler({intermediates:"*",final:L},()=>this.selectCharset("*"+L)),this._parser.registerEscHandler({intermediates:"+",final:L},()=>this.selectCharset("+"+L)),this._parser.registerEscHandler({intermediates:"-",final:L},()=>this.selectCharset("-"+L)),this._parser.registerEscHandler({intermediates:".",final:L},()=>this.selectCharset("."+L)),this._parser.registerEscHandler({intermediates:"/",final:L},()=>this.selectCharset("/"+L));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(L=>(this._logService.error("Parsing error: ",L),L)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new w.DcsHandler((L,q)=>this.requestStatusString(L,q)))}_preserveStack(N,P,M,F){this._parseStack.paused=!0,this._parseStack.cursorStartX=N,this._parseStack.cursorStartY=P,this._parseStack.decodedLength=M,this._parseStack.position=F}_logSlowResolvingAsync(N){this._logService.logLevel<=S.LogLevelEnum.WARN&&Promise.race([N,new Promise((P,M)=>setTimeout(()=>M("#SLOW_TIMEOUT"),5e3))]).catch(P=>{if(P!=="#SLOW_TIMEOUT")throw P;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(N,P){let M,F=this._activeBuffer.x,V=this._activeBuffer.y,K=0;const J=this._parseStack.paused;if(J){if(M=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,P))return this._logSlowResolvingAsync(M),M;F=this._parseStack.cursorStartX,V=this._parseStack.cursorStartY,this._parseStack.paused=!1,N.length>I&&(K=this._parseStack.position+I)}if(this._logService.logLevel<=S.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof N=="string"?` "${N}"`:` "${Array.prototype.map.call(N,L=>String.fromCharCode(L)).join("")}"`),typeof N=="string"?N.split("").map(L=>L.charCodeAt(0)):N),this._parseBuffer.length<N.length&&this._parseBuffer.length<I&&(this._parseBuffer=new Uint32Array(Math.min(N.length,I))),J||this._dirtyRowTracker.clearRange(),N.length>I)for(let L=K;L<N.length;L+=I){const q=L+I<N.length?L+I:N.length,z=typeof N=="string"?this._stringDecoder.decode(N.substring(L,q),this._parseBuffer):this._utf8Decoder.decode(N.subarray(L,q),this._parseBuffer);if(M=this._parser.parse(this._parseBuffer,z))return this._preserveStack(F,V,z,L),this._logSlowResolvingAsync(M),M}else if(!J){const L=typeof N=="string"?this._stringDecoder.decode(N,this._parseBuffer):this._utf8Decoder.decode(N,this._parseBuffer);if(M=this._parser.parse(this._parseBuffer,L))return this._preserveStack(F,V,L,0),this._logSlowResolvingAsync(M),M}this._activeBuffer.x===F&&this._activeBuffer.y===V||this._onCursorMove.fire();const te=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),W=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);W<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(W,this._bufferService.rows-1),Math.min(te,this._bufferService.rows-1))}print(N,P,M){let F,V;const K=this._charsetService.charset,J=this._optionsService.rawOptions.screenReaderMode,te=this._bufferService.cols,W=this._coreService.decPrivateModes.wraparound,L=this._coreService.modes.insertMode,q=this._curAttrData;let z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&M-P>0&&z.getWidth(this._activeBuffer.x-1)===2&&z.setCellFromCodepoint(this._activeBuffer.x-1,0,1,q);let X=this._parser.precedingJoinState;for(let Y=P;Y<M;++Y){if(F=N[Y],F<127&&K){const Be=K[String.fromCharCode(F)];Be&&(F=Be.charCodeAt(0))}const ce=this._unicodeService.charProperties(F,X);V=C.UnicodeService.extractWidth(ce);const xe=C.UnicodeService.extractShouldJoin(ce),we=xe?C.UnicodeService.extractWidth(X):0;if(X=ce,J&&this._onA11yChar.fire((0,y.stringFromCodePoint)(F)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+V-we>te){if(W){const Be=z;let le=this._activeBuffer.x-we;for(this._activeBuffer.x=we,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),we>0&&z instanceof f.BufferLine&&z.copyCellsFrom(Be,le,0,we,!1);le<te;)Be.setCellFromCodepoint(le++,0,1,q)}else if(this._activeBuffer.x=te-1,V===2)continue}if(xe&&this._activeBuffer.x){const Be=z.getWidth(this._activeBuffer.x-1)?1:2;z.addCodepointToCell(this._activeBuffer.x-Be,F,V);for(let le=V-we;--le>=0;)z.setCellFromCodepoint(this._activeBuffer.x++,0,0,q)}else if(L&&(z.insertCells(this._activeBuffer.x,V-we,this._activeBuffer.getNullCell(q)),z.getWidth(te-1)===2&&z.setCellFromCodepoint(te-1,u.NULL_CELL_CODE,u.NULL_CELL_WIDTH,q)),z.setCellFromCodepoint(this._activeBuffer.x++,F,V,q),V>0)for(;--V;)z.setCellFromCodepoint(this._activeBuffer.x++,0,0,q)}this._parser.precedingJoinState=X,this._activeBuffer.x<te&&M-P>0&&z.getWidth(this._activeBuffer.x)===0&&!z.hasContent(this._activeBuffer.x)&&z.setCellFromCodepoint(this._activeBuffer.x,0,1,q),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(N,P){return N.final!=="t"||N.prefix||N.intermediates?this._parser.registerCsiHandler(N,P):this._parser.registerCsiHandler(N,M=>!T(M.params[0],this._optionsService.rawOptions.windowOptions)||P(M))}registerDcsHandler(N,P){return this._parser.registerDcsHandler(N,new w.DcsHandler(P))}registerEscHandler(N,P){return this._parser.registerEscHandler(N,P)}registerOscHandler(N,P){return this._parser.registerOscHandler(N,new k.OscHandler(P))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var N;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((N=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&N.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);P.hasWidth(this._activeBuffer.x)&&!P.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const N=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-N),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(N=this._bufferService.cols-1){this._activeBuffer.x=Math.min(N,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(N,P){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=N,this._activeBuffer.y=this._activeBuffer.scrollTop+P):(this._activeBuffer.x=N,this._activeBuffer.y=P),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(N,P){this._restrictCursor(),this._setCursor(this._activeBuffer.x+N,this._activeBuffer.y+P)}cursorUp(N){const P=this._activeBuffer.y-this._activeBuffer.scrollTop;return P>=0?this._moveCursor(0,-Math.min(P,N.params[0]||1)):this._moveCursor(0,-(N.params[0]||1)),!0}cursorDown(N){const P=this._activeBuffer.scrollBottom-this._activeBuffer.y;return P>=0?this._moveCursor(0,Math.min(P,N.params[0]||1)):this._moveCursor(0,N.params[0]||1),!0}cursorForward(N){return this._moveCursor(N.params[0]||1,0),!0}cursorBackward(N){return this._moveCursor(-(N.params[0]||1),0),!0}cursorNextLine(N){return this.cursorDown(N),this._activeBuffer.x=0,!0}cursorPrecedingLine(N){return this.cursorUp(N),this._activeBuffer.x=0,!0}cursorCharAbsolute(N){return this._setCursor((N.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(N){return this._setCursor(N.length>=2?(N.params[1]||1)-1:0,(N.params[0]||1)-1),!0}charPosAbsolute(N){return this._setCursor((N.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(N){return this._moveCursor(N.params[0]||1,0),!0}linePosAbsolute(N){return this._setCursor(this._activeBuffer.x,(N.params[0]||1)-1),!0}vPositionRelative(N){return this._moveCursor(0,N.params[0]||1),!0}hVPosition(N){return this.cursorPosition(N),!0}tabClear(N){const P=N.params[0];return P===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:P===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(N){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let P=N.params[0]||1;for(;P--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(N){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let P=N.params[0]||1;for(;P--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(N){const P=N.params[0];return P===1&&(this._curAttrData.bg|=536870912),P!==2&&P!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(N,P,M,F=!1,V=!1){const K=this._activeBuffer.lines.get(this._activeBuffer.ybase+N);K.replaceCells(P,M,this._activeBuffer.getNullCell(this._eraseAttrData()),V),F&&(K.isWrapped=!1)}_resetBufferLine(N,P=!1){const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+N);M&&(M.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),P),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+N),M.isWrapped=!1)}eraseInDisplay(N,P=!1){let M;switch(this._restrictCursor(this._bufferService.cols),N.params[0]){case 0:for(M=this._activeBuffer.y,this._dirtyRowTracker.markDirty(M),this._eraseInBufferLine(M++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,P);M<this._bufferService.rows;M++)this._resetBufferLine(M,P);this._dirtyRowTracker.markDirty(M);break;case 1:for(M=this._activeBuffer.y,this._dirtyRowTracker.markDirty(M),this._eraseInBufferLine(M,0,this._activeBuffer.x+1,!0,P),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(M+1).isWrapped=!1);M--;)this._resetBufferLine(M,P);this._dirtyRowTracker.markDirty(0);break;case 2:for(M=this._bufferService.rows,this._dirtyRowTracker.markDirty(M-1);M--;)this._resetBufferLine(M,P);this._dirtyRowTracker.markDirty(0);break;case 3:const F=this._activeBuffer.lines.length-this._bufferService.rows;F>0&&(this._activeBuffer.lines.trimStart(F),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-F,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-F,0),this._onScroll.fire(0))}return!0}eraseInLine(N,P=!1){switch(this._restrictCursor(this._bufferService.cols),N.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,P);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,P);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,P)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(N){this._restrictCursor();let P=N.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=this._activeBuffer.ybase+this._activeBuffer.y,F=this._bufferService.rows-1-this._activeBuffer.scrollBottom,V=this._bufferService.rows-1+this._activeBuffer.ybase-F+1;for(;P--;)this._activeBuffer.lines.splice(V-1,1),this._activeBuffer.lines.splice(M,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(N){this._restrictCursor();let P=N.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=this._activeBuffer.ybase+this._activeBuffer.y;let F;for(F=this._bufferService.rows-1-this._activeBuffer.scrollBottom,F=this._bufferService.rows-1+this._activeBuffer.ybase-F;P--;)this._activeBuffer.lines.splice(M,1),this._activeBuffer.lines.splice(F,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(N){this._restrictCursor();const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return P&&(P.insertCells(this._activeBuffer.x,N.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(N){this._restrictCursor();const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return P&&(P.deleteCells(this._activeBuffer.x,N.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(N){let P=N.params[0]||1;for(;P--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(N){let P=N.params[0]||1;for(;P--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(f.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(N){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=N.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);F.deleteCells(0,P,this._activeBuffer.getNullCell(this._eraseAttrData())),F.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(N){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=N.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);F.insertCells(0,P,this._activeBuffer.getNullCell(this._eraseAttrData())),F.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(N){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=N.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);F.insertCells(this._activeBuffer.x,P,this._activeBuffer.getNullCell(this._eraseAttrData())),F.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(N){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=N.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);F.deleteCells(this._activeBuffer.x,P,this._activeBuffer.getNullCell(this._eraseAttrData())),F.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(N){this._restrictCursor();const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return P&&(P.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(N.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(N){const P=this._parser.precedingJoinState;if(!P)return!0;const M=N.params[0]||1,F=C.UnicodeService.extractWidth(P),V=this._activeBuffer.x-F,K=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(V),J=new Uint32Array(K.length*M);let te=0;for(let L=0;L<K.length;){const q=K.codePointAt(L)||0;J[te++]=q,L+=q>65535?2:1}let W=te;for(let L=1;L<M;++L)J.copyWithin(W,0,te),W+=te;return this.print(J,0,W),!0}sendDeviceAttributesPrimary(N){return N.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(d.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(d.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(N){return N.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(d.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(d.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(N.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(d.C0.ESC+"[>83;40003;0c")),!0}_is(N){return(this._optionsService.rawOptions.termName+"").indexOf(N)===0}setMode(N){for(let P=0;P<N.length;P++)switch(N.params[P]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(N){for(let P=0;P<N.length;P++)switch(N.params[P]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),this._charsetService.setgCharset(1,g.DEFAULT_CHARSET),this._charsetService.setgCharset(2,g.DEFAULT_CHARSET),this._charsetService.setgCharset(3,g.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(N){for(let P=0;P<N.length;P++)switch(N.params[P]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(N){for(let P=0;P<N.length;P++)switch(N.params[P]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),N.params[P]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(N,P){const M=this._coreService.decPrivateModes,{activeProtocol:F,activeEncoding:V}=this._coreMouseService,K=this._coreService,{buffers:J,cols:te}=this._bufferService,{active:W,alt:L}=J,q=this._optionsService.rawOptions,z=xe=>xe?1:2,X=N.params[0];return Y=X,ce=P?X===2?4:X===4?z(K.modes.insertMode):X===12?3:X===20?z(q.convertEol):0:X===1?z(M.applicationCursorKeys):X===3?q.windowOptions.setWinLines?te===80?2:te===132?1:0:0:X===6?z(M.origin):X===7?z(M.wraparound):X===8?3:X===9?z(F==="X10"):X===12?z(q.cursorBlink):X===25?z(!K.isCursorHidden):X===45?z(M.reverseWraparound):X===66?z(M.applicationKeypad):X===67?4:X===1e3?z(F==="VT200"):X===1002?z(F==="DRAG"):X===1003?z(F==="ANY"):X===1004?z(M.sendFocus):X===1005?4:X===1006?z(V==="SGR"):X===1015?4:X===1016?z(V==="SGR_PIXELS"):X===1048?1:X===47||X===1047||X===1049?z(W===L):X===2004?z(M.bracketedPasteMode):0,K.triggerDataEvent(`${d.C0.ESC}[${P?"":"?"}${Y};${ce}$y`),!0;var Y,ce}_updateAttrColor(N,P,M,F,V){return P===2?(N|=50331648,N&=-16777216,N|=b.AttributeData.fromColorRGB([M,F,V])):P===5&&(N&=-50331904,N|=33554432|255&M),N}_extractColor(N,P,M){const F=[0,0,-1,0,0,0];let V=0,K=0;do{if(F[K+V]=N.params[P+K],N.hasSubParams(P+K)){const J=N.getSubParams(P+K);let te=0;do F[1]===5&&(V=1),F[K+te+1+V]=J[te];while(++te<J.length&&te+K+1+V<F.length);break}if(F[1]===5&&K+V>=2||F[1]===2&&K+V>=5)break;F[1]&&(V=1)}while(++K+P<N.length&&K+V<F.length);for(let J=2;J<F.length;++J)F[J]===-1&&(F[J]=0);switch(F[0]){case 38:M.fg=this._updateAttrColor(M.fg,F[1],F[3],F[4],F[5]);break;case 48:M.bg=this._updateAttrColor(M.bg,F[1],F[3],F[4],F[5]);break;case 58:M.extended=M.extended.clone(),M.extended.underlineColor=this._updateAttrColor(M.extended.underlineColor,F[1],F[3],F[4],F[5])}return K}_processUnderline(N,P){P.extended=P.extended.clone(),(!~N||N>5)&&(N=1),P.extended.underlineStyle=N,P.fg|=268435456,N===0&&(P.fg&=-268435457),P.updateExtended()}_processSGR0(N){N.fg=f.DEFAULT_ATTR_DATA.fg,N.bg=f.DEFAULT_ATTR_DATA.bg,N.extended=N.extended.clone(),N.extended.underlineStyle=0,N.extended.underlineColor&=-67108864,N.updateExtended()}charAttributes(N){if(N.length===1&&N.params[0]===0)return this._processSGR0(this._curAttrData),!0;const P=N.length;let M;const F=this._curAttrData;for(let V=0;V<P;V++)M=N.params[V],M>=30&&M<=37?(F.fg&=-50331904,F.fg|=16777216|M-30):M>=40&&M<=47?(F.bg&=-50331904,F.bg|=16777216|M-40):M>=90&&M<=97?(F.fg&=-50331904,F.fg|=16777224|M-90):M>=100&&M<=107?(F.bg&=-50331904,F.bg|=16777224|M-100):M===0?this._processSGR0(F):M===1?F.fg|=134217728:M===3?F.bg|=67108864:M===4?(F.fg|=268435456,this._processUnderline(N.hasSubParams(V)?N.getSubParams(V)[0]:1,F)):M===5?F.fg|=536870912:M===7?F.fg|=67108864:M===8?F.fg|=1073741824:M===9?F.fg|=2147483648:M===2?F.bg|=134217728:M===21?this._processUnderline(2,F):M===22?(F.fg&=-134217729,F.bg&=-134217729):M===23?F.bg&=-67108865:M===24?(F.fg&=-268435457,this._processUnderline(0,F)):M===25?F.fg&=-536870913:M===27?F.fg&=-67108865:M===28?F.fg&=-1073741825:M===29?F.fg&=2147483647:M===39?(F.fg&=-67108864,F.fg|=16777215&f.DEFAULT_ATTR_DATA.fg):M===49?(F.bg&=-67108864,F.bg|=16777215&f.DEFAULT_ATTR_DATA.bg):M===38||M===48||M===58?V+=this._extractColor(N,V,F):M===53?F.bg|=1073741824:M===55?F.bg&=-1073741825:M===59?(F.extended=F.extended.clone(),F.extended.underlineColor=-1,F.updateExtended()):M===100?(F.fg&=-67108864,F.fg|=16777215&f.DEFAULT_ATTR_DATA.fg,F.bg&=-67108864,F.bg|=16777215&f.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",M);return!0}deviceStatus(N){switch(N.params[0]){case 5:this._coreService.triggerDataEvent(`${d.C0.ESC}[0n`);break;case 6:const P=this._activeBuffer.y+1,M=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${d.C0.ESC}[${P};${M}R`)}return!0}deviceStatusPrivate(N){if(N.params[0]===6){const P=this._activeBuffer.y+1,M=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${d.C0.ESC}[?${P};${M}R`)}return!0}softReset(N){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=f.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(N){const P=N.params[0]||1;switch(P){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const M=P%2==1;return this._optionsService.options.cursorBlink=M,!0}setScrollRegion(N){const P=N.params[0]||1;let M;return(N.length<2||(M=N.params[1])>this._bufferService.rows||M===0)&&(M=this._bufferService.rows),M>P&&(this._activeBuffer.scrollTop=P-1,this._activeBuffer.scrollBottom=M-1,this._setCursor(0,0)),!0}windowOptions(N){if(!T(N.params[0],this._optionsService.rawOptions.windowOptions))return!0;const P=N.length>1?N.params[1]:0;switch(N.params[0]){case 14:P!==2&&this._onRequestWindowsOptionsReport.fire(A.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(A.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${d.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:P!==0&&P!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),P!==0&&P!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:P!==0&&P!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),P!==0&&P!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(N){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(N){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(N){return this._windowTitle=N,this._onTitleChange.fire(N),!0}setIconName(N){return this._iconName=N,!0}setOrReportIndexedColor(N){const P=[],M=N.split(";");for(;M.length>1;){const F=M.shift(),V=M.shift();if(/^\d+$/.exec(F)){const K=parseInt(F);if(U(K))if(V==="?")P.push({type:0,index:K});else{const J=(0,j.parseColor)(V);J&&P.push({type:1,index:K,color:J})}}}return P.length&&this._onColor.fire(P),!0}setHyperlink(N){const P=N.split(";");return!(P.length<2)&&(P[1]?this._createHyperlink(P[0],P[1]):!P[0]&&this._finishHyperlink())}_createHyperlink(N,P){this._getCurrentLinkId()&&this._finishHyperlink();const M=N.split(":");let F;const V=M.findIndex(K=>K.startsWith("id="));return V!==-1&&(F=M[V].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:F,uri:P}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(N,P){const M=N.split(";");for(let F=0;F<M.length&&!(P>=this._specialColors.length);++F,++P)if(M[F]==="?")this._onColor.fire([{type:0,index:this._specialColors[P]}]);else{const V=(0,j.parseColor)(M[F]);V&&this._onColor.fire([{type:1,index:this._specialColors[P],color:V}])}return!0}setOrReportFgColor(N){return this._setOrReportSpecialColor(N,0)}setOrReportBgColor(N){return this._setOrReportSpecialColor(N,1)}setOrReportCursorColor(N){return this._setOrReportSpecialColor(N,2)}restoreIndexedColor(N){if(!N)return this._onColor.fire([{type:2}]),!0;const P=[],M=N.split(";");for(let F=0;F<M.length;++F)if(/^\d+$/.exec(M[F])){const V=parseInt(M[F]);U(V)&&P.push({type:2,index:V})}return P.length&&this._onColor.fire(P),!0}restoreFgColor(N){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(N){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(N){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),!0}selectCharset(N){return N.length!==2?(this.selectDefaultCharset(),!0):(N[0]==="/"||this._charsetService.setgCharset(D[N[0]],g.CHARSETS[N[1]]||g.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const N=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,N,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=f.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=f.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(N){return this._charsetService.setgLevel(N),!0}screenAlignmentPattern(){const N=new m.CellData;N.content=4194304|"E".charCodeAt(0),N.fg=this._curAttrData.fg,N.bg=this._curAttrData.bg,this._setCursor(0,0);for(let P=0;P<this._bufferService.rows;++P){const M=this._activeBuffer.ybase+this._activeBuffer.y+P,F=this._activeBuffer.lines.get(M);F&&(F.fill(N),F.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(N,P){const M=this._bufferService.buffer,F=this._optionsService.rawOptions;return(V=>(this._coreService.triggerDataEvent(`${d.C0.ESC}${V}${d.C0.ESC}\\`),!0))(N==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:N==='"p'?'P1$r61;1"p':N==="r"?`P1$r${M.scrollTop+1};${M.scrollBottom+1}r`:N==="m"?"P1$r0m":N===" q"?`P1$r${{block:2,underline:4,bar:6}[F.cursorStyle]-(F.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(N,P){this._dirtyRowTracker.markRangeDirty(N,P)}}o.InputHandler=R;let B=class{constructor($){this._bufferService=$,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty($){$<this.start?this.start=$:$>this.end&&(this.end=$)}markRangeDirty($,N){$>N&&(O=$,$=N,N=O),$<this.start&&(this.start=$),N>this.end&&(this.end=N)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function U($){return 0<=$&&$<256}B=h([v(0,S.IBufferService)],B)},844:(l,o)=>{function c(h){for(const v of h)v.dispose();h.length=0}Object.defineProperty(o,"__esModule",{value:!0}),o.getDisposeArrayDisposable=o.disposeArray=o.toDisposable=o.MutableDisposable=o.Disposable=void 0,o.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const h of this._disposables)h.dispose();this._disposables.length=0}register(h){return this._disposables.push(h),h}unregister(h){const v=this._disposables.indexOf(h);v!==-1&&this._disposables.splice(v,1)}},o.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(h){var v;this._isDisposed||h===this._value||((v=this._value)==null||v.dispose(),this._value=h)}clear(){this.value=void 0}dispose(){var h;this._isDisposed=!0,(h=this._value)==null||h.dispose(),this._value=void 0}},o.toDisposable=function(h){return{dispose:h}},o.disposeArray=c,o.getDisposeArrayDisposable=function(h){return{dispose:()=>c(h)}}},1505:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.FourKeyMap=o.TwoKeyMap=void 0;class c{constructor(){this._data={}}set(v,d,g){this._data[v]||(this._data[v]={}),this._data[v][d]=g}get(v,d){return this._data[v]?this._data[v][d]:void 0}clear(){this._data={}}}o.TwoKeyMap=c,o.FourKeyMap=class{constructor(){this._data=new c}set(h,v,d,g,x){this._data.get(h,v)||this._data.set(h,v,new c),this._data.get(h,v).set(d,g,x)}get(h,v,d,g){var x;return(x=this._data.get(h,v))==null?void 0:x.get(d,g)}clear(){this._data.clear()}}},6114:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.isChromeOS=o.isLinux=o.isWindows=o.isIphone=o.isIpad=o.isMac=o.getSafariVersion=o.isSafari=o.isLegacyEdge=o.isFirefox=o.isNode=void 0,o.isNode=typeof process<"u"&&"title"in process;const c=o.isNode?"node":navigator.userAgent,h=o.isNode?"node":navigator.platform;o.isFirefox=c.includes("Firefox"),o.isLegacyEdge=c.includes("Edge"),o.isSafari=/^((?!chrome|android).)*safari/i.test(c),o.getSafariVersion=function(){if(!o.isSafari)return 0;const v=c.match(/Version\/(\d+)/);return v===null||v.length<2?0:parseInt(v[1])},o.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(h),o.isIpad=h==="iPad",o.isIphone=h==="iPhone",o.isWindows=["Windows","Win16","Win32","WinCE"].includes(h),o.isLinux=h.indexOf("Linux")>=0,o.isChromeOS=/\bCrOS\b/.test(c)},6106:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SortedList=void 0;let c=0;o.SortedList=class{constructor(h){this._getKey=h,this._array=[]}clear(){this._array.length=0}insert(h){this._array.length!==0?(c=this._search(this._getKey(h)),this._array.splice(c,0,h)):this._array.push(h)}delete(h){if(this._array.length===0)return!1;const v=this._getKey(h);if(v===void 0||(c=this._search(v),c===-1)||this._getKey(this._array[c])!==v)return!1;do if(this._array[c]===h)return this._array.splice(c,1),!0;while(++c<this._array.length&&this._getKey(this._array[c])===v);return!1}*getKeyIterator(h){if(this._array.length!==0&&(c=this._search(h),!(c<0||c>=this._array.length)&&this._getKey(this._array[c])===h))do yield this._array[c];while(++c<this._array.length&&this._getKey(this._array[c])===h)}forEachByKey(h,v){if(this._array.length!==0&&(c=this._search(h),!(c<0||c>=this._array.length)&&this._getKey(this._array[c])===h))do v(this._array[c]);while(++c<this._array.length&&this._getKey(this._array[c])===h)}values(){return[...this._array].values()}_search(h){let v=0,d=this._array.length-1;for(;d>=v;){let g=v+d>>1;const x=this._getKey(this._array[g]);if(x>h)d=g-1;else{if(!(x<h)){for(;g>0&&this._getKey(this._array[g-1])===h;)g--;return g}v=g+1}}return v}}},7226:(l,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DebouncedIdleTask=o.IdleTaskQueue=o.PriorityTaskQueue=void 0;const h=c(6114);class v{constructor(){this._tasks=[],this._i=0}enqueue(x){this._tasks.push(x),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(x){this._idleCallback=void 0;let _=0,y=0,f=x.timeRemaining(),p=0;for(;this._i<this._tasks.length;){if(_=Date.now(),this._tasks[this._i]()||this._i++,_=Math.max(1,Date.now()-_),y=Math.max(_,y),p=x.timeRemaining(),1.5*y>p)return f-_<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(f-_))}ms`),void this._start();f=p}this.clear()}}class d extends v{_requestCallback(x){return setTimeout(()=>x(this._createDeadline(16)))}_cancelCallback(x){clearTimeout(x)}_createDeadline(x){const _=Date.now()+x;return{timeRemaining:()=>Math.max(0,_-Date.now())}}}o.PriorityTaskQueue=d,o.IdleTaskQueue=!h.isNode&&"requestIdleCallback"in window?class extends v{_requestCallback(g){return requestIdleCallback(g)}_cancelCallback(g){cancelIdleCallback(g)}}:d,o.DebouncedIdleTask=class{constructor(){this._queue=new o.IdleTaskQueue}set(g){this._queue.clear(),this._queue.enqueue(g)}flush(){this._queue.flush()}}},9282:(l,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.updateWindowsModeWrappedState=void 0;const h=c(643);o.updateWindowsModeWrappedState=function(v){const d=v.buffer.lines.get(v.buffer.ybase+v.buffer.y-1),g=d==null?void 0:d.get(v.cols-1),x=v.buffer.lines.get(v.buffer.ybase+v.buffer.y);x&&g&&(x.isWrapped=g[h.CHAR_DATA_CODE_INDEX]!==h.NULL_CELL_CODE&&g[h.CHAR_DATA_CODE_INDEX]!==h.WHITESPACE_CELL_CODE)}},3734:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ExtendedAttrs=o.AttributeData=void 0;class c{constructor(){this.fg=0,this.bg=0,this.extended=new h}static toColorRGB(d){return[d>>>16&255,d>>>8&255,255&d]}static fromColorRGB(d){return(255&d[0])<<16|(255&d[1])<<8|255&d[2]}clone(){const d=new c;return d.fg=this.fg,d.bg=this.bg,d.extended=this.extended.clone(),d}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}o.AttributeData=c;class h{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(d){this._ext=d}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(d){this._ext&=-469762049,this._ext|=d<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(d){this._ext&=-67108864,this._ext|=67108863&d}get urlId(){return this._urlId}set urlId(d){this._urlId=d}get underlineVariantOffset(){const d=(3758096384&this._ext)>>29;return d<0?4294967288^d:d}set underlineVariantOffset(d){this._ext&=536870911,this._ext|=d<<29&3758096384}constructor(d=0,g=0){this._ext=0,this._urlId=0,this._ext=d,this._urlId=g}clone(){return new h(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}o.ExtendedAttrs=h},9092:(l,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Buffer=o.MAX_BUFFER_SIZE=void 0;const h=c(6349),v=c(7226),d=c(3734),g=c(8437),x=c(4634),_=c(511),y=c(643),f=c(4863),p=c(7116);o.MAX_BUFFER_SIZE=4294967295,o.Buffer=class{constructor(u,m,b){this._hasScrollback=u,this._optionsService=m,this._bufferService=b,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=g.DEFAULT_ATTR_DATA.clone(),this.savedCharset=p.DEFAULT_CHARSET,this.markers=[],this._nullCell=_.CellData.fromCharData([0,y.NULL_CELL_CHAR,y.NULL_CELL_WIDTH,y.NULL_CELL_CODE]),this._whitespaceCell=_.CellData.fromCharData([0,y.WHITESPACE_CELL_CHAR,y.WHITESPACE_CELL_WIDTH,y.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new v.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(u){return u?(this._nullCell.fg=u.fg,this._nullCell.bg=u.bg,this._nullCell.extended=u.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new d.ExtendedAttrs),this._nullCell}getWhitespaceCell(u){return u?(this._whitespaceCell.fg=u.fg,this._whitespaceCell.bg=u.bg,this._whitespaceCell.extended=u.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new d.ExtendedAttrs),this._whitespaceCell}getBlankLine(u,m){return new g.BufferLine(this._bufferService.cols,this.getNullCell(u),m)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const u=this.ybase+this.y-this.ydisp;return u>=0&&u<this._rows}_getCorrectBufferLength(u){if(!this._hasScrollback)return u;const m=u+this._optionsService.rawOptions.scrollback;return m>o.MAX_BUFFER_SIZE?o.MAX_BUFFER_SIZE:m}fillViewportRows(u){if(this.lines.length===0){u===void 0&&(u=g.DEFAULT_ATTR_DATA);let m=this._rows;for(;m--;)this.lines.push(this.getBlankLine(u))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(u,m){const b=this.getNullCell(g.DEFAULT_ATTR_DATA);let S=0;const C=this._getCorrectBufferLength(m);if(C>this.lines.maxLength&&(this.lines.maxLength=C),this.lines.length>0){if(this._cols<u)for(let w=0;w<this.lines.length;w++)S+=+this.lines.get(w).resize(u,b);let k=0;if(this._rows<m)for(let w=this._rows;w<m;w++)this.lines.length<m+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new g.BufferLine(u,b)):this.ybase>0&&this.lines.length<=this.ybase+this.y+k+1?(this.ybase--,k++,this.ydisp>0&&this.ydisp--):this.lines.push(new g.BufferLine(u,b)));else for(let w=this._rows;w>m;w--)this.lines.length>m+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(C<this.lines.maxLength){const w=this.lines.length-C;w>0&&(this.lines.trimStart(w),this.ybase=Math.max(this.ybase-w,0),this.ydisp=Math.max(this.ydisp-w,0),this.savedY=Math.max(this.savedY-w,0)),this.lines.maxLength=C}this.x=Math.min(this.x,u-1),this.y=Math.min(this.y,m-1),k&&(this.y+=k),this.savedX=Math.min(this.savedX,u-1),this.scrollTop=0}if(this.scrollBottom=m-1,this._isReflowEnabled&&(this._reflow(u,m),this._cols>u))for(let k=0;k<this.lines.length;k++)S+=+this.lines.get(k).resize(u,b);this._cols=u,this._rows=m,this._memoryCleanupQueue.clear(),S>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let u=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,u=!1);let m=0;for(;this._memoryCleanupPosition<this.lines.length;)if(m+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),m>100)return!0;return u}get _isReflowEnabled(){const u=this._optionsService.rawOptions.windowsPty;return u&&u.buildNumber?this._hasScrollback&&u.backend==="conpty"&&u.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(u,m){this._cols!==u&&(u>this._cols?this._reflowLarger(u,m):this._reflowSmaller(u,m))}_reflowLarger(u,m){const b=(0,x.reflowLargerGetLinesToRemove)(this.lines,this._cols,u,this.ybase+this.y,this.getNullCell(g.DEFAULT_ATTR_DATA));if(b.length>0){const S=(0,x.reflowLargerCreateNewLayout)(this.lines,b);(0,x.reflowLargerApplyNewLayout)(this.lines,S.layout),this._reflowLargerAdjustViewport(u,m,S.countRemoved)}}_reflowLargerAdjustViewport(u,m,b){const S=this.getNullCell(g.DEFAULT_ATTR_DATA);let C=b;for(;C-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<m&&this.lines.push(new g.BufferLine(u,S))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-b,0)}_reflowSmaller(u,m){const b=this.getNullCell(g.DEFAULT_ATTR_DATA),S=[];let C=0;for(let k=this.lines.length-1;k>=0;k--){let w=this.lines.get(k);if(!w||!w.isWrapped&&w.getTrimmedLength()<=u)continue;const j=[w];for(;w.isWrapped&&k>0;)w=this.lines.get(--k),j.unshift(w);const D=this.ybase+this.y;if(D>=k&&D<k+j.length)continue;const I=j[j.length-1].getTrimmedLength(),T=(0,x.reflowSmallerGetNewLineLengths)(j,this._cols,u),A=T.length-j.length;let O;O=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+A):Math.max(0,this.lines.length-this.lines.maxLength+A);const R=[];for(let M=0;M<A;M++){const F=this.getBlankLine(g.DEFAULT_ATTR_DATA,!0);R.push(F)}R.length>0&&(S.push({start:k+j.length+C,newLines:R}),C+=R.length),j.push(...R);let B=T.length-1,U=T[B];U===0&&(B--,U=T[B]);let $=j.length-A-1,N=I;for(;$>=0;){const M=Math.min(N,U);if(j[B]===void 0)break;if(j[B].copyCellsFrom(j[$],N-M,U-M,M,!0),U-=M,U===0&&(B--,U=T[B]),N-=M,N===0){$--;const F=Math.max($,0);N=(0,x.getWrappedLineTrimmedLength)(j,F,this._cols)}}for(let M=0;M<j.length;M++)T[M]<u&&j[M].setCell(T[M],b);let P=A-O;for(;P-- >0;)this.ybase===0?this.y<m-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+C)-m&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+A,this.ybase+m-1)}if(S.length>0){const k=[],w=[];for(let B=0;B<this.lines.length;B++)w.push(this.lines.get(B));const j=this.lines.length;let D=j-1,I=0,T=S[I];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+C);let A=0;for(let B=Math.min(this.lines.maxLength-1,j+C-1);B>=0;B--)if(T&&T.start>D+A){for(let U=T.newLines.length-1;U>=0;U--)this.lines.set(B--,T.newLines[U]);B++,k.push({index:D+1,amount:T.newLines.length}),A+=T.newLines.length,T=S[++I]}else this.lines.set(B,w[D--]);let O=0;for(let B=k.length-1;B>=0;B--)k[B].index+=O,this.lines.onInsertEmitter.fire(k[B]),O+=k[B].amount;const R=Math.max(0,j+C-this.lines.maxLength);R>0&&this.lines.onTrimEmitter.fire(R)}}translateBufferLineToString(u,m,b=0,S){const C=this.lines.get(u);return C?C.translateToString(m,b,S):""}getWrappedRangeForLine(u){let m=u,b=u;for(;m>0&&this.lines.get(m).isWrapped;)m--;for(;b+1<this.lines.length&&this.lines.get(b+1).isWrapped;)b++;return{first:m,last:b}}setupTabStops(u){for(u!=null?this.tabs[u]||(u=this.prevStop(u)):(this.tabs={},u=0);u<this._cols;u+=this._optionsService.rawOptions.tabStopWidth)this.tabs[u]=!0}prevStop(u){for(u==null&&(u=this.x);!this.tabs[--u]&&u>0;);return u>=this._cols?this._cols-1:u<0?0:u}nextStop(u){for(u==null&&(u=this.x);!this.tabs[++u]&&u<this._cols;);return u>=this._cols?this._cols-1:u<0?0:u}clearMarkers(u){this._isClearing=!0;for(let m=0;m<this.markers.length;m++)this.markers[m].line===u&&(this.markers[m].dispose(),this.markers.splice(m--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let u=0;u<this.markers.length;u++)this.markers[u].dispose(),this.markers.splice(u--,1);this._isClearing=!1}addMarker(u){const m=new f.Marker(u);return this.markers.push(m),m.register(this.lines.onTrim(b=>{m.line-=b,m.line<0&&m.dispose()})),m.register(this.lines.onInsert(b=>{m.line>=b.index&&(m.line+=b.amount)})),m.register(this.lines.onDelete(b=>{m.line>=b.index&&m.line<b.index+b.amount&&m.dispose(),m.line>b.index&&(m.line-=b.amount)})),m.register(m.onDispose(()=>this._removeMarker(m))),m}_removeMarker(u){this._isClearing||this.markers.splice(this.markers.indexOf(u),1)}}},8437:(l,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferLine=o.DEFAULT_ATTR_DATA=void 0;const h=c(3734),v=c(511),d=c(643),g=c(482);o.DEFAULT_ATTR_DATA=Object.freeze(new h.AttributeData);let x=0;class _{constructor(f,p,u=!1){this.isWrapped=u,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*f);const m=p||v.CellData.fromCharData([0,d.NULL_CELL_CHAR,d.NULL_CELL_WIDTH,d.NULL_CELL_CODE]);for(let b=0;b<f;++b)this.setCell(b,m);this.length=f}get(f){const p=this._data[3*f+0],u=2097151&p;return[this._data[3*f+1],2097152&p?this._combined[f]:u?(0,g.stringFromCodePoint)(u):"",p>>22,2097152&p?this._combined[f].charCodeAt(this._combined[f].length-1):u]}set(f,p){this._data[3*f+1]=p[d.CHAR_DATA_ATTR_INDEX],p[d.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[f]=p[1],this._data[3*f+0]=2097152|f|p[d.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*f+0]=p[d.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|p[d.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(f){return this._data[3*f+0]>>22}hasWidth(f){return 12582912&this._data[3*f+0]}getFg(f){return this._data[3*f+1]}getBg(f){return this._data[3*f+2]}hasContent(f){return 4194303&this._data[3*f+0]}getCodePoint(f){const p=this._data[3*f+0];return 2097152&p?this._combined[f].charCodeAt(this._combined[f].length-1):2097151&p}isCombined(f){return 2097152&this._data[3*f+0]}getString(f){const p=this._data[3*f+0];return 2097152&p?this._combined[f]:2097151&p?(0,g.stringFromCodePoint)(2097151&p):""}isProtected(f){return 536870912&this._data[3*f+2]}loadCell(f,p){return x=3*f,p.content=this._data[x+0],p.fg=this._data[x+1],p.bg=this._data[x+2],2097152&p.content&&(p.combinedData=this._combined[f]),268435456&p.bg&&(p.extended=this._extendedAttrs[f]),p}setCell(f,p){2097152&p.content&&(this._combined[f]=p.combinedData),268435456&p.bg&&(this._extendedAttrs[f]=p.extended),this._data[3*f+0]=p.content,this._data[3*f+1]=p.fg,this._data[3*f+2]=p.bg}setCellFromCodepoint(f,p,u,m){268435456&m.bg&&(this._extendedAttrs[f]=m.extended),this._data[3*f+0]=p|u<<22,this._data[3*f+1]=m.fg,this._data[3*f+2]=m.bg}addCodepointToCell(f,p,u){let m=this._data[3*f+0];2097152&m?this._combined[f]+=(0,g.stringFromCodePoint)(p):2097151&m?(this._combined[f]=(0,g.stringFromCodePoint)(2097151&m)+(0,g.stringFromCodePoint)(p),m&=-2097152,m|=2097152):m=p|4194304,u&&(m&=-12582913,m|=u<<22),this._data[3*f+0]=m}insertCells(f,p,u){if((f%=this.length)&&this.getWidth(f-1)===2&&this.setCellFromCodepoint(f-1,0,1,u),p<this.length-f){const m=new v.CellData;for(let b=this.length-f-p-1;b>=0;--b)this.setCell(f+p+b,this.loadCell(f+b,m));for(let b=0;b<p;++b)this.setCell(f+b,u)}else for(let m=f;m<this.length;++m)this.setCell(m,u);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,u)}deleteCells(f,p,u){if(f%=this.length,p<this.length-f){const m=new v.CellData;for(let b=0;b<this.length-f-p;++b)this.setCell(f+b,this.loadCell(f+p+b,m));for(let b=this.length-p;b<this.length;++b)this.setCell(b,u)}else for(let m=f;m<this.length;++m)this.setCell(m,u);f&&this.getWidth(f-1)===2&&this.setCellFromCodepoint(f-1,0,1,u),this.getWidth(f)!==0||this.hasContent(f)||this.setCellFromCodepoint(f,0,1,u)}replaceCells(f,p,u,m=!1){if(m)for(f&&this.getWidth(f-1)===2&&!this.isProtected(f-1)&&this.setCellFromCodepoint(f-1,0,1,u),p<this.length&&this.getWidth(p-1)===2&&!this.isProtected(p)&&this.setCellFromCodepoint(p,0,1,u);f<p&&f<this.length;)this.isProtected(f)||this.setCell(f,u),f++;else for(f&&this.getWidth(f-1)===2&&this.setCellFromCodepoint(f-1,0,1,u),p<this.length&&this.getWidth(p-1)===2&&this.setCellFromCodepoint(p,0,1,u);f<p&&f<this.length;)this.setCell(f++,u)}resize(f,p){if(f===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const u=3*f;if(f>this.length){if(this._data.buffer.byteLength>=4*u)this._data=new Uint32Array(this._data.buffer,0,u);else{const m=new Uint32Array(u);m.set(this._data),this._data=m}for(let m=this.length;m<f;++m)this.setCell(m,p)}else{this._data=this._data.subarray(0,u);const m=Object.keys(this._combined);for(let S=0;S<m.length;S++){const C=parseInt(m[S],10);C>=f&&delete this._combined[C]}const b=Object.keys(this._extendedAttrs);for(let S=0;S<b.length;S++){const C=parseInt(b[S],10);C>=f&&delete this._extendedAttrs[C]}}return this.length=f,4*u*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const f=new Uint32Array(this._data.length);return f.set(this._data),this._data=f,1}return 0}fill(f,p=!1){if(p)for(let u=0;u<this.length;++u)this.isProtected(u)||this.setCell(u,f);else{this._combined={},this._extendedAttrs={};for(let u=0;u<this.length;++u)this.setCell(u,f)}}copyFrom(f){this.length!==f.length?this._data=new Uint32Array(f._data):this._data.set(f._data),this.length=f.length,this._combined={};for(const p in f._combined)this._combined[p]=f._combined[p];this._extendedAttrs={};for(const p in f._extendedAttrs)this._extendedAttrs[p]=f._extendedAttrs[p];this.isWrapped=f.isWrapped}clone(){const f=new _(0);f._data=new Uint32Array(this._data),f.length=this.length;for(const p in this._combined)f._combined[p]=this._combined[p];for(const p in this._extendedAttrs)f._extendedAttrs[p]=this._extendedAttrs[p];return f.isWrapped=this.isWrapped,f}getTrimmedLength(){for(let f=this.length-1;f>=0;--f)if(4194303&this._data[3*f+0])return f+(this._data[3*f+0]>>22);return 0}getNoBgTrimmedLength(){for(let f=this.length-1;f>=0;--f)if(4194303&this._data[3*f+0]||50331648&this._data[3*f+2])return f+(this._data[3*f+0]>>22);return 0}copyCellsFrom(f,p,u,m,b){const S=f._data;if(b)for(let k=m-1;k>=0;k--){for(let w=0;w<3;w++)this._data[3*(u+k)+w]=S[3*(p+k)+w];268435456&S[3*(p+k)+2]&&(this._extendedAttrs[u+k]=f._extendedAttrs[p+k])}else for(let k=0;k<m;k++){for(let w=0;w<3;w++)this._data[3*(u+k)+w]=S[3*(p+k)+w];268435456&S[3*(p+k)+2]&&(this._extendedAttrs[u+k]=f._extendedAttrs[p+k])}const C=Object.keys(f._combined);for(let k=0;k<C.length;k++){const w=parseInt(C[k],10);w>=p&&(this._combined[w-p+u]=f._combined[w])}}translateToString(f,p,u,m){p=p??0,u=u??this.length,f&&(u=Math.min(u,this.getTrimmedLength())),m&&(m.length=0);let b="";for(;p<u;){const S=this._data[3*p+0],C=2097151&S,k=2097152&S?this._combined[p]:C?(0,g.stringFromCodePoint)(C):d.WHITESPACE_CELL_CHAR;if(b+=k,m)for(let w=0;w<k.length;++w)m.push(p);p+=S>>22||1}return m&&m.push(p),b}}o.BufferLine=_},4841:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.getRangeLength=void 0,o.getRangeLength=function(c,h){if(c.start.y>c.end.y)throw new Error(`Buffer range end (${c.end.x}, ${c.end.y}) cannot be before start (${c.start.x}, ${c.start.y})`);return h*(c.end.y-c.start.y)+(c.end.x-c.start.x+1)}},4634:(l,o)=>{function c(h,v,d){if(v===h.length-1)return h[v].getTrimmedLength();const g=!h[v].hasContent(d-1)&&h[v].getWidth(d-1)===1,x=h[v+1].getWidth(0)===2;return g&&x?d-1:d}Object.defineProperty(o,"__esModule",{value:!0}),o.getWrappedLineTrimmedLength=o.reflowSmallerGetNewLineLengths=o.reflowLargerApplyNewLayout=o.reflowLargerCreateNewLayout=o.reflowLargerGetLinesToRemove=void 0,o.reflowLargerGetLinesToRemove=function(h,v,d,g,x){const _=[];for(let y=0;y<h.length-1;y++){let f=y,p=h.get(++f);if(!p.isWrapped)continue;const u=[h.get(y)];for(;f<h.length&&p.isWrapped;)u.push(p),p=h.get(++f);if(g>=y&&g<f){y+=u.length-1;continue}let m=0,b=c(u,m,v),S=1,C=0;for(;S<u.length;){const w=c(u,S,v),j=w-C,D=d-b,I=Math.min(j,D);u[m].copyCellsFrom(u[S],C,b,I,!1),b+=I,b===d&&(m++,b=0),C+=I,C===w&&(S++,C=0),b===0&&m!==0&&u[m-1].getWidth(d-1)===2&&(u[m].copyCellsFrom(u[m-1],d-1,b++,1,!1),u[m-1].setCell(d-1,x))}u[m].replaceCells(b,d,x);let k=0;for(let w=u.length-1;w>0&&(w>m||u[w].getTrimmedLength()===0);w--)k++;k>0&&(_.push(y+u.length-k),_.push(k)),y+=u.length-1}return _},o.reflowLargerCreateNewLayout=function(h,v){const d=[];let g=0,x=v[g],_=0;for(let y=0;y<h.length;y++)if(x===y){const f=v[++g];h.onDeleteEmitter.fire({index:y-_,amount:f}),y+=f-1,_+=f,x=v[++g]}else d.push(y);return{layout:d,countRemoved:_}},o.reflowLargerApplyNewLayout=function(h,v){const d=[];for(let g=0;g<v.length;g++)d.push(h.get(v[g]));for(let g=0;g<d.length;g++)h.set(g,d[g]);h.length=v.length},o.reflowSmallerGetNewLineLengths=function(h,v,d){const g=[],x=h.map((p,u)=>c(h,u,v)).reduce((p,u)=>p+u);let _=0,y=0,f=0;for(;f<x;){if(x-f<d){g.push(x-f);break}_+=d;const p=c(h,y,v);_>p&&(_-=p,y++);const u=h[y].getWidth(_-1)===2;u&&_--;const m=u?d-1:d;g.push(m),f+=m}return g},o.getWrappedLineTrimmedLength=c},5295:(l,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferSet=void 0;const h=c(8460),v=c(844),d=c(9092);class g extends v.Disposable{constructor(_,y){super(),this._optionsService=_,this._bufferService=y,this._onBufferActivate=this.register(new h.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new d.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new d.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(_){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(_),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(_,y){this._normal.resize(_,y),this._alt.resize(_,y),this.setupTabStops(_)}setupTabStops(_){this._normal.setupTabStops(_),this._alt.setupTabStops(_)}}o.BufferSet=g},511:(l,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CellData=void 0;const h=c(482),v=c(643),d=c(3734);class g extends d.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new d.ExtendedAttrs,this.combinedData=""}static fromCharData(_){const y=new g;return y.setFromCharData(_),y}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,h.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(_){this.fg=_[v.CHAR_DATA_ATTR_INDEX],this.bg=0;let y=!1;if(_[v.CHAR_DATA_CHAR_INDEX].length>2)y=!0;else if(_[v.CHAR_DATA_CHAR_INDEX].length===2){const f=_[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=f&&f<=56319){const p=_[v.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=p&&p<=57343?this.content=1024*(f-55296)+p-56320+65536|_[v.CHAR_DATA_WIDTH_INDEX]<<22:y=!0}else y=!0}else this.content=_[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|_[v.CHAR_DATA_WIDTH_INDEX]<<22;y&&(this.combinedData=_[v.CHAR_DATA_CHAR_INDEX],this.content=2097152|_[v.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}o.CellData=g},643:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WHITESPACE_CELL_CODE=o.WHITESPACE_CELL_WIDTH=o.WHITESPACE_CELL_CHAR=o.NULL_CELL_CODE=o.NULL_CELL_WIDTH=o.NULL_CELL_CHAR=o.CHAR_DATA_CODE_INDEX=o.CHAR_DATA_WIDTH_INDEX=o.CHAR_DATA_CHAR_INDEX=o.CHAR_DATA_ATTR_INDEX=o.DEFAULT_EXT=o.DEFAULT_ATTR=o.DEFAULT_COLOR=void 0,o.DEFAULT_COLOR=0,o.DEFAULT_ATTR=256|o.DEFAULT_COLOR<<9,o.DEFAULT_EXT=0,o.CHAR_DATA_ATTR_INDEX=0,o.CHAR_DATA_CHAR_INDEX=1,o.CHAR_DATA_WIDTH_INDEX=2,o.CHAR_DATA_CODE_INDEX=3,o.NULL_CELL_CHAR="",o.NULL_CELL_WIDTH=1,o.NULL_CELL_CODE=0,o.WHITESPACE_CELL_CHAR=" ",o.WHITESPACE_CELL_WIDTH=1,o.WHITESPACE_CELL_CODE=32},4863:(l,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Marker=void 0;const h=c(8460),v=c(844);class d{get id(){return this._id}constructor(x){this.line=x,this.isDisposed=!1,this._disposables=[],this._id=d._nextId++,this._onDispose=this.register(new h.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,v.disposeArray)(this._disposables),this._disposables.length=0)}register(x){return this._disposables.push(x),x}}o.Marker=d,d._nextId=1},7116:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DEFAULT_CHARSET=o.CHARSETS=void 0,o.CHARSETS={},o.DEFAULT_CHARSET=o.CHARSETS.B,o.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},o.CHARSETS.A={"#":""},o.CHARSETS.B=void 0,o.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},o.CHARSETS.C=o.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},o.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},o.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},o.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},o.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},o.CHARSETS.E=o.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},o.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},o.CHARSETS.H=o.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},o.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(l,o)=>{var c,h,v;Object.defineProperty(o,"__esModule",{value:!0}),o.C1_ESCAPED=o.C1=o.C0=void 0,function(d){d.NUL="\0",d.SOH="",d.STX="",d.ETX="",d.EOT="",d.ENQ="",d.ACK="",d.BEL="\x07",d.BS="\b",d.HT="	",d.LF=`
`,d.VT="\v",d.FF="\f",d.CR="\r",d.SO="",d.SI="",d.DLE="",d.DC1="",d.DC2="",d.DC3="",d.DC4="",d.NAK="",d.SYN="",d.ETB="",d.CAN="",d.EM="",d.SUB="",d.ESC="\x1B",d.FS="",d.GS="",d.RS="",d.US="",d.SP=" ",d.DEL=""}(c||(o.C0=c={})),function(d){d.PAD="",d.HOP="",d.BPH="",d.NBH="",d.IND="",d.NEL="",d.SSA="",d.ESA="",d.HTS="",d.HTJ="",d.VTS="",d.PLD="",d.PLU="",d.RI="",d.SS2="",d.SS3="",d.DCS="",d.PU1="",d.PU2="",d.STS="",d.CCH="",d.MW="",d.SPA="",d.EPA="",d.SOS="",d.SGCI="",d.SCI="",d.CSI="",d.ST="",d.OSC="",d.PM="",d.APC=""}(h||(o.C1=h={})),function(d){d.ST=`${c.ESC}\\`}(v||(o.C1_ESCAPED=v={}))},7399:(l,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.evaluateKeyboardEvent=void 0;const h=c(2584),v={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};o.evaluateKeyboardEvent=function(d,g,x,_){const y={type:0,cancel:!1,key:void 0},f=(d.shiftKey?1:0)|(d.altKey?2:0)|(d.ctrlKey?4:0)|(d.metaKey?8:0);switch(d.keyCode){case 0:d.key==="UIKeyInputUpArrow"?y.key=g?h.C0.ESC+"OA":h.C0.ESC+"[A":d.key==="UIKeyInputLeftArrow"?y.key=g?h.C0.ESC+"OD":h.C0.ESC+"[D":d.key==="UIKeyInputRightArrow"?y.key=g?h.C0.ESC+"OC":h.C0.ESC+"[C":d.key==="UIKeyInputDownArrow"&&(y.key=g?h.C0.ESC+"OB":h.C0.ESC+"[B");break;case 8:y.key=d.ctrlKey?"\b":h.C0.DEL,d.altKey&&(y.key=h.C0.ESC+y.key);break;case 9:if(d.shiftKey){y.key=h.C0.ESC+"[Z";break}y.key=h.C0.HT,y.cancel=!0;break;case 13:y.key=d.altKey?h.C0.ESC+h.C0.CR:h.C0.CR,y.cancel=!0;break;case 27:y.key=h.C0.ESC,d.altKey&&(y.key=h.C0.ESC+h.C0.ESC),y.cancel=!0;break;case 37:if(d.metaKey)break;f?(y.key=h.C0.ESC+"[1;"+(f+1)+"D",y.key===h.C0.ESC+"[1;3D"&&(y.key=h.C0.ESC+(x?"b":"[1;5D"))):y.key=g?h.C0.ESC+"OD":h.C0.ESC+"[D";break;case 39:if(d.metaKey)break;f?(y.key=h.C0.ESC+"[1;"+(f+1)+"C",y.key===h.C0.ESC+"[1;3C"&&(y.key=h.C0.ESC+(x?"f":"[1;5C"))):y.key=g?h.C0.ESC+"OC":h.C0.ESC+"[C";break;case 38:if(d.metaKey)break;f?(y.key=h.C0.ESC+"[1;"+(f+1)+"A",x||y.key!==h.C0.ESC+"[1;3A"||(y.key=h.C0.ESC+"[1;5A")):y.key=g?h.C0.ESC+"OA":h.C0.ESC+"[A";break;case 40:if(d.metaKey)break;f?(y.key=h.C0.ESC+"[1;"+(f+1)+"B",x||y.key!==h.C0.ESC+"[1;3B"||(y.key=h.C0.ESC+"[1;5B")):y.key=g?h.C0.ESC+"OB":h.C0.ESC+"[B";break;case 45:d.shiftKey||d.ctrlKey||(y.key=h.C0.ESC+"[2~");break;case 46:y.key=f?h.C0.ESC+"[3;"+(f+1)+"~":h.C0.ESC+"[3~";break;case 36:y.key=f?h.C0.ESC+"[1;"+(f+1)+"H":g?h.C0.ESC+"OH":h.C0.ESC+"[H";break;case 35:y.key=f?h.C0.ESC+"[1;"+(f+1)+"F":g?h.C0.ESC+"OF":h.C0.ESC+"[F";break;case 33:d.shiftKey?y.type=2:d.ctrlKey?y.key=h.C0.ESC+"[5;"+(f+1)+"~":y.key=h.C0.ESC+"[5~";break;case 34:d.shiftKey?y.type=3:d.ctrlKey?y.key=h.C0.ESC+"[6;"+(f+1)+"~":y.key=h.C0.ESC+"[6~";break;case 112:y.key=f?h.C0.ESC+"[1;"+(f+1)+"P":h.C0.ESC+"OP";break;case 113:y.key=f?h.C0.ESC+"[1;"+(f+1)+"Q":h.C0.ESC+"OQ";break;case 114:y.key=f?h.C0.ESC+"[1;"+(f+1)+"R":h.C0.ESC+"OR";break;case 115:y.key=f?h.C0.ESC+"[1;"+(f+1)+"S":h.C0.ESC+"OS";break;case 116:y.key=f?h.C0.ESC+"[15;"+(f+1)+"~":h.C0.ESC+"[15~";break;case 117:y.key=f?h.C0.ESC+"[17;"+(f+1)+"~":h.C0.ESC+"[17~";break;case 118:y.key=f?h.C0.ESC+"[18;"+(f+1)+"~":h.C0.ESC+"[18~";break;case 119:y.key=f?h.C0.ESC+"[19;"+(f+1)+"~":h.C0.ESC+"[19~";break;case 120:y.key=f?h.C0.ESC+"[20;"+(f+1)+"~":h.C0.ESC+"[20~";break;case 121:y.key=f?h.C0.ESC+"[21;"+(f+1)+"~":h.C0.ESC+"[21~";break;case 122:y.key=f?h.C0.ESC+"[23;"+(f+1)+"~":h.C0.ESC+"[23~";break;case 123:y.key=f?h.C0.ESC+"[24;"+(f+1)+"~":h.C0.ESC+"[24~";break;default:if(!d.ctrlKey||d.shiftKey||d.altKey||d.metaKey)if(x&&!_||!d.altKey||d.metaKey)!x||d.altKey||d.ctrlKey||d.shiftKey||!d.metaKey?d.key&&!d.ctrlKey&&!d.altKey&&!d.metaKey&&d.keyCode>=48&&d.key.length===1?y.key=d.key:d.key&&d.ctrlKey&&(d.key==="_"&&(y.key=h.C0.US),d.key==="@"&&(y.key=h.C0.NUL)):d.keyCode===65&&(y.type=1);else{const p=v[d.keyCode],u=p==null?void 0:p[d.shiftKey?1:0];if(u)y.key=h.C0.ESC+u;else if(d.keyCode>=65&&d.keyCode<=90){const m=d.ctrlKey?d.keyCode-64:d.keyCode+32;let b=String.fromCharCode(m);d.shiftKey&&(b=b.toUpperCase()),y.key=h.C0.ESC+b}else if(d.keyCode===32)y.key=h.C0.ESC+(d.ctrlKey?h.C0.NUL:" ");else if(d.key==="Dead"&&d.code.startsWith("Key")){let m=d.code.slice(3,4);d.shiftKey||(m=m.toLowerCase()),y.key=h.C0.ESC+m,y.cancel=!0}}else d.keyCode>=65&&d.keyCode<=90?y.key=String.fromCharCode(d.keyCode-64):d.keyCode===32?y.key=h.C0.NUL:d.keyCode>=51&&d.keyCode<=55?y.key=String.fromCharCode(d.keyCode-51+27):d.keyCode===56?y.key=h.C0.DEL:d.keyCode===219?y.key=h.C0.ESC:d.keyCode===220?y.key=h.C0.FS:d.keyCode===221&&(y.key=h.C0.GS)}return y}},482:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Utf8ToUtf32=o.StringToUtf32=o.utf32ToString=o.stringFromCodePoint=void 0,o.stringFromCodePoint=function(c){return c>65535?(c-=65536,String.fromCharCode(55296+(c>>10))+String.fromCharCode(c%1024+56320)):String.fromCharCode(c)},o.utf32ToString=function(c,h=0,v=c.length){let d="";for(let g=h;g<v;++g){let x=c[g];x>65535?(x-=65536,d+=String.fromCharCode(55296+(x>>10))+String.fromCharCode(x%1024+56320)):d+=String.fromCharCode(x)}return d},o.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(c,h){const v=c.length;if(!v)return 0;let d=0,g=0;if(this._interim){const x=c.charCodeAt(g++);56320<=x&&x<=57343?h[d++]=1024*(this._interim-55296)+x-56320+65536:(h[d++]=this._interim,h[d++]=x),this._interim=0}for(let x=g;x<v;++x){const _=c.charCodeAt(x);if(55296<=_&&_<=56319){if(++x>=v)return this._interim=_,d;const y=c.charCodeAt(x);56320<=y&&y<=57343?h[d++]=1024*(_-55296)+y-56320+65536:(h[d++]=_,h[d++]=y)}else _!==65279&&(h[d++]=_)}return d}},o.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(c,h){const v=c.length;if(!v)return 0;let d,g,x,_,y=0,f=0,p=0;if(this.interim[0]){let b=!1,S=this.interim[0];S&=(224&S)==192?31:(240&S)==224?15:7;let C,k=0;for(;(C=63&this.interim[++k])&&k<4;)S<<=6,S|=C;const w=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,j=w-k;for(;p<j;){if(p>=v)return 0;if(C=c[p++],(192&C)!=128){p--,b=!0;break}this.interim[k++]=C,S<<=6,S|=63&C}b||(w===2?S<128?p--:h[y++]=S:w===3?S<2048||S>=55296&&S<=57343||S===65279||(h[y++]=S):S<65536||S>1114111||(h[y++]=S)),this.interim.fill(0)}const u=v-4;let m=p;for(;m<v;){for(;!(!(m<u)||128&(d=c[m])||128&(g=c[m+1])||128&(x=c[m+2])||128&(_=c[m+3]));)h[y++]=d,h[y++]=g,h[y++]=x,h[y++]=_,m+=4;if(d=c[m++],d<128)h[y++]=d;else if((224&d)==192){if(m>=v)return this.interim[0]=d,y;if(g=c[m++],(192&g)!=128){m--;continue}if(f=(31&d)<<6|63&g,f<128){m--;continue}h[y++]=f}else if((240&d)==224){if(m>=v)return this.interim[0]=d,y;if(g=c[m++],(192&g)!=128){m--;continue}if(m>=v)return this.interim[0]=d,this.interim[1]=g,y;if(x=c[m++],(192&x)!=128){m--;continue}if(f=(15&d)<<12|(63&g)<<6|63&x,f<2048||f>=55296&&f<=57343||f===65279)continue;h[y++]=f}else if((248&d)==240){if(m>=v)return this.interim[0]=d,y;if(g=c[m++],(192&g)!=128){m--;continue}if(m>=v)return this.interim[0]=d,this.interim[1]=g,y;if(x=c[m++],(192&x)!=128){m--;continue}if(m>=v)return this.interim[0]=d,this.interim[1]=g,this.interim[2]=x,y;if(_=c[m++],(192&_)!=128){m--;continue}if(f=(7&d)<<18|(63&g)<<12|(63&x)<<6|63&_,f<65536||f>1114111)continue;h[y++]=f}}return y}}},225:(l,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeV6=void 0;const h=c(1480),v=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],d=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let g;o.UnicodeV6=class{constructor(){if(this.version="6",!g){g=new Uint8Array(65536),g.fill(1),g[0]=0,g.fill(0,1,32),g.fill(0,127,160),g.fill(2,4352,4448),g[9001]=2,g[9002]=2,g.fill(2,11904,42192),g[12351]=1,g.fill(2,44032,55204),g.fill(2,63744,64256),g.fill(2,65040,65050),g.fill(2,65072,65136),g.fill(2,65280,65377),g.fill(2,65504,65511);for(let x=0;x<v.length;++x)g.fill(0,v[x][0],v[x][1]+1)}}wcwidth(x){return x<32?0:x<127?1:x<65536?g[x]:function(_,y){let f,p=0,u=y.length-1;if(_<y[0][0]||_>y[u][1])return!1;for(;u>=p;)if(f=p+u>>1,_>y[f][1])p=f+1;else{if(!(_<y[f][0]))return!0;u=f-1}return!1}(x,d)?0:x>=131072&&x<=196605||x>=196608&&x<=262141?2:1}charProperties(x,_){let y=this.wcwidth(x),f=y===0&&_!==0;if(f){const p=h.UnicodeService.extractWidth(_);p===0?f=!1:p>y&&(y=p)}return h.UnicodeService.createPropertyValue(0,y,f)}}},5981:(l,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WriteBuffer=void 0;const h=c(8460),v=c(844);class d extends v.Disposable{constructor(x){super(),this._action=x,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new h.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(x,_){if(_!==void 0&&this._syncCalls>_)return void(this._syncCalls=0);if(this._pendingData+=x.length,this._writeBuffer.push(x),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let y;for(this._isSyncWriting=!0;y=this._writeBuffer.shift();){this._action(y);const f=this._callbacks.shift();f&&f()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(x,_){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=x.length,this._writeBuffer.push(x),this._callbacks.push(_),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=x.length,this._writeBuffer.push(x),this._callbacks.push(_)}_innerWrite(x=0,_=!0){const y=x||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const f=this._writeBuffer[this._bufferOffset],p=this._action(f,_);if(p){const m=b=>Date.now()-y>=12?setTimeout(()=>this._innerWrite(0,b)):this._innerWrite(y,b);return void p.catch(b=>(queueMicrotask(()=>{throw b}),Promise.resolve(!1))).then(m)}const u=this._callbacks[this._bufferOffset];if(u&&u(),this._bufferOffset++,this._pendingData-=f.length,Date.now()-y>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}o.WriteBuffer=d},5941:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.toRgbString=o.parseColor=void 0;const c=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,h=/^[\da-f]+$/;function v(d,g){const x=d.toString(16),_=x.length<2?"0"+x:x;switch(g){case 4:return x[0];case 8:return _;case 12:return(_+_).slice(0,3);default:return _+_}}o.parseColor=function(d){if(!d)return;let g=d.toLowerCase();if(g.indexOf("rgb:")===0){g=g.slice(4);const x=c.exec(g);if(x){const _=x[1]?15:x[4]?255:x[7]?4095:65535;return[Math.round(parseInt(x[1]||x[4]||x[7]||x[10],16)/_*255),Math.round(parseInt(x[2]||x[5]||x[8]||x[11],16)/_*255),Math.round(parseInt(x[3]||x[6]||x[9]||x[12],16)/_*255)]}}else if(g.indexOf("#")===0&&(g=g.slice(1),h.exec(g)&&[3,6,9,12].includes(g.length))){const x=g.length/3,_=[0,0,0];for(let y=0;y<3;++y){const f=parseInt(g.slice(x*y,x*y+x),16);_[y]=x===1?f<<4:x===2?f:x===3?f>>4:f>>8}return _}},o.toRgbString=function(d,g=16){const[x,_,y]=d;return`rgb:${v(x,g)}/${v(_,g)}/${v(y,g)}`}},5770:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PAYLOAD_LIMIT=void 0,o.PAYLOAD_LIMIT=1e7},6351:(l,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DcsHandler=o.DcsParser=void 0;const h=c(482),v=c(8742),d=c(5770),g=[];o.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=g,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=g}registerHandler(_,y){this._handlers[_]===void 0&&(this._handlers[_]=[]);const f=this._handlers[_];return f.push(y),{dispose:()=>{const p=f.indexOf(y);p!==-1&&f.splice(p,1)}}}clearHandler(_){this._handlers[_]&&delete this._handlers[_]}setHandlerFallback(_){this._handlerFb=_}reset(){if(this._active.length)for(let _=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;_>=0;--_)this._active[_].unhook(!1);this._stack.paused=!1,this._active=g,this._ident=0}hook(_,y){if(this.reset(),this._ident=_,this._active=this._handlers[_]||g,this._active.length)for(let f=this._active.length-1;f>=0;f--)this._active[f].hook(y);else this._handlerFb(this._ident,"HOOK",y)}put(_,y,f){if(this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].put(_,y,f);else this._handlerFb(this._ident,"PUT",(0,h.utf32ToString)(_,y,f))}unhook(_,y=!0){if(this._active.length){let f=!1,p=this._active.length-1,u=!1;if(this._stack.paused&&(p=this._stack.loopPosition-1,f=y,u=this._stack.fallThrough,this._stack.paused=!1),!u&&f===!1){for(;p>=0&&(f=this._active[p].unhook(_),f!==!0);p--)if(f instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=p,this._stack.fallThrough=!1,f;p--}for(;p>=0;p--)if(f=this._active[p].unhook(!1),f instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=p,this._stack.fallThrough=!0,f}else this._handlerFb(this._ident,"UNHOOK",_);this._active=g,this._ident=0}};const x=new v.Params;x.addParam(0),o.DcsHandler=class{constructor(_){this._handler=_,this._data="",this._params=x,this._hitLimit=!1}hook(_){this._params=_.length>1||_.params[0]?_.clone():x,this._data="",this._hitLimit=!1}put(_,y,f){this._hitLimit||(this._data+=(0,h.utf32ToString)(_,y,f),this._data.length>d.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(_){let y=!1;if(this._hitLimit)y=!1;else if(_&&(y=this._handler(this._data,this._params),y instanceof Promise))return y.then(f=>(this._params=x,this._data="",this._hitLimit=!1,f));return this._params=x,this._data="",this._hitLimit=!1,y}}},2015:(l,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.EscapeSequenceParser=o.VT500_TRANSITION_TABLE=o.TransitionTable=void 0;const h=c(844),v=c(8742),d=c(6242),g=c(6351);class x{constructor(p){this.table=new Uint8Array(p)}setDefault(p,u){this.table.fill(p<<4|u)}add(p,u,m,b){this.table[u<<8|p]=m<<4|b}addMany(p,u,m,b){for(let S=0;S<p.length;S++)this.table[u<<8|p[S]]=m<<4|b}}o.TransitionTable=x;const _=160;o.VT500_TRANSITION_TABLE=function(){const f=new x(4095),p=Array.apply(null,Array(256)).map((k,w)=>w),u=(k,w)=>p.slice(k,w),m=u(32,127),b=u(0,24);b.push(25),b.push.apply(b,u(28,32));const S=u(0,14);let C;for(C in f.setDefault(1,0),f.addMany(m,0,2,0),S)f.addMany([24,26,153,154],C,3,0),f.addMany(u(128,144),C,3,0),f.addMany(u(144,152),C,3,0),f.add(156,C,0,0),f.add(27,C,11,1),f.add(157,C,4,8),f.addMany([152,158,159],C,0,7),f.add(155,C,11,3),f.add(144,C,11,9);return f.addMany(b,0,3,0),f.addMany(b,1,3,1),f.add(127,1,0,1),f.addMany(b,8,0,8),f.addMany(b,3,3,3),f.add(127,3,0,3),f.addMany(b,4,3,4),f.add(127,4,0,4),f.addMany(b,6,3,6),f.addMany(b,5,3,5),f.add(127,5,0,5),f.addMany(b,2,3,2),f.add(127,2,0,2),f.add(93,1,4,8),f.addMany(m,8,5,8),f.add(127,8,5,8),f.addMany([156,27,24,26,7],8,6,0),f.addMany(u(28,32),8,0,8),f.addMany([88,94,95],1,0,7),f.addMany(m,7,0,7),f.addMany(b,7,0,7),f.add(156,7,0,0),f.add(127,7,0,7),f.add(91,1,11,3),f.addMany(u(64,127),3,7,0),f.addMany(u(48,60),3,8,4),f.addMany([60,61,62,63],3,9,4),f.addMany(u(48,60),4,8,4),f.addMany(u(64,127),4,7,0),f.addMany([60,61,62,63],4,0,6),f.addMany(u(32,64),6,0,6),f.add(127,6,0,6),f.addMany(u(64,127),6,0,0),f.addMany(u(32,48),3,9,5),f.addMany(u(32,48),5,9,5),f.addMany(u(48,64),5,0,6),f.addMany(u(64,127),5,7,0),f.addMany(u(32,48),4,9,5),f.addMany(u(32,48),1,9,2),f.addMany(u(32,48),2,9,2),f.addMany(u(48,127),2,10,0),f.addMany(u(48,80),1,10,0),f.addMany(u(81,88),1,10,0),f.addMany([89,90,92],1,10,0),f.addMany(u(96,127),1,10,0),f.add(80,1,11,9),f.addMany(b,9,0,9),f.add(127,9,0,9),f.addMany(u(28,32),9,0,9),f.addMany(u(32,48),9,9,12),f.addMany(u(48,60),9,8,10),f.addMany([60,61,62,63],9,9,10),f.addMany(b,11,0,11),f.addMany(u(32,128),11,0,11),f.addMany(u(28,32),11,0,11),f.addMany(b,10,0,10),f.add(127,10,0,10),f.addMany(u(28,32),10,0,10),f.addMany(u(48,60),10,8,10),f.addMany([60,61,62,63],10,0,11),f.addMany(u(32,48),10,9,12),f.addMany(b,12,0,12),f.add(127,12,0,12),f.addMany(u(28,32),12,0,12),f.addMany(u(32,48),12,9,12),f.addMany(u(48,64),12,0,11),f.addMany(u(64,127),12,12,13),f.addMany(u(64,127),10,12,13),f.addMany(u(64,127),9,12,13),f.addMany(b,13,13,13),f.addMany(m,13,13,13),f.add(127,13,0,13),f.addMany([27,156,24,26],13,14,0),f.add(_,0,2,0),f.add(_,8,5,8),f.add(_,6,0,6),f.add(_,11,0,11),f.add(_,13,13,13),f}();class y extends h.Disposable{constructor(p=o.VT500_TRANSITION_TABLE){super(),this._transitions=p,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new v.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(u,m,b)=>{},this._executeHandlerFb=u=>{},this._csiHandlerFb=(u,m)=>{},this._escHandlerFb=u=>{},this._errorHandlerFb=u=>u,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,h.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new d.OscParser),this._dcsParser=this.register(new g.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(p,u=[64,126]){let m=0;if(p.prefix){if(p.prefix.length>1)throw new Error("only one byte as prefix supported");if(m=p.prefix.charCodeAt(0),m&&60>m||m>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(p.intermediates){if(p.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let S=0;S<p.intermediates.length;++S){const C=p.intermediates.charCodeAt(S);if(32>C||C>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");m<<=8,m|=C}}if(p.final.length!==1)throw new Error("final must be a single byte");const b=p.final.charCodeAt(0);if(u[0]>b||b>u[1])throw new Error(`final must be in range ${u[0]} .. ${u[1]}`);return m<<=8,m|=b,m}identToString(p){const u=[];for(;p;)u.push(String.fromCharCode(255&p)),p>>=8;return u.reverse().join("")}setPrintHandler(p){this._printHandler=p}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(p,u){const m=this._identifier(p,[48,126]);this._escHandlers[m]===void 0&&(this._escHandlers[m]=[]);const b=this._escHandlers[m];return b.push(u),{dispose:()=>{const S=b.indexOf(u);S!==-1&&b.splice(S,1)}}}clearEscHandler(p){this._escHandlers[this._identifier(p,[48,126])]&&delete this._escHandlers[this._identifier(p,[48,126])]}setEscHandlerFallback(p){this._escHandlerFb=p}setExecuteHandler(p,u){this._executeHandlers[p.charCodeAt(0)]=u}clearExecuteHandler(p){this._executeHandlers[p.charCodeAt(0)]&&delete this._executeHandlers[p.charCodeAt(0)]}setExecuteHandlerFallback(p){this._executeHandlerFb=p}registerCsiHandler(p,u){const m=this._identifier(p);this._csiHandlers[m]===void 0&&(this._csiHandlers[m]=[]);const b=this._csiHandlers[m];return b.push(u),{dispose:()=>{const S=b.indexOf(u);S!==-1&&b.splice(S,1)}}}clearCsiHandler(p){this._csiHandlers[this._identifier(p)]&&delete this._csiHandlers[this._identifier(p)]}setCsiHandlerFallback(p){this._csiHandlerFb=p}registerDcsHandler(p,u){return this._dcsParser.registerHandler(this._identifier(p),u)}clearDcsHandler(p){this._dcsParser.clearHandler(this._identifier(p))}setDcsHandlerFallback(p){this._dcsParser.setHandlerFallback(p)}registerOscHandler(p,u){return this._oscParser.registerHandler(p,u)}clearOscHandler(p){this._oscParser.clearHandler(p)}setOscHandlerFallback(p){this._oscParser.setHandlerFallback(p)}setErrorHandler(p){this._errorHandler=p}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(p,u,m,b,S){this._parseStack.state=p,this._parseStack.handlers=u,this._parseStack.handlerPos=m,this._parseStack.transition=b,this._parseStack.chunkPos=S}parse(p,u,m){let b,S=0,C=0,k=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,k=this._parseStack.chunkPos+1;else{if(m===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const w=this._parseStack.handlers;let j=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(m===!1&&j>-1){for(;j>=0&&(b=w[j](this._params),b!==!0);j--)if(b instanceof Promise)return this._parseStack.handlerPos=j,b}this._parseStack.handlers=[];break;case 4:if(m===!1&&j>-1){for(;j>=0&&(b=w[j](),b!==!0);j--)if(b instanceof Promise)return this._parseStack.handlerPos=j,b}this._parseStack.handlers=[];break;case 6:if(S=p[this._parseStack.chunkPos],b=this._dcsParser.unhook(S!==24&&S!==26,m),b)return b;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(S=p[this._parseStack.chunkPos],b=this._oscParser.end(S!==24&&S!==26,m),b)return b;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,k=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let w=k;w<u;++w){switch(S=p[w],C=this._transitions.table[this.currentState<<8|(S<160?S:_)],C>>4){case 2:for(let A=w+1;;++A){if(A>=u||(S=p[A])<32||S>126&&S<_){this._printHandler(p,w,A),w=A-1;break}if(++A>=u||(S=p[A])<32||S>126&&S<_){this._printHandler(p,w,A),w=A-1;break}if(++A>=u||(S=p[A])<32||S>126&&S<_){this._printHandler(p,w,A),w=A-1;break}if(++A>=u||(S=p[A])<32||S>126&&S<_){this._printHandler(p,w,A),w=A-1;break}}break;case 3:this._executeHandlers[S]?this._executeHandlers[S]():this._executeHandlerFb(S),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:w,code:S,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const j=this._csiHandlers[this._collect<<8|S];let D=j?j.length-1:-1;for(;D>=0&&(b=j[D](this._params),b!==!0);D--)if(b instanceof Promise)return this._preserveStack(3,j,D,C,w),b;D<0&&this._csiHandlerFb(this._collect<<8|S,this._params),this.precedingJoinState=0;break;case 8:do switch(S){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(S-48)}while(++w<u&&(S=p[w])>47&&S<60);w--;break;case 9:this._collect<<=8,this._collect|=S;break;case 10:const I=this._escHandlers[this._collect<<8|S];let T=I?I.length-1:-1;for(;T>=0&&(b=I[T](),b!==!0);T--)if(b instanceof Promise)return this._preserveStack(4,I,T,C,w),b;T<0&&this._escHandlerFb(this._collect<<8|S),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|S,this._params);break;case 13:for(let A=w+1;;++A)if(A>=u||(S=p[A])===24||S===26||S===27||S>127&&S<_){this._dcsParser.put(p,w,A),w=A-1;break}break;case 14:if(b=this._dcsParser.unhook(S!==24&&S!==26),b)return this._preserveStack(6,[],0,C,w),b;S===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let A=w+1;;A++)if(A>=u||(S=p[A])<32||S>127&&S<_){this._oscParser.put(p,w,A),w=A-1;break}break;case 6:if(b=this._oscParser.end(S!==24&&S!==26),b)return this._preserveStack(5,[],0,C,w),b;S===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&C}}}o.EscapeSequenceParser=y},6242:(l,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.OscHandler=o.OscParser=void 0;const h=c(5770),v=c(482),d=[];o.OscParser=class{constructor(){this._state=0,this._active=d,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(g,x){this._handlers[g]===void 0&&(this._handlers[g]=[]);const _=this._handlers[g];return _.push(x),{dispose:()=>{const y=_.indexOf(x);y!==-1&&_.splice(y,1)}}}clearHandler(g){this._handlers[g]&&delete this._handlers[g]}setHandlerFallback(g){this._handlerFb=g}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=d}reset(){if(this._state===2)for(let g=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;g>=0;--g)this._active[g].end(!1);this._stack.paused=!1,this._active=d,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||d,this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].start();else this._handlerFb(this._id,"START")}_put(g,x,_){if(this._active.length)for(let y=this._active.length-1;y>=0;y--)this._active[y].put(g,x,_);else this._handlerFb(this._id,"PUT",(0,v.utf32ToString)(g,x,_))}start(){this.reset(),this._state=1}put(g,x,_){if(this._state!==3){if(this._state===1)for(;x<_;){const y=g[x++];if(y===59){this._state=2,this._start();break}if(y<48||57<y)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+y-48}this._state===2&&_-x>0&&this._put(g,x,_)}}end(g,x=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let _=!1,y=this._active.length-1,f=!1;if(this._stack.paused&&(y=this._stack.loopPosition-1,_=x,f=this._stack.fallThrough,this._stack.paused=!1),!f&&_===!1){for(;y>=0&&(_=this._active[y].end(g),_!==!0);y--)if(_ instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=y,this._stack.fallThrough=!1,_;y--}for(;y>=0;y--)if(_=this._active[y].end(!1),_ instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=y,this._stack.fallThrough=!0,_}else this._handlerFb(this._id,"END",g);this._active=d,this._id=-1,this._state=0}}},o.OscHandler=class{constructor(g){this._handler=g,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(g,x,_){this._hitLimit||(this._data+=(0,v.utf32ToString)(g,x,_),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(g){let x=!1;if(this._hitLimit)x=!1;else if(g&&(x=this._handler(this._data),x instanceof Promise))return x.then(_=>(this._data="",this._hitLimit=!1,_));return this._data="",this._hitLimit=!1,x}}},8742:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Params=void 0;const c=2147483647;class h{static fromArray(d){const g=new h;if(!d.length)return g;for(let x=Array.isArray(d[0])?1:0;x<d.length;++x){const _=d[x];if(Array.isArray(_))for(let y=0;y<_.length;++y)g.addSubParam(_[y]);else g.addParam(_)}return g}constructor(d=32,g=32){if(this.maxLength=d,this.maxSubParamsLength=g,g>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(d),this.length=0,this._subParams=new Int32Array(g),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(d),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const d=new h(this.maxLength,this.maxSubParamsLength);return d.params.set(this.params),d.length=this.length,d._subParams.set(this._subParams),d._subParamsLength=this._subParamsLength,d._subParamsIdx.set(this._subParamsIdx),d._rejectDigits=this._rejectDigits,d._rejectSubDigits=this._rejectSubDigits,d._digitIsSub=this._digitIsSub,d}toArray(){const d=[];for(let g=0;g<this.length;++g){d.push(this.params[g]);const x=this._subParamsIdx[g]>>8,_=255&this._subParamsIdx[g];_-x>0&&d.push(Array.prototype.slice.call(this._subParams,x,_))}return d}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(d){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=d>c?c:d}}addSubParam(d){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=d>c?c:d,this._subParamsIdx[this.length-1]++}}hasSubParams(d){return(255&this._subParamsIdx[d])-(this._subParamsIdx[d]>>8)>0}getSubParams(d){const g=this._subParamsIdx[d]>>8,x=255&this._subParamsIdx[d];return x-g>0?this._subParams.subarray(g,x):null}getSubParamsAll(){const d={};for(let g=0;g<this.length;++g){const x=this._subParamsIdx[g]>>8,_=255&this._subParamsIdx[g];_-x>0&&(d[g]=this._subParams.slice(x,_))}return d}addDigit(d){let g;if(this._rejectDigits||!(g=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const x=this._digitIsSub?this._subParams:this.params,_=x[g-1];x[g-1]=~_?Math.min(10*_+d,c):d}}o.Params=h},5741:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.AddonManager=void 0,o.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let c=this._addons.length-1;c>=0;c--)this._addons[c].instance.dispose()}loadAddon(c,h){const v={instance:h,dispose:h.dispose,isDisposed:!1};this._addons.push(v),h.dispose=()=>this._wrappedAddonDispose(v),h.activate(c)}_wrappedAddonDispose(c){if(c.isDisposed)return;let h=-1;for(let v=0;v<this._addons.length;v++)if(this._addons[v]===c){h=v;break}if(h===-1)throw new Error("Could not dispose an addon that has not been loaded");c.isDisposed=!0,c.dispose.apply(c.instance),this._addons.splice(h,1)}}},8771:(l,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferApiView=void 0;const h=c(3785),v=c(511);o.BufferApiView=class{constructor(d,g){this._buffer=d,this.type=g}init(d){return this._buffer=d,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(d){const g=this._buffer.lines.get(d);if(g)return new h.BufferLineApiView(g)}getNullCell(){return new v.CellData}}},3785:(l,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferLineApiView=void 0;const h=c(511);o.BufferLineApiView=class{constructor(v){this._line=v}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(v,d){if(!(v<0||v>=this._line.length))return d?(this._line.loadCell(v,d),d):this._line.loadCell(v,new h.CellData)}translateToString(v,d,g){return this._line.translateToString(v,d,g)}}},8285:(l,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferNamespaceApi=void 0;const h=c(8771),v=c(8460),d=c(844);class g extends d.Disposable{constructor(_){super(),this._core=_,this._onBufferChange=this.register(new v.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new h.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new h.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}o.BufferNamespaceApi=g},7975:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ParserApi=void 0,o.ParserApi=class{constructor(c){this._core=c}registerCsiHandler(c,h){return this._core.registerCsiHandler(c,v=>h(v.toArray()))}addCsiHandler(c,h){return this.registerCsiHandler(c,h)}registerDcsHandler(c,h){return this._core.registerDcsHandler(c,(v,d)=>h(v,d.toArray()))}addDcsHandler(c,h){return this.registerDcsHandler(c,h)}registerEscHandler(c,h){return this._core.registerEscHandler(c,h)}addEscHandler(c,h){return this.registerEscHandler(c,h)}registerOscHandler(c,h){return this._core.registerOscHandler(c,h)}addOscHandler(c,h){return this.registerOscHandler(c,h)}}},7090:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeApi=void 0,o.UnicodeApi=class{constructor(c){this._core=c}register(c){this._core.unicodeService.register(c)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(c){this._core.unicodeService.activeVersion=c}}},744:function(l,o,c){var h=this&&this.__decorate||function(f,p,u,m){var b,S=arguments.length,C=S<3?p:m===null?m=Object.getOwnPropertyDescriptor(p,u):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(f,p,u,m);else for(var k=f.length-1;k>=0;k--)(b=f[k])&&(C=(S<3?b(C):S>3?b(p,u,C):b(p,u))||C);return S>3&&C&&Object.defineProperty(p,u,C),C},v=this&&this.__param||function(f,p){return function(u,m){p(u,m,f)}};Object.defineProperty(o,"__esModule",{value:!0}),o.BufferService=o.MINIMUM_ROWS=o.MINIMUM_COLS=void 0;const d=c(8460),g=c(844),x=c(5295),_=c(2585);o.MINIMUM_COLS=2,o.MINIMUM_ROWS=1;let y=o.BufferService=class extends g.Disposable{get buffer(){return this.buffers.active}constructor(f){super(),this.isUserScrolling=!1,this._onResize=this.register(new d.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new d.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(f.rawOptions.cols||0,o.MINIMUM_COLS),this.rows=Math.max(f.rawOptions.rows||0,o.MINIMUM_ROWS),this.buffers=this.register(new x.BufferSet(f,this))}resize(f,p){this.cols=f,this.rows=p,this.buffers.resize(f,p),this._onResize.fire({cols:f,rows:p})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(f,p=!1){const u=this.buffer;let m;m=this._cachedBlankLine,m&&m.length===this.cols&&m.getFg(0)===f.fg&&m.getBg(0)===f.bg||(m=u.getBlankLine(f,p),this._cachedBlankLine=m),m.isWrapped=p;const b=u.ybase+u.scrollTop,S=u.ybase+u.scrollBottom;if(u.scrollTop===0){const C=u.lines.isFull;S===u.lines.length-1?C?u.lines.recycle().copyFrom(m):u.lines.push(m.clone()):u.lines.splice(S+1,0,m.clone()),C?this.isUserScrolling&&(u.ydisp=Math.max(u.ydisp-1,0)):(u.ybase++,this.isUserScrolling||u.ydisp++)}else{const C=S-b+1;u.lines.shiftElements(b+1,C-1,-1),u.lines.set(S,m.clone())}this.isUserScrolling||(u.ydisp=u.ybase),this._onScroll.fire(u.ydisp)}scrollLines(f,p,u){const m=this.buffer;if(f<0){if(m.ydisp===0)return;this.isUserScrolling=!0}else f+m.ydisp>=m.ybase&&(this.isUserScrolling=!1);const b=m.ydisp;m.ydisp=Math.max(Math.min(m.ydisp+f,m.ybase),0),b!==m.ydisp&&(p||this._onScroll.fire(m.ydisp))}};o.BufferService=y=h([v(0,_.IOptionsService)],y)},7994:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CharsetService=void 0,o.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(c){this.glevel=c,this.charset=this._charsets[c]}setgCharset(c,h){this._charsets[c]=h,this.glevel===c&&(this.charset=h)}}},1753:function(l,o,c){var h=this&&this.__decorate||function(m,b,S,C){var k,w=arguments.length,j=w<3?b:C===null?C=Object.getOwnPropertyDescriptor(b,S):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(m,b,S,C);else for(var D=m.length-1;D>=0;D--)(k=m[D])&&(j=(w<3?k(j):w>3?k(b,S,j):k(b,S))||j);return w>3&&j&&Object.defineProperty(b,S,j),j},v=this&&this.__param||function(m,b){return function(S,C){b(S,C,m)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CoreMouseService=void 0;const d=c(2585),g=c(8460),x=c(844),_={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:m=>m.button!==4&&m.action===1&&(m.ctrl=!1,m.alt=!1,m.shift=!1,!0)},VT200:{events:19,restrict:m=>m.action!==32},DRAG:{events:23,restrict:m=>m.action!==32||m.button!==3},ANY:{events:31,restrict:m=>!0}};function y(m,b){let S=(m.ctrl?16:0)|(m.shift?4:0)|(m.alt?8:0);return m.button===4?(S|=64,S|=m.action):(S|=3&m.button,4&m.button&&(S|=64),8&m.button&&(S|=128),m.action===32?S|=32:m.action!==0||b||(S|=3)),S}const f=String.fromCharCode,p={DEFAULT:m=>{const b=[y(m,!1)+32,m.col+32,m.row+32];return b[0]>255||b[1]>255||b[2]>255?"":`\x1B[M${f(b[0])}${f(b[1])}${f(b[2])}`},SGR:m=>{const b=m.action===0&&m.button!==4?"m":"M";return`\x1B[<${y(m,!0)};${m.col};${m.row}${b}`},SGR_PIXELS:m=>{const b=m.action===0&&m.button!==4?"m":"M";return`\x1B[<${y(m,!0)};${m.x};${m.y}${b}`}};let u=o.CoreMouseService=class extends x.Disposable{constructor(m,b){super(),this._bufferService=m,this._coreService=b,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new g.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const S of Object.keys(_))this.addProtocol(S,_[S]);for(const S of Object.keys(p))this.addEncoding(S,p[S]);this.reset()}addProtocol(m,b){this._protocols[m]=b}addEncoding(m,b){this._encodings[m]=b}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(m){if(!this._protocols[m])throw new Error(`unknown protocol "${m}"`);this._activeProtocol=m,this._onProtocolChange.fire(this._protocols[m].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(m){if(!this._encodings[m])throw new Error(`unknown encoding "${m}"`);this._activeEncoding=m}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(m){if(m.col<0||m.col>=this._bufferService.cols||m.row<0||m.row>=this._bufferService.rows||m.button===4&&m.action===32||m.button===3&&m.action!==32||m.button!==4&&(m.action===2||m.action===3)||(m.col++,m.row++,m.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,m,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(m))return!1;const b=this._encodings[this._activeEncoding](m);return b&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(b):this._coreService.triggerDataEvent(b,!0)),this._lastEvent=m,!0}explainEvents(m){return{down:!!(1&m),up:!!(2&m),drag:!!(4&m),move:!!(8&m),wheel:!!(16&m)}}_equalEvents(m,b,S){if(S){if(m.x!==b.x||m.y!==b.y)return!1}else if(m.col!==b.col||m.row!==b.row)return!1;return m.button===b.button&&m.action===b.action&&m.ctrl===b.ctrl&&m.alt===b.alt&&m.shift===b.shift}};o.CoreMouseService=u=h([v(0,d.IBufferService),v(1,d.ICoreService)],u)},6975:function(l,o,c){var h=this&&this.__decorate||function(u,m,b,S){var C,k=arguments.length,w=k<3?m:S===null?S=Object.getOwnPropertyDescriptor(m,b):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(u,m,b,S);else for(var j=u.length-1;j>=0;j--)(C=u[j])&&(w=(k<3?C(w):k>3?C(m,b,w):C(m,b))||w);return k>3&&w&&Object.defineProperty(m,b,w),w},v=this&&this.__param||function(u,m){return function(b,S){m(b,S,u)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CoreService=void 0;const d=c(1439),g=c(8460),x=c(844),_=c(2585),y=Object.freeze({insertMode:!1}),f=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let p=o.CoreService=class extends x.Disposable{constructor(u,m,b){super(),this._bufferService=u,this._logService=m,this._optionsService=b,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new g.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new g.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new g.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new g.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,d.clone)(y),this.decPrivateModes=(0,d.clone)(f)}reset(){this.modes=(0,d.clone)(y),this.decPrivateModes=(0,d.clone)(f)}triggerDataEvent(u,m=!1){if(this._optionsService.rawOptions.disableStdin)return;const b=this._bufferService.buffer;m&&this._optionsService.rawOptions.scrollOnUserInput&&b.ybase!==b.ydisp&&this._onRequestScrollToBottom.fire(),m&&this._onUserInput.fire(),this._logService.debug(`sending data "${u}"`,()=>u.split("").map(S=>S.charCodeAt(0))),this._onData.fire(u)}triggerBinaryEvent(u){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${u}"`,()=>u.split("").map(m=>m.charCodeAt(0))),this._onBinary.fire(u))}};o.CoreService=p=h([v(0,_.IBufferService),v(1,_.ILogService),v(2,_.IOptionsService)],p)},9074:(l,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DecorationService=void 0;const h=c(8055),v=c(8460),d=c(844),g=c(6106);let x=0,_=0;class y extends d.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new g.SortedList(u=>u==null?void 0:u.marker.line),this._onDecorationRegistered=this.register(new v.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new v.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,d.toDisposable)(()=>this.reset()))}registerDecoration(u){if(u.marker.isDisposed)return;const m=new f(u);if(m){const b=m.marker.onDispose(()=>m.dispose());m.onDispose(()=>{m&&(this._decorations.delete(m)&&this._onDecorationRemoved.fire(m),b.dispose())}),this._decorations.insert(m),this._onDecorationRegistered.fire(m)}return m}reset(){for(const u of this._decorations.values())u.dispose();this._decorations.clear()}*getDecorationsAtCell(u,m,b){let S=0,C=0;for(const k of this._decorations.getKeyIterator(m))S=k.options.x??0,C=S+(k.options.width??1),u>=S&&u<C&&(!b||(k.options.layer??"bottom")===b)&&(yield k)}forEachDecorationAtCell(u,m,b,S){this._decorations.forEachByKey(m,C=>{x=C.options.x??0,_=x+(C.options.width??1),u>=x&&u<_&&(!b||(C.options.layer??"bottom")===b)&&S(C)})}}o.DecorationService=y;class f extends d.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=h.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=h.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(u){super(),this.options=u,this.onRenderEmitter=this.register(new v.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new v.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=u.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(l,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.InstantiationService=o.ServiceCollection=void 0;const h=c(2585),v=c(8343);class d{constructor(...x){this._entries=new Map;for(const[_,y]of x)this.set(_,y)}set(x,_){const y=this._entries.get(x);return this._entries.set(x,_),y}forEach(x){for(const[_,y]of this._entries.entries())x(_,y)}has(x){return this._entries.has(x)}get(x){return this._entries.get(x)}}o.ServiceCollection=d,o.InstantiationService=class{constructor(){this._services=new d,this._services.set(h.IInstantiationService,this)}setService(g,x){this._services.set(g,x)}getService(g){return this._services.get(g)}createInstance(g,...x){const _=(0,v.getServiceDependencies)(g).sort((p,u)=>p.index-u.index),y=[];for(const p of _){const u=this._services.get(p.id);if(!u)throw new Error(`[createInstance] ${g.name} depends on UNKNOWN service ${p.id}.`);y.push(u)}const f=_.length>0?_[0].index:x.length;if(x.length!==f)throw new Error(`[createInstance] First service dependency of ${g.name} at position ${f+1} conflicts with ${x.length} static arguments`);return new g(...x,...y)}}},7866:function(l,o,c){var h=this&&this.__decorate||function(f,p,u,m){var b,S=arguments.length,C=S<3?p:m===null?m=Object.getOwnPropertyDescriptor(p,u):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(f,p,u,m);else for(var k=f.length-1;k>=0;k--)(b=f[k])&&(C=(S<3?b(C):S>3?b(p,u,C):b(p,u))||C);return S>3&&C&&Object.defineProperty(p,u,C),C},v=this&&this.__param||function(f,p){return function(u,m){p(u,m,f)}};Object.defineProperty(o,"__esModule",{value:!0}),o.traceCall=o.setTraceLogger=o.LogService=void 0;const d=c(844),g=c(2585),x={trace:g.LogLevelEnum.TRACE,debug:g.LogLevelEnum.DEBUG,info:g.LogLevelEnum.INFO,warn:g.LogLevelEnum.WARN,error:g.LogLevelEnum.ERROR,off:g.LogLevelEnum.OFF};let _,y=o.LogService=class extends d.Disposable{get logLevel(){return this._logLevel}constructor(f){super(),this._optionsService=f,this._logLevel=g.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),_=this}_updateLogLevel(){this._logLevel=x[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(f){for(let p=0;p<f.length;p++)typeof f[p]=="function"&&(f[p]=f[p]())}_log(f,p,u){this._evalLazyOptionalParams(u),f.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+p,...u)}trace(f,...p){var u;this._logLevel<=g.LogLevelEnum.TRACE&&this._log(((u=this._optionsService.options.logger)==null?void 0:u.trace.bind(this._optionsService.options.logger))??console.log,f,p)}debug(f,...p){var u;this._logLevel<=g.LogLevelEnum.DEBUG&&this._log(((u=this._optionsService.options.logger)==null?void 0:u.debug.bind(this._optionsService.options.logger))??console.log,f,p)}info(f,...p){var u;this._logLevel<=g.LogLevelEnum.INFO&&this._log(((u=this._optionsService.options.logger)==null?void 0:u.info.bind(this._optionsService.options.logger))??console.info,f,p)}warn(f,...p){var u;this._logLevel<=g.LogLevelEnum.WARN&&this._log(((u=this._optionsService.options.logger)==null?void 0:u.warn.bind(this._optionsService.options.logger))??console.warn,f,p)}error(f,...p){var u;this._logLevel<=g.LogLevelEnum.ERROR&&this._log(((u=this._optionsService.options.logger)==null?void 0:u.error.bind(this._optionsService.options.logger))??console.error,f,p)}};o.LogService=y=h([v(0,g.IOptionsService)],y),o.setTraceLogger=function(f){_=f},o.traceCall=function(f,p,u){if(typeof u.value!="function")throw new Error("not supported");const m=u.value;u.value=function(...b){if(_.logLevel!==g.LogLevelEnum.TRACE)return m.apply(this,b);_.trace(`GlyphRenderer#${m.name}(${b.map(C=>JSON.stringify(C)).join(", ")})`);const S=m.apply(this,b);return _.trace(`GlyphRenderer#${m.name} return`,S),S}}},7302:(l,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.OptionsService=o.DEFAULT_OPTIONS=void 0;const h=c(8460),v=c(844),d=c(6114);o.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:d.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const g=["normal","bold","100","200","300","400","500","600","700","800","900"];class x extends v.Disposable{constructor(y){super(),this._onOptionChange=this.register(new h.EventEmitter),this.onOptionChange=this._onOptionChange.event;const f={...o.DEFAULT_OPTIONS};for(const p in y)if(p in f)try{const u=y[p];f[p]=this._sanitizeAndValidateOption(p,u)}catch(u){console.error(u)}this.rawOptions=f,this.options={...f},this._setupOptions(),this.register((0,v.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(y,f){return this.onOptionChange(p=>{p===y&&f(this.rawOptions[y])})}onMultipleOptionChange(y,f){return this.onOptionChange(p=>{y.indexOf(p)!==-1&&f()})}_setupOptions(){const y=p=>{if(!(p in o.DEFAULT_OPTIONS))throw new Error(`No option with key "${p}"`);return this.rawOptions[p]},f=(p,u)=>{if(!(p in o.DEFAULT_OPTIONS))throw new Error(`No option with key "${p}"`);u=this._sanitizeAndValidateOption(p,u),this.rawOptions[p]!==u&&(this.rawOptions[p]=u,this._onOptionChange.fire(p))};for(const p in this.rawOptions){const u={get:y.bind(this,p),set:f.bind(this,p)};Object.defineProperty(this.options,p,u)}}_sanitizeAndValidateOption(y,f){switch(y){case"cursorStyle":if(f||(f=o.DEFAULT_OPTIONS[y]),!function(p){return p==="block"||p==="underline"||p==="bar"}(f))throw new Error(`"${f}" is not a valid value for ${y}`);break;case"wordSeparator":f||(f=o.DEFAULT_OPTIONS[y]);break;case"fontWeight":case"fontWeightBold":if(typeof f=="number"&&1<=f&&f<=1e3)break;f=g.includes(f)?f:o.DEFAULT_OPTIONS[y];break;case"cursorWidth":f=Math.floor(f);case"lineHeight":case"tabStopWidth":if(f<1)throw new Error(`${y} cannot be less than 1, value: ${f}`);break;case"minimumContrastRatio":f=Math.max(1,Math.min(21,Math.round(10*f)/10));break;case"scrollback":if((f=Math.min(f,4294967295))<0)throw new Error(`${y} cannot be less than 0, value: ${f}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(f<=0)throw new Error(`${y} cannot be less than or equal to 0, value: ${f}`);break;case"rows":case"cols":if(!f&&f!==0)throw new Error(`${y} must be numeric, value: ${f}`);break;case"windowsPty":f=f??{}}return f}}o.OptionsService=x},2660:function(l,o,c){var h=this&&this.__decorate||function(x,_,y,f){var p,u=arguments.length,m=u<3?_:f===null?f=Object.getOwnPropertyDescriptor(_,y):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(x,_,y,f);else for(var b=x.length-1;b>=0;b--)(p=x[b])&&(m=(u<3?p(m):u>3?p(_,y,m):p(_,y))||m);return u>3&&m&&Object.defineProperty(_,y,m),m},v=this&&this.__param||function(x,_){return function(y,f){_(y,f,x)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OscLinkService=void 0;const d=c(2585);let g=o.OscLinkService=class{constructor(x){this._bufferService=x,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(x){const _=this._bufferService.buffer;if(x.id===void 0){const b=_.addMarker(_.ybase+_.y),S={data:x,id:this._nextId++,lines:[b]};return b.onDispose(()=>this._removeMarkerFromLink(S,b)),this._dataByLinkId.set(S.id,S),S.id}const y=x,f=this._getEntryIdKey(y),p=this._entriesWithId.get(f);if(p)return this.addLineToLink(p.id,_.ybase+_.y),p.id;const u=_.addMarker(_.ybase+_.y),m={id:this._nextId++,key:this._getEntryIdKey(y),data:y,lines:[u]};return u.onDispose(()=>this._removeMarkerFromLink(m,u)),this._entriesWithId.set(m.key,m),this._dataByLinkId.set(m.id,m),m.id}addLineToLink(x,_){const y=this._dataByLinkId.get(x);if(y&&y.lines.every(f=>f.line!==_)){const f=this._bufferService.buffer.addMarker(_);y.lines.push(f),f.onDispose(()=>this._removeMarkerFromLink(y,f))}}getLinkData(x){var _;return(_=this._dataByLinkId.get(x))==null?void 0:_.data}_getEntryIdKey(x){return`${x.id};;${x.uri}`}_removeMarkerFromLink(x,_){const y=x.lines.indexOf(_);y!==-1&&(x.lines.splice(y,1),x.lines.length===0&&(x.data.id!==void 0&&this._entriesWithId.delete(x.key),this._dataByLinkId.delete(x.id)))}};o.OscLinkService=g=h([v(0,d.IBufferService)],g)},8343:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createDecorator=o.getServiceDependencies=o.serviceRegistry=void 0;const c="di$target",h="di$dependencies";o.serviceRegistry=new Map,o.getServiceDependencies=function(v){return v[h]||[]},o.createDecorator=function(v){if(o.serviceRegistry.has(v))return o.serviceRegistry.get(v);const d=function(g,x,_){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(y,f,p){f[c]===f?f[h].push({id:y,index:p}):(f[h]=[{id:y,index:p}],f[c]=f)})(d,g,_)};return d.toString=()=>v,o.serviceRegistry.set(v,d),d}},2585:(l,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.IDecorationService=o.IUnicodeService=o.IOscLinkService=o.IOptionsService=o.ILogService=o.LogLevelEnum=o.IInstantiationService=o.ICharsetService=o.ICoreService=o.ICoreMouseService=o.IBufferService=void 0;const h=c(8343);var v;o.IBufferService=(0,h.createDecorator)("BufferService"),o.ICoreMouseService=(0,h.createDecorator)("CoreMouseService"),o.ICoreService=(0,h.createDecorator)("CoreService"),o.ICharsetService=(0,h.createDecorator)("CharsetService"),o.IInstantiationService=(0,h.createDecorator)("InstantiationService"),function(d){d[d.TRACE=0]="TRACE",d[d.DEBUG=1]="DEBUG",d[d.INFO=2]="INFO",d[d.WARN=3]="WARN",d[d.ERROR=4]="ERROR",d[d.OFF=5]="OFF"}(v||(o.LogLevelEnum=v={})),o.ILogService=(0,h.createDecorator)("LogService"),o.IOptionsService=(0,h.createDecorator)("OptionsService"),o.IOscLinkService=(0,h.createDecorator)("OscLinkService"),o.IUnicodeService=(0,h.createDecorator)("UnicodeService"),o.IDecorationService=(0,h.createDecorator)("DecorationService")},1480:(l,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeService=void 0;const h=c(8460),v=c(225);class d{static extractShouldJoin(x){return(1&x)!=0}static extractWidth(x){return x>>1&3}static extractCharKind(x){return x>>3}static createPropertyValue(x,_,y=!1){return(16777215&x)<<3|(3&_)<<1|(y?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new h.EventEmitter,this.onChange=this._onChange.event;const x=new v.UnicodeV6;this.register(x),this._active=x.version,this._activeProvider=x}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(x){if(!this._providers[x])throw new Error(`unknown Unicode version "${x}"`);this._active=x,this._activeProvider=this._providers[x],this._onChange.fire(x)}register(x){this._providers[x.version]=x}wcwidth(x){return this._activeProvider.wcwidth(x)}getStringCellWidth(x){let _=0,y=0;const f=x.length;for(let p=0;p<f;++p){let u=x.charCodeAt(p);if(55296<=u&&u<=56319){if(++p>=f)return _+this.wcwidth(u);const S=x.charCodeAt(p);56320<=S&&S<=57343?u=1024*(u-55296)+S-56320+65536:_+=this.wcwidth(S)}const m=this.charProperties(u,y);let b=d.extractWidth(m);d.extractShouldJoin(m)&&(b-=d.extractWidth(y)),_+=b,y=m}return _}charProperties(x,_){return this._activeProvider.charProperties(x,_)}}o.UnicodeService=d}},s={};function i(l){var o=s[l];if(o!==void 0)return o.exports;var c=s[l]={exports:{}};return r[l].call(c.exports,c,c.exports,i),c.exports}var a={};return(()=>{var l=a;Object.defineProperty(l,"__esModule",{value:!0}),l.Terminal=void 0;const o=i(9042),c=i(3236),h=i(844),v=i(5741),d=i(8285),g=i(7975),x=i(7090),_=["cols","rows"];class y extends h.Disposable{constructor(p){super(),this._core=this.register(new c.Terminal(p)),this._addonManager=this.register(new v.AddonManager),this._publicOptions={...this._core.options};const u=b=>this._core.options[b],m=(b,S)=>{this._checkReadonlyOptions(b),this._core.options[b]=S};for(const b in this._core.options){const S={get:u.bind(this,b),set:m.bind(this,b)};Object.defineProperty(this._publicOptions,b,S)}}_checkReadonlyOptions(p){if(_.includes(p))throw new Error(`Option "${p}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new g.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new x.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new d.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const p=this._core.coreService.decPrivateModes;let u="none";switch(this._core.coreMouseService.activeProtocol){case"X10":u="x10";break;case"VT200":u="vt200";break;case"DRAG":u="drag";break;case"ANY":u="any"}return{applicationCursorKeysMode:p.applicationCursorKeys,applicationKeypadMode:p.applicationKeypad,bracketedPasteMode:p.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:u,originMode:p.origin,reverseWraparoundMode:p.reverseWraparound,sendFocusMode:p.sendFocus,wraparoundMode:p.wraparound}}get options(){return this._publicOptions}set options(p){for(const u in p)this._publicOptions[u]=p[u]}blur(){this._core.blur()}focus(){this._core.focus()}input(p,u=!0){this._core.input(p,u)}resize(p,u){this._verifyIntegers(p,u),this._core.resize(p,u)}open(p){this._core.open(p)}attachCustomKeyEventHandler(p){this._core.attachCustomKeyEventHandler(p)}attachCustomWheelEventHandler(p){this._core.attachCustomWheelEventHandler(p)}registerLinkProvider(p){return this._core.registerLinkProvider(p)}registerCharacterJoiner(p){return this._checkProposedApi(),this._core.registerCharacterJoiner(p)}deregisterCharacterJoiner(p){this._checkProposedApi(),this._core.deregisterCharacterJoiner(p)}registerMarker(p=0){return this._verifyIntegers(p),this._core.registerMarker(p)}registerDecoration(p){return this._checkProposedApi(),this._verifyPositiveIntegers(p.x??0,p.width??0,p.height??0),this._core.registerDecoration(p)}hasSelection(){return this._core.hasSelection()}select(p,u,m){this._verifyIntegers(p,u,m),this._core.select(p,u,m)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(p,u){this._verifyIntegers(p,u),this._core.selectLines(p,u)}dispose(){super.dispose()}scrollLines(p){this._verifyIntegers(p),this._core.scrollLines(p)}scrollPages(p){this._verifyIntegers(p),this._core.scrollPages(p)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(p){this._verifyIntegers(p),this._core.scrollToLine(p)}clear(){this._core.clear()}write(p,u){this._core.write(p,u)}writeln(p,u){this._core.write(p),this._core.write(`\r
`,u)}paste(p){this._core.paste(p)}refresh(p,u){this._verifyIntegers(p,u),this._core.refresh(p,u)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(p){this._addonManager.loadAddon(this,p)}static get strings(){return o}_verifyIntegers(...p){for(const u of p)if(u===1/0||isNaN(u)||u%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...p){for(const u of p)if(u&&(u===1/0||isNaN(u)||u%1!=0||u<0))throw new Error("This API only accepts positive integers")}}l.Terminal=y})(),a})())})($x);var Dk=$x.exports,Ux={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(self,()=>(()=>{var r={};return(()=>{var s=r;Object.defineProperty(s,"__esModule",{value:!0}),s.FitAddon=void 0,s.FitAddon=class{activate(i){this._terminal=i}dispose(){}fit(){const i=this.proposeDimensions();if(!i||!this._terminal||isNaN(i.cols)||isNaN(i.rows))return;const a=this._terminal._core;this._terminal.rows===i.rows&&this._terminal.cols===i.cols||(a._renderService.clear(),this._terminal.resize(i.cols,i.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const i=this._terminal._core,a=i._renderService.dimensions;if(a.css.cell.width===0||a.css.cell.height===0)return;const l=this._terminal.options.scrollback===0?0:i.viewport.scrollBarWidth,o=window.getComputedStyle(this._terminal.element.parentElement),c=parseInt(o.getPropertyValue("height")),h=Math.max(0,parseInt(o.getPropertyValue("width"))),v=window.getComputedStyle(this._terminal.element),d=c-(parseInt(v.getPropertyValue("padding-top"))+parseInt(v.getPropertyValue("padding-bottom"))),g=h-(parseInt(v.getPropertyValue("padding-right"))+parseInt(v.getPropertyValue("padding-left")))-l;return{cols:Math.max(2,Math.floor(g/a.css.cell.width)),rows:Math.max(1,Math.floor(d/a.css.cell.height))}}}})(),r})())})(Ux);var Rk=Ux.exports,Wx={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(self,()=>(()=>{var r={6:(l,o)=>{function c(v){try{const d=new URL(v),g=d.password&&d.username?`${d.protocol}//${d.username}:${d.password}@${d.host}`:d.username?`${d.protocol}//${d.username}@${d.host}`:`${d.protocol}//${d.host}`;return v.toLocaleLowerCase().startsWith(g.toLocaleLowerCase())}catch{return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.LinkComputer=o.WebLinkProvider=void 0,o.WebLinkProvider=class{constructor(v,d,g,x={}){this._terminal=v,this._regex=d,this._handler=g,this._options=x}provideLinks(v,d){const g=h.computeLink(v,this._regex,this._terminal,this._handler);d(this._addCallbacks(g))}_addCallbacks(v){return v.map(d=>(d.leave=this._options.leave,d.hover=(g,x)=>{if(this._options.hover){const{range:_}=d;this._options.hover(g,x,_)}},d))}};class h{static computeLink(d,g,x,_){const y=new RegExp(g.source,(g.flags||"")+"g"),[f,p]=h._getWindowedLineStrings(d-1,x),u=f.join("");let m;const b=[];for(;m=y.exec(u);){const S=m[0];if(!c(S))continue;const[C,k]=h._mapStrIdx(x,p,0,m.index),[w,j]=h._mapStrIdx(x,C,k,S.length);if(C===-1||k===-1||w===-1||j===-1)continue;const D={start:{x:k+1,y:C+1},end:{x:j,y:w+1}};b.push({range:D,text:S,activate:_})}return b}static _getWindowedLineStrings(d,g){let x,_=d,y=d,f=0,p="";const u=[];if(x=g.buffer.active.getLine(d)){const m=x.translateToString(!0);if(x.isWrapped&&m[0]!==" "){for(f=0;(x=g.buffer.active.getLine(--_))&&f<2048&&(p=x.translateToString(!0),f+=p.length,u.push(p),x.isWrapped&&p.indexOf(" ")===-1););u.reverse()}for(u.push(m),f=0;(x=g.buffer.active.getLine(++y))&&x.isWrapped&&f<2048&&(p=x.translateToString(!0),f+=p.length,u.push(p),p.indexOf(" ")===-1););}return[u,_]}static _mapStrIdx(d,g,x,_){const y=d.buffer.active,f=y.getNullCell();let p=x;for(;_;){const u=y.getLine(g);if(!u)return[-1,-1];for(let m=p;m<u.length;++m){u.getCell(m,f);const b=f.getChars();if(f.getWidth()&&(_-=b.length||1,m===u.length-1&&b==="")){const S=y.getLine(g+1);S&&S.isWrapped&&(S.getCell(0,f),f.getWidth()===2&&(_+=1))}if(_<0)return[g,m]}g++,p=0}return[g,p]}}o.LinkComputer=h}},s={};function i(l){var o=s[l];if(o!==void 0)return o.exports;var c=s[l]={exports:{}};return r[l](c,c.exports,i),c.exports}var a={};return(()=>{var l=a;Object.defineProperty(l,"__esModule",{value:!0}),l.WebLinksAddon=void 0;const o=i(6),c=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function h(v,d){const g=window.open();if(g){try{g.opener=null}catch{}g.location.href=d}else console.warn("Opening link blocked as opener could not be cleared")}l.WebLinksAddon=class{constructor(v=h,d={}){this._handler=v,this._options=d}activate(v){this._terminal=v;const d=this._options,g=d.urlRegex||c;this._linkProvider=this._terminal.registerLinkProvider(new o.WebLinkProvider(this._terminal,g,this._handler,d))}dispose(){var v;(v=this._linkProvider)==null||v.dispose()}}})(),a})())})(Wx);var Ak=Wx.exports;const Tk=(e={})=>{const{agentId:t,onData:r,onConnect:s,onDisconnect:i,onError:a}=e,[l,o]=E.useState(null),[c,h]=E.useState(!1),[v,d]=E.useState(!1),[g,x]=E.useState(null),_=E.useRef(e);_.current=e;const y=u=>{l!=null&&l.connected&&f(),d(!0),x(null);const m=Fi(`${window.location.protocol}//${window.location.host}/terminal`,{query:{agentId:u},transports:["websocket"]});m.on("connect",()=>{var b,S;h(!0),d(!1),(S=(b=_.current).onConnect)==null||S.call(b)}),m.on("disconnect",()=>{var b,S;h(!1),d(!1),(S=(b=_.current).onDisconnect)==null||S.call(b)}),m.on("data",b=>{var S,C;(C=(S=_.current).onData)==null||C.call(S,b)}),m.on("error",b=>{var C,k;const S=(b==null?void 0:b.message)||"Connection error";x(S),d(!1),(k=(C=_.current).onError)==null||k.call(C,S)}),m.on("connect_error",b=>{var C,k;const S=(b==null?void 0:b.message)||"Failed to connect";x(S),d(!1),(k=(C=_.current).onError)==null||k.call(C,S)}),o(m)},f=()=>{l&&(l.disconnect(),o(null)),h(!1),d(!1),x(null)},p=u=>{l!=null&&l.connected&&l.emit("input",u)};return E.useEffect(()=>(t&&y(t),()=>{f()}),[t]),E.useEffect(()=>()=>{f()},[]),{socket:l,isConnected:c,isConnecting:v,error:g,sendData:p,connect:y,disconnect:f}};const Rm=({agentId:e,isFullscreen:t=!1,onToggleFullscreen:r,onClose:s,className:i=""})=>{const a=E.useRef(null),l=E.useRef(null),o=E.useRef(null),{isConnected:c,isConnecting:h,error:v,sendData:d,connect:g,disconnect:x}=Tk({agentId:e,onData:f=>{l.current&&l.current.write(f)},onConnect:()=>{l.current&&e&&(l.current.clear(),l.current.writeln("\x1B[32m Connected to agent "+e+"\x1B[0m"),l.current.writeln("\x1B[36mTerminal session active. You can now interact with the agent.\x1B[0m"),l.current.writeln(""))},onDisconnect:()=>{l.current&&l.current.writeln(`\r
\x1B[33m Connection closed\x1B[0m`)},onError:f=>{l.current&&l.current.writeln(`\r
\x1B[31m Error: `+f+"\x1B[0m")}});E.useEffect(()=>{if(!a.current)return;const f=new Dk.Terminal({cursorBlink:!0,fontSize:14,fontFamily:'Menlo, Monaco, "Courier New", monospace',theme:{background:"#1a1b26",foreground:"#a9b1d6",cursor:"#f7768e",selectionBackground:"#364a82",black:"#32344a",red:"#f7768e",green:"#9ece6a",yellow:"#e0af68",blue:"#7aa2f7",magenta:"#ad8ee6",cyan:"#449dab",white:"#9699a3",brightBlack:"#444b6a",brightRed:"#ff7a93",brightGreen:"#b9f27c",brightYellow:"#ff9e64",brightBlue:"#7da6ff",brightMagenta:"#bb9af7",brightCyan:"#0db9d7",brightWhite:"#acb0d0"},scrollback:1e3}),p=new Rk.FitAddon,u=new Ak.WebLinksAddon;return f.loadAddon(p),f.loadAddon(u),f.open(a.current),l.current=f,o.current=p,setTimeout(()=>{p.fit()},100),f.onData(m=>{c&&d(m)}),e?h?f.writeln("\x1B[32m Connecting to agent "+e+"...\x1B[0m"):c||(f.writeln("\x1B[33m  Not connected to agent "+e+"\x1B[0m"),f.writeln("\x1B[90mWaiting for connection...\x1B[0m")):_(f),()=>{f.dispose()}},[e,c,h,d]),E.useEffect(()=>{const f=()=>{o.current&&setTimeout(()=>{var p;(p=o.current)==null||p.fit()},100)};return window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[]),E.useEffect(()=>{o.current&&setTimeout(()=>{var f;(f=o.current)==null||f.fit()},100)},[t]);const _=f=>{f.clear(),f.writeln("\x1B[36m\x1B[0m"),f.writeln("\x1B[36m               \x1B[1mMagents Terminal\x1B[0m\x1B[36m                \x1B[0m"),f.writeln("\x1B[36m\x1B[0m"),f.writeln(""),f.writeln("\x1B[33mWelcome to the Magents integrated terminal!\x1B[0m"),f.writeln(""),f.writeln("\x1B[32m \x1B[0mConnect to an agent to start interacting"),f.writeln("\x1B[32m \x1B[0mUse the agent cards to attach to running agents"),f.writeln("\x1B[32m \x1B[0mAll terminal sessions are isolated per agent"),f.writeln(""),f.writeln("\x1B[90mSelect an agent from the dashboard to get started.\x1B[0m")},y=()=>{x(),l.current&&(l.current.clear(),_(l.current))};return n.jsxs("div",{className:`bg-background-card border border-border rounded-lg overflow-hidden ${i}`,children:[n.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-background-tertiary border-b border-border",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Xs,{className:"w-4 h-4 text-foreground-secondary"}),n.jsx("span",{className:"text-sm font-medium text-foreground",children:e?`Agent ${e}`:"Terminal"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${h?"bg-yellow-500 animate-pulse":c?"bg-status-success":"bg-foreground-tertiary"}`}),n.jsx("span",{className:"text-xs text-foreground-secondary",children:h?"Connecting...":c?"Connected":"Disconnected"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[e&&c&&n.jsx("button",{onClick:y,className:"p-1.5 text-foreground-secondary hover:text-foreground hover:bg-background-card rounded transition-colors",title:"Disconnect",children:n.jsx(po,{className:"w-4 h-4"})}),r&&n.jsx("button",{onClick:r,className:"p-1.5 text-foreground-secondary hover:text-foreground hover:bg-background-card rounded transition-colors",title:t?"Exit fullscreen":"Enter fullscreen",children:t?n.jsx(QS,{className:"w-4 h-4"}):n.jsx(Hu,{className:"w-4 h-4"})}),s&&n.jsx("button",{onClick:s,className:"p-1.5 text-foreground-secondary hover:text-status-error hover:bg-status-error/20 rounded transition-colors",title:"Close terminal",children:n.jsx(po,{className:"w-4 h-4"})})]})]}),n.jsx("div",{className:"relative",children:n.jsx("div",{ref:a,className:`w-full ${t?"h-[calc(100vh-4rem)]":"h-80"}`,style:{minHeight:t?"calc(100vh - 4rem)":"20rem"}})})]})},Pk=({className:e=""})=>{const[t,r]=E.useState(!1),[s,i]=E.useState(!1),[a,l]=E.useState(void 0);E.useEffect(()=>{const h=v=>{const{agentId:d}=v.detail;l(d),r(!0),i(!1)};return window.addEventListener("open-terminal",h),()=>{window.removeEventListener("open-terminal",h)}},[]);const o=()=>{r(!1),l(void 0),i(!1)},c=()=>{i(!s)};return t?s?n.jsxs("div",{className:"fixed inset-0 bg-background z-50 flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between px-6 py-4 bg-background-card border-b border-border",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Xs,{className:"w-5 h-5 text-brand"}),n.jsxs("h1",{className:"text-lg font-semibold text-foreground",children:["Terminal ",a&&`- Agent ${a}`]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:c,className:"p-2 text-foreground-secondary hover:text-foreground hover:bg-background-tertiary rounded-lg transition-colors",title:"Exit fullscreen",children:n.jsx(Hu,{className:"w-5 h-5"})}),n.jsx("button",{onClick:o,className:"p-2 text-foreground-secondary hover:text-status-error hover:bg-status-error/20 rounded-lg transition-colors",title:"Close terminal",children:n.jsx(po,{className:"w-5 h-5"})})]})]}),n.jsx("div",{className:"flex-1",children:n.jsx(Rm,{agentId:a,isFullscreen:!0,onToggleFullscreen:c,onClose:o,className:"h-full border-0 rounded-none"})})]}):n.jsx("div",{className:`fixed bottom-6 right-6 w-96 lg:w-[40rem] xl:w-[50rem] z-40 ${e}`,children:n.jsxs("div",{className:"bg-background-card border border-border rounded-lg shadow-2xl",children:[n.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-background-tertiary border-b border-border rounded-t-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Xs,{className:"w-4 h-4 text-brand"}),n.jsxs("span",{className:"text-sm font-medium text-foreground",children:["Terminal ",a&&`- Agent ${a}`]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:c,className:"p-1.5 text-foreground-secondary hover:text-foreground hover:bg-background-card rounded transition-colors",title:"Fullscreen",children:n.jsx(Hu,{className:"w-4 h-4"})}),n.jsx("button",{onClick:o,className:"p-1.5 text-foreground-secondary hover:text-status-error hover:bg-status-error/20 rounded transition-colors",title:"Close",children:n.jsx(po,{className:"w-4 h-4"})})]})]}),n.jsx(Rm,{agentId:a,isFullscreen:!1,onToggleFullscreen:c,onClose:o,className:"border-0 rounded-b-lg h-80"})]})}):null},Lk=({isOpen:e,onClose:t,shortcuts:r})=>{if(!e)return null;const s=r.reduce((a,l)=>{const o=l.category||"General";return a[o]||(a[o]=[]),a[o].push(l),a},{}),i=({shortcut:a})=>{const l=[];a.ctrlKey&&l.push("Ctrl"),a.metaKey&&l.push(""),a.shiftKey&&l.push("Shift"),a.altKey&&l.push("Alt");const o=a.key===" "?"Space":a.key.toUpperCase();return l.push(o),n.jsx("div",{className:"flex items-center gap-1",children:l.map((c,h)=>n.jsxs(ie.Fragment,{children:[h>0&&n.jsx("span",{className:"text-foreground-tertiary",children:"+"}),n.jsx("kbd",{className:"px-2 py-1 bg-background-tertiary border border-border rounded text-xs font-mono text-foreground-secondary",children:c})]},c))})};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-background-card border border-border rounded-lg max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(V2,{className:"w-5 h-5 text-brand"}),n.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Keyboard Shortcuts"})]}),n.jsx("button",{onClick:t,className:"p-2 text-foreground-secondary hover:text-foreground hover:bg-background-tertiary rounded-lg transition-colors",children:n.jsx(po,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"overflow-y-auto max-h-[60vh]",children:n.jsxs("div",{className:"p-6 space-y-6",children:[Object.entries(s).map(([a,l])=>n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium text-foreground-secondary mb-3 flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 bg-brand rounded-full"}),a]}),n.jsx("div",{className:"space-y-3",children:l.map((o,c)=>n.jsxs("div",{className:"flex items-center justify-between py-2",children:[n.jsx("span",{className:"text-sm text-foreground",children:o.description}),n.jsx(i,{shortcut:o})]},c))})]},a)),r.length===0&&n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Xs,{className:"w-12 h-12 text-foreground-tertiary mx-auto mb-3"}),n.jsx("p",{className:"text-foreground-secondary",children:"No keyboard shortcuts available"})]})]})}),n.jsx("div",{className:"border-t border-border px-6 py-4 bg-background-tertiary",children:n.jsxs("div",{className:"flex items-center justify-between text-xs text-foreground-tertiary",children:[n.jsxs("span",{children:["Press ",n.jsx("kbd",{className:"px-1 py-0.5 bg-background-card border border-border rounded",children:"Ctrl + ?"})," to toggle this help"]}),n.jsxs("span",{children:[r.length," shortcuts available"]})]})})]})})},zx=E.createContext(null),Ik=({children:e,preferredMethod:t="auto"})=>{const[r,s]=E.useState("none"),[i,a]=E.useState(null),[l,o]=E.useState(null),{socket:c,isConnected:h}=$o(),{isConnected:v}=Fx("/api/events",{onEvent:_=>{a(new Date().toISOString()),["agent-status-changed","agent-created","agent-deleted"].includes(_.type)&&(l==null||l())},onOpen:()=>{(t==="sse"||t==="auto"&&!h)&&s("sse")}});E.useEffect(()=>{s(t==="websocket"&&h?"websocket":t==="sse"&&v?"sse":t==="auto"?h?"websocket":v?"sse":"none":"none")},[t,h,v]),E.useEffect(()=>{if(r==="websocket"&&c){const _=()=>{a(new Date().toISOString()),l==null||l()};return c.on("agent-status-changed",_),c.on("agent-created",_),c.on("agent-deleted",_),()=>{c.off("agent-status-changed",_),c.off("agent-created",_),c.off("agent-deleted",_)}}},[r,c,l]);const x={isConnected:h||v,connectionType:r,lastUpdate:i,onAgentUpdate:()=>{a(new Date().toISOString()),l==null||l()},setRefreshCallback:_=>{o(()=>_)}};return n.jsx(zx.Provider,{value:x,children:e})},Ok=()=>{const e=E.useContext(zx);if(!e)throw new Error("useRealTime must be used within a RealTimeProvider");return e},Mk=(e,t={})=>{const{enabled:r=!0,preventDefault:s=!0}=t,i=E.useRef(e);i.current=e;const a=E.useCallback(l=>{if(!r)return;const o=l.target;if(o.tagName==="INPUT"||o.tagName==="TEXTAREA"||o.contentEditable==="true")return;const c=i.current.find(h=>{const v=l.key.toLowerCase()===h.key.toLowerCase(),d=!!l.ctrlKey==!!h.ctrlKey,g=!!l.metaKey==!!h.metaKey,x=!!l.shiftKey==!!h.shiftKey,_=!!l.altKey==!!h.altKey;return v&&d&&g&&x&&_});c&&(s&&(l.preventDefault(),l.stopPropagation()),c.action())},[r,s]);return E.useEffect(()=>(document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)}),[a]),{shortcuts:i.current}},Bk=e=>{const t=[];return e.createAgent&&t.push({key:"n",ctrlKey:!0,action:e.createAgent,description:"Create new agent",category:"Navigation"}),e.openTerminal&&t.push({key:"t",ctrlKey:!0,action:e.openTerminal,description:"Open terminal",category:"Navigation"}),e.toggleSearch&&t.push({key:"k",ctrlKey:!0,action:e.toggleSearch,description:"Toggle search",category:"Navigation"}),e.toggleSettings&&t.push({key:",",ctrlKey:!0,action:e.toggleSettings,description:"Open settings",category:"Navigation"}),e.refreshData&&t.push({key:"r",ctrlKey:!0,action:e.refreshData,description:"Refresh data",category:"Actions"}),e.toggleViewMode&&t.push({key:"v",ctrlKey:!0,action:e.toggleViewMode,description:"Toggle view mode",category:"View"}),e.toggleFullscreen&&t.push({key:"f",ctrlKey:!0,action:e.toggleFullscreen,description:"Toggle fullscreen",category:"View"}),e.closeModal&&t.push({key:"Escape",action:e.closeModal,description:"Close modal/dialog",category:"Navigation"}),e.showHelp&&t.push({key:"?",ctrlKey:!0,action:e.showHelp,description:"Show keyboard shortcuts",category:"Help"}),e.startAllAgents&&t.push({key:"s",ctrlKey:!0,shiftKey:!0,action:e.startAllAgents,description:"Start all agents",category:"Agent Control"}),e.stopAllAgents&&t.push({key:"x",ctrlKey:!0,shiftKey:!0,action:e.stopAllAgents,description:"Stop all agents",category:"Agent Control"}),t},Fk=()=>{const[e,t]=E.useState("grid"),[r,s]=E.useState({overview:!0,agents:!0,projects:!1,advanced:!1}),[i,a]=E.useState(!1),{isDemoMode:l}=hf(),o=l?uf:_e,{isConnected:c,connectionType:h,lastUpdate:v,setRefreshCallback:d}=Ok(),g=O=>({...O,lastActivity:O.updatedAt||O.createdAt,cpuUsage:Math.random()*100,memoryUsage:Math.random()*100}),x=O=>({...O}),{data:_=[],isLoading:y,refetch:f}=hr({queryKey:["agents",l?"demo":"real"],queryFn:()=>o.getAgents(),refetchInterval:l?1e4:5e3}),{data:p=[],isLoading:u}=hr({queryKey:["projects",l?"demo":"real"],queryFn:()=>o.getProjects()}),m=_.map(g),b=p.map(x);E.useEffect(()=>{d(f)},[f,d]);const S=O=>{s(R=>({...R,[O]:!R[O]}))},C=m.filter(O=>O.status==="RUNNING"),k=m.filter(O=>O.status==="STOPPED"),w=m.filter(O=>O.status==="ERROR"),A=Bk({createAgent:()=>{window.open("/agents/new","_blank")},openTerminal:()=>{window.dispatchEvent(new CustomEvent("open-terminal",{detail:{agentId:void 0}}))},refreshData:f,toggleViewMode:()=>t(O=>O==="grid"?"list":"grid"),showHelp:()=>a(!0),closeModal:()=>a(!1),startAllAgents:()=>{k.forEach(O=>{window.dispatchEvent(new CustomEvent("start-agent",{detail:{agentId:O.id}}))})},stopAllAgents:()=>{C.forEach(O=>{window.dispatchEvent(new CustomEvent("stop-agent",{detail:{agentId:O.id}}))})}});return Mk(A),n.jsxs("div",{className:"space-y-6 p-6 bg-background min-h-screen",children:[n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Development Dashboard"}),l&&n.jsx("span",{className:"px-3 py-1 bg-purple-600 text-white text-sm font-medium rounded-full",children:"Demo Mode"})]}),n.jsx("p",{className:"text-foreground-secondary mt-1",children:l?"Explore the dashboard with sample data":"Manage your multi-agent development workflow"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${c?"bg-status-success":"bg-status-error"}`}),n.jsx("span",{className:"text-sm text-foreground-secondary",children:c?`Connected (${h.toUpperCase()})`:"Disconnected"}),v&&n.jsxs("span",{className:"text-xs text-foreground-tertiary",children:[" Last update: ",new Date(v).toLocaleTimeString()]})]}),n.jsxs("div",{className:"flex bg-background-tertiary rounded-lg p-1",children:[n.jsx("button",{onClick:()=>t("grid"),className:`p-2 rounded-md transition-colors ${e==="grid"?"bg-background-card text-foreground":"text-foreground-secondary hover:text-foreground"}`,title:"Grid view (Ctrl+V)",children:n.jsx(Sx,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>t("list"),className:`p-2 rounded-md transition-colors ${e==="list"?"bg-background-card text-foreground":"text-foreground-secondary hover:text-foreground"}`,title:"List view (Ctrl+V)",children:n.jsx(wx,{className:"w-4 h-4"})})]}),n.jsx("button",{onClick:()=>a(!0),className:"p-2 text-foreground-secondary hover:text-foreground hover:bg-background-tertiary rounded-lg transition-colors",title:"Keyboard shortcuts (Ctrl+?)",children:n.jsx(rC,{className:"w-5 h-5"})})]})]}),n.jsx(ka,{title:"System Overview",isExpanded:r.overview,onToggle:()=>S("overview"),children:n.jsx(Nk,{agents:m,projects:b,isLoading:y||u})}),n.jsx(Ek,{agents:m,onRefresh:f}),n.jsx(ka,{title:`Active Agents (${m.length})`,isExpanded:r.agents,onToggle:()=>S("agents"),children:n.jsxs("div",{className:"space-y-4",children:[C.length>0&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium text-status-success mb-3 flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 bg-status-success rounded-full"}),"Running (",C.length,")"]}),n.jsx("div",{className:`grid gap-4 ${e==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1"}`,children:C.map(O=>n.jsx(md,{agent:O,viewMode:e,onRefresh:f},O.id))})]}),k.length>0&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium text-foreground-secondary mb-3 flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 bg-foreground-secondary rounded-full"}),"Stopped (",k.length,")"]}),n.jsx("div",{className:`grid gap-4 ${e==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1"}`,children:k.map(O=>n.jsx(md,{agent:O,viewMode:e,onRefresh:f},O.id))})]}),w.length>0&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium text-status-error mb-3 flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 bg-status-error rounded-full"}),"Errors (",w.length,")"]}),n.jsx("div",{className:`grid gap-4 ${e==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1"}`,children:w.map(O=>n.jsx(md,{agent:O,viewMode:e,onRefresh:f},O.id))})]}),m.length===0&&!y&&n.jsxs("div",{className:"text-center py-12 bg-background-card rounded-lg border border-border",children:[n.jsx("p",{className:"text-foreground-secondary mb-4",children:"No agents found"}),n.jsx("button",{className:"px-4 py-2 bg-brand text-white rounded-lg hover:bg-brand-hover transition-colors",children:"Create Your First Agent"})]})]})}),n.jsx(ka,{title:`Projects (${b.length})`,isExpanded:r.projects,onToggle:()=>S("projects"),children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:b.map(O=>{var R;return n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-4 hover:bg-background-card-hover transition-colors",children:[n.jsx("h3",{className:"font-semibold text-foreground mb-2",children:O.name}),n.jsx("p",{className:"text-sm text-foreground-secondary mb-3",children:O.description||"No description"}),n.jsxs("div",{className:"flex items-center justify-between text-xs",children:[n.jsxs("span",{className:"text-foreground-tertiary",children:[((R=O.agents)==null?void 0:R.length)||0," agents"]}),n.jsx("button",{className:"text-brand hover:text-brand-hover font-medium",children:"Manage"})]})]},O.id)})})}),n.jsx(ka,{title:"Advanced Options",isExpanded:r.advanced,onToggle:()=>S("advanced"),children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-4",children:[n.jsx("h3",{className:"font-medium text-foreground mb-2",children:"System Settings"}),n.jsx("p",{className:"text-sm text-foreground-secondary mb-3",children:"Configure global system preferences"}),n.jsx("button",{className:"text-sm text-brand hover:text-brand-hover",children:"Open Settings"})]}),n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-4",children:[n.jsx("h3",{className:"font-medium text-foreground mb-2",children:"Resource Monitor"}),n.jsx("p",{className:"text-sm text-foreground-secondary mb-3",children:"View system resource usage and performance"}),n.jsx("button",{className:"text-sm text-brand hover:text-brand-hover",children:"View Monitor"})]}),n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-4",children:[n.jsx("h3",{className:"font-medium text-foreground mb-2",children:"Logs & Debugging"}),n.jsx("p",{className:"text-sm text-foreground-secondary mb-3",children:"Access system logs and debugging tools"}),n.jsx("button",{className:"text-sm text-brand hover:text-brand-hover",children:"View Logs"})]})]})}),n.jsx(Pk,{}),n.jsx(Lk,{isOpen:i,onClose:()=>a(!1),shortcuts:A})]})},$k=()=>n.jsx(kk,{children:n.jsx(Ik,{preferredMethod:"auto",children:n.jsx(Fk,{})})}),Hk=()=>{const e=rn(),[t,r]=E.useState(""),[s,i]=E.useState("all"),[a,l]=E.useState("all"),{data:o=[],isLoading:c,refetch:h}=hr({queryKey:["agents"],queryFn:()=>_e.getAgents()}),{data:v=[]}=hr({queryKey:["projects"],queryFn:()=>_e.getProjects()}),d=o.filter(_=>{var u;const y=t===""||_.id.toLowerCase().includes(t.toLowerCase())||_.branch.toLowerCase().includes(t.toLowerCase())||((u=_.projectId)==null?void 0:u.toLowerCase().includes(t.toLowerCase())),f=s==="all"||_.status===s,p=a==="all"||_.projectId===a;return y&&f&&p}),g=_=>{const y={RUNNING:"bg-status-success/20 text-status-success",STOPPED:"bg-foreground-tertiary/20 text-foreground-tertiary",ERROR:"bg-status-error/20 text-status-error"};return n.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${y[_]||y.STOPPED}`,children:_})},x=({agent:_})=>{const y=v.find(f=>f.id===_.projectId);return n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-6 hover:bg-background-card-hover transition-all group",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`p-2 rounded-lg ${_.status==="RUNNING"?"bg-status-success/20":_.status==="ERROR"?"bg-status-error/20":"bg-foreground-tertiary/20"}`,children:n.jsx(ds,{className:`h-5 w-5 ${_.status==="RUNNING"?"text-status-success":_.status==="ERROR"?"text-status-error":"text-foreground-tertiary"}`})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-foreground",children:_.id}),n.jsx("p",{className:"text-sm text-foreground-tertiary",children:(y==null?void 0:y.name)||_.projectId})]})]}),g(_.status)]}),n.jsxs("div",{className:"space-y-3 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(uo,{className:"h-4 w-4 text-foreground-tertiary"}),n.jsx("span",{className:"text-foreground-secondary",children:_.branch})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx("span",{className:"text-foreground-tertiary",children:"Ports:"}),n.jsx("span",{className:"text-foreground-secondary font-mono text-xs",children:"3000, 3001"})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx("span",{className:"text-foreground-tertiary",children:"Environment:"}),n.jsx("span",{className:"text-foreground-secondary",children:"docker"})]})]}),n.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-border",children:[n.jsxs("div",{className:"flex items-center gap-2 text-xs text-foreground-tertiary",children:[n.jsx(Ys,{className:"h-3 w-3"}),n.jsxs("span",{children:["Last: ",_.createdAt?new Date(_.createdAt).toLocaleTimeString():"Never"]})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[_.status==="RUNNING"?n.jsx("button",{className:"p-1.5 text-status-error hover:bg-status-error/10 rounded transition-colors",title:"Stop Agent",children:n.jsx(fo,{className:"h-4 w-4"})}):n.jsx("button",{className:"p-1.5 text-status-success hover:bg-status-success/10 rounded transition-colors",title:"Start Agent",children:n.jsx(qn,{className:"h-4 w-4"})}),n.jsx("button",{className:"p-1.5 text-foreground-secondary hover:text-foreground hover:bg-background-tertiary rounded transition-colors",title:"View Details",onClick:()=>e(`/agents/${_.id}`),children:n.jsx(P2,{className:"h-4 w-4"})})]})]})]})};return c?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(Sl,{className:"h-8 w-8 text-foreground-tertiary animate-spin"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Agents"}),n.jsx("p",{className:"text-foreground-secondary mt-1",children:"Manage your development agents"})]}),n.jsxs("button",{onClick:()=>e("/agents/create"),className:"px-4 py-2 bg-brand hover:bg-brand-hover text-white rounded-lg font-medium transition-colors flex items-center gap-2",children:[n.jsx(ho,{className:"h-4 w-4"}),"Create Agent"]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx("div",{className:"bg-background-card border border-border rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-foreground-secondary",children:"Running"}),n.jsx("p",{className:"text-2xl font-bold text-status-success",children:o.filter(_=>_.status==="RUNNING").length})]}),n.jsx("div",{className:"p-3 rounded-lg bg-status-success/20",children:n.jsx(qn,{className:"h-5 w-5 text-status-success"})})]})}),n.jsx("div",{className:"bg-background-card border border-border rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-foreground-secondary",children:"Stopped"}),n.jsx("p",{className:"text-2xl font-bold text-foreground",children:o.filter(_=>_.status==="STOPPED").length})]}),n.jsx("div",{className:"p-3 rounded-lg bg-foreground-tertiary/20",children:n.jsx(fo,{className:"h-5 w-5 text-foreground-tertiary"})})]})}),n.jsx("div",{className:"bg-background-card border border-border rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-foreground-secondary",children:"Errors"}),n.jsx("p",{className:"text-2xl font-bold text-status-error",children:o.filter(_=>_.status==="ERROR").length})]}),n.jsx("div",{className:"p-3 rounded-lg bg-status-error/20",children:n.jsx(El,{className:"h-5 w-5 text-status-error"})})]})})]}),n.jsxs("div",{className:"flex items-center justify-between gap-4",children:[n.jsxs("div",{className:"relative flex-1 max-w-md",children:[n.jsx("input",{type:"text",placeholder:"Search agents, branches, or tasks...",value:t,onChange:_=>r(_.target.value),className:"w-full pl-10 pr-4 py-2 bg-background-tertiary border border-border rounded-lg text-sm text-foreground placeholder-foreground-tertiary focus:outline-none focus:border-brand focus:ring-1 focus:ring-brand"}),n.jsx(nf,{className:"absolute left-3 top-2.5 h-5 w-5 text-foreground-tertiary"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("select",{value:s,onChange:_=>i(_.target.value),className:"px-3 py-2 bg-background-tertiary border border-border rounded-lg text-sm text-foreground focus:outline-none focus:border-brand",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"RUNNING",children:"Running"}),n.jsx("option",{value:"STOPPED",children:"Stopped"}),n.jsx("option",{value:"ERROR",children:"Error"})]}),n.jsxs("select",{value:a,onChange:_=>l(_.target.value),className:"px-3 py-2 bg-background-tertiary border border-border rounded-lg text-sm text-foreground focus:outline-none focus:border-brand",children:[n.jsx("option",{value:"all",children:"All Projects"}),v.map(_=>n.jsx("option",{value:_.id,children:_.name},_.id))]}),n.jsx("button",{onClick:()=>h(),className:"p-2 text-foreground-secondary hover:text-foreground hover:bg-background-tertiary rounded-lg transition-colors",children:n.jsx(Sl,{className:"h-5 w-5"})})]})]}),d.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-16 bg-background-card border border-border rounded-lg",children:[n.jsx(ds,{className:"h-12 w-12 text-foreground-tertiary mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:t||s!=="all"||a!=="all"?"No agents found":"No agents yet"}),n.jsx("p",{className:"text-foreground-secondary text-center max-w-md mb-6",children:t||s!=="all"||a!=="all"?"Try adjusting your filters":"Create your first agent to start developing"}),!t&&s==="all"&&a==="all"&&n.jsxs("button",{onClick:()=>e("/agents/create"),className:"px-4 py-2 bg-brand hover:bg-brand-hover text-white rounded-lg font-medium transition-colors flex items-center gap-2",children:[n.jsx(ho,{className:"h-4 w-4"}),"Create Agent"]})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(_=>n.jsx(x,{agent:_},_.id))})]})};var Uk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Wk=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),zk=(e,t)=>{const r=E.forwardRef(({color:s="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:l,children:o,...c},h)=>E.createElement("svg",{ref:h,...Uk,width:i,height:i,stroke:s,strokeWidth:l?Number(a)*24/Number(i):a,className:`lucide lucide-${Wk(e)}`,...c},[...t.map(([v,d])=>E.createElement(v,d)),...(Array.isArray(o)?o:[o])||[]]));return r.displayName=`${e}`,r};var ae=zk;const Vk=ae("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),Ct=ae("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),jl=ae("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),dc=ae("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Vx=ae("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),qk=ae("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),ff=ae("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),Gk=ae("CheckSquare",[["polyline",{points:"9 11 12 14 22 4",key:"19ybtz"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),pf=ae("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),Kk=ae("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),mf=ae("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),gf=ae("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),uc=ae("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Qk=ae("Code2",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]),Am=ae("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),Yk=ae("Command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]),Xk=ae("Container",[["path",{d:"M22 7.7c0-.6-.4-1.2-.8-1.5l-6.3-3.9a1.72 1.72 0 0 0-1.7 0l-10.3 6c-.5.2-.9.8-.9 1.4v6.6c0 .5.4 1.2.8 1.5l6.3 3.9a1.72 1.72 0 0 0 1.7 0l10.3-6c.5-.3.9-1 .9-1.5Z",key:"1t2lqe"}],["path",{d:"M10 21.9V14L2.1 9.1",key:"o7czzq"}],["path",{d:"m10 14 11.9-6.9",key:"zm5e20"}],["path",{d:"M14 19.8v-8.1",key:"159ecu"}],["path",{d:"M18 17.5V9.4",key:"11uown"}]]),Jk=ae("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),qx=ae("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Gx=ae("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Kx=ae("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Zk=ae("FolderOpen",[["path",{d:"m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H18a2 2 0 0 1 2 2v2",key:"1nmvlm"}]]),Nl=ae("Folder",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}]]),Gn=ae("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]),vf=ae("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),eE=ae("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),tE=ae("Layers",[["polygon",{points:"12 2 2 7 12 12 22 7 12 2",key:"1b0ttc"}],["polyline",{points:"2 17 12 22 22 17",key:"imjtdl"}],["polyline",{points:"2 12 12 17 22 12",key:"5dexcv"}]]),Qx=ae("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),rE=ae("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),sE=ae("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),nE=ae("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]),iE=ae("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),Qu=ae("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),Gr=ae("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),oE=ae("Power",[["path",{d:"M18.36 6.64a9 9 0 1 1-12.73 0",key:"phirl6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"12",key:"aemgbe"}]]),us=ae("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Dl=ae("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),aE=ae("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),hc=ae("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),lE=ae("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Ho=ae("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),cE=ae("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),mo=ae("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),dE=ae("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),Js=ae("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]),uE=ae("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]),$i=ae("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),hE=ae("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Yx=ae("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Rl=ae("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),Rs=ae("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),fE=({formData:e,updateFormData:t,projects:r})=>{var v;const[s,i]=E.useState(""),[a,l]=E.useState(!1),o=r.filter(d=>d.name.toLowerCase().includes(s.toLowerCase())||d.path.toLowerCase().includes(s.toLowerCase())),c=d=>{t({projectId:d.id,projectPath:d.path})},h=d=>{t({projectId:void 0,projectPath:d})};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"relative",children:[n.jsx(hc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),n.jsx("input",{type:"text",placeholder:"Search projects...",value:s,onChange:d=>i(d.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[o.length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Existing Projects"}),n.jsx("div",{className:"space-y-2",children:o.map(d=>n.jsx("button",{onClick:()=>c(d),className:`w-full p-4 border rounded-lg text-left transition-colors hover:border-blue-500 hover:bg-blue-50 ${e.projectId===d.id?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx(Nl,{className:"w-5 h-5 text-gray-400 mt-0.5"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900",children:d.name}),n.jsx("p",{className:"text-sm text-gray-500 truncate",children:d.path}),d.description&&n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:d.description}),n.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[n.jsxs("span",{className:"text-xs text-gray-500",children:[d.agents.length," agent",d.agents.length!==1?"s":""]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${d.status==="ACTIVE"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:d.status}),d.tags&&d.tags.length>0&&n.jsxs("div",{className:"flex space-x-1",children:[d.tags.slice(0,2).map((g,x)=>n.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:g},x)),d.tags.length>2&&n.jsxs("span",{className:"text-xs text-gray-500",children:["+",d.tags.length-2," more"]})]})]})]})]})},d.id))})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Custom Project Path"}),n.jsxs("button",{onClick:()=>l(!a),className:"text-sm text-blue-600 hover:text-blue-700",children:[a?"Hide":"Show"," Custom Path"]})]}),(a||!e.projectId)&&n.jsxs("div",{className:"space-y-3",children:[n.jsx("button",{onClick:()=>{l(!0),h("")},className:`w-full p-4 border rounded-lg text-left transition-colors hover:border-blue-500 hover:bg-blue-50 ${!e.projectId&&e.projectPath!==void 0?"border-blue-500 bg-blue-50":"border-gray-200 border-dashed"}`,children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Gr,{className:"w-5 h-5 text-gray-400"}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"New Project Path"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Specify a custom directory path"})]})]})}),(!e.projectId||a)&&n.jsxs("div",{className:"relative",children:[n.jsx(Zk,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),n.jsx("input",{type:"text",placeholder:"/path/to/your/project",value:e.projectPath||"",onChange:d=>h(d.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]})]}),r.length===0&&n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Nl,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Projects Found"}),n.jsx("p",{className:"text-gray-500 mb-4",children:"You don't have any registered projects yet. You can specify a custom project path below."}),n.jsxs("button",{onClick:()=>l(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[n.jsx(Gr,{className:"w-4 h-4 mr-2"}),"Add Custom Path"]})]}),(e.projectId||e.projectPath)&&n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[n.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Selected Project"}),e.projectId?n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm text-blue-800",children:[n.jsx("strong",{children:"Project:"})," ",(v=r.find(d=>d.id===e.projectId))==null?void 0:v.name]}),n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("strong",{children:"Path:"})," ",e.projectPath]})]}):n.jsxs("p",{className:"text-sm text-blue-800",children:[n.jsx("strong",{children:"Custom Path:"})," ",e.projectPath]})]})]})},pE=[{prefix:"feature/",description:"New feature development"},{prefix:"bugfix/",description:"Bug fixes"},{prefix:"hotfix/",description:"Critical fixes"},{prefix:"release/",description:"Release preparation"},{prefix:"experiment/",description:"Experimental work"},{prefix:"refactor/",description:"Code refactoring"}],mE=({formData:e,updateFormData:t})=>{const[r,s]=E.useState(""),[i,a]=E.useState(""),[l,o]=E.useState(""),[c,h]=E.useState("");E.useEffect(()=>{s(e.branch||""),a(e.agentId||"")},[e.branch,e.agentId]);const v=f=>f.trim()?f.length<3?"Branch name must be at least 3 characters":/^[a-zA-Z0-9/_-]+$/.test(f)?f.startsWith("/")||f.endsWith("/")?"Branch name cannot start or end with a forward slash":f.includes("//")?"Branch name cannot contain consecutive forward slashes":"":"Branch name can only contain letters, numbers, forward slashes, hyphens, and underscores":"Branch name is required",d=f=>f.trim()?f.length<3?"Agent ID must be at least 3 characters":f.length>50?"Agent ID must be less than 50 characters":/^[a-z0-9-]+$/.test(f)?f.startsWith("-")||f.endsWith("-")?"Agent ID cannot start or end with a hyphen":f.includes("--")?"Agent ID cannot contain consecutive hyphens":"":"Agent ID can only contain lowercase letters, numbers, and hyphens":"",g=f=>{const p=f;s(p);const u=v(p);o(u),t({branch:u?"":p})},x=f=>{s(f);const p=v(f);o(p),t({branch:p?"":f})},_=f=>{const p=f.toLowerCase().replace(/[^a-z0-9-]/g,"");a(p);const u=d(p);h(u),t({agentId:u?void 0:p||void 0})},y=()=>{if(r){const f=r.toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"").substring(0,40);if(f){a(f);const p=d(f);h(p),t({agentId:p?void 0:f})}}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Branch Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mb-4",children:pE.map(f=>n.jsxs("button",{onClick:()=>g(f.prefix),className:"p-3 text-left border border-gray-200 rounded-md hover:border-blue-500 hover:bg-blue-50 transition-colors",title:f.description,children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Gn,{className:"w-4 h-4 text-gray-400"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:f.prefix})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.description})]},f.prefix))}),n.jsxs("div",{className:"relative",children:[n.jsx(Gn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),n.jsx("input",{type:"text",placeholder:"feature/my-new-feature",value:r,onChange:f=>x(f.target.value),className:`w-full pl-10 pr-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${l?"border-red-500":"border-gray-300"}`}),l&&n.jsxs("div",{className:"flex items-center mt-2 text-sm text-red-600",children:[n.jsx(Ct,{className:"w-4 h-4 mr-1"}),l]})]}),n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"This will be the Git branch where your agent will work. If the branch doesn't exist, it will be created."})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Agent ID ",n.jsx("span",{className:"text-gray-400",children:"(optional)"})]}),n.jsxs("button",{onClick:y,disabled:!r,className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-700 disabled:text-gray-400 disabled:cursor-not-allowed",children:[n.jsx(us,{className:"w-4 h-4 mr-1"}),"Generate from branch"]})]}),n.jsxs("div",{className:"relative",children:[n.jsx(dE,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),n.jsx("input",{type:"text",placeholder:"my-agent-id",value:i,onChange:f=>_(f.target.value),className:`w-full pl-10 pr-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${c?"border-red-500":"border-gray-300"}`}),c&&n.jsxs("div",{className:"flex items-center mt-2 text-sm text-red-600",children:[n.jsx(Ct,{className:"w-4 h-4 mr-1"}),c]})]}),n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"A unique identifier for your agent. If not provided, one will be generated automatically. Must be lowercase with only letters, numbers, and hyphens."})]}),e.branch&&n.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-md p-4",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Configuration Preview"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Branch:"}),n.jsx("span",{className:"font-medium text-gray-900",children:e.branch})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Agent ID:"}),n.jsx("span",{className:"font-medium text-gray-900",children:e.agentId||"(auto-generated)"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Tmux Session:"}),n.jsxs("span",{className:"font-medium text-gray-900",children:["magent-",e.agentId||"auto-id"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Worktree Path:"}),n.jsxs("span",{className:"font-medium text-gray-900",children:["./magent-",e.branch.replace(/[^a-zA-Z0-9]/g,"-")]})]})]})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[n.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Branch Naming Best Practices"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[n.jsx("li",{children:" Use descriptive names that reflect the work being done"}),n.jsx("li",{children:" Follow a consistent naming convention (e.g., feature/task-description)"}),n.jsx("li",{children:" Keep names concise but meaningful"}),n.jsx("li",{children:" Avoid special characters except forward slashes, hyphens, and underscores"}),n.jsx("li",{children:" Use lowercase for better compatibility across systems"})]})]})]})},gE={high:"bg-red-100 text-red-800",medium:"bg-yellow-100 text-yellow-800",low:"bg-green-100 text-green-800"},vE={pending:"bg-gray-100 text-gray-800","in-progress":"bg-blue-100 text-blue-800",done:"bg-green-100 text-green-800",blocked:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"},xE=({formData:e,updateFormData:t,tasks:r})=>{const[s,i]=E.useState(""),[a,l]=E.useState("all"),[o,c]=E.useState("all"),h=r.filter(y=>{var m;const f=y.title.toLowerCase().includes(s.toLowerCase())||((m=y.description)==null?void 0:m.toLowerCase().includes(s.toLowerCase()))||y.id.toLowerCase().includes(s.toLowerCase()),p=a==="all"||y.status===a,u=o==="all"||y.priority===o;return f&&p&&u}),v=h.filter(y=>!["done","cancelled"].includes(y.status)),d=y=>{t({taskMasterEnabled:y,selectedTasks:y?e.selectedTasks:[]})},g=y=>{const f=e.selectedTasks||[],p=f.includes(y)?f.filter(u=>u!==y):[...f,y];t({selectedTasks:p})},x=()=>{const y=v.map(f=>f.id);t({selectedTasks:y})},_=()=>{t({selectedTasks:[]})};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("button",{onClick:()=>d(!e.taskMasterEnabled),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${e.taskMasterEnabled?"bg-blue-600":"bg-gray-200"}`,children:n.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${e.taskMasterEnabled?"translate-x-5":"translate-x-0"}`})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Enable TaskMaster Integration"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Assign specific tasks to this agent for automated tracking and execution"})]})]}),e.taskMasterEnabled?n.jsxs("div",{className:"space-y-4",children:[r.length===0?n.jsxs("div",{className:"text-center py-8 bg-yellow-50 rounded-lg border border-yellow-200",children:[n.jsx(jl,{className:"w-12 h-12 text-yellow-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Tasks Available"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"No TaskMaster tasks were found for this project. You can still create the agent and assign tasks later from the dashboard."}),n.jsxs("div",{className:"text-sm text-gray-500",children:[n.jsx("p",{children:"To add tasks, use TaskMaster CLI:"}),n.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded mt-1 inline-block",children:'task-master add-task --prompt="Task description"'})]})]}):n.jsxs("div",{children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(hc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),n.jsx("input",{type:"text",placeholder:"Search tasks...",value:s,onChange:y=>i(y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs("select",{value:a,onChange:y=>l(y.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"in-progress",children:"In Progress"}),n.jsx("option",{value:"blocked",children:"Blocked"})]}),n.jsxs("select",{value:o,onChange:y=>c(y.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"all",children:"All Priority"}),n.jsx("option",{value:"high",children:"High"}),n.jsx("option",{value:"medium",children:"Medium"}),n.jsx("option",{value:"low",children:"Low"})]})]})]}),v.length>0&&n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("span",{className:"text-sm text-gray-600",children:[e.selectedTasks.length," of ",v.length," tasks selected"]}),n.jsxs("div",{className:"space-x-2",children:[n.jsx("button",{onClick:x,className:"text-sm text-blue-600 hover:text-blue-700",children:"Select All"}),n.jsx("button",{onClick:_,className:"text-sm text-gray-600 hover:text-gray-700",children:"Clear All"})]})]}),n.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:h.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(Kx,{className:"w-8 h-8 mx-auto mb-2"}),n.jsx("p",{children:"No tasks match your current filters"})]}):h.map(y=>{const f=e.selectedTasks.includes(y.id),p=!["done","cancelled"].includes(y.status);return n.jsx("button",{onClick:()=>p&&g(y.id),disabled:!p,className:`w-full p-4 border rounded-lg text-left transition-colors ${p?f?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300 hover:bg-gray-50":"border-gray-200 bg-gray-50 opacity-60 cursor-not-allowed"}`,children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"pt-1",children:p?f?n.jsx(Gk,{className:"w-5 h-5 text-blue-600"}):n.jsx(mo,{className:"w-5 h-5 text-gray-400"}):n.jsx(mo,{className:"w-5 h-5 text-gray-300"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:[y.id,": ",y.title]}),y.description&&n.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:y.description})]}),n.jsxs("div",{className:"flex flex-col items-end space-y-1 ml-4",children:[n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${vE[y.status]}`,children:y.status}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${gE[y.priority]}`,children:y.priority})]})]}),y.dependencies&&y.dependencies.length>0&&n.jsx("div",{className:"mt-2",children:n.jsxs("span",{className:"text-xs text-gray-500",children:["Depends on: ",y.dependencies.join(", ")]})})]})]})},y.id)})})]}),e.selectedTasks.length>0&&n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[n.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Selected Tasks Summary"}),n.jsxs("p",{className:"text-sm text-blue-800 mb-3",children:[e.selectedTasks.length," task",e.selectedTasks.length!==1?"s":""," will be assigned to this agent"]}),n.jsxs("div",{className:"space-y-1",children:[e.selectedTasks.slice(0,3).map(y=>{const f=r.find(p=>p.id===y);return f?n.jsxs("div",{className:"text-sm text-blue-700",children:[" ",f.id,": ",f.title]},y):null}),e.selectedTasks.length>3&&n.jsxs("div",{className:"text-sm text-blue-600",children:["... and ",e.selectedTasks.length-3," more task",e.selectedTasks.length-3!==1?"s":""]})]})]})]}):n.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[n.jsx(Rl,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"TaskMaster Integration Disabled"}),n.jsx("p",{className:"text-gray-500 mb-4",children:"Enable TaskMaster integration to assign specific tasks to your agent. This allows for automated task tracking and progress monitoring."}),n.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[n.jsx(Rl,{className:"w-4 h-4 mr-2"}),"Enable TaskMaster"]})]})]})},Tm=[{name:"node:18-alpine",description:"Lightweight Node.js 18 environment",category:"Node.js"},{name:"node:20-alpine",description:"Lightweight Node.js 20 environment",category:"Node.js"},{name:"python:3.11-alpine",description:"Lightweight Python 3.11 environment",category:"Python"},{name:"python:3.12-alpine",description:"Lightweight Python 3.12 environment",category:"Python"},{name:"ubuntu:22.04",description:"Full Ubuntu 22.04 environment",category:"Linux"},{name:"debian:bookworm-slim",description:"Lightweight Debian environment",category:"Linux"},{name:"alpine:latest",description:"Minimal Alpine Linux",category:"Linux"},{name:"rust:alpine",description:"Rust development environment",category:"Rust"},{name:"golang:alpine",description:"Go development environment",category:"Go"}],gd={minimal:{name:"Minimal Configuration",description:"Basic agent with minimal overhead",config:{autoAccept:!1,useDocker:!1,mcpEnabled:!1,isolationMode:"none",claudeSettings:{}}},development:{name:"Development Setup",description:"Full development environment with Docker",config:{autoAccept:!1,useDocker:!0,dockerImage:"node:20-alpine",portRange:"3000-3010",mcpEnabled:!0,isolationMode:"container",environment:{NODE_ENV:"development",DEBUG:"true"},claudeSettings:{temperature:.7,maxTokens:4e3}}},production:{name:"Production Ready",description:"Secure production environment",config:{autoAccept:!1,useDocker:!0,dockerImage:"node:18-alpine",dockerNetwork:"isolated",portRange:"8000-8010",mcpEnabled:!0,isolationMode:"container",environment:{NODE_ENV:"production"},resourceLimits:{memory:"512m",cpu:.5},claudeSettings:{temperature:.3,maxTokens:2e3}}},research:{name:"Research & Analysis",description:"Optimized for research tasks",config:{autoAccept:!0,useDocker:!0,dockerImage:"python:3.12-alpine",portRange:"5000-5010",mcpEnabled:!0,isolationMode:"container",environment:{PYTHONPATH:"/workspace",JUPYTER_ENABLE:"true"},claudeSettings:{temperature:.1,maxTokens:8e3,customInstructions:"Focus on thorough analysis and detailed explanations."}}}},yE=["claude-3-5-sonnet-20241022","claude-3-haiku-20240307","claude-3-opus-20240229"],bE=({config:e,onChange:t,readonly:r=!1,showTemplates:s=!0})=>{var D,I,T,A,O;const[i,a]=E.useState("security"),[l,o]=E.useState(""),[c,h]=E.useState(""),[v,d]=E.useState(""),[g,x]=E.useState({}),_=R=>{r||t({...e,...R})},y=R=>{if(!R.trim())return"";const B=R.match(/^(\d+)-(\d+)$/);if(!B)return"Port range must be in format: start-end (e.g., 3000-3010)";const U=parseInt(B[1]),$=parseInt(B[2]);return U<1024||$<1024?"Ports must be 1024 or higher":U>=$?"Start port must be less than end port":$-U>100?"Port range cannot exceed 100 ports":""},f=R=>{const B=y(R);o(B),B||_({portRange:R||void 0})},p=()=>{if(c.trim()&&v.trim()){const R=e.environment||{};_({environment:{...R,[c.trim()]:v.trim()}}),h(""),d("")}},u=R=>{if(e.environment){const{[R]:B,...U}=e.environment;_({environment:Object.keys(U).length>0?U:void 0})}},m=()=>{if(g.name&&g.command){const R=e.mcpServers||[];_({mcpServers:[...R,{name:g.name,command:g.command,args:g.args||[],env:g.env||{}}]}),x({})}},b=R=>{const U=(e.mcpServers||[]).filter(($,N)=>N!==R);_({mcpServers:U.length>0?U:void 0})},S=R=>{const B=gd[R];_(B.config)},C=()=>{const R=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),B=URL.createObjectURL(R),U=document.createElement("a");U.href=B,U.download="agent-config.json",U.click(),URL.revokeObjectURL(B)},k=R=>{var U;const B=(U=R.target.files)==null?void 0:U[0];if(B){const $=new FileReader;$.onload=N=>{var P;try{const M=JSON.parse((P=N.target)==null?void 0:P.result);_(M)}catch{alert("Invalid configuration file")}},$.readAsText(B)}},w=()=>{_(gd.minimal.config)},j=[{id:"security",label:"Security & Automation",icon:cE},{id:"docker",label:"Docker",icon:Xk},{id:"ports",label:"Ports & Network",icon:nE},{id:"environment",label:"Environment",icon:Gx},{id:"mcp",label:"MCP Servers",icon:Qk},{id:"claude",label:"Claude Settings",icon:Ho},{id:"advanced",label:"Advanced",icon:Ct}];return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[n.jsxs("div",{className:"border-b border-gray-200 p-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Advanced Agent Configuration"}),!r&&n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs("button",{onClick:C,className:"inline-flex items-center px-3 py-1.5 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",title:"Export Configuration",children:[n.jsx(Jk,{className:"w-4 h-4 mr-1"}),"Export"]}),n.jsxs("label",{className:"inline-flex items-center px-3 py-1.5 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 cursor-pointer",children:[n.jsx(hE,{className:"w-4 h-4 mr-1"}),"Import",n.jsx("input",{type:"file",accept:".json",onChange:k,className:"hidden"})]}),n.jsxs("button",{onClick:w,className:"inline-flex items-center px-3 py-1.5 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",title:"Reset to Default",children:[n.jsx(Dl,{className:"w-4 h-4 mr-1"}),"Reset"]})]})]}),s&&!r&&n.jsxs("div",{className:"mt-4",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Quick Templates"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:Object.entries(gd).map(([R,B])=>n.jsxs("button",{onClick:()=>S(R),className:"p-3 text-left border border-gray-200 rounded-md hover:border-blue-500 hover:bg-blue-50 transition-colors",children:[n.jsx("h5",{className:"font-medium text-sm text-gray-900",children:B.name}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:B.description})]},R))})]})]}),n.jsx("div",{className:"border-b border-gray-200",children:n.jsx("nav",{className:"-mb-px flex space-x-8 px-4","aria-label":"Tabs",children:j.map(R=>{const B=R.icon,U=i===R.id;return n.jsxs("button",{onClick:()=>a(R.id),className:`group inline-flex items-center py-4 px-1 border-b-2 font-medium text-sm ${U?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[n.jsx(B,{className:`-ml-0.5 mr-2 h-5 w-5 ${U?"text-blue-500":"text-gray-400 group-hover:text-gray-500"}`}),R.label]},R.id)})})}),n.jsxs("div",{className:"p-6",children:[i==="security"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"flex h-6 items-center",children:n.jsx("input",{id:"auto-accept",type:"checkbox",checked:e.autoAccept,onChange:R=>_({autoAccept:R.target.checked}),disabled:r,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("label",{htmlFor:"auto-accept",className:"text-sm font-medium text-gray-900",children:"Auto-Accept Changes"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Automatically accept file changes without prompting. Recommended for routine tasks."})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"claude-model",className:"block text-sm font-medium text-gray-700 mb-2",children:"Claude Model"}),n.jsxs("select",{id:"claude-model",value:e.claudeModel||"",onChange:R=>_({claudeModel:R.target.value||void 0}),disabled:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"",children:"Default Model"}),yE.map(R=>n.jsx("option",{value:R,children:R},R))]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"isolation-mode",className:"block text-sm font-medium text-gray-700 mb-2",children:"Isolation Mode"}),n.jsxs("select",{id:"isolation-mode",value:e.isolationMode,onChange:R=>_({isolationMode:R.target.value}),disabled:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"none",children:"No Isolation"}),n.jsx("option",{value:"process",children:"Process Isolation"}),n.jsx("option",{value:"container",children:"Container Isolation"})]}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Choose the level of isolation for the agent environment."})]})]}),i==="docker"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"flex h-6 items-center",children:n.jsx("input",{id:"use-docker",type:"checkbox",checked:e.useDocker,onChange:R=>_({useDocker:R.target.checked}),disabled:r,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("label",{htmlFor:"use-docker",className:"text-sm font-medium text-gray-900",children:"Enable Docker Container"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Run agents in isolated Docker containers for enhanced security and consistency."})]})]}),e.useDocker&&n.jsxs("div",{className:"ml-7 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"docker-image",className:"block text-sm font-medium text-gray-700 mb-2",children:"Docker Image"}),n.jsxs("select",{id:"docker-image",value:e.dockerImage||"",onChange:R=>_({dockerImage:R.target.value||void 0}),disabled:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"",children:"Select Docker image..."}),Tm.map(R=>n.jsx("optgroup",{label:R.category,children:n.jsxs("option",{value:R.name,children:[R.name," - ",R.description]})},R.category))]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"custom-docker-image",className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Docker Image"}),n.jsx("input",{id:"custom-docker-image",type:"text",placeholder:"custom/image:tag",value:e.dockerImage&&!Tm.find(R=>R.name===e.dockerImage)?e.dockerImage:"",onChange:R=>_({dockerImage:R.target.value||void 0}),disabled:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Or specify a custom Docker image from any registry."})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"docker-network",className:"block text-sm font-medium text-gray-700 mb-2",children:"Docker Network"}),n.jsx("input",{id:"docker-network",type:"text",placeholder:"bridge, host, or custom network name",value:e.dockerNetwork||"",onChange:R=>_({dockerNetwork:R.target.value||void 0}),disabled:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Specify the Docker network mode or custom network name."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Docker Volumes"}),n.jsxs("div",{className:"space-y-2",children:[(D=e.dockerVolumes)==null?void 0:D.map((R,B)=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"text",value:R,onChange:U=>{const $=[...e.dockerVolumes||[]];$[B]=U.target.value,_({dockerVolumes:$})},disabled:r,className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"/host/path:/container/path"}),n.jsx("button",{onClick:()=>{var $;const U=($=e.dockerVolumes)==null?void 0:$.filter((N,P)=>P!==B);_({dockerVolumes:U!=null&&U.length?U:void 0})},disabled:r,className:"text-red-600 hover:text-red-700",children:n.jsx(Rs,{className:"w-4 h-4"})})]},B)),n.jsxs("button",{onClick:()=>{const R=[...e.dockerVolumes||[],""];_({dockerVolumes:R})},disabled:r,className:"inline-flex items-center px-3 py-2 border border-dashed border-gray-300 rounded-md text-sm text-gray-600 hover:border-gray-400",children:[n.jsx(Gr,{className:"w-4 h-4 mr-1"}),"Add Volume Mount"]})]}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Mount host directories into the container. Format: /host/path:/container/path"})]})]})]}),i==="ports"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"port-range",className:"block text-sm font-medium text-gray-700 mb-2",children:"Port Range"}),n.jsx("input",{id:"port-range",type:"text",placeholder:"3000-3010",value:e.portRange||"",onChange:R=>f(R.target.value),disabled:r,className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${l?"border-red-500":"border-gray-300"}`}),l&&n.jsxs("div",{className:"flex items-center mt-2 text-sm text-red-600",children:[n.jsx(Ct,{className:"w-4 h-4 mr-1"}),l]}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Reserve a range of ports for agent services. Format: start-end (e.g., 3000-3010)"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reserved Ports"}),n.jsxs("div",{className:"space-y-2",children:[(I=e.reservedPorts)==null?void 0:I.map((R,B)=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"number",min:"1024",max:"65535",value:R,onChange:U=>{const $=[...e.reservedPorts||[]];$[B]=parseInt(U.target.value),_({reservedPorts:$})},disabled:r,className:"w-24 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),n.jsx("button",{onClick:()=>{var $;const U=($=e.reservedPorts)==null?void 0:$.filter((N,P)=>P!==B);_({reservedPorts:U!=null&&U.length?U:void 0})},disabled:r,className:"text-red-600 hover:text-red-700",children:n.jsx(Rs,{className:"w-4 h-4"})})]},B)),n.jsxs("button",{onClick:()=>{const R=[...e.reservedPorts||[],3e3];_({reservedPorts:R})},disabled:r,className:"inline-flex items-center px-3 py-2 border border-dashed border-gray-300 rounded-md text-sm text-gray-600 hover:border-gray-400",children:[n.jsx(Gr,{className:"w-4 h-4 mr-1"}),"Reserve Port"]})]}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Specify individual ports to reserve and prevent conflicts."})]})]}),i==="environment"&&n.jsxs("div",{className:"space-y-6",children:[e.environment&&Object.keys(e.environment).length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Current Variables"}),Object.entries(e.environment).map(([R,B])=>n.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-md",children:[n.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-3",children:[n.jsx("div",{children:n.jsx("span",{className:"text-sm font-medium text-gray-700",children:R})}),n.jsx("div",{children:n.jsx("span",{className:"text-sm text-gray-600",children:B})})]}),n.jsx("button",{onClick:()=>u(R),disabled:r,className:"text-red-600 hover:text-red-700",children:n.jsx(Rs,{className:"w-4 h-4"})})]},R))]}),n.jsxs("div",{className:"border border-dashed border-gray-300 rounded-md p-4",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Add Environment Variable"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[n.jsx("input",{type:"text",placeholder:"Variable name (e.g., NODE_ENV)",value:c,onChange:R=>h(R.target.value),disabled:r,className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),n.jsx("input",{type:"text",placeholder:"Variable value",value:v,onChange:R=>d(R.target.value),disabled:r,className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("button",{onClick:p,disabled:r||!c.trim()||!v.trim(),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(Gr,{className:"w-4 h-4 mr-1"}),"Add Variable"]})]}),n.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-4",children:[n.jsx("h4",{className:"text-sm font-medium text-amber-900 mb-2",children:"Security Notice"}),n.jsx("p",{className:"text-sm text-amber-800",children:"Avoid storing sensitive information like API keys or passwords in environment variables. Use secure secret management instead."})]})]}),i==="mcp"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"flex h-6 items-center",children:n.jsx("input",{id:"mcp-enabled",type:"checkbox",checked:e.mcpEnabled,onChange:R=>_({mcpEnabled:R.target.checked}),disabled:r,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("label",{htmlFor:"mcp-enabled",className:"text-sm font-medium text-gray-900",children:"Enable MCP (Model Context Protocol)"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Allow agents to connect to MCP servers for extended functionality."})]})]}),e.mcpEnabled&&n.jsxs("div",{className:"ml-7 space-y-4",children:[e.mcpServers&&e.mcpServers.length>0&&n.jsxs("div",{className:"space-y-3",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Configured Servers"}),e.mcpServers.map((R,B)=>n.jsxs("div",{className:"border border-gray-200 rounded-md p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h5",{className:"font-medium text-gray-900",children:R.name}),n.jsx("button",{onClick:()=>b(B),disabled:r,className:"text-red-600 hover:text-red-700",children:n.jsx(Rs,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"text-sm text-gray-600",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Command:"})," ",R.command]}),R.args.length>0&&n.jsxs("p",{children:[n.jsx("strong",{children:"Args:"})," ",R.args.join(" ")]}),R.env&&Object.keys(R.env).length>0&&n.jsxs("p",{children:[n.jsx("strong",{children:"Environment:"})," ",Object.keys(R.env).length," variables"]})]})]},B))]}),n.jsxs("div",{className:"border border-dashed border-gray-300 rounded-md p-4",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Add MCP Server"}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("input",{type:"text",placeholder:"Server name",value:g.name||"",onChange:R=>x({...g,name:R.target.value}),disabled:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),n.jsx("input",{type:"text",placeholder:"Command (e.g., npx, python)",value:g.command||"",onChange:R=>x({...g,command:R.target.value}),disabled:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),n.jsx("input",{type:"text",placeholder:"Arguments (space-separated)",value:((T=g.args)==null?void 0:T.join(" "))||"",onChange:R=>x({...g,args:R.target.value.split(" ").filter(B=>B.trim())}),disabled:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),n.jsxs("button",{onClick:m,disabled:r||!g.name||!g.command,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(Gr,{className:"w-4 h-4 mr-1"}),"Add Server"]})]})]})]})]}),i==="claude"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"claude-max-tokens",className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Tokens"}),n.jsx("input",{id:"claude-max-tokens",type:"number",min:"100",max:"200000",value:e.claudeSettings.maxTokens||"",onChange:R=>_({claudeSettings:{...e.claudeSettings,maxTokens:R.target.value?parseInt(R.target.value):void 0}}),disabled:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"4000"}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Maximum number of tokens for Claude responses (100-200000)."})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"claude-temperature",className:"block text-sm font-medium text-gray-700 mb-2",children:"Temperature"}),n.jsx("input",{id:"claude-temperature",type:"number",min:"0",max:"1",step:"0.1",value:e.claudeSettings.temperature||"",onChange:R=>_({claudeSettings:{...e.claudeSettings,temperature:R.target.value?parseFloat(R.target.value):void 0}}),disabled:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.7"}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Controls randomness in responses (0.0 = deterministic, 1.0 = very random)."})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"claude-top-p",className:"block text-sm font-medium text-gray-700 mb-2",children:"Top P"}),n.jsx("input",{id:"claude-top-p",type:"number",min:"0",max:"1",step:"0.1",value:e.claudeSettings.topP||"",onChange:R=>_({claudeSettings:{...e.claudeSettings,topP:R.target.value?parseFloat(R.target.value):void 0}}),disabled:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.9"}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Nucleus sampling parameter for response diversity."})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"claude-instructions",className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Instructions"}),n.jsx("textarea",{id:"claude-instructions",rows:4,value:e.claudeSettings.customInstructions||"",onChange:R=>_({claudeSettings:{...e.claudeSettings,customInstructions:R.target.value||void 0}}),disabled:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Add custom instructions for Claude behavior..."}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Custom instructions to guide Claude's behavior for this agent."})]})]}),i==="advanced"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Resource Limits"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"memory-limit",className:"block text-xs font-medium text-gray-600 mb-1",children:"Memory Limit"}),n.jsx("input",{id:"memory-limit",type:"text",placeholder:"512m, 1g, 2g",value:((A=e.resourceLimits)==null?void 0:A.memory)||"",onChange:R=>_({resourceLimits:{...e.resourceLimits,memory:R.target.value||void 0}}),disabled:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"cpu-limit",className:"block text-xs font-medium text-gray-600 mb-1",children:"CPU Limit"}),n.jsx("input",{id:"cpu-limit",type:"number",min:"0.1",max:"8",step:"0.1",placeholder:"1.0",value:((O=e.resourceLimits)==null?void 0:O.cpu)||"",onChange:R=>_({resourceLimits:{...e.resourceLimits,cpu:R.target.value?parseFloat(R.target.value):void 0}}),disabled:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Set resource limits for container-based agents."})]}),n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:[n.jsx("h4",{className:"text-sm font-medium text-red-900 mb-2",children:"Advanced Configuration Warning"}),n.jsx("p",{className:"text-sm text-red-800",children:"These settings affect agent performance and security. Only modify if you understand the implications."})]})]})]})]})},_E=({formData:e,updateFormData:t})=>{const r=E.useMemo(()=>({autoAccept:e.autoAccept,claudeModel:e.claudeModel,useDocker:e.useDocker,dockerImage:e.dockerImage,dockerNetwork:e.dockerNetwork,dockerVolumes:e.dockerVolumes,portRange:e.portRange,reservedPorts:e.reservedPorts,environment:e.environment,mcpEnabled:e.mcpEnabled,mcpServers:e.mcpServers,claudeSettings:e.claudeSettings,isolationMode:e.isolationMode,resourceLimits:e.resourceLimits}),[e]),s=i=>{t({autoAccept:i.autoAccept,claudeModel:i.claudeModel,useDocker:i.useDocker,dockerImage:i.dockerImage,dockerNetwork:i.dockerNetwork,dockerVolumes:i.dockerVolumes,portRange:i.portRange,reservedPorts:i.reservedPorts,environment:i.environment,mcpEnabled:i.mcpEnabled,mcpServers:i.mcpServers,claudeSettings:i.claudeSettings,isolationMode:i.isolationMode,resourceLimits:i.resourceLimits})};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[n.jsx(Ho,{className:"w-5 h-5 mr-2"}),"Advanced Agent Configuration"]}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Configure Docker settings, environment variables, and advanced agent options."})]}),n.jsx(bE,{config:r,onChange:s,readonly:!1,showTemplates:!0}),n.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-md p-4",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Configuration Summary"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Auto-Accept:"}),n.jsx("span",{className:`ml-2 font-medium ${e.autoAccept?"text-green-600":"text-red-600"}`,children:e.autoAccept?"Enabled":"Disabled"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Docker:"}),n.jsx("span",{className:`ml-2 font-medium ${e.useDocker?"text-green-600":"text-gray-600"}`,children:e.useDocker?"Enabled":"Disabled"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"MCP:"}),n.jsx("span",{className:`ml-2 font-medium ${e.mcpEnabled?"text-green-600":"text-gray-600"}`,children:e.mcpEnabled?"Enabled":"Disabled"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Isolation:"}),n.jsx("span",{className:"ml-2 font-medium text-gray-900 capitalize",children:e.isolationMode})]})]}),e.useDocker&&e.dockerImage&&n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Docker Image:"}),n.jsx("span",{className:"ml-2 font-medium text-gray-900",children:e.dockerImage})]}),e.portRange&&n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Port Range:"}),n.jsx("span",{className:"ml-2 font-medium text-gray-900",children:e.portRange})]}),e.environment&&Object.keys(e.environment).length>0&&n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Environment Variables:"}),n.jsxs("span",{className:"ml-2 font-medium text-gray-900",children:[Object.keys(e.environment).length," variable",Object.keys(e.environment).length!==1?"s":""]})]}),e.mcpServers&&e.mcpServers.length>0&&n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"MCP Servers:"}),n.jsxs("span",{className:"ml-2 font-medium text-gray-900",children:[e.mcpServers.length," server",e.mcpServers.length!==1?"s":""]})]})]})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[n.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Configuration Best Practices"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[n.jsx("li",{children:" Enable Docker for better isolation and reproducibility"}),n.jsx("li",{children:" Use auto-accept for trusted, routine tasks only"}),n.jsx("li",{children:" Configure MCP servers to extend agent capabilities"}),n.jsx("li",{children:" Set appropriate resource limits for container-based agents"}),n.jsx("li",{children:" Use environment variables for configuration, not secrets"})]})]})]})},wE=({formData:e,projects:t,tasks:r})=>{const s=e.projectId?t.find(o=>o.id===e.projectId):null,i=e.selectedTasks.map(o=>r.find(c=>c.id===o)).filter(Boolean),a=e.agentId||e.branch.toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""),l=e.portRange?e.portRange.split("-").map(Number).reduce((o,c,h)=>h===0?c:c-o+1,0):0;return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx(qx,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Review Your Agent Configuration"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Please review all settings before creating your agent. You can go back to make changes if needed."})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(Nl,{className:"w-5 h-5 text-blue-600 mr-2"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Configuration"})]}),n.jsxs("div",{className:"space-y-3",children:[s?n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Project Name:"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:s.name})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Project ID:"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:s.id})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Status:"}),n.jsx("span",{className:`text-sm font-medium ${s.status==="ACTIVE"?"text-green-600":"text-gray-600"}`,children:s.status})]})]}):n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Project Type:"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Custom Path"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Project Path:"}),n.jsx("span",{className:"text-sm font-medium text-gray-900 break-all",children:e.projectPath})]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(Gn,{className:"w-5 h-5 text-green-600 mr-2"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Branch & Agent"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Branch:"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.branch})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Agent ID:"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:a})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Tmux Session:"}),n.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["magent-",a]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Worktree Path:"}),n.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["./magent-",e.branch.replace(/[^a-zA-Z0-9]/g,"-")]})]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(Rl,{className:"w-5 h-5 text-purple-600 mr-2"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"TaskMaster Integration"})]}),e.taskMasterEnabled?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Status:"}),n.jsxs("span",{className:"flex items-center text-sm font-medium text-green-600",children:[n.jsx(pf,{className:"w-4 h-4 mr-1"}),"Enabled"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Selected Tasks:"}),n.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[i.length," task",i.length!==1?"s":""]})]}),i.length>0&&n.jsxs("div",{className:"mt-4",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Tasks to Assign:"}),n.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:i.map(o=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[n.jsxs("span",{className:"text-sm text-gray-900",children:[o.id,": ",o.title]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${o.priority==="high"?"bg-red-100 text-red-800":o.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:o.priority})]},o.id))})]})]}):n.jsx("div",{className:"text-center py-4",children:n.jsx("span",{className:"text-sm text-gray-500",children:"Not enabled"})})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(Ho,{className:"w-5 h-5 text-gray-600 mr-2"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Advanced Settings"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Auto-Accept:"}),n.jsx("span",{className:`text-sm font-medium ${e.autoAccept?"text-green-600":"text-red-600"}`,children:e.autoAccept?"Enabled":"Disabled"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Docker:"}),n.jsx("span",{className:`text-sm font-medium ${e.useDocker?"text-green-600":"text-gray-600"}`,children:e.useDocker?"Enabled":"Disabled"})]}),e.useDocker&&e.dockerImage&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Docker Image:"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.dockerImage})]}),e.portRange&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Port Range:"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.portRange})]}),e.environment&&Object.keys(e.environment).length>0&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Environment Variables:"}),n.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[Object.keys(e.environment).length," variable",Object.keys(e.environment).length!==1?"s":""]})]})]})]})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Estimated Resource Usage"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"1"}),n.jsx("div",{className:"text-sm text-blue-800",children:"Git Worktree"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"1"}),n.jsx("div",{className:"text-sm text-blue-800",children:"Tmux Session"})]}),l>0&&n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:l}),n.jsx("div",{className:"text-sm text-blue-800",children:"Reserved Ports"})]}),e.useDocker&&n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"1"}),n.jsx("div",{className:"text-sm text-blue-800",children:"Docker Container"})]})]})]}),e.environment&&Object.keys(e.environment).length>0&&n.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Environment Variables"}),n.jsx("div",{className:"space-y-2",children:Object.entries(e.environment).map(([o,c])=>n.jsxs("div",{className:"flex justify-between items-center p-2 bg-white rounded border",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:o}),n.jsx("span",{className:"text-sm text-gray-600",children:c})]},o))})]}),n.jsxs("div",{className:"space-y-4",children:[!e.useDocker&&n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(jl,{className:"w-5 h-5 text-yellow-600 mt-0.5 mr-3"}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium text-yellow-800",children:"Docker Not Enabled"}),n.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Consider enabling Docker for better isolation and reproducibility, especially for production environments."})]})]})}),e.autoAccept&&n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(jl,{className:"w-5 h-5 text-yellow-600 mt-0.5 mr-3"}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium text-yellow-800",children:"Auto-Accept Enabled"}),n.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Auto-accept is enabled. The agent will automatically apply changes without confirmation. Make sure this is appropriate for your use case."})]})]})})]}),n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-green-900 mb-4",children:"Ready to Create Agent"}),n.jsx("p",{className:"text-sm text-green-800 mb-4",children:`Your agent configuration looks good! Click "Create Agent" to start the creation process. You'll see real-time progress updates as your agent is set up.`}),n.jsxs("div",{className:"text-sm text-green-700",children:[n.jsx("strong",{children:"What happens next:"}),n.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[n.jsxs("li",{children:['Git worktree will be created for branch "',e.branch,'"']}),n.jsxs("li",{children:['Tmux session "magent-',a,'" will be started']}),e.useDocker&&n.jsx("li",{children:"Docker container will be prepared and started"}),n.jsx("li",{children:"Claude Code will be launched in the agent environment"}),e.taskMasterEnabled&&i.length>0&&n.jsxs("li",{children:[i.length," task",i.length!==1?"s":""," will be assigned to the agent"]}),n.jsx("li",{children:"Agent will be registered and ready for use"})]})]})]})]})},Pm={quickStart:{name:"Quick Start",description:"Fast setup with minimal configuration",data:{branch:"feature/quick-agent",autoAccept:!0,useDocker:!1,taskMasterEnabled:!1,selectedTasks:[]}},development:{name:"Development Agent",description:"Full development environment with TaskMaster",data:{branch:"feature/dev-agent",autoAccept:!1,useDocker:!0,taskMasterEnabled:!0,selectedTasks:[]}},production:{name:"Production Agent",description:"Secure agent for production tasks",data:{branch:"release/prod-agent",autoAccept:!1,useDocker:!0,taskMasterEnabled:!0,selectedTasks:[]}}},SE=({onSubmit:e,onCancel:t,isLoading:r=!1,projects:s=[],tasks:i=[]})=>{var u,m,b,S;const[a,l]=E.useState(0),[o,c]=E.useState({branch:"",taskMasterEnabled:!1,selectedTasks:[],autoAccept:!0,useDocker:!1,mcpEnabled:!1,claudeSettings:{},isolationMode:"none"}),h=[{id:"project",title:"Project Selection",description:"Choose or specify the project for your agent",icon:Nl,isValid:!!(o.projectId||o.projectPath&&o.projectPath.trim())},{id:"branch",title:"Branch Management",description:"Configure branch and agent identification",icon:Gn,isValid:!!o.branch.trim()&&o.branch.length>=3&&/^[a-zA-Z0-9/_-]+$/.test(o.branch)&&!o.branch.startsWith("/")&&!o.branch.endsWith("/")&&!o.branch.includes("//")},{id:"taskmaster",title:"TaskMaster Integration",description:"Optional task assignment and tracking",icon:Rl,isValid:!0,isOptional:!0},{id:"advanced",title:"Advanced Configuration",description:"Docker, ports, and environment settings",icon:Ho,isValid:!0,isOptional:!0},{id:"preview",title:"Preview & Create",description:"Review settings and create your agent",icon:qx,isValid:!0}],d=((u=h[a])==null?void 0:u.isValid)||!1||((m=h[a])==null?void 0:m.isOptional),g=()=>{a<h.length-1&&d&&l(C=>C+1)},x=()=>{a>0&&l(C=>C-1)},_=C=>{C>=0&&C<h.length&&l(C)},y=C=>{const k=Pm[C];c(w=>({...w,...k.data}))},f=async()=>{var C,k,w;if(a===h.length-1){const j={branch:o.branch,agentId:((C=o.agentId)==null?void 0:C.trim())||void 0,projectId:((k=o.projectId)==null?void 0:k.trim())||void 0,projectPath:((w=o.projectPath)==null?void 0:w.trim())||void 0,autoAccept:o.autoAccept,useDocker:o.useDocker,environment:o.environment&&Object.keys(o.environment).length>0?o.environment:void 0};await e(j)}else g()},p=C=>{c(k=>({...k,...C}))};return E.useEffect(()=>{const C=localStorage.getItem("agentWizardFormData");if(C)try{const k=JSON.parse(C);c(w=>({...w,...k}))}catch(k){console.warn("Failed to parse saved wizard data:",k)}},[]),E.useEffect(()=>{localStorage.setItem("agentWizardFormData",JSON.stringify(o))},[o]),n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsx("div",{className:"mb-8",children:n.jsx("div",{className:"flex items-center justify-between",children:h.map((C,k)=>{const w=C.icon,j=k===a,D=k<a,I=C.isValid;return n.jsxs("div",{className:"flex flex-col items-center flex-1",children:[n.jsx("button",{onClick:()=>_(k),className:`w-12 h-12 rounded-full flex items-center justify-center transition-colors ${j?"bg-blue-600 text-white":D?"bg-green-600 text-white":I?"bg-gray-200 text-gray-600 hover:bg-gray-300":"bg-red-100 text-red-600"}`,disabled:r,children:D?n.jsx(pf,{className:"w-6 h-6"}):n.jsx(w,{className:"w-6 h-6"})}),n.jsxs("div",{className:"mt-2 text-center",children:[n.jsx("p",{className:`text-sm font-medium ${j?"text-blue-600":D?"text-green-600":"text-gray-500"}`,children:C.title}),n.jsx("p",{className:"text-xs text-gray-400 max-w-24",children:C.description})]}),k<h.length-1&&n.jsx("div",{className:`h-px bg-gray-300 w-full mt-4 ${D?"bg-green-300":""}`})]},C.id)})})}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 min-h-96",children:[a===0&&n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Quick Templates"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:Object.entries(Pm).map(([C,k])=>n.jsxs("button",{onClick:()=>y(C),className:"p-4 border rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors text-left",disabled:r,children:[n.jsx("h4",{className:"font-medium text-gray-900",children:k.name}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:k.description})]},C))}),n.jsx("hr",{className:"mb-6"})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:(b=h[a])==null?void 0:b.title}),n.jsx("p",{className:"text-gray-600 mb-6",children:(S=h[a])==null?void 0:S.description}),a===0&&n.jsx(fE,{formData:o,updateFormData:p,projects:s}),a===1&&n.jsx(mE,{formData:o,updateFormData:p}),a===2&&n.jsx(xE,{formData:o,updateFormData:p,tasks:i}),a===3&&n.jsx(_E,{formData:o,updateFormData:p}),a===4&&n.jsx(wE,{formData:o,projects:s,tasks:i})]})]}),n.jsxs("div",{className:"flex justify-between items-center mt-6",children:[n.jsxs("button",{onClick:a===0?t:x,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",disabled:r,children:[n.jsx(dc,{className:"w-4 h-4 mr-2"}),a===0?"Cancel":"Previous"]}),n.jsx("div",{className:"text-center",children:n.jsxs("span",{className:"text-sm text-gray-500",children:["Step ",a+1," of ",h.length]})}),n.jsx("button",{onClick:f,disabled:!d||r,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:a===h.length-1?r?"Creating...":"Create Agent":n.jsxs(n.Fragment,{children:["Next",n.jsx(Vx,{className:"w-4 h-4 ml-2"})]})})]})]})},CE=({step:e})=>{switch(e.status){case"completed":return n.jsx(qk,{className:"w-5 h-5 text-green-500"});case"in-progress":return n.jsx(Qx,{className:"w-5 h-5 text-blue-500 animate-spin"});case"error":return n.jsx(Ct,{className:"w-5 h-5 text-red-500"});default:return n.jsx(gf,{className:"w-5 h-5 text-gray-300"})}},kE=({progress:e,agentId:t})=>n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Creating Agent: ",t]}),n.jsxs("span",{className:"text-sm text-gray-500",children:[e.percentage,"%"]})]}),n.jsx("div",{className:"mt-2",children:n.jsx("div",{className:"bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${e.percentage}%`}})})}),n.jsx("p",{className:"mt-2 text-sm text-gray-600",children:e.message}),e.error&&n.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-md",children:n.jsx("p",{className:"text-sm text-red-700",children:e.error})})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Progress Steps"}),Array.from({length:e.totalSteps},(r,s)=>{const i=s+1,a=i===e.step,l=a?e.currentStep:{id:`step-${i}`,name:`Step ${i}`,description:`Step ${i}`,status:i<e.step?"completed":"pending"};return n.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-md transition-colors ${a?"bg-blue-50 border border-blue-200":l.status==="completed"?"bg-green-50":"bg-gray-50"}`,children:[n.jsx(CE,{step:l}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:`text-sm font-medium ${l.status==="error"?"text-red-700":l.status==="completed"?"text-green-700":l.status==="in-progress"?"text-blue-700":"text-gray-700"}`,children:l.name}),n.jsx("p",{className:"text-xs text-gray-500",children:l.description}),l.error&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:l.error})]}),l.startTime&&l.endTime&&n.jsxs("div",{className:"text-xs text-gray-400",children:[Math.round((l.endTime.getTime()-l.startTime.getTime())/1e3),"s"]})]},l.id)})]})]}),EE=()=>{const e=rn(),t=mx(),{agentProgress:r,subscribe:s,unsubscribe:i}=$o(),[a,l]=E.useState(!1),[o,c]=E.useState(null),{data:h=[]}=hr({queryKey:["projects"],queryFn:_e.getProjects,staleTime:5*60*1e3}),{data:v=[]}=hr({queryKey:["taskmaster-tasks"],queryFn:async()=>{try{const x="/Users/santossafrao/Development/personal/magents";return await _e.getTaskMasterTasks(x)}catch(x){return console.warn("TaskMaster not available:",x),[]}},staleTime:5*60*1e3});E.useEffect(()=>(s("agents"),()=>i("agents")),[s,i]),E.useEffect(()=>{if(o&&r[o]){const x=r[o];x.percentage===100&&!x.error?setTimeout(()=>{l(!1),c(null),e("/agents")},1e3):x.error&&(l(!1),c(null))}},[o,r,e]);const d=async x=>{l(!0);try{const _=x.agentId||`agent-${Date.now()}`;c(_),await _e.createAgent(x),await t.invalidateQueries({queryKey:["agents"]})}catch(_){console.error("Failed to create agent:",_);const y=_ instanceof Error?_.message:"Failed to create agent. Please try again.";throw re.error(y,{position:"top-right",autoClose:7e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),l(!1),c(null),_}},g=()=>{e("/agents")};return n.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("button",{onClick:()=>e("/agents"),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 mb-4",children:[n.jsx(dc,{className:"w-4 h-4 mr-1"}),"Back to Agents"]}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create New Agent"}),n.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Create a new Claude Code agent with a dedicated Git worktree and tmux session. The agent will be able to work independently on the specified branch."})]}),a&&o&&r[o]&&n.jsx("div",{className:"mb-6",children:n.jsx(kE,{progress:r[o],agentId:o})}),n.jsx(SE,{onSubmit:d,onCancel:g,isLoading:a,projects:h,tasks:v}),n.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[n.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"What happens when you create an agent?"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1 list-disc list-inside",children:[n.jsx("li",{children:"A new Git worktree is created for the specified branch"}),n.jsx("li",{children:"A tmux session is started with the agent ID as the session name"}),n.jsx("li",{children:"Claude Code is launched within the tmux session"}),n.jsx("li",{children:"The agent begins working on the branch independently"}),n.jsx("li",{children:"You can monitor and manage the agent from the dashboard"})]})]}),n.jsxs("div",{className:"mt-6 bg-gray-50 border border-gray-200 rounded-lg p-4",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Tips for creating agents"}),n.jsxs("ul",{className:"text-sm text-gray-700 space-y-1 list-disc list-inside",children:[n.jsx("li",{children:"Use descriptive agent IDs that reflect the task or feature"}),n.jsx("li",{children:"Create feature branches before creating agents for new features"}),n.jsx("li",{children:"Enable auto-accept for routine tasks, disable for complex changes"}),n.jsx("li",{children:"Use project IDs to group related agents together"}),n.jsx("li",{children:"Monitor agent status regularly to ensure they're working correctly"})]})]})]})},jE=()=>{const e=rn(),[t,r]=E.useState("grid"),[s,i]=E.useState(""),{data:a=[],isLoading:l,refetch:o}=hr({queryKey:["projects"],queryFn:()=>_e.getProjects()}),c=a.filter(g=>{var x;return g.name.toLowerCase().includes(s.toLowerCase())||((x=g.description)==null?void 0:x.toLowerCase().includes(s.toLowerCase()))}),h=g=>g>0?n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-status-success/20 text-status-success",children:"Active"}):n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-foreground-tertiary/20 text-foreground-tertiary",children:"Idle"}),v=({project:g})=>{var x,_;return n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-6 hover:bg-background-card-hover transition-all cursor-pointer group",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 rounded-lg bg-brand/20",children:n.jsx(Bi,{className:"h-5 w-5 text-brand"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-foreground group-hover:text-brand transition-colors",children:g.name}),n.jsx("p",{className:"text-sm text-foreground-tertiary",children:"Web Application"})]})]}),h(((x=g.agents)==null?void 0:x.length)||0)]}),n.jsx("p",{className:"text-sm text-foreground-secondary mb-4 line-clamp-2",children:g.description||"No description available"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ds,{className:"h-4 w-4 text-foreground-tertiary"}),n.jsxs("span",{className:"text-sm text-foreground-secondary",children:[((_=g.agents)==null?void 0:_.length)||0," agents"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(uo,{className:"h-4 w-4 text-foreground-tertiary"}),n.jsx("span",{className:"text-sm text-foreground-secondary",children:"8 branches"})]})]}),n.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-border",children:[n.jsxs("div",{className:"flex items-center gap-2 text-xs text-foreground-tertiary",children:[n.jsx(Ys,{className:"h-3 w-3"}),n.jsxs("span",{children:["Last: ",new Date(g.updatedAt||g.createdAt).toLocaleDateString()]})]}),n.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[n.jsx("button",{onClick:y=>{y.stopPropagation(),e(`/projects/${g.id}`)},className:"p-1.5 text-foreground-secondary hover:text-foreground hover:bg-background-tertiary rounded transition-colors",children:n.jsx(kl,{className:"h-4 w-4"})}),n.jsx("button",{className:"p-1.5 text-foreground-secondary hover:text-status-error hover:bg-status-error/10 rounded transition-colors",onClick:y=>{y.stopPropagation()},children:n.jsx(Cm,{className:"h-4 w-4"})})]})]})]})},d=({project:g})=>{var x,_;return n.jsx("div",{className:"bg-background-card border border-border rounded-lg p-4 hover:bg-background-card-hover transition-all cursor-pointer group",children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[n.jsx("div",{className:"p-2 rounded-lg bg-brand/20",children:n.jsx(Bi,{className:"h-5 w-5 text-brand"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-foreground group-hover:text-brand transition-colors",children:g.name}),n.jsx("p",{className:"text-sm text-foreground-tertiary",children:g.description||"No description"})]}),n.jsxs("div",{className:"flex items-center gap-6 text-sm text-foreground-secondary",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ds,{className:"h-4 w-4 text-foreground-tertiary"}),n.jsxs("span",{children:[((x=g.agents)==null?void 0:x.length)||0," agents"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(uo,{className:"h-4 w-4 text-foreground-tertiary"}),n.jsx("span",{children:"5 branches"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ys,{className:"h-4 w-4 text-foreground-tertiary"}),n.jsx("span",{children:new Date(g.updatedAt||g.createdAt).toLocaleDateString()})]})]}),h(((_=g.agents)==null?void 0:_.length)||0),n.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[n.jsx("button",{onClick:y=>{y.stopPropagation(),e(`/projects/${g.id}`)},className:"p-1.5 text-foreground-secondary hover:text-foreground hover:bg-background-tertiary rounded transition-colors",children:n.jsx(kl,{className:"h-4 w-4"})}),n.jsx("button",{className:"p-1.5 text-foreground-secondary hover:text-status-error hover:bg-status-error/10 rounded transition-colors",onClick:y=>{y.stopPropagation()},children:n.jsx(Cm,{className:"h-4 w-4"})})]})]})})})};return l?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(Sl,{className:"h-8 w-8 text-foreground-tertiary animate-spin"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Projects"}),n.jsx("p",{className:"text-foreground-secondary mt-1",children:"Manage your development projects and workspaces"})]}),n.jsxs("button",{onClick:()=>e("/projects/new"),className:"px-4 py-2 bg-brand hover:bg-brand-hover text-white rounded-lg font-medium transition-colors flex items-center gap-2",children:[n.jsx(ho,{className:"h-4 w-4"}),"New Project"]})]}),n.jsxs("div",{className:"flex items-center justify-between gap-4",children:[n.jsxs("div",{className:"relative flex-1 max-w-md",children:[n.jsx("input",{type:"text",placeholder:"Search projects...",value:s,onChange:g=>i(g.target.value),className:"w-full pl-10 pr-4 py-2 bg-background-tertiary border border-border rounded-lg text-sm text-foreground placeholder-foreground-tertiary focus:outline-none focus:border-brand focus:ring-1 focus:ring-brand"}),n.jsx(nf,{className:"absolute left-3 top-2.5 h-5 w-5 text-foreground-tertiary"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>o(),className:"p-2 text-foreground-secondary hover:text-foreground hover:bg-background-tertiary rounded-lg transition-colors",children:n.jsx(Sl,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex items-center bg-background-tertiary rounded-lg border border-border",children:[n.jsx("button",{onClick:()=>r("grid"),className:`p-2 rounded-l-lg transition-colors ${t==="grid"?"bg-background-card text-foreground":"text-foreground-secondary hover:text-foreground"}`,children:n.jsx(Sx,{className:"h-5 w-5"})}),n.jsx("button",{onClick:()=>r("list"),className:`p-2 rounded-r-lg transition-colors ${t==="list"?"bg-background-card text-foreground":"text-foreground-secondary hover:text-foreground"}`,children:n.jsx(wx,{className:"h-5 w-5"})})]})]})]}),c.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-16 bg-background-card border border-border rounded-lg",children:[n.jsx(Bi,{className:"h-12 w-12 text-foreground-tertiary mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:s?"No projects found":"No projects yet"}),n.jsx("p",{className:"text-foreground-secondary text-center max-w-md mb-6",children:s?"Try adjusting your search terms":"Create your first project to get started with multi-agent development"}),!s&&n.jsxs("button",{onClick:()=>e("/projects/new"),className:"px-4 py-2 bg-brand hover:bg-brand-hover text-white rounded-lg font-medium transition-colors flex items-center gap-2",children:[n.jsx(ho,{className:"h-4 w-4"}),"Create New Project"]})]}):t==="grid"?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(g=>n.jsx(v,{project:g},g.id))}):n.jsx("div",{className:"space-y-3",children:c.map(g=>n.jsx(d,{project:g},g.id))})]})},NE=()=>n.jsxs("div",{className:"bg-background min-h-screen p-6",children:[n.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Settings"}),n.jsx("p",{className:"text-foreground-secondary mt-2",children:"Configure your Magents system"}),n.jsx("div",{className:"mt-8 bg-background-card border border-border p-6 rounded-lg shadow",children:n.jsx("p",{className:"text-foreground-tertiary",children:"Settings interface coming soon..."})})]}),Lm=({status:e,size:t="md",variant:r="badge",className:s="",showText:i=!0,isLoading:a=!1})=>{const l=d=>{switch(d){case"RUNNING":return{color:"text-green-700 bg-green-100 border-green-200",dotColor:"bg-green-500",icon:ff,text:"Running"};case"STOPPED":return{color:"text-yellow-700 bg-yellow-100 border-yellow-200",dotColor:"bg-yellow-500",icon:iE,text:"Stopped"};case"ERROR":return{color:"text-red-700 bg-red-100 border-red-200",dotColor:"bg-red-500",icon:Ct,text:"Error"};default:return{color:"text-gray-700 bg-gray-100 border-gray-200",dotColor:"bg-gray-500",icon:uc,text:"Unknown"}}},o=d=>{switch(d){case"sm":return{badge:"px-2 py-1 text-xs",icon:"w-3 h-3",dot:"w-2 h-2",text:"text-xs"};case"md":return{badge:"px-2.5 py-1.5 text-sm",icon:"w-4 h-4",dot:"w-3 h-3",text:"text-sm"};case"lg":return{badge:"px-3 py-2 text-base",icon:"w-5 h-5",dot:"w-4 h-4",text:"text-base"}}},c=l(e),h=o(t),v=c.icon;return a?n.jsxs("div",{className:`inline-flex items-center ${s}`,children:[n.jsx(Qx,{className:`${h.icon} animate-spin text-gray-500`}),i&&r!=="dot"&&n.jsx("span",{className:`ml-1.5 ${h.text} text-gray-500`,children:"Loading..."})]}):r==="dot"?n.jsxs("div",{className:`inline-flex items-center ${s}`,children:[n.jsx("div",{className:`${h.dot} ${c.dotColor} rounded-full`}),i&&n.jsx("span",{className:`ml-2 ${h.text} text-gray-900`,children:c.text})]}):r==="full"?n.jsxs("div",{className:`inline-flex items-center space-x-2 ${s}`,children:[n.jsx(v,{className:`${h.icon} ${c.color.split(" ")[0]}`}),i&&n.jsx("span",{className:`${h.text} font-medium text-gray-900`,children:c.text})]}):n.jsxs("span",{className:`inline-flex items-center ${h.badge} font-semibold rounded-full border ${c.color} ${s}`,children:[n.jsx(v,{className:`${h.icon} mr-1.5`}),i&&c.text]})},Im=({isOpen:e,onClose:t,onConfirm:r,title:s,message:i,confirmText:a,confirmStyle:l="danger"})=>{if(!e)return null;const o=()=>{switch(l){case"danger":return"bg-red-600 hover:bg-red-700 text-white";case"warning":return"bg-yellow-600 hover:bg-yellow-700 text-white";case"primary":return"bg-blue-600 hover:bg-blue-700 text-white"}};return n.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center",children:n.jsx("div",{className:"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(jl,{className:"w-6 h-6 text-red-500 mr-3"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:s})]}),n.jsx("p",{className:"text-sm text-gray-500 mb-6",children:i}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{onClick:r,className:`px-4 py-2 text-sm font-medium rounded-md ${o()}`,children:a})]})]})})})},DE=({agent:e,onStart:t,onStop:r,onRestart:s,onDelete:i,variant:a="dropdown",size:l="md"})=>{const[o,c]=E.useState(!1),[h,v]=E.useState({isOpen:!1,action:null}),d=e.status==="STOPPED"||e.status==="ERROR",g=e.status==="RUNNING",x=e.status==="RUNNING"||e.status==="STOPPED",_=u=>{switch(c(!1),u){case"start":d&&t(e.id);break;case"stop":g&&r(e.id);break;case"restart":x&&s(e.id);break;case"delete":v({isOpen:!0,action:"delete"});break;case"deleteWithWorktree":v({isOpen:!0,action:"deleteWithWorktree"});break}},y=()=>{h.action==="delete"?i(e.id,!1):h.action==="deleteWithWorktree"&&i(e.id,!0),v({isOpen:!1,action:null})},f=()=>l==="sm"?"w-3 h-3":"w-4 h-4",p=()=>l==="sm"?"px-2 py-1 text-xs":"px-3 py-2 text-sm";return a==="inline"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center space-x-1",children:[d&&n.jsxs("button",{onClick:()=>_("start"),className:`inline-flex items-center ${p()} font-medium text-green-600 hover:text-green-700 disabled:opacity-50`,title:"Start agent",children:[n.jsx(Qu,{className:`${f()} mr-1`}),"Start"]}),g&&n.jsxs("button",{onClick:()=>_("stop"),className:`inline-flex items-center ${p()} font-medium text-yellow-600 hover:text-yellow-700 disabled:opacity-50`,title:"Stop agent",children:[n.jsx(mo,{className:`${f()} mr-1`}),"Stop"]}),x&&n.jsxs("button",{onClick:()=>_("restart"),className:`inline-flex items-center ${p()} font-medium text-blue-600 hover:text-blue-700 disabled:opacity-50`,title:"Restart agent",children:[n.jsx(Dl,{className:`${f()} mr-1`}),"Restart"]}),n.jsxs("button",{onClick:()=>_("delete"),className:`inline-flex items-center ${p()} font-medium text-red-600 hover:text-red-700`,title:"Delete agent",children:[n.jsx($i,{className:`${f()} mr-1`}),"Delete"]})]}),n.jsx(Im,{isOpen:h.isOpen,onClose:()=>v({isOpen:!1,action:null}),onConfirm:y,title:"Delete Agent",message:h.action==="deleteWithWorktree"?`Are you sure you want to delete agent "${e.id}" and its worktree? This action cannot be undone.`:`Are you sure you want to delete agent "${e.id}"? The worktree will be preserved.`,confirmText:"Delete",confirmStyle:"danger"})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:()=>c(!o),className:`inline-flex items-center ${p()} font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50`,children:n.jsx(sE,{className:f()})}),o&&n.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 z-10",children:n.jsxs("div",{className:"py-1",children:[d&&n.jsxs("button",{onClick:()=>_("start"),className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[n.jsx(Qu,{className:"w-4 h-4 mr-3 text-green-500"}),"Start Agent"]}),g&&n.jsxs("button",{onClick:()=>_("stop"),className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[n.jsx(mo,{className:"w-4 h-4 mr-3 text-yellow-500"}),"Stop Agent"]}),x&&n.jsxs("button",{onClick:()=>_("restart"),className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[n.jsx(Dl,{className:"w-4 h-4 mr-3 text-blue-500"}),"Restart Agent"]}),n.jsx("div",{className:"border-t border-gray-100 my-1"}),n.jsxs("button",{onClick:()=>_("delete"),className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[n.jsx($i,{className:"w-4 h-4 mr-3 text-red-500"}),"Delete Agent Only"]}),n.jsxs("button",{onClick:()=>_("deleteWithWorktree"),className:"flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:[n.jsx($i,{className:"w-4 h-4 mr-3 text-red-500"}),"Delete Agent + Worktree"]})]})})]}),n.jsx(Im,{isOpen:h.isOpen,onClose:()=>v({isOpen:!1,action:null}),onConfirm:y,title:"Delete Agent",message:h.action==="deleteWithWorktree"?`Are you sure you want to delete agent "${e.id}" and its worktree? This action cannot be undone.`:`Are you sure you want to delete agent "${e.id}"? The worktree will be preserved.`,confirmText:"Delete",confirmStyle:"danger"}),o&&n.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>c(!1)})]})},RE=({agent:e})=>{const[t,r]=E.useState(null),[s,i]=E.useState(null),[a,l]=E.useState(""),[o,c]=E.useState(100),[h,v]=E.useState(!1),[d,g]=E.useState(!1),[x,_]=E.useState(null),y=E.useRef(null),f=async()=>{try{const b=await(await fetch(`/api/tmux/sessions/${e.tmuxSession}/info`)).json();b.success?(r(b.data),!a&&b.data.windows.length>0&&l(b.data.activeWindow),_(null)):_(b.error||"Failed to fetch session info")}catch{_("Network error while fetching session info")}},p=async()=>{if(t){v(!0);try{const m=a?`?window=${a}&lines=${o}`:`?lines=${o}`,S=await(await fetch(`/api/tmux/sessions/${e.tmuxSession}/content${m}`)).json();S.success?(i(S.data),_(null)):_(S.error||"Failed to fetch session content")}catch{_("Network error while fetching content")}finally{v(!1)}}},u=async m=>{try{const S=await(await fetch(`/api/tmux/sessions/${e.tmuxSession}/command`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({command:m,window:a})})).json();S.success?setTimeout(p,500):_(S.error||"Failed to send command")}catch{_("Network error while sending command")}};return E.useEffect(()=>{f()},[e.tmuxSession]),E.useEffect(()=>{t&&p()},[t,a,o]),E.useEffect(()=>(d?y.current=setInterval(p,3e3):y.current&&(clearInterval(y.current),y.current=null),()=>{y.current&&clearInterval(y.current)}),[d,t,a,o]),x?n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Js,{className:"h-5 w-5 text-red-400 mr-2"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Terminal Error"}),n.jsx("p",{className:"text-sm text-red-700 mt-1",children:x})]})]})}):t?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(rE,{className:"h-4 w-4 text-gray-500"}),n.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Session: ",e.tmuxSession]})]}),t.windows.length>1&&n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("label",{className:"text-sm text-gray-600",children:"Window:"}),n.jsx("select",{value:a,onChange:m=>l(m.target.value),className:"text-sm border border-gray-300 rounded px-2 py-1",children:t.windows.map(m=>n.jsx("option",{value:m,children:m},m))})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("label",{className:"text-sm text-gray-600",children:"Lines:"}),n.jsxs("select",{value:o,onChange:m=>c(parseInt(m.target.value)),className:"text-sm border border-gray-300 rounded px-2 py-1",children:[n.jsx("option",{value:50,children:"50"}),n.jsx("option",{value:100,children:"100"}),n.jsx("option",{value:200,children:"200"}),n.jsx("option",{value:500,children:"500"})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("button",{onClick:()=>g(!d),className:`inline-flex items-center px-3 py-1 rounded text-sm font-medium ${d?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[d?n.jsx(mo,{className:"h-3 w-3 mr-1"}):n.jsx(Qu,{className:"h-3 w-3 mr-1"}),d?"Stop":"Auto-refresh"]}),n.jsxs("button",{onClick:p,disabled:h,className:"inline-flex items-center px-3 py-1 bg-blue-100 text-blue-700 rounded text-sm font-medium hover:bg-blue-200 disabled:opacity-50",children:[n.jsx(us,{className:`h-3 w-3 mr-1 ${h?"animate-spin":""}`}),"Refresh"]})]})]}),n.jsxs("div",{className:"bg-black rounded-lg overflow-hidden",children:[n.jsx("div",{className:"bg-gray-800 px-4 py-2 border-b border-gray-700",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Js,{className:"h-4 w-4 text-green-400"}),n.jsxs("span",{className:"text-sm text-gray-300",children:[(s==null?void 0:s.windowName)||a,s&&` - ${s.lines} lines`]})]}),s&&n.jsxs("span",{className:"text-xs text-gray-400",children:["Updated: ",new Date(s.timestamp).toLocaleTimeString()]})]})}),n.jsx("div",{className:"p-4 h-96 overflow-y-auto font-mono text-sm text-green-400 whitespace-pre-wrap",children:(s==null?void 0:s.content)||(h?"Loading...":"No content available")})]}),n.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx(Yk,{className:"h-4 w-4 text-gray-500"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Quick Commands:"})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:[{label:"Clear",command:"clear"},{label:"Git Status",command:"git status"},{label:"List Files",command:"ls -la"},{label:"Current Dir",command:"pwd"}].map(m=>n.jsx("button",{onClick:()=>u(m.command),className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs font-medium hover:bg-blue-200",children:m.label},m.command))})]})]}):n.jsx("div",{className:"flex items-center justify-center h-32",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})},AE=({agent:e})=>{const[t,r]=E.useState([]),[s,i]=E.useState(""),[a,l]=E.useState(!1),[o,c]=E.useState(!1),[h,v]=E.useState(""),[d,g]=E.useState([]),[x,_]=E.useState(null),y=E.useRef(null),f=E.useRef(null);$o();const p=E.useCallback(()=>{y.current&&(y.current.scrollTop=y.current.scrollHeight)},[]),u=E.useCallback(async()=>{try{const A=await(await fetch(`/api/tmux/sessions/${e.tmuxSession}/info`)).json();A.success?(g(A.data.windows),v(A.data.activeWindow),_(null),l(!0),b(`Connected to tmux session: ${e.tmuxSession}`,"system"),b(`Active window: ${A.data.activeWindow}`,"system"),b(`Available windows: ${A.data.windows.join(", ")}`,"system"),m()):(_(A.error),l(!1))}catch{_("Failed to connect to tmux session"),l(!1)}},[e.tmuxSession]),m=E.useCallback(async()=>{try{const T=h?`?window=${h}&lines=20`:"?lines=20",O=await(await fetch(`/api/tmux/sessions/${e.tmuxSession}/content${T}`)).json();if(O.success){const R=O.data.content;R.trim()&&R.split(`
`).filter(U=>U.trim()).forEach(U=>{U.trim()&&b(U,"output")})}}catch(T){console.error("Failed to load initial content:",T)}},[e.tmuxSession,h]),b=E.useCallback((T,A)=>{const O={id:Date.now().toString()+Math.random(),content:T,timestamp:new Date,type:A};r(R=>[...R,O]),setTimeout(p,100)},[p]),S=E.useCallback(async T=>{if(!(!T.trim()||!a)){c(!0),b(`$ ${T}`,"input");try{const O=await(await fetch(`/api/tmux/sessions/${e.tmuxSession}/command`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({command:T,window:h})})).json();O.success?setTimeout(async()=>{try{const B=await(await fetch(`/api/tmux/sessions/${e.tmuxSession}/content?window=${h}&lines=5`)).json();B.success&&B.data.content.split(`
`).slice(-3).forEach($=>{$.trim()&&!$.includes(`$ ${T}`)&&b($,"output")})}catch{b("Error fetching command output","system")}},500):b(`Error: ${O.error}`,"system")}catch{b("Error sending command","system")}finally{c(!1)}}},[e.tmuxSession,h,a,b]),C=E.useCallback(T=>{T.preventDefault(),s.trim()&&(S(s),i(""))},[s,S]),k=E.useCallback(T=>{T.key==="Enter"&&C(T)},[C]),w=E.useCallback(async T=>{v(T),b(`Switching to window: ${T}`,"system"),setTimeout(m,500)},[m]),j=E.useCallback(()=>{r([]),b("Terminal cleared","system")},[b]);E.useEffect(()=>{u()},[u]),E.useEffect(()=>{f.current&&f.current.focus()},[]);const D=T=>T.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),I=T=>{switch(T){case"input":return"text-cyan-300 font-semibold";case"output":return"text-green-300";case"system":return"text-yellow-300 text-sm";default:return"text-gray-300"}};return x?n.jsx("div",{className:"bg-red-900 border border-red-700 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Js,{className:"h-5 w-5 text-red-400 mr-2"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-red-200",children:"Interactive Terminal Error"}),n.jsx("p",{className:"text-sm text-red-300 mt-1",children:x})]})]})}):n.jsxs("div",{className:"bg-gray-900 rounded-lg overflow-hidden border border-gray-700",children:[n.jsx("div",{className:"bg-gray-800 px-4 py-2 border-b border-gray-700",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Js,{className:"h-4 w-4 text-green-400"}),n.jsxs("span",{className:"text-sm text-gray-300 font-mono",children:[e.tmuxSession,":",h]}),n.jsx("div",{className:`w-2 h-2 rounded-full ${a?"bg-green-400":"bg-red-400"}`})]}),d.length>1&&n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-xs text-gray-400",children:"Window:"}),n.jsx("select",{value:h,onChange:T=>w(T.target.value),className:"bg-gray-700 text-white text-xs border border-gray-600 rounded px-2 py-1",children:d.map(T=>n.jsx("option",{value:T,children:T},T))})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:j,className:"text-gray-400 hover:text-white p-1",title:"Clear terminal",children:n.jsx(Dl,{className:"h-4 w-4"})}),n.jsx("button",{onClick:u,className:"text-gray-400 hover:text-white p-1",title:"Reconnect",children:n.jsx(oE,{className:"h-4 w-4"})})]})]})}),n.jsxs("div",{ref:y,className:"h-96 overflow-y-auto p-4 font-mono text-sm bg-black",children:[t.map(T=>n.jsxs("div",{className:"flex items-start space-x-2 mb-1",children:[n.jsx("span",{className:"text-gray-500 text-xs min-w-[60px]",children:D(T.timestamp)}),n.jsx("span",{className:I(T.type),children:T.content})]},T.id)),o&&n.jsxs("div",{className:"flex items-center space-x-2 text-yellow-300",children:[n.jsx("span",{className:"text-gray-500 text-xs min-w-[60px]",children:D(new Date)}),n.jsx("span",{children:"Executing command..."})]})]}),n.jsxs("div",{className:"bg-gray-800 border-t border-gray-700 p-3",children:[n.jsxs("form",{onSubmit:C,className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-green-400 font-mono text-sm",children:"$"}),n.jsx("input",{ref:f,type:"text",value:s,onChange:T=>i(T.target.value),onKeyDown:k,disabled:!a||o,placeholder:a?"Enter command...":"Not connected",className:"flex-1 bg-gray-900 text-green-300 border border-gray-600 rounded px-3 py-2 font-mono text-sm focus:outline-none focus:border-green-400 disabled:opacity-50"}),n.jsx("button",{type:"submit",disabled:!a||o||!s.trim(),className:"px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:n.jsx(lE,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"mt-2 text-xs text-gray-400",children:[n.jsxs("span",{children:["Connected to tmux session: ",e.tmuxSession]}),h&&n.jsxs("span",{children:[" | Window: ",h]}),n.jsxs("span",{children:[" | Status: ",a?"Connected":"Disconnected"]})]})]})]})},TE=[{id:"overview",label:"Overview",icon:n.jsx(eE,{className:"w-4 h-4"})},{id:"configuration",label:"Configuration",icon:n.jsx(Ho,{className:"w-4 h-4"})},{id:"activity",label:"Activity",icon:n.jsx(Vk,{className:"w-4 h-4"})},{id:"terminal",label:"Terminal View",icon:n.jsx(Js,{className:"w-4 h-4"})},{id:"interactive",label:"Interactive",icon:n.jsx(Js,{className:"w-4 h-4"})}],PE=()=>{const{id:e}=tx(),t=rn(),[r,s]=E.useState("overview"),{subscribe:i,unsubscribe:a,isConnected:l}=$o(),{data:o,isLoading:c,error:h,refetch:v}=hr({queryKey:["agent",e],queryFn:()=>_e.getAgent(e),enabled:!!e,refetchInterval:3e4});E.useEffect(()=>(e&&i(`agent:${e}`),()=>{e&&a(`agent:${e}`)}),[e,i,a]);const d=p=>new Date(p).toLocaleString(),g=p=>{const u=new Date(p),b=new Date().getTime()-u.getTime(),S=Math.floor(b/(1e3*60*60)),C=Math.floor(b%(1e3*60*60)/(1e3*60));return S>0?`${S}h ${C}m`:`${C}m`},x=async p=>{try{await _e.updateAgentStatus(p,"RUNNING"),re.success("Agent started successfully"),v()}catch(u){re.error("Failed to start agent"),console.error("Failed to start agent:",u)}},_=async p=>{try{await _e.updateAgentStatus(p,"STOPPED"),re.success("Agent stopped successfully"),v()}catch(u){re.error("Failed to stop agent"),console.error("Failed to stop agent:",u)}},y=async(p,u=!1)=>{try{await _e.deleteAgent(p,u),re.success("Agent deleted successfully"),t("/agents")}catch(m){re.error("Failed to delete agent"),console.error("Failed to delete agent:",m)}},f=async p=>{try{await _(p),setTimeout(()=>x(p),1e3)}catch(u){re.error("Failed to restart agent"),console.error("Failed to restart agent:",u)}};return c?n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand"})}):h||!o?n.jsx("div",{className:"max-w-7xl mx-auto p-6",children:n.jsx("div",{className:"bg-status-error/20 border border-status-error/30 rounded-md p-4",children:n.jsxs("div",{className:"flex",children:[n.jsx(Ct,{className:"h-5 w-5 text-status-error"}),n.jsxs("div",{className:"ml-3",children:[n.jsx("h3",{className:"text-sm font-medium text-status-error",children:"Error loading agent"}),n.jsx("div",{className:"mt-2 text-sm text-status-error",children:n.jsx("p",{children:h instanceof Error?h.message:"Agent not found"})}),n.jsx("div",{className:"mt-4",children:n.jsx("button",{onClick:()=>t("/agents"),className:"bg-status-error/20 px-3 py-2 rounded-md text-sm font-medium text-status-error hover:bg-status-error/30",children:"Back to agents"})})]})]})})}):n.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-background min-h-screen",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("button",{onClick:()=>t("/agents"),className:"inline-flex items-center text-sm text-foreground-tertiary hover:text-foreground-secondary mb-4",children:[n.jsx(dc,{className:"w-4 h-4 mr-1"}),"Back to Agents"]}),n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsxs("h1",{className:"text-2xl font-bold text-foreground flex items-center",children:[o.id,n.jsx(Lm,{status:o.status,size:"md",className:"ml-4"})]}),n.jsxs("div",{className:"mt-2 flex flex-col sm:flex-row sm:items-center sm:space-x-6",children:[n.jsxs("div",{className:"flex items-center text-sm text-foreground-secondary",children:[n.jsx(Gn,{className:"w-4 h-4 mr-1"}),n.jsx("code",{className:"bg-background-tertiary px-2 py-1 rounded text-foreground",children:o.branch})]}),n.jsxs("div",{className:"flex items-center text-sm text-foreground-secondary mt-2 sm:mt-0",children:[n.jsx(Js,{className:"w-4 h-4 mr-1"}),n.jsx("code",{className:"bg-background-tertiary px-2 py-1 rounded text-foreground",children:o.tmuxSession})]}),n.jsxs("div",{className:"flex items-center text-sm text-foreground-secondary mt-2 sm:mt-0",children:[n.jsx(uc,{className:"w-4 h-4 mr-1"}),n.jsxs("span",{children:["Running for ",g(o.createdAt)]})]})]})]}),n.jsxs("div",{className:"ml-6 flex items-center space-x-3",children:[n.jsx("button",{onClick:()=>v(),className:"inline-flex items-center px-3 py-2 border border-border rounded-md shadow-sm text-sm font-medium text-foreground bg-background-card hover:bg-background-card-hover",children:n.jsx(us,{className:"w-4 h-4"})}),n.jsx(DE,{agent:o,onStart:x,onStop:_,onRestart:f,onDelete:y,variant:"inline",size:"md"})]})]})]}),n.jsx("div",{className:"border-b border-border",children:n.jsx("nav",{className:"-mb-px flex space-x-8",children:TE.map(p=>n.jsxs("button",{onClick:()=>s(p.id),className:`
                group inline-flex items-center py-4 px-1 border-b-2 font-medium text-sm
                ${r===p.id?"border-brand text-brand":"border-transparent text-foreground-tertiary hover:text-foreground-secondary hover:border-border-hover"}
              `,children:[p.icon,n.jsx("span",{className:"ml-2",children:p.label})]},p.id))})}),n.jsxs("div",{className:"mt-6",children:[r==="overview"&&n.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-foreground mb-4",children:"Basic Information"}),n.jsxs("dl",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("dt",{className:"text-sm font-medium text-foreground-tertiary",children:"Agent ID"}),n.jsx("dd",{className:"mt-1 text-sm text-foreground",children:o.id})]}),n.jsxs("div",{children:[n.jsx("dt",{className:"text-sm font-medium text-foreground-tertiary",children:"Branch"}),n.jsx("dd",{className:"mt-1 text-sm text-foreground",children:n.jsx("code",{className:"bg-background-tertiary px-2 py-1 rounded text-foreground",children:o.branch})})]}),n.jsxs("div",{children:[n.jsx("dt",{className:"text-sm font-medium text-foreground-tertiary",children:"Status"}),n.jsx("dd",{className:"mt-1",children:n.jsx(Lm,{status:o.status,variant:"full"})})]}),n.jsxs("div",{children:[n.jsx("dt",{className:"text-sm font-medium text-foreground-tertiary",children:"Created"}),n.jsx("dd",{className:"mt-1 text-sm text-foreground",children:d(o.createdAt)})]}),o.updatedAt&&n.jsxs("div",{children:[n.jsx("dt",{className:"text-sm font-medium text-foreground-tertiary",children:"Last Updated"}),n.jsx("dd",{className:"mt-1 text-sm text-foreground",children:d(o.updatedAt)})]})]})]}),n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-foreground mb-4",children:"System Information"}),n.jsxs("dl",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("dt",{className:"text-sm font-medium text-foreground-tertiary",children:"Tmux Session"}),n.jsx("dd",{className:"mt-1 text-sm text-foreground",children:n.jsx("code",{className:"bg-background-tertiary px-2 py-1 rounded text-foreground",children:o.tmuxSession})})]}),n.jsxs("div",{children:[n.jsx("dt",{className:"text-sm font-medium text-foreground-tertiary",children:"Worktree Path"}),n.jsx("dd",{className:"mt-1 text-sm text-foreground",children:n.jsx("code",{className:"bg-background-tertiary px-2 py-1 rounded text-xs break-all text-foreground",children:o.worktreePath})})]}),n.jsxs("div",{children:[n.jsx("dt",{className:"text-sm font-medium text-foreground-tertiary",children:"WebSocket Connection"}),n.jsx("dd",{className:"mt-1 text-sm text-foreground",children:n.jsxs("span",{className:`inline-flex items-center ${l?"text-status-success":"text-status-error"}`,children:[n.jsx("div",{className:`w-2 h-2 rounded-full mr-2 ${l?"bg-status-success":"bg-status-error"}`}),l?"Connected":"Disconnected"]})})]}),o.projectId&&n.jsxs("div",{children:[n.jsx("dt",{className:"text-sm font-medium text-foreground-tertiary",children:"Project ID"}),n.jsx("dd",{className:"mt-1 text-sm text-foreground",children:o.projectId})]})]})]})]}),r==="configuration"&&n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-foreground mb-4",children:"Agent Configuration"}),n.jsxs("dl",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("dt",{className:"text-sm font-medium text-foreground-tertiary",children:"Auto Accept"}),n.jsx("dd",{className:"mt-1 text-sm text-foreground",children:o.autoAccept?n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-status-success/20 text-status-success border border-status-success/30",children:"Enabled"}):n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-foreground-tertiary/20 text-foreground-tertiary border border-foreground-tertiary/30",children:"Disabled"})})]}),n.jsxs("div",{children:[n.jsx("dt",{className:"text-sm font-medium text-foreground-tertiary",children:"Docker Mode"}),n.jsx("dd",{className:"mt-1 text-sm text-foreground",children:o.useDocker?n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-brand/20 text-brand border border-brand/30",children:"Docker"}):n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-foreground-tertiary/20 text-foreground-tertiary border border-foreground-tertiary/30",children:"Local"})})]}),o.config&&n.jsxs("div",{children:[n.jsx("dt",{className:"text-sm font-medium text-foreground-tertiary",children:"Additional Configuration"}),n.jsx("dd",{className:"mt-1",children:n.jsx("pre",{className:"bg-background-secondary rounded p-3 text-xs overflow-x-auto text-foreground border border-border",children:JSON.stringify(o.config,null,2)})})]})]})]}),r==="activity"&&n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-foreground mb-4",children:"Recent Activity"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"border-l-4 border-brand pl-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:"Agent started"}),n.jsx("p",{className:"text-sm text-foreground-tertiary",children:d(o.createdAt)})]}),n.jsx("p",{className:"text-sm text-foreground-secondary mt-1",children:"Agent was created and started successfully"})]}),o.status==="RUNNING"&&n.jsxs("div",{className:"border-l-4 border-status-success pl-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:"Currently running"}),n.jsx("p",{className:"text-sm text-foreground-tertiary",children:"Active"})]}),n.jsx("p",{className:"text-sm text-foreground-secondary mt-1",children:"Agent is actively processing tasks"})]}),o.status==="STOPPED"&&n.jsxs("div",{className:"border-l-4 border-status-warning pl-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:"Agent stopped"}),n.jsx("p",{className:"text-sm text-foreground-tertiary",children:o.updatedAt?d(o.updatedAt):"Unknown"})]}),n.jsx("p",{className:"text-sm text-foreground-secondary mt-1",children:"Agent has been stopped"})]}),o.status==="ERROR"&&n.jsxs("div",{className:"border-l-4 border-status-error pl-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:"Error occurred"}),n.jsx("p",{className:"text-sm text-foreground-tertiary",children:o.updatedAt?d(o.updatedAt):"Unknown"})]}),n.jsx("p",{className:"text-sm text-foreground-secondary mt-1",children:"Agent encountered an error"})]})]})]}),r==="terminal"&&n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Live Terminal View"}),n.jsx("div",{className:"text-sm text-foreground-secondary",children:"Real-time view of agent's tmux session"})]}),n.jsx(RE,{agent:o}),n.jsxs("div",{className:"mt-6 p-4 bg-brand/10 border border-brand/30 rounded-lg",children:[n.jsx("h4",{className:"text-sm font-medium text-brand",children:"Direct Access"}),n.jsx("p",{className:"text-sm text-brand mt-1",children:"For full terminal control, attach directly:"}),n.jsx("div",{className:"mt-2 bg-background-tertiary rounded p-2 border border-border",children:n.jsxs("code",{className:"text-foreground text-sm",children:["tmux attach-session -t ",o.tmuxSession]})}),n.jsx("p",{className:"text-sm text-brand mt-2",children:"Or use the magents CLI:"}),n.jsx("div",{className:"mt-2 bg-background-tertiary rounded p-2 border border-border",children:n.jsxs("code",{className:"text-foreground text-sm",children:["magents attach ",o.id]})})]})]}),r==="interactive"&&n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Interactive Terminal"}),n.jsx("div",{className:"text-sm text-foreground-secondary",children:"Direct command interface to agent's tmux session"})]}),n.jsx(AE,{agent:o}),n.jsxs("div",{className:"mt-4 p-3 bg-brand/10 border border-brand/30 rounded-lg",children:[n.jsx("h4",{className:"text-sm font-medium text-brand",children:"Usage Tips"}),n.jsxs("ul",{className:"mt-2 text-sm text-brand space-y-1 list-disc list-inside",children:[n.jsx("li",{children:"Type commands and press Enter to execute them in the agent's tmux session"}),n.jsx("li",{children:"Switch between tmux windows (main, claude, git) using the dropdown"}),n.jsxs("li",{children:["Use standard terminal commands: ",n.jsx("code",{className:"bg-background-tertiary px-1 rounded text-foreground border border-border",children:"ls"}),", ",n.jsx("code",{className:"bg-background-tertiary px-1 rounded text-foreground border border-border",children:"cd"}),", ",n.jsx("code",{className:"bg-background-tertiary px-1 rounded text-foreground border border-border",children:"git status"})]}),n.jsx("li",{children:"Commands are executed in the agent's working directory"}),n.jsxs("li",{children:["Use ",n.jsx("code",{className:"bg-background-tertiary px-1 rounded text-foreground border border-border",children:"clear"})," to clear the terminal display"]})]})]})]})]})]})},LE=()=>{const{id:e}=tx();return n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Project ",e]}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Detailed view of project"}),n.jsx("div",{className:"mt-8 bg-white p-6 rounded-lg shadow",children:n.jsx("p",{className:"text-gray-500",children:"Project detail interface coming soon..."})})]})},IE=[{id:"feature",name:"Feature Implementation",template:{priority:"medium",testStrategy:"Unit tests for core functionality, integration tests for API endpoints, E2E tests for user flows",subtasks:[{title:"Design and plan implementation",description:"Create technical design document and implementation plan"},{title:"Implement core functionality",description:"Build the main feature logic and business rules"},{title:"Add tests",description:"Write unit tests, integration tests, and E2E tests"},{title:"Update documentation",description:"Update API docs, user guides, and code comments"}]}},{id:"bugfix",name:"Bug Fix",template:{priority:"high",testStrategy:"Regression tests to prevent reoccurrence, unit tests for the fix",subtasks:[{title:"Reproduce and diagnose issue",description:"Create minimal reproduction and identify root cause"},{title:"Implement fix",description:"Apply the fix and ensure it resolves the issue"},{title:"Add regression tests",description:"Write tests to prevent the bug from reoccurring"}]}},{id:"refactor",name:"Code Refactoring",template:{priority:"low",testStrategy:"Ensure existing tests pass, add tests for any new patterns or abstractions",subtasks:[{title:"Analyze current implementation",description:"Review existing code and identify refactoring opportunities"},{title:"Plan refactoring approach",description:"Design the new structure and migration strategy"},{title:"Implement refactoring",description:"Apply changes incrementally with tests passing at each step"},{title:"Update affected components",description:"Update all components using the refactored code"}]}},{id:"research",name:"Research Task",template:{priority:"medium",testStrategy:"Proof of concept implementation, performance benchmarks if applicable",subtasks:[{title:"Research and analysis",description:"Investigate options and gather requirements"},{title:"Create proof of concept",description:"Build a minimal implementation to validate approach"},{title:"Document findings",description:"Create documentation of research results and recommendations"}]}}],OE=({projectPath:e,onClose:t,onTaskCreated:r,existingTasks:s=[]})=>{const[i,a]=E.useState(0),[l,o]=E.useState({title:"",description:"",priority:"medium",dependencies:[],details:"",testStrategy:"",subtasks:[]}),[c,h]=E.useState({}),[v,d]=E.useState(""),[g,x]=E.useState(!1),[_,y]=E.useState(!1),[f,p]=E.useState(null),u=[{id:"template",title:"Choose Template"},{id:"basic",title:"Basic Information"},{id:"details",title:"Implementation Details"},{id:"dependencies",title:"Dependencies"},{id:"subtasks",title:"Subtasks"},{id:"review",title:"Review & Create"}],m=s.filter(O=>{const R=v.toLowerCase();return!l.dependencies.includes(O.id)&&(O.id.toLowerCase().includes(R)||O.title.toLowerCase().includes(R))}),b=O=>{const R={};switch(O){case 1:l.title.trim()?l.title.length<5&&(R.title="Title must be at least 5 characters"):R.title="Title is required",l.description.trim()?l.description.length<10&&(R.description="Description must be at least 10 characters"):R.description="Description is required";break;case 4:const B={};l.subtasks.forEach((U,$)=>{const N={};U.title.trim()||(N.title="Subtask title is required"),U.description.trim()||(N.description="Subtask description is required"),Object.keys(N).length>0&&(B[$]=N)}),Object.keys(B).length>0&&(R.subtasks=B);break}return h(R),Object.keys(R).length===0},S=()=>{(i===0||b(i))&&a(Math.min(i+1,u.length-1))},C=()=>{a(Math.max(i-1,0))},k=O=>{o(R=>({...R,priority:O.template.priority,testStrategy:O.template.testStrategy,subtasks:O.template.subtasks.map(B=>({...B}))})),S()},w=O=>{o(R=>({...R,dependencies:[...R.dependencies,O]})),d("")},j=O=>{o(R=>({...R,dependencies:R.dependencies.filter(B=>B!==O)}))},D=()=>{o(O=>({...O,subtasks:[...O.subtasks,{title:"",description:""}]}))},I=O=>{o(R=>({...R,subtasks:R.subtasks.filter((B,U)=>U!==O)})),h(R=>{const B={...R};if(B.subtasks){delete B.subtasks[O];const U={};Object.entries(B.subtasks).forEach(([$,N])=>{const P=parseInt($);P>O?U[P-1]=N:U[P]=N}),B.subtasks=U}return B})},T=async()=>{if(b(i)){y(!0),p(null);try{const O=await _e.createTaskMasterTask(e,l.title,l.description,l.priority),R={...O,dependencies:l.dependencies.length>0?l.dependencies:void 0,details:l.details||void 0,testStrategy:l.testStrategy||void 0,subtasks:l.subtasks.length>0?l.subtasks.map((B,U)=>({id:`${O.id}.${U+1}`,title:B.title,description:B.description,status:"pending",priority:"medium"})):void 0};r(R),t()}catch(O){p(O instanceof Error?O.message:"Failed to create task")}finally{y(!1)}}};E.useEffect(()=>{const O=R=>{R.key==="Escape"?t():R.key==="Enter"&&(R.metaKey||R.ctrlKey)&&(i===u.length-1?T():S())};return window.addEventListener("keydown",O),()=>window.removeEventListener("keydown",O)},[i,l]);const A=()=>{switch(i){case 0:return n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-foreground",children:"Choose a Task Template"}),n.jsx("p",{className:"text-sm text-foreground-secondary mb-6",children:"Select a template to pre-fill common fields, or skip to create a custom task."}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:IE.map(O=>n.jsxs("button",{onClick:()=>k(O),className:"p-4 border border-border rounded-lg text-left hover:border-brand hover:bg-brand/10 transition-all bg-background-card",children:[n.jsx("h4",{className:"font-medium mb-2 text-foreground",children:O.name}),n.jsxs("p",{className:"text-sm text-foreground-secondary",children:["Priority: ",O.template.priority,"  ",O.template.subtasks.length," subtasks"]})]},O.id))}),n.jsx("button",{onClick:S,className:"w-full mt-4 py-2 text-foreground-tertiary hover:text-foreground-secondary transition-colors",children:"Skip and create custom task "})]});case 1:return n.jsxs("div",{className:"space-y-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-foreground",children:"Basic Information"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Task Title *"}),n.jsx("input",{type:"text",value:l.title,onChange:O=>o(R=>({...R,title:O.target.value})),className:`w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-brand bg-background-card text-foreground placeholder-foreground-tertiary ${c.title?"border-status-error":""}`,placeholder:"e.g., Implement user authentication"}),c.title&&n.jsx("p",{className:"mt-1 text-sm text-status-error",children:c.title})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Description *"}),n.jsx("textarea",{value:l.description,onChange:O=>o(R=>({...R,description:O.target.value})),className:`w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-brand bg-background-card text-foreground placeholder-foreground-tertiary ${c.description?"border-status-error":""}`,rows:4,placeholder:"Describe what needs to be done..."}),c.description&&n.jsx("p",{className:"mt-1 text-sm text-status-error",children:c.description})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Priority"}),n.jsxs("select",{value:l.priority,onChange:O=>o(R=>({...R,priority:O.target.value})),className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-brand bg-background-card text-foreground",children:[n.jsx("option",{value:"low",children:"Low"}),n.jsx("option",{value:"medium",children:"Medium"}),n.jsx("option",{value:"high",children:"High"})]})]})]});case 2:return n.jsxs("div",{className:"space-y-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-foreground",children:"Implementation Details"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Implementation Details"}),n.jsx("textarea",{value:l.details,onChange:O=>o(R=>({...R,details:O.target.value})),className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-brand bg-background-card text-foreground placeholder-foreground-tertiary",rows:6,placeholder:"Technical details, approach, considerations..."}),n.jsx("p",{className:"mt-1 text-sm text-foreground-tertiary",children:"Provide technical details about how this task should be implemented."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Test Strategy"}),n.jsx("textarea",{value:l.testStrategy,onChange:O=>o(R=>({...R,testStrategy:O.target.value})),className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-brand bg-background-card text-foreground placeholder-foreground-tertiary",rows:4,placeholder:"How should this be tested?"}),n.jsx("p",{className:"mt-1 text-sm text-foreground-tertiary",children:"Describe the testing approach for this task."})]})]});case 3:return n.jsxs("div",{className:"space-y-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-foreground",children:"Task Dependencies"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"This task depends on:"}),l.dependencies.length>0&&n.jsx("div",{className:"mb-4 space-y-2",children:l.dependencies.map(O=>{const R=s.find(B=>B.id===O);return n.jsxs("div",{className:"flex items-center justify-between p-3 bg-background-tertiary rounded-md",children:[n.jsxs("div",{children:[n.jsxs("span",{className:"font-mono text-sm text-foreground-tertiary",children:["#",O]}),R&&n.jsx("span",{className:"ml-2 text-sm text-foreground",children:R.title})]}),n.jsx("button",{onClick:()=>j(O),className:"text-status-error hover:text-status-error/80",children:n.jsx($i,{className:"w-4 h-4"})})]},O)})}),n.jsxs("div",{className:"relative",children:[n.jsx(hc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-foreground-tertiary"}),n.jsx("input",{type:"text",value:v,onChange:O=>d(O.target.value),onFocus:()=>x(!0),className:"w-full pl-10 pr-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-brand bg-background-card text-foreground placeholder-foreground-tertiary",placeholder:"Search tasks by ID or title..."})]}),g&&v&&n.jsx("div",{className:"mt-2 max-h-60 overflow-y-auto border border-border rounded-md shadow-lg bg-background-card",children:m.length>0?m.slice(0,10).map(O=>n.jsxs("button",{onClick:()=>{w(O.id),x(!1)},className:"w-full px-4 py-2 text-left hover:bg-background-card-hover flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("span",{className:"font-mono text-sm text-foreground-tertiary",children:["#",O.id]}),n.jsx("span",{className:"ml-2 text-sm text-foreground",children:O.title})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${O.status==="done"?"bg-status-success/20 text-status-success border-status-success/30":O.status==="in-progress"?"bg-brand/20 text-brand border-brand/30":"bg-status-warning/20 text-status-warning border-status-warning/30"}`,children:O.status})]},O.id)):n.jsx("div",{className:"px-4 py-3 text-sm text-foreground-tertiary",children:"No matching tasks found"})})]}),n.jsx("p",{className:"text-sm text-foreground-tertiary",children:"Dependencies ensure this task won't be started until the selected tasks are completed."})]});case 4:return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Subtasks"}),n.jsxs("button",{onClick:D,className:"flex items-center space-x-2 px-3 py-1 text-sm bg-brand text-white rounded-md hover:bg-brand-hover",children:[n.jsx(Gr,{className:"w-4 h-4"}),n.jsx("span",{children:"Add Subtask"})]})]}),l.subtasks.length===0?n.jsxs("div",{className:"text-center py-8 bg-background-tertiary rounded-lg",children:[n.jsx("p",{className:"text-foreground-secondary mb-4",children:"No subtasks added yet"}),n.jsx("button",{onClick:D,className:"text-brand hover:text-brand-hover",children:"Add your first subtask"})]}):n.jsx("div",{className:"space-y-4",children:l.subtasks.map((O,R)=>{var B,U,$,N,P,M,F,V;return n.jsxs("div",{className:"p-4 border border-border rounded-lg bg-background-card",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("span",{className:"text-sm font-medium text-foreground-tertiary",children:["Subtask ",R+1]}),n.jsx("button",{onClick:()=>I(R),className:"text-status-error hover:text-status-error/80",children:n.jsx($i,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("input",{type:"text",value:O.title,onChange:K=>{const J=[...l.subtasks];J[R].title=K.target.value,o(te=>({...te,subtasks:J}))},className:`w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-brand bg-background text-foreground placeholder-foreground-tertiary ${(U=(B=c.subtasks)==null?void 0:B[R])!=null&&U.title?"border-status-error":""}`,placeholder:"Subtask title"}),((N=($=c.subtasks)==null?void 0:$[R])==null?void 0:N.title)&&n.jsx("p",{className:"mt-1 text-sm text-status-error",children:c.subtasks[R].title})]}),n.jsxs("div",{children:[n.jsx("textarea",{value:O.description,onChange:K=>{const J=[...l.subtasks];J[R].description=K.target.value,o(te=>({...te,subtasks:J}))},className:`w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-brand bg-background text-foreground placeholder-foreground-tertiary ${(M=(P=c.subtasks)==null?void 0:P[R])!=null&&M.description?"border-status-error":""}`,rows:2,placeholder:"Subtask description"}),((V=(F=c.subtasks)==null?void 0:F[R])==null?void 0:V.description)&&n.jsx("p",{className:"mt-1 text-sm text-status-error",children:c.subtasks[R].description})]})]})]},R)})})]});case 5:return n.jsxs("div",{className:"space-y-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-foreground",children:"Review Task Details"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"p-4 bg-background-tertiary rounded-lg",children:[n.jsx("h4",{className:"font-medium text-foreground mb-2",children:"Basic Information"}),n.jsxs("dl",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex",children:[n.jsx("dt",{className:"font-medium text-foreground-tertiary w-24",children:"Title:"}),n.jsx("dd",{className:"flex-1 text-foreground",children:l.title})]}),n.jsxs("div",{className:"flex",children:[n.jsx("dt",{className:"font-medium text-foreground-tertiary w-24",children:"Priority:"}),n.jsx("dd",{className:"flex-1",children:n.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${l.priority==="high"?"bg-status-error/20 text-status-error border-status-error/30":l.priority==="medium"?"bg-status-warning/20 text-status-warning border-status-warning/30":"bg-status-success/20 text-status-success border-status-success/30"}`,children:l.priority})})]}),n.jsxs("div",{className:"flex",children:[n.jsx("dt",{className:"font-medium text-foreground-tertiary w-24",children:"Description:"}),n.jsx("dd",{className:"flex-1 text-foreground",children:l.description})]})]})]}),(l.details||l.testStrategy)&&n.jsxs("div",{className:"p-4 bg-background-tertiary rounded-lg",children:[n.jsx("h4",{className:"font-medium text-foreground mb-2",children:"Implementation"}),n.jsxs("dl",{className:"space-y-2 text-sm",children:[l.details&&n.jsxs("div",{children:[n.jsx("dt",{className:"font-medium text-foreground-tertiary mb-1",children:"Details:"}),n.jsx("dd",{className:"text-foreground whitespace-pre-wrap",children:l.details})]}),l.testStrategy&&n.jsxs("div",{children:[n.jsx("dt",{className:"font-medium text-foreground-tertiary mb-1",children:"Test Strategy:"}),n.jsx("dd",{className:"text-foreground whitespace-pre-wrap",children:l.testStrategy})]})]})]}),l.dependencies.length>0&&n.jsxs("div",{className:"p-4 bg-background-tertiary rounded-lg",children:[n.jsx("h4",{className:"font-medium text-foreground mb-2",children:"Dependencies"}),n.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm",children:l.dependencies.map(O=>{const R=s.find(B=>B.id===O);return n.jsxs("li",{children:[n.jsxs("span",{className:"font-mono text-foreground-tertiary",children:["#",O]}),R&&n.jsx("span",{className:"ml-2 text-foreground",children:R.title})]},O)})})]}),l.subtasks.length>0&&n.jsxs("div",{className:"p-4 bg-background-tertiary rounded-lg",children:[n.jsxs("h4",{className:"font-medium text-foreground mb-2",children:["Subtasks (",l.subtasks.length,")"]}),n.jsx("ol",{className:"list-decimal list-inside space-y-2 text-sm",children:l.subtasks.map((O,R)=>n.jsxs("li",{children:[n.jsx("span",{className:"font-medium text-foreground",children:O.title}),n.jsx("p",{className:"ml-6 text-foreground-secondary",children:O.description})]},R))})]})]}),f&&n.jsxs("div",{className:"p-4 bg-status-error/20 border border-status-error/30 rounded-md flex items-start space-x-3",children:[n.jsx(Ct,{className:"w-5 h-5 text-status-error flex-shrink-0 mt-0.5"}),n.jsx("div",{className:"text-sm text-status-error",children:f})]}),n.jsx("div",{className:"p-4 bg-brand/10 border border-brand/30 rounded-md",children:n.jsx("p",{className:"text-sm text-brand",children:'Review the task details above. Click "Create Task" to add this task to your TaskMaster project.'})})]});default:return null}};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-background-card border border-border rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] flex flex-col",children:[n.jsxs("div",{className:"px-6 py-4 border-b border-border flex items-center justify-between",children:[n.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Create New Task"}),n.jsx("button",{onClick:t,className:"text-foreground-tertiary hover:text-foreground-secondary transition-colors",children:n.jsx(Rs,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"px-6 py-4 border-b border-border",children:n.jsx("div",{className:"flex items-center justify-between",children:u.map((O,R)=>n.jsxs("div",{className:`flex items-center ${R<u.length-1?"flex-1":""}`,children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${R<i?"bg-status-success text-white":R===i?"bg-brand text-white":"bg-background-tertiary text-foreground-tertiary"}`,children:R<i?n.jsx(pf,{className:"w-4 h-4"}):R+1}),n.jsx("span",{className:`ml-2 text-sm ${R<=i?"text-foreground":"text-foreground-tertiary"}`,children:O.title})]}),R<u.length-1&&n.jsx("div",{className:`flex-1 h-0.5 mx-4 ${R<i?"bg-status-success":"bg-background-tertiary"}`})]},O.id))})}),n.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-6",children:A()}),n.jsxs("div",{className:"px-6 py-4 border-t border-border flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center space-x-3",children:i>0&&n.jsxs("button",{onClick:C,className:"px-4 py-2 text-foreground-tertiary hover:text-foreground-secondary transition-colors flex items-center space-x-2",children:[n.jsx(dc,{className:"w-4 h-4"}),n.jsx("span",{children:"Previous"})]})}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("button",{onClick:t,className:"px-4 py-2 text-foreground-tertiary hover:text-foreground-secondary transition-colors",children:"Cancel"}),i<u.length-1?n.jsxs("button",{onClick:S,className:"px-4 py-2 bg-brand text-white rounded-md hover:bg-brand-hover transition-colors flex items-center space-x-2",children:[n.jsx("span",{children:"Next"}),n.jsx(Vx,{className:"w-4 h-4"})]}):n.jsx("button",{onClick:T,disabled:_,className:"px-4 py-2 bg-status-success text-white rounded-md hover:bg-status-success/80 transition-colors flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:_?n.jsxs(n.Fragment,{children:[n.jsx(us,{className:"w-4 h-4 animate-spin"}),n.jsx("span",{children:"Creating..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(aE,{className:"w-4 h-4"}),n.jsx("span",{children:"Create Task"})]})})]})]})]})})},ME=({task:e,onSelect:t,isSelected:r})=>{const s=l=>{switch(l){case"high":return"text-status-error bg-status-error/20 border-status-error/30";case"medium":return"text-status-warning bg-status-warning/20 border-status-warning/30";case"low":return"text-status-success bg-status-success/20 border-status-success/30";default:return"text-foreground-tertiary bg-foreground-tertiary/20 border-foreground-tertiary/30"}},i=l=>{switch(l){case"done":return"text-status-success";case"in-progress":return"text-brand";case"blocked":return"text-status-error";case"cancelled":return"text-foreground-tertiary";default:return"text-status-warning"}},a=(l,o)=>!l||l.length<=o?l:l.substring(0,o)+"...";return n.jsxs("div",{className:`p-4 border rounded-lg cursor-pointer transition-all duration-200 hover:bg-background-card-hover ${r?"border-brand bg-brand/10":"border-border hover:border-border-hover"} bg-background-card`,onClick:()=>t(e),children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("span",{className:"text-sm font-mono text-foreground-tertiary",children:["#",e.id]}),n.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${s(e.priority)}`,children:e.priority})]}),n.jsx("span",{className:`text-sm font-medium ${i(e.status)}`,children:e.status})]}),n.jsx("h3",{className:"font-semibold text-foreground mb-1",children:e.title}),e.description&&n.jsx("p",{className:"text-sm text-foreground-secondary mb-2",children:a(e.description,150)}),n.jsxs("div",{className:"flex items-center justify-between mt-3",children:[n.jsxs("div",{className:"flex items-center space-x-4 text-xs text-foreground-tertiary",children:[e.dependencies&&e.dependencies.length>0&&n.jsxs("span",{children:["Deps: ",e.dependencies.join(", ")]}),e.subtasks&&e.subtasks.length>0&&n.jsxs("span",{children:[e.subtasks.length," subtasks"]})]}),n.jsx(mf,{className:"w-4 h-4 text-foreground-tertiary"})]})]})},BE=({projectPath:e,onTaskSelect:t})=>{const[r,s]=Yw(),[i,a]=E.useState([]),[l,o]=E.useState([]),[c,h]=E.useState(!0),[v,d]=E.useState(null),[g,x]=E.useState(null),[_,y]=E.useState(!1),[f,p]=E.useState(r.get("search")||""),[u,m]=E.useState(r.get("status")||"all"),[b,S]=E.useState(r.get("priority")||"all"),[C,k]=E.useState(r.get("deps")||"all"),[w,j]=E.useState(r.get("sort")||"id"),[D,I]=E.useState(r.get("filters")==="true"),T=E.useCallback(B=>{const U=new URLSearchParams(r);Object.entries(B).forEach(([$,N])=>{N===""||$!=="search"&&N==="all"?U.delete($):U.set($,N)}),s(U,{replace:!0})},[r,s]),A=E.useCallback(async()=>{if(e){h(!0),d(null);try{const B=await _e.getTaskMasterTasks(e);a(B),o(B)}catch(B){d(B instanceof Error?B.message:"Failed to fetch tasks"),a([]),o([])}finally{h(!1)}}},[e]);E.useEffect(()=>{A()},[A]),E.useEffect(()=>{let B=[...i];if(f){const U=f.toLowerCase();B=B.filter($=>$.id.toLowerCase().includes(U)||$.title.toLowerCase().includes(U)||$.description&&$.description.toLowerCase().includes(U))}u!=="all"&&(B=B.filter(U=>U.status===u)),b!=="all"&&(B=B.filter(U=>U.priority===b)),C!=="all"&&(B=B.filter(U=>{const $=U.dependencies&&U.dependencies.length>0;return C==="with"?$:!$})),B.sort((U,$)=>{switch(w){case"id":return U.id.localeCompare($.id,void 0,{numeric:!0});case"priority":const N={high:0,medium:1,low:2};return(N[U.priority]||3)-(N[$.priority]||3);case"status":return U.status.localeCompare($.status);case"title":return U.title.localeCompare($.title);default:return 0}}),o(B)},[i,f,u,b,C,w]);const O=B=>{x(B),t==null||t(B)},R=B=>{a(U=>[...U,B]),y(!1),O(B)};return E.useEffect(()=>{const B=U=>{if(!(U.target instanceof HTMLInputElement||U.target instanceof HTMLTextAreaElement)){if((U.metaKey||U.ctrlKey)&&U.key==="k"){U.preventDefault();const $=document.querySelector('input[type="text"]');$==null||$.focus()}if((U.metaKey||U.ctrlKey)&&U.key==="f"&&(U.preventDefault(),I($=>{const N=!$;return T({filters:N?"true":""}),N})),(U.metaKey||U.ctrlKey)&&U.key==="r"&&(U.preventDefault(),A()),(U.metaKey||U.ctrlKey)&&U.key==="n"&&(U.preventDefault(),y(!0)),!U.metaKey&&!U.ctrlKey&&!U.altKey&&!U.shiftKey)switch(U.key){case"1":m("all"),T({status:"all"});break;case"2":m("pending"),T({status:"pending"});break;case"3":m("in-progress"),T({status:"in-progress"});break;case"4":m("done"),T({status:"done"});break;case"5":m("blocked"),T({status:"blocked"});break}}};return window.addEventListener("keydown",B),()=>window.removeEventListener("keydown",B)},[A,T]),c?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(us,{className:"w-8 h-8 text-foreground-tertiary animate-spin"})}):v?n.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[n.jsx(Ct,{className:"w-12 h-12 text-status-error mb-4"}),n.jsx("p",{className:"text-foreground font-medium mb-2",children:"Failed to load tasks"}),n.jsx("p",{className:"text-sm text-foreground-secondary mb-4",children:v}),n.jsx("button",{onClick:A,className:"px-4 py-2 bg-brand text-white rounded-md hover:bg-brand-hover transition-colors",children:"Retry"})]}):n.jsxs("div",{className:"h-full flex flex-col bg-background",children:[n.jsxs("div",{className:"p-4 border-b border-border bg-background-card",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"TaskMaster Tasks"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("button",{onClick:()=>y(!0),className:"px-3 py-1.5 bg-brand text-white rounded-md hover:bg-brand-hover transition-colors flex items-center space-x-2 text-sm",title:"Create new task (N)",children:[n.jsx(Gr,{className:"w-4 h-4"}),n.jsx("span",{children:"New Task"})]}),n.jsx("button",{onClick:()=>{I(!D),T({filters:D?"":"true"})},className:`p-2 rounded-md transition-colors ${D?"bg-background-tertiary text-foreground":"text-foreground-tertiary hover:bg-background-tertiary"}`,title:"Toggle filters (F)",children:n.jsx(Kx,{className:"w-4 h-4"})}),n.jsx("button",{onClick:A,className:"p-2 text-foreground-tertiary hover:bg-background-tertiary rounded-md transition-colors",title:"Refresh tasks (R)",children:n.jsx(us,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx(hc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-foreground-tertiary"}),n.jsx("input",{type:"text",placeholder:"Search tasks by ID, title, or description...",value:f,onChange:B=>{p(B.target.value),T({search:B.target.value})},className:"w-full pl-10 pr-4 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-brand bg-background-card text-foreground placeholder-foreground-tertiary"})]}),D&&n.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 md:grid-cols-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Status"}),n.jsxs("select",{value:u,onChange:B=>{m(B.target.value),T({status:B.target.value})},className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-brand bg-background-card text-foreground",children:[n.jsx("option",{value:"all",children:"All"}),n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"in-progress",children:"In Progress"}),n.jsx("option",{value:"done",children:"Done"}),n.jsx("option",{value:"blocked",children:"Blocked"}),n.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Priority"}),n.jsxs("select",{value:b,onChange:B=>{S(B.target.value),T({priority:B.target.value})},className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-brand bg-background-card text-foreground",children:[n.jsx("option",{value:"all",children:"All"}),n.jsx("option",{value:"high",children:"High"}),n.jsx("option",{value:"medium",children:"Medium"}),n.jsx("option",{value:"low",children:"Low"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Dependencies"}),n.jsxs("select",{value:C,onChange:B=>{k(B.target.value),T({deps:B.target.value})},className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-brand bg-background-card text-foreground",children:[n.jsx("option",{value:"all",children:"All"}),n.jsx("option",{value:"with",children:"With Dependencies"}),n.jsx("option",{value:"without",children:"No Dependencies"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Sort By"}),n.jsxs("select",{value:w,onChange:B=>{j(B.target.value),T({sort:B.target.value})},className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-brand bg-background-card text-foreground",children:[n.jsx("option",{value:"id",children:"ID"}),n.jsx("option",{value:"priority",children:"Priority"}),n.jsx("option",{value:"status",children:"Status"}),n.jsx("option",{value:"title",children:"Title"})]})]})]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-background",children:l.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("p",{className:"text-foreground-secondary",children:"No tasks found"}),f||u!=="all"||b!=="all"||C!=="all"?n.jsx("button",{onClick:()=>{p(""),m("all"),S("all"),k("all"),T({search:"",status:"all",priority:"all",deps:"all"})},className:"mt-2 text-sm text-brand hover:text-brand-hover",children:"Clear filters"}):null]}):n.jsx("div",{className:"space-y-3",children:l.map(B=>n.jsx(ME,{task:B,onSelect:O,isSelected:(g==null?void 0:g.id)===B.id},B.id))})}),n.jsx("div",{className:"p-4 border-t border-border bg-background-secondary",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("p",{className:"text-sm text-foreground-secondary",children:["Showing ",l.length," of ",i.length," tasks"]}),n.jsxs("div",{className:"text-xs text-foreground-tertiary",children:[n.jsx("span",{className:"mr-3",children:"K: Search"}),n.jsx("span",{className:"mr-3",children:"F: Filters"}),n.jsx("span",{className:"mr-3",children:"R: Refresh"}),n.jsx("span",{className:"mr-3",children:"N: New Task"}),n.jsx("span",{children:"1-5: Status filters"})]})]})}),_&&n.jsx(OE,{projectPath:e,onClose:()=>y(!1),onTaskCreated:R,existingTasks:i})]})},on=({title:e,icon:t,defaultOpen:r=!0,children:s,isEmpty:i=!1})=>{const[a,l]=E.useState(r);return i?null:n.jsxs("div",{className:"border border-border rounded-lg overflow-hidden",children:[n.jsxs("button",{onClick:()=>l(!a),className:"w-full px-4 py-3 bg-background-tertiary hover:bg-background-card-hover transition-colors flex items-center justify-between text-left",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[t,n.jsx("h3",{className:"font-medium text-foreground",children:e})]}),a?n.jsx(Kk,{className:"w-4 h-4 text-foreground-tertiary"}):n.jsx(mf,{className:"w-4 h-4 text-foreground-tertiary"})]}),a&&n.jsx("div",{className:"p-4 bg-background-card",children:s})]})},Xx=({status:e})=>{const r=(()=>{switch(e){case"done":return{color:"text-status-success bg-status-success/20 border-status-success/30",icon:ff,text:"Done"};case"in-progress":return{color:"text-brand bg-brand/20 border-brand/30",icon:uc,text:"In Progress"};case"blocked":return{color:"text-status-error bg-status-error/20 border-status-error/30",icon:Ct,text:"Blocked"};case"cancelled":return{color:"text-foreground-tertiary bg-foreground-tertiary/20 border-foreground-tertiary/30",icon:Rs,text:"Cancelled"};default:return{color:"text-status-warning bg-status-warning/20 border-status-warning/30",icon:gf,text:"Pending"}}})(),s=r.icon;return n.jsxs("span",{className:`inline-flex items-center px-3 py-1.5 text-sm font-medium rounded-full border ${r.color}`,children:[n.jsx(s,{className:"w-4 h-4 mr-1.5"}),r.text]})},FE=({priority:e})=>{const t=()=>{switch(e){case"high":return"text-status-error bg-status-error/20 border-status-error/30";case"medium":return"text-status-warning bg-status-warning/20 border-status-warning/30";case"low":return"text-status-success bg-status-success/20 border-status-success/30";default:return"text-foreground-tertiary bg-foreground-tertiary/20 border-foreground-tertiary/30"}};return n.jsx("span",{className:`inline-flex items-center px-3 py-1.5 text-sm font-medium rounded-full border capitalize ${t()}`,children:e})},Om=({code:e,language:t="text"})=>{const r=s=>s.split(`
`).map((i,a)=>n.jsxs("div",{className:"table-row",children:[n.jsx("span",{className:"table-cell pr-4 text-foreground-tertiary select-none text-xs",children:a+1}),n.jsx("span",{className:"table-cell",children:n.jsx("pre",{className:"whitespace-pre font-mono text-sm text-foreground",children:i})})]},a));return n.jsxs("div",{className:"relative rounded-lg bg-background-secondary text-foreground overflow-hidden border border-border",children:[t&&n.jsx("div",{className:"absolute top-2 right-2 text-xs text-foreground-tertiary",children:t}),n.jsx("div",{className:"p-4 overflow-x-auto",children:n.jsx("div",{className:"table w-full",children:r(e)})})]})},$E=({task:e,allTasks:t=[]})=>{const r=s=>{const i=t.find(o=>o.id===s),a=(i==null?void 0:i.status)||"unknown",l={done:"text-status-success border-status-success/30 bg-status-success/10","in-progress":"text-brand border-brand/30 bg-brand/10",blocked:"text-status-error border-status-error/30 bg-status-error/10",pending:"text-status-warning border-status-warning/30 bg-status-warning/10",cancelled:"text-foreground-tertiary border-foreground-tertiary/30 bg-foreground-tertiary/10",unknown:"text-foreground-tertiary border-foreground-tertiary/30 bg-foreground-tertiary/10"}[a]||"text-foreground-tertiary border-foreground-tertiary/30 bg-foreground-tertiary/10";return n.jsxs("div",{className:`px-3 py-2 rounded-lg border ${l} flex items-center space-x-2`,children:[n.jsx(vf,{className:"w-3 h-3"}),n.jsx("span",{className:"font-mono text-sm",children:s}),i&&n.jsxs("span",{className:"text-xs",children:["- ",i.title]})]},s)};return!e.dependencies||e.dependencies.length===0?n.jsx("p",{className:"text-foreground-tertiary text-sm",children:"No dependencies"}):n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"flex flex-wrap gap-2",children:e.dependencies.map(r)}),n.jsx("div",{className:"mt-4 text-xs text-foreground-secondary",children:n.jsx("p",{children:"Task will be blocked until all dependencies are completed."})})]})},Jx=({subtasks:e,level:t=0})=>!e||e.length===0?null:n.jsx("div",{className:`space-y-1 ${t>0?"ml-6":""}`,children:e.map(r=>n.jsxs("div",{className:"border border-border rounded-lg p-3 hover:bg-background-card-hover transition-colors",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(vf,{className:"w-3 h-3 text-foreground-tertiary"}),n.jsx("span",{className:"font-mono text-sm text-foreground-secondary",children:r.id}),n.jsx("span",{className:"font-medium text-foreground",children:r.title})]}),n.jsx(Xx,{status:r.status})]}),r.description&&n.jsx("p",{className:"mt-1 text-sm text-foreground-secondary ml-5",children:r.description}),r.subtasks&&r.subtasks.length>0&&n.jsx("div",{className:"mt-2",children:n.jsx(Jx,{subtasks:r.subtasks,level:t+1})})]},r.id))}),HE=({task:e,onClose:t,className:r=""})=>{E.useState(!1);const s=i=>{const a=/```(\w+)?\n([\s\S]*?)```/g,l=/`([^`]+)`/g;let o=[],c=0,h;for(;(h=a.exec(i))!==null;){if(h.index>c){const g=i.slice(c,h.index);o.push(g.replace(l,(x,_)=>`<code class="bg-background-tertiary text-foreground px-1 py-0.5 rounded text-sm font-mono">${_}</code>`))}const v=h[1]||"text",d=h[2];o.push(n.jsx(Om,{code:d,language:v},h.index)),c=h.index+h[0].length}if(c<i.length){const v=i.slice(c);o.push(v.replace(l,(d,g)=>`<code class="bg-background-tertiary text-foreground px-1 py-0.5 rounded text-sm font-mono">${g}</code>`))}return o.map((v,d)=>typeof v=="string"?n.jsx("div",{dangerouslySetInnerHTML:{__html:v}},d):v)};return n.jsxs("div",{className:`h-full flex flex-col bg-background-card border-l border-border ${r}`,children:[n.jsxs("div",{className:"sticky top-0 z-10 bg-background-card border-b border-border p-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(vf,{className:"w-5 h-5 text-foreground-tertiary"}),n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:e.id}),n.jsx(Xx,{status:e.status}),n.jsx(FE,{priority:e.priority})]}),t&&n.jsx("button",{onClick:t,className:"p-2 text-foreground-tertiary hover:text-foreground hover:bg-background-tertiary rounded-lg transition-colors",children:n.jsx(Rs,{className:"w-4 h-4"})})]}),n.jsx("h2",{className:"text-xl font-bold text-foreground mt-2",children:e.title})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[n.jsx(on,{title:"Description",icon:n.jsx(Gx,{className:"w-4 h-4 text-foreground-secondary"}),defaultOpen:!0,children:n.jsx("div",{className:"prose prose-sm max-w-none text-foreground-secondary",children:e.description?s(e.description):n.jsx("p",{className:"text-foreground-tertiary italic",children:"No description provided"})})}),n.jsx(on,{title:"Implementation Details",icon:n.jsx(Am,{className:"w-4 h-4 text-foreground-secondary"}),defaultOpen:!1,isEmpty:!e.details,children:n.jsx("div",{className:"prose prose-sm max-w-none text-foreground-secondary",children:e.details&&s(e.details)})}),n.jsx(on,{title:"Test Strategy",icon:n.jsx(uE,{className:"w-4 h-4 text-foreground-secondary"}),defaultOpen:!1,isEmpty:!e.testStrategy,children:n.jsx("div",{className:"prose prose-sm max-w-none text-foreground-secondary",children:e.testStrategy&&s(e.testStrategy)})}),n.jsx(on,{title:"Dependencies",icon:n.jsx(Gn,{className:"w-4 h-4 text-foreground-secondary"}),defaultOpen:!0,children:n.jsx($E,{task:e})}),n.jsx(on,{title:"Subtasks",icon:n.jsx(tE,{className:"w-4 h-4 text-foreground-secondary"}),defaultOpen:!0,isEmpty:!e.subtasks||e.subtasks.length===0,children:n.jsx(Jx,{subtasks:e.subtasks||[]})}),n.jsx(on,{title:"Show Raw Data",icon:n.jsx(Am,{className:"w-4 h-4 text-foreground-secondary"}),defaultOpen:!1,children:n.jsx(Om,{code:JSON.stringify(e,null,2),language:"json"})})]})]})};const UE=()=>{const[e,t]=E.useState(null),[r,s]=E.useState(""),[i,a]=E.useState(null),[l,o]=E.useState(!0);return E.useEffect(()=>{(async()=>{try{const h=await _e.getProjects();if(h.length>0){const v=h[0].path;s(v);const d=await _e.detectTaskMaster(v);a(d.isConfigured)}else{const v="/Users/santossafrao/Development/personal/magents";s(v);const d=await _e.detectTaskMaster(v);a(d.isConfigured)}}catch(h){console.error("Failed to detect TaskMaster:",h),a(!1)}finally{o(!1)}})()},[]),l?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx("p",{className:"text-foreground-secondary",children:"Checking for TaskMaster configuration..."})}):i?n.jsxs("div",{className:"flex h-full bg-background",children:[n.jsx("div",{className:"w-1/2 border-r border-border bg-background-secondary task-browser-container",children:n.jsx(BE,{projectPath:r,onTaskSelect:t})}),n.jsx("div",{className:"w-1/2 bg-background",children:e?n.jsx(HE,{task:e,onClose:()=>t(null),className:"h-full"}):n.jsx("div",{className:"flex items-center justify-center h-full text-foreground-tertiary",children:n.jsx("p",{children:"Select a task to view details"})})})]}):n.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[n.jsx(Ct,{className:"w-16 h-16 text-status-warning mb-4"}),n.jsx("h2",{className:"text-2xl font-semibold text-foreground mb-2",children:"TaskMaster Not Configured"}),n.jsx("p",{className:"text-foreground-secondary mb-6 max-w-md",children:"This project does not have TaskMaster configured. To use the task browser, you need to initialize TaskMaster in your project."}),n.jsx("div",{className:"bg-background-tertiary rounded-lg p-4 max-w-md border border-border",children:n.jsx("p",{className:"font-mono text-sm text-foreground",children:"task-master init"})})]})};function Yu(e,t){return Yu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Yu(e,t)}function Zx(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Yu(e,t)}function oe(){return oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},oe.apply(null,arguments)}function go(e){"@babel/helpers - typeof";return go=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},go(e)}function WE(e,t){if(go(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(go(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zE(e){var t=WE(e,"string");return go(t)=="symbol"?t:t+""}function VE(e,t,r){return(t=zE(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function Bm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Mm(Object(r),!0).forEach(function(s){VE(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mm(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function lt(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Fm=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),vd=function(){return Math.random().toString(36).substring(7).split("").join(".")},$m={INIT:"@@redux/INIT"+vd(),REPLACE:"@@redux/REPLACE"+vd(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+vd()}};function qE(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function ey(e,t,r){var s;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(lt(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(lt(1));return r(ey)(e,t)}if(typeof e!="function")throw new Error(lt(2));var i=e,a=t,l=[],o=l,c=!1;function h(){o===l&&(o=l.slice())}function v(){if(c)throw new Error(lt(3));return a}function d(y){if(typeof y!="function")throw new Error(lt(4));if(c)throw new Error(lt(5));var f=!0;return h(),o.push(y),function(){if(f){if(c)throw new Error(lt(6));f=!1,h();var u=o.indexOf(y);o.splice(u,1),l=null}}}function g(y){if(!qE(y))throw new Error(lt(7));if(typeof y.type>"u")throw new Error(lt(8));if(c)throw new Error(lt(9));try{c=!0,a=i(a,y)}finally{c=!1}for(var f=l=o,p=0;p<f.length;p++){var u=f[p];u()}return y}function x(y){if(typeof y!="function")throw new Error(lt(10));i=y,g({type:$m.REPLACE})}function _(){var y,f=d;return y={subscribe:function(u){if(typeof u!="object"||u===null)throw new Error(lt(11));function m(){u.next&&u.next(v())}m();var b=f(m);return{unsubscribe:b}}},y[Fm]=function(){return this},y}return g({type:$m.INIT}),s={dispatch:g,subscribe:d,getState:v,replaceReducer:x},s[Fm]=_,s}function Hm(e,t){return function(){return t(e.apply(this,arguments))}}function Um(e,t){if(typeof e=="function")return Hm(e,t);if(typeof e!="object"||e===null)throw new Error(lt(16));var r={};for(var s in e){var i=e[s];typeof i=="function"&&(r[s]=Hm(i,t))}return r}function ty(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(s){return s}:t.length===1?t[0]:t.reduce(function(s,i){return function(){return s(i.apply(void 0,arguments))}})}function GE(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(s){return function(){var i=s.apply(void 0,arguments),a=function(){throw new Error(lt(15))},l={getState:i.getState,dispatch:function(){return a.apply(void 0,arguments)}},o=t.map(function(c){return c(l)});return a=ty.apply(void 0,o)(i.dispatch),Bm(Bm({},i),{},{dispatch:a})}}}var ry=ie.createContext(null);function KE(e){e()}var sy=KE,QE=function(t){return sy=t},YE=function(){return sy};function XE(){var e=YE(),t=null,r=null;return{clear:function(){t=null,r=null},notify:function(){e(function(){for(var i=t;i;)i.callback(),i=i.next})},get:function(){for(var i=[],a=t;a;)i.push(a),a=a.next;return i},subscribe:function(i){var a=!0,l=r={callback:i,next:null,prev:r};return l.prev?l.prev.next=l:t=l,function(){!a||t===null||(a=!1,l.next?l.next.prev=l.prev:r=l.prev,l.prev?l.prev.next=l.next:t=l.next)}}}}var Wm={notify:function(){},get:function(){return[]}};function ny(e,t){var r,s=Wm;function i(d){return c(),s.subscribe(d)}function a(){s.notify()}function l(){v.onStateChange&&v.onStateChange()}function o(){return!!r}function c(){r||(r=t?t.addNestedSub(l):e.subscribe(l),s=XE())}function h(){r&&(r(),r=void 0,s.clear(),s=Wm)}var v={addNestedSub:i,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:o,trySubscribe:c,tryUnsubscribe:h,getListeners:function(){return s}};return v}var iy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?E.useLayoutEffect:E.useEffect;function JE(e){var t=e.store,r=e.context,s=e.children,i=E.useMemo(function(){var o=ny(t);return{store:t,subscription:o}},[t]),a=E.useMemo(function(){return t.getState()},[t]);iy(function(){var o=i.subscription;return o.onStateChange=o.notifyNestedSubs,o.trySubscribe(),a!==t.getState()&&o.notifyNestedSubs(),function(){o.tryUnsubscribe(),o.onStateChange=null}},[i,a]);var l=r||ry;return ie.createElement(l.Provider,{value:i},s)}function Al(e,t){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;r[s]=e[s]}return r}var oy={exports:{}},ve={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var We=typeof Symbol=="function"&&Symbol.for,xf=We?Symbol.for("react.element"):60103,yf=We?Symbol.for("react.portal"):60106,fc=We?Symbol.for("react.fragment"):60107,pc=We?Symbol.for("react.strict_mode"):60108,mc=We?Symbol.for("react.profiler"):60114,gc=We?Symbol.for("react.provider"):60109,vc=We?Symbol.for("react.context"):60110,bf=We?Symbol.for("react.async_mode"):60111,xc=We?Symbol.for("react.concurrent_mode"):60111,yc=We?Symbol.for("react.forward_ref"):60112,bc=We?Symbol.for("react.suspense"):60113,ZE=We?Symbol.for("react.suspense_list"):60120,_c=We?Symbol.for("react.memo"):60115,wc=We?Symbol.for("react.lazy"):60116,ej=We?Symbol.for("react.block"):60121,tj=We?Symbol.for("react.fundamental"):60117,rj=We?Symbol.for("react.responder"):60118,sj=We?Symbol.for("react.scope"):60119;function jt(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case xf:switch(e=e.type,e){case bf:case xc:case fc:case mc:case pc:case bc:return e;default:switch(e=e&&e.$$typeof,e){case vc:case yc:case wc:case _c:case gc:return e;default:return t}}case yf:return t}}}function ay(e){return jt(e)===xc}ve.AsyncMode=bf;ve.ConcurrentMode=xc;ve.ContextConsumer=vc;ve.ContextProvider=gc;ve.Element=xf;ve.ForwardRef=yc;ve.Fragment=fc;ve.Lazy=wc;ve.Memo=_c;ve.Portal=yf;ve.Profiler=mc;ve.StrictMode=pc;ve.Suspense=bc;ve.isAsyncMode=function(e){return ay(e)||jt(e)===bf};ve.isConcurrentMode=ay;ve.isContextConsumer=function(e){return jt(e)===vc};ve.isContextProvider=function(e){return jt(e)===gc};ve.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===xf};ve.isForwardRef=function(e){return jt(e)===yc};ve.isFragment=function(e){return jt(e)===fc};ve.isLazy=function(e){return jt(e)===wc};ve.isMemo=function(e){return jt(e)===_c};ve.isPortal=function(e){return jt(e)===yf};ve.isProfiler=function(e){return jt(e)===mc};ve.isStrictMode=function(e){return jt(e)===pc};ve.isSuspense=function(e){return jt(e)===bc};ve.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===fc||e===xc||e===mc||e===pc||e===bc||e===ZE||typeof e=="object"&&e!==null&&(e.$$typeof===wc||e.$$typeof===_c||e.$$typeof===gc||e.$$typeof===vc||e.$$typeof===yc||e.$$typeof===tj||e.$$typeof===rj||e.$$typeof===sj||e.$$typeof===ej)};ve.typeOf=jt;oy.exports=ve;var nj=oy.exports,_f=nj,ij={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},oj={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},aj={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ly={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},wf={};wf[_f.ForwardRef]=aj;wf[_f.Memo]=ly;function zm(e){return _f.isMemo(e)?ly:wf[e.$$typeof]||ij}var lj=Object.defineProperty,cj=Object.getOwnPropertyNames,Vm=Object.getOwnPropertySymbols,dj=Object.getOwnPropertyDescriptor,uj=Object.getPrototypeOf,qm=Object.prototype;function cy(e,t,r){if(typeof t!="string"){if(qm){var s=uj(t);s&&s!==qm&&cy(e,s,r)}var i=cj(t);Vm&&(i=i.concat(Vm(t)));for(var a=zm(e),l=zm(t),o=0;o<i.length;++o){var c=i[o];if(!oj[c]&&!(r&&r[c])&&!(l&&l[c])&&!(a&&a[c])){var h=dj(t,c);try{lj(e,c,h)}catch{}}}}return e}var hj=cy;const Gm=sh(hj);var dy={exports:{}},ye={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sc=60103,Cc=60106,Uo=60107,Wo=60108,zo=60114,Vo=60109,qo=60110,Go=60112,Ko=60113,Sf=60120,Qo=60115,Yo=60116,uy=60121,hy=60122,fy=60117,py=60129,my=60131;if(typeof Symbol=="function"&&Symbol.for){var ze=Symbol.for;Sc=ze("react.element"),Cc=ze("react.portal"),Uo=ze("react.fragment"),Wo=ze("react.strict_mode"),zo=ze("react.profiler"),Vo=ze("react.provider"),qo=ze("react.context"),Go=ze("react.forward_ref"),Ko=ze("react.suspense"),Sf=ze("react.suspense_list"),Qo=ze("react.memo"),Yo=ze("react.lazy"),uy=ze("react.block"),hy=ze("react.server.block"),fy=ze("react.fundamental"),py=ze("react.debug_trace_mode"),my=ze("react.legacy_hidden")}function tr(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Sc:switch(e=e.type,e){case Uo:case zo:case Wo:case Ko:case Sf:return e;default:switch(e=e&&e.$$typeof,e){case qo:case Go:case Yo:case Qo:case Vo:return e;default:return t}}case Cc:return t}}}var fj=Vo,pj=Sc,mj=Go,gj=Uo,vj=Yo,xj=Qo,yj=Cc,bj=zo,_j=Wo,wj=Ko;ye.ContextConsumer=qo;ye.ContextProvider=fj;ye.Element=pj;ye.ForwardRef=mj;ye.Fragment=gj;ye.Lazy=vj;ye.Memo=xj;ye.Portal=yj;ye.Profiler=bj;ye.StrictMode=_j;ye.Suspense=wj;ye.isAsyncMode=function(){return!1};ye.isConcurrentMode=function(){return!1};ye.isContextConsumer=function(e){return tr(e)===qo};ye.isContextProvider=function(e){return tr(e)===Vo};ye.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Sc};ye.isForwardRef=function(e){return tr(e)===Go};ye.isFragment=function(e){return tr(e)===Uo};ye.isLazy=function(e){return tr(e)===Yo};ye.isMemo=function(e){return tr(e)===Qo};ye.isPortal=function(e){return tr(e)===Cc};ye.isProfiler=function(e){return tr(e)===zo};ye.isStrictMode=function(e){return tr(e)===Wo};ye.isSuspense=function(e){return tr(e)===Ko};ye.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Uo||e===zo||e===py||e===Wo||e===Ko||e===Sf||e===my||typeof e=="object"&&e!==null&&(e.$$typeof===Yo||e.$$typeof===Qo||e.$$typeof===Vo||e.$$typeof===qo||e.$$typeof===Go||e.$$typeof===fy||e.$$typeof===uy||e[0]===hy)};ye.typeOf=tr;dy.exports=ye;var Sj=dy.exports,Cj=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],kj=["reactReduxForwardedRef"],Ej=[],jj=[null,null];function Nj(e,t){var r=e[1];return[t.payload,r+1]}function Km(e,t,r){iy(function(){return e.apply(void 0,t)},r)}function Dj(e,t,r,s,i,a,l){e.current=s,t.current=i,r.current=!1,a.current&&(a.current=null,l())}function Rj(e,t,r,s,i,a,l,o,c,h){if(e){var v=!1,d=null,g=function(){if(!v){var y=t.getState(),f,p;try{f=s(y,i.current)}catch(u){p=u,d=u}p||(d=null),f===a.current?l.current||c():(a.current=f,o.current=f,l.current=!0,h({type:"STORE_UPDATED",payload:{error:p}}))}};r.onStateChange=g,r.trySubscribe(),g();var x=function(){if(v=!0,r.tryUnsubscribe(),r.onStateChange=null,d)throw d};return x}}var Aj=function(){return[null,0]};function Tj(e,t){t===void 0&&(t={});var r=t,s=r.getDisplayName,i=s===void 0?function(m){return"ConnectAdvanced("+m+")"}:s,a=r.methodName,l=a===void 0?"connectAdvanced":a,o=r.renderCountProp,c=o===void 0?void 0:o,h=r.shouldHandleStateChanges,v=h===void 0?!0:h,d=r.storeKey,g=d===void 0?"store":d;r.withRef;var x=r.forwardRef,_=x===void 0?!1:x,y=r.context,f=y===void 0?ry:y,p=Al(r,Cj),u=f;return function(b){var S=b.displayName||b.name||"Component",C=i(S),k=oe({},p,{getDisplayName:i,methodName:l,renderCountProp:c,shouldHandleStateChanges:v,storeKey:g,displayName:C,wrappedComponentName:S,WrappedComponent:b}),w=p.pure;function j(O){return e(O.dispatch,k)}var D=w?E.useMemo:function(O){return O()};function I(O){var R=E.useMemo(function(){var pr=O.reactReduxForwardedRef,_s=Al(O,kj);return[O.context,pr,_s]},[O]),B=R[0],U=R[1],$=R[2],N=E.useMemo(function(){return B&&B.Consumer&&Sj.isContextConsumer(ie.createElement(B.Consumer,null))?B:u},[B,u]),P=E.useContext(N),M=!!O.store&&!!O.store.getState&&!!O.store.dispatch;P&&P.store;var F=M?O.store:P.store,V=E.useMemo(function(){return j(F)},[F]),K=E.useMemo(function(){if(!v)return jj;var pr=ny(F,M?null:P.subscription),_s=pr.notifyNestedSubs.bind(pr);return[pr,_s]},[F,M,P]),J=K[0],te=K[1],W=E.useMemo(function(){return M?P:oe({},P,{subscription:J})},[M,P,J]),L=E.useReducer(Nj,Ej,Aj),q=L[0],z=q[0],X=L[1];if(z&&z.error)throw z.error;var Y=E.useRef(),ce=E.useRef($),xe=E.useRef(),we=E.useRef(!1),Be=D(function(){return xe.current&&$===ce.current?xe.current:V(F.getState(),$)},[F,z,$]);Km(Dj,[ce,Y,we,$,Be,xe,te]),Km(Rj,[v,F,J,V,ce,Y,we,xe,te,X],[F,J,V]);var le=E.useMemo(function(){return ie.createElement(b,oe({},Be,{ref:U}))},[U,b,Be]),bs=E.useMemo(function(){return v?ie.createElement(N.Provider,{value:W},le):le},[N,le,W]);return bs}var T=w?ie.memo(I):I;if(T.WrappedComponent=b,T.displayName=I.displayName=C,_){var A=ie.forwardRef(function(R,B){return ie.createElement(T,oe({},R,{reactReduxForwardedRef:B}))});return A.displayName=C,A.WrappedComponent=b,Gm(A,b)}return Gm(T,b)}}function Qm(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function xd(e,t){if(Qm(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(var i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(t,r[i])||!Qm(e[r[i]],t[r[i]]))return!1;return!0}function Pj(e,t){var r={},s=function(l){var o=e[l];typeof o=="function"&&(r[l]=function(){return t(o.apply(void 0,arguments))})};for(var i in e)s(i);return r}function Cf(e){return function(r,s){var i=e(r,s);function a(){return i}return a.dependsOnOwnProps=!1,a}}function Ym(e){return e.dependsOnOwnProps!==null&&e.dependsOnOwnProps!==void 0?!!e.dependsOnOwnProps:e.length!==1}function gy(e,t){return function(s,i){i.displayName;var a=function(o,c){return a.dependsOnOwnProps?a.mapToProps(o,c):a.mapToProps(o)};return a.dependsOnOwnProps=!0,a.mapToProps=function(o,c){a.mapToProps=e,a.dependsOnOwnProps=Ym(e);var h=a(o,c);return typeof h=="function"&&(a.mapToProps=h,a.dependsOnOwnProps=Ym(h),h=a(o,c)),h},a}}function Lj(e){return typeof e=="function"?gy(e):void 0}function Ij(e){return e?void 0:Cf(function(t){return{dispatch:t}})}function Oj(e){return e&&typeof e=="object"?Cf(function(t){return Pj(e,t)}):void 0}const Mj=[Lj,Ij,Oj];function Bj(e){return typeof e=="function"?gy(e):void 0}function Fj(e){return e?void 0:Cf(function(){return{}})}const $j=[Bj,Fj];function Hj(e,t,r){return oe({},r,e,t)}function Uj(e){return function(r,s){s.displayName;var i=s.pure,a=s.areMergedPropsEqual,l=!1,o;return function(h,v,d){var g=e(h,v,d);return l?(!i||!a(g,o))&&(o=g):(l=!0,o=g),o}}}function Wj(e){return typeof e=="function"?Uj(e):void 0}function zj(e){return e?void 0:function(){return Hj}}const Vj=[Wj,zj];var qj=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function Gj(e,t,r,s){return function(a,l){return r(e(a,l),t(s,l),l)}}function Kj(e,t,r,s,i){var a=i.areStatesEqual,l=i.areOwnPropsEqual,o=i.areStatePropsEqual,c=!1,h,v,d,g,x;function _(m,b){return h=m,v=b,d=e(h,v),g=t(s,v),x=r(d,g,v),c=!0,x}function y(){return d=e(h,v),t.dependsOnOwnProps&&(g=t(s,v)),x=r(d,g,v),x}function f(){return e.dependsOnOwnProps&&(d=e(h,v)),t.dependsOnOwnProps&&(g=t(s,v)),x=r(d,g,v),x}function p(){var m=e(h,v),b=!o(m,d);return d=m,b&&(x=r(d,g,v)),x}function u(m,b){var S=!l(b,v),C=!a(m,h,b,v);return h=m,v=b,S&&C?y():S?f():C?p():x}return function(b,S){return c?u(b,S):_(b,S)}}function Qj(e,t){var r=t.initMapStateToProps,s=t.initMapDispatchToProps,i=t.initMergeProps,a=Al(t,qj),l=r(e,a),o=s(e,a),c=i(e,a),h=a.pure?Kj:Gj;return h(l,o,c,e,a)}var Yj=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function yd(e,t,r){for(var s=t.length-1;s>=0;s--){var i=t[s](e);if(i)return i}return function(a,l){throw new Error("Invalid value of type "+typeof e+" for "+r+" argument when connecting component "+l.wrappedComponentName+".")}}function Xj(e,t){return e===t}function Jj(e){var t=e===void 0?{}:e,r=t.connectHOC,s=r===void 0?Tj:r,i=t.mapStateToPropsFactories,a=i===void 0?$j:i,l=t.mapDispatchToPropsFactories,o=l===void 0?Mj:l,c=t.mergePropsFactories,h=c===void 0?Vj:c,v=t.selectorFactory,d=v===void 0?Qj:v;return function(x,_,y,f){f===void 0&&(f={});var p=f,u=p.pure,m=u===void 0?!0:u,b=p.areStatesEqual,S=b===void 0?Xj:b,C=p.areOwnPropsEqual,k=C===void 0?xd:C,w=p.areStatePropsEqual,j=w===void 0?xd:w,D=p.areMergedPropsEqual,I=D===void 0?xd:D,T=Al(p,Yj),A=yd(x,a,"mapStateToProps"),O=yd(_,o,"mapDispatchToProps"),R=yd(y,h,"mergeProps");return s(d,oe({methodName:"connect",getDisplayName:function(U){return"Connect("+U+")"},shouldHandleStateChanges:!!x,initMapStateToProps:A,initMapDispatchToProps:O,initMergeProps:R,pure:m,areStatesEqual:S,areOwnPropsEqual:k,areStatePropsEqual:j,areMergedPropsEqual:I},T))}}const vy=Jj();QE(Jh.unstable_batchedUpdates);function Zj(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function xy(e,t){var r=E.useState(function(){return{inputs:t,result:e()}})[0],s=E.useRef(!0),i=E.useRef(r),a=s.current||!!(t&&i.current.inputs&&Zj(t,i.current.inputs)),l=a?i.current:{inputs:t,result:e()};return E.useEffect(function(){s.current=!1,i.current=l},[l]),l.result}function eN(e,t){return xy(function(){return e},t)}var pe=xy,ne=eN,tN=!0,bd="Invariant failed";function rN(e,t){if(!e){if(tN)throw new Error(bd);var r=typeof t=="function"?t():t,s=r?"".concat(bd,": ").concat(r):bd;throw new Error(s)}}var Xt=function(t){var r=t.top,s=t.right,i=t.bottom,a=t.left,l=s-a,o=i-r,c={top:r,right:s,bottom:i,left:a,width:l,height:o,x:a,y:r,center:{x:(s+a)/2,y:(i+r)/2}};return c},kf=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},Xm=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},sN=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},_d={top:0,right:0,bottom:0,left:0},Ef=function(t){var r=t.borderBox,s=t.margin,i=s===void 0?_d:s,a=t.border,l=a===void 0?_d:a,o=t.padding,c=o===void 0?_d:o,h=Xt(kf(r,i)),v=Xt(Xm(r,l)),d=Xt(Xm(v,c));return{marginBox:h,borderBox:Xt(r),paddingBox:v,contentBox:d,margin:i,border:l,padding:c}},Dt=function(t){var r=t.slice(0,-2),s=t.slice(-2);if(s!=="px")return 0;var i=Number(r);return isNaN(i)&&rN(!1),i},nN=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Tl=function(t,r){var s=t.borderBox,i=t.border,a=t.margin,l=t.padding,o=sN(s,r);return Ef({borderBox:o,border:i,margin:a,padding:l})},Pl=function(t,r){return r===void 0&&(r=nN()),Tl(t,r)},yy=function(t,r){var s={top:Dt(r.marginTop),right:Dt(r.marginRight),bottom:Dt(r.marginBottom),left:Dt(r.marginLeft)},i={top:Dt(r.paddingTop),right:Dt(r.paddingRight),bottom:Dt(r.paddingBottom),left:Dt(r.paddingLeft)},a={top:Dt(r.borderTopWidth),right:Dt(r.borderRightWidth),bottom:Dt(r.borderBottomWidth),left:Dt(r.borderLeftWidth)};return Ef({borderBox:t,margin:s,padding:i,border:a})},by=function(t){var r=t.getBoundingClientRect(),s=window.getComputedStyle(t);return yy(r,s)},Jm=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function iN(e,t){return!!(e===t||Jm(e)&&Jm(t))}function oN(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!iN(e[r],t[r]))return!1;return!0}function He(e,t){t===void 0&&(t=oN);var r,s=[],i,a=!1;function l(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];return a&&r===this&&t(o,s)||(i=e.apply(this,o),a=!0,r=this,s=o),i}return l}var aN=function(t){var r=[],s=null,i=function(){for(var l=arguments.length,o=new Array(l),c=0;c<l;c++)o[c]=arguments[c];r=o,!s&&(s=requestAnimationFrame(function(){s=null,t.apply(void 0,r)}))};return i.cancel=function(){s&&(cancelAnimationFrame(s),s=null)},i};const vo=aN;function _y(e,t){}_y.bind(null,"warn");_y.bind(null,"error");function is(){}function lN(e,t){return oe({},e,{},t)}function Mt(e,t,r){var s=t.map(function(i){var a=lN(r,i.options);return e.addEventListener(i.eventName,i.fn,a),function(){e.removeEventListener(i.eventName,i.fn,a)}});return function(){s.forEach(function(a){a()})}}var cN="Invariant failed";function Ll(e){this.message=e}Ll.prototype.toString=function(){return this.message};function Q(e,t){if(!e)throw new Ll(cN)}var dN=function(e){Zx(t,e);function t(){for(var s,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return s=e.call.apply(e,[this].concat(a))||this,s.callbacks=null,s.unbind=is,s.onWindowError=function(o){var c=s.getCallbacks();c.isDragging()&&c.tryAbort();var h=o.error;h instanceof Ll&&o.preventDefault()},s.getCallbacks=function(){if(!s.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return s.callbacks},s.setCallbacks=function(o){s.callbacks=o},s}var r=t.prototype;return r.componentDidMount=function(){this.unbind=Mt(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(i){if(i instanceof Ll){this.setState({});return}throw i},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},t}(ie.Component),uN=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Il=function(t){return t+1},hN=function(t){return`
  You have lifted an item in position `+Il(t.source.index)+`
`},wy=function(t,r){var s=t.droppableId===r.droppableId,i=Il(t.index),a=Il(r.index);return s?`
      You have moved the item from position `+i+`
      to position `+a+`
    `:`
    You have moved the item from position `+i+`
    in list `+t.droppableId+`
    to list `+r.droppableId+`
    in position `+a+`
  `},Sy=function(t,r,s){var i=r.droppableId===s.droppableId;return i?`
      The item `+t+`
      has been combined with `+s.draggableId:`
      The item `+t+`
      in list `+r.droppableId+`
      has been combined with `+s.draggableId+`
      in list `+s.droppableId+`
    `},fN=function(t){var r=t.destination;if(r)return wy(t.source,r);var s=t.combine;return s?Sy(t.draggableId,t.source,s):"You are over an area that cannot be dropped on"},Zm=function(t){return`
  The item has returned to its starting position
  of `+Il(t.index)+`
`},pN=function(t){if(t.reason==="CANCEL")return`
      Movement cancelled.
      `+Zm(t.source)+`
    `;var r=t.destination,s=t.combine;return r?`
      You have dropped the item.
      `+wy(t.source,r)+`
    `:s?`
      You have dropped the item.
      `+Sy(t.draggableId,t.source,s)+`
    `:`
    The item has been dropped while not over a drop area.
    `+Zm(t.source)+`
  `},qa={dragHandleUsageInstructions:uN,onDragStart:hN,onDragUpdate:fN,onDragEnd:pN},Ue={x:0,y:0},Ge=function(t,r){return{x:t.x+r.x,y:t.y+r.y}},yt=function(t,r){return{x:t.x-r.x,y:t.y-r.y}},os=function(t,r){return t.x===r.x&&t.y===r.y},ri=function(t){return{x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}},Zs=function(t,r,s){var i;return s===void 0&&(s=0),i={},i[t]=r,i[t==="x"?"y":"x"]=s,i},xo=function(t,r){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))},eg=function(t,r){return Math.min.apply(Math,r.map(function(s){return xo(t,s)}))},Cy=function(t){return function(r){return{x:t(r.x),y:t(r.y)}}},mN=function(e,t){var r=Xt({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r},Xo=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},tg=function(t){return[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}]},gN={top:0,right:0,bottom:0,left:0},vN=function(t,r){return r?Xo(t,r.scroll.diff.displacement):t},xN=function(t,r,s){if(s&&s.increasedBy){var i;return oe({},t,(i={},i[r.end]=t[r.end]+s.increasedBy[r.line],i))}return t},yN=function(t,r){return r&&r.shouldClipSubject?mN(r.pageMarginBox,t):Xt(t)},Kn=function(e){var t=e.page,r=e.withPlaceholder,s=e.axis,i=e.frame,a=vN(t.marginBox,i),l=xN(a,s,r),o=yN(l,i);return{page:t,withPlaceholder:r,active:o}},jf=function(e,t){e.frame||Q(!1);var r=e.frame,s=yt(t,r.scroll.initial),i=ri(s),a=oe({},r,{scroll:{initial:r.scroll.initial,current:t,diff:{value:s,displacement:i},max:r.scroll.max}}),l=Kn({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:a}),o=oe({},e,{frame:a,subject:l});return o};function Ol(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function Nf(e,t){if(e.findIndex)return e.findIndex(t);for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function ys(e,t){if(e.find)return e.find(t);var r=Nf(e,t);if(r!==-1)return e[r]}function ky(e){return Array.prototype.slice.call(e)}var Ey=He(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),jy=He(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),kc=He(function(e){return Ol(e)}),bN=He(function(e){return Ol(e)}),si=He(function(e,t){var r=bN(t).filter(function(s){return e===s.descriptor.droppableId}).sort(function(s,i){return s.descriptor.index-i.descriptor.index});return r});function Df(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function Ec(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var jc=He(function(e,t){return t.filter(function(r){return r.descriptor.id!==e.descriptor.id})}),_N=function(e){var t=e.isMovingForward,r=e.draggable,s=e.destination,i=e.insideDestination,a=e.previousImpact;if(!s.isCombineEnabled)return null;var l=Df(a);if(!l)return null;function o(y){var f={type:"COMBINE",combine:{draggableId:y,droppableId:s.descriptor.id}};return oe({},a,{at:f})}var c=a.displaced.all,h=c.length?c[0]:null;if(t)return h?o(h):null;var v=jc(r,i);if(!h){if(!v.length)return null;var d=v[v.length-1];return o(d.descriptor.id)}var g=Nf(v,function(y){return y.descriptor.id===h});g===-1&&Q(!1);var x=g-1;if(x<0)return null;var _=v[x];return o(_.descriptor.id)},ni=function(e,t){return e.descriptor.droppableId===t.descriptor.id},Ny={point:Ue,value:0},yo={invisible:{},visible:{},all:[]},wN={displaced:yo,displacedBy:Ny,at:null},Ft=function(e,t){return function(r){return e<=r&&r<=t}},Dy=function(e){var t=Ft(e.top,e.bottom),r=Ft(e.left,e.right);return function(s){var i=t(s.top)&&t(s.bottom)&&r(s.left)&&r(s.right);if(i)return!0;var a=t(s.top)||t(s.bottom),l=r(s.left)||r(s.right),o=a&&l;if(o)return!0;var c=s.top<e.top&&s.bottom>e.bottom,h=s.left<e.left&&s.right>e.right,v=c&&h;if(v)return!0;var d=c&&l||h&&a;return d}},SN=function(e){var t=Ft(e.top,e.bottom),r=Ft(e.left,e.right);return function(s){var i=t(s.top)&&t(s.bottom)&&r(s.left)&&r(s.right);return i}},Rf={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Ry={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},CN=function(e){return function(t){var r=Ft(t.top,t.bottom),s=Ft(t.left,t.right);return function(i){return e===Rf?r(i.top)&&r(i.bottom):s(i.left)&&s(i.right)}}},kN=function(t,r){var s=r.frame?r.frame.scroll.diff.displacement:Ue;return Xo(t,s)},EN=function(t,r,s){return r.subject.active?s(r.subject.active)(t):!1},jN=function(t,r,s){return s(r)(t)},Af=function(t){var r=t.target,s=t.destination,i=t.viewport,a=t.withDroppableDisplacement,l=t.isVisibleThroughFrameFn,o=a?kN(r,s):r;return EN(o,s,l)&&jN(o,i,l)},NN=function(t){return Af(oe({},t,{isVisibleThroughFrameFn:Dy}))},Ay=function(t){return Af(oe({},t,{isVisibleThroughFrameFn:SN}))},DN=function(t){return Af(oe({},t,{isVisibleThroughFrameFn:CN(t.destination.axis)}))},RN=function(t,r,s){if(typeof s=="boolean")return s;if(!r)return!0;var i=r.invisible,a=r.visible;if(i[t])return!1;var l=a[t];return l?l.shouldAnimate:!0};function AN(e,t){var r=e.page.marginBox,s={top:t.point.y,right:0,bottom:0,left:t.point.x};return Xt(kf(r,s))}function bo(e){var t=e.afterDragging,r=e.destination,s=e.displacedBy,i=e.viewport,a=e.forceShouldAnimate,l=e.last;return t.reduce(function(c,h){var v=AN(h,s),d=h.descriptor.id;c.all.push(d);var g=NN({target:v,destination:r,viewport:i,withDroppableDisplacement:!0});if(!g)return c.invisible[h.descriptor.id]=!0,c;var x=RN(d,l,a),_={draggableId:d,shouldAnimate:x};return c.visible[d]=_,c},{all:[],visible:{},invisible:{}})}function TN(e,t){if(!e.length)return 0;var r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function rg(e){var t=e.insideDestination,r=e.inHomeList,s=e.displacedBy,i=e.destination,a=TN(t,{inHomeList:r});return{displaced:yo,displacedBy:s,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:a}}}}function Ml(e){var t=e.draggable,r=e.insideDestination,s=e.destination,i=e.viewport,a=e.displacedBy,l=e.last,o=e.index,c=e.forceShouldAnimate,h=ni(t,s);if(o==null)return rg({insideDestination:r,inHomeList:h,displacedBy:a,destination:s});var v=ys(r,function(y){return y.descriptor.index===o});if(!v)return rg({insideDestination:r,inHomeList:h,displacedBy:a,destination:s});var d=jc(t,r),g=r.indexOf(v),x=d.slice(g),_=bo({afterDragging:x,destination:s,displacedBy:a,last:l,viewport:i.frame,forceShouldAnimate:c});return{displaced:_,displacedBy:a,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:o}}}}function hs(e,t){return!!t.effected[e]}var PN=function(e){var t=e.isMovingForward,r=e.destination,s=e.draggables,i=e.combine,a=e.afterCritical;if(!r.isCombineEnabled)return null;var l=i.draggableId,o=s[l],c=o.descriptor.index,h=hs(l,a);return h?t?c:c-1:t?c+1:c},LN=function(e){var t=e.isMovingForward,r=e.isInHomeList,s=e.insideDestination,i=e.location;if(!s.length)return null;var a=i.index,l=t?a+1:a-1,o=s[0].descriptor.index,c=s[s.length-1].descriptor.index,h=r?c:c+1;return l<o||l>h?null:l},IN=function(e){var t=e.isMovingForward,r=e.isInHomeList,s=e.draggable,i=e.draggables,a=e.destination,l=e.insideDestination,o=e.previousImpact,c=e.viewport,h=e.afterCritical,v=o.at;if(v||Q(!1),v.type==="REORDER"){var d=LN({isMovingForward:t,isInHomeList:r,location:v.destination,insideDestination:l});return d==null?null:Ml({draggable:s,insideDestination:l,destination:a,viewport:c,last:o.displaced,displacedBy:o.displacedBy,index:d})}var g=PN({isMovingForward:t,destination:a,displaced:o.displaced,draggables:i,combine:v.combine,afterCritical:h});return g==null?null:Ml({draggable:s,insideDestination:l,destination:a,viewport:c,last:o.displaced,displacedBy:o.displacedBy,index:g})},ON=function(e){var t=e.displaced,r=e.afterCritical,s=e.combineWith,i=e.displacedBy,a=!!(t.visible[s]||t.invisible[s]);return hs(s,r)?a?Ue:ri(i.point):a?i.point:Ue},MN=function(e){var t=e.afterCritical,r=e.impact,s=e.draggables,i=Ec(r);i||Q(!1);var a=i.draggableId,l=s[a].page.borderBox.center,o=ON({displaced:r.displaced,afterCritical:t,combineWith:a,displacedBy:r.displacedBy});return Ge(l,o)},Ty=function(t,r){return r.margin[t.start]+r.borderBox[t.size]/2},BN=function(t,r){return r.margin[t.end]+r.borderBox[t.size]/2},Tf=function(t,r,s){return r[t.crossAxisStart]+s.margin[t.crossAxisStart]+s.borderBox[t.crossAxisSize]/2},sg=function(t){var r=t.axis,s=t.moveRelativeTo,i=t.isMoving;return Zs(r.line,s.marginBox[r.end]+Ty(r,i),Tf(r,s.marginBox,i))},ng=function(t){var r=t.axis,s=t.moveRelativeTo,i=t.isMoving;return Zs(r.line,s.marginBox[r.start]-BN(r,i),Tf(r,s.marginBox,i))},FN=function(t){var r=t.axis,s=t.moveInto,i=t.isMoving;return Zs(r.line,s.contentBox[r.start]+Ty(r,i),Tf(r,s.contentBox,i))},$N=function(e){var t=e.impact,r=e.draggable,s=e.draggables,i=e.droppable,a=e.afterCritical,l=si(i.descriptor.id,s),o=r.page,c=i.axis;if(!l.length)return FN({axis:c,moveInto:i.page,isMoving:o});var h=t.displaced,v=t.displacedBy,d=h.all[0];if(d){var g=s[d];if(hs(d,a))return ng({axis:c,moveRelativeTo:g.page,isMoving:o});var x=Tl(g.page,v.point);return ng({axis:c,moveRelativeTo:x,isMoving:o})}var _=l[l.length-1];if(_.descriptor.id===r.descriptor.id)return o.borderBox.center;if(hs(_.descriptor.id,a)){var y=Tl(_.page,ri(a.displacedBy.point));return sg({axis:c,moveRelativeTo:y,isMoving:o})}return sg({axis:c,moveRelativeTo:_.page,isMoving:o})},Xu=function(e,t){var r=e.frame;return r?Ge(t,r.scroll.diff.displacement):t},HN=function(t){var r=t.impact,s=t.draggable,i=t.droppable,a=t.draggables,l=t.afterCritical,o=s.page.borderBox.center,c=r.at;return!i||!c?o:c.type==="REORDER"?$N({impact:r,draggable:s,draggables:a,droppable:i,afterCritical:l}):MN({impact:r,draggables:a,afterCritical:l})},Nc=function(e){var t=HN(e),r=e.droppable,s=r?Xu(r,t):t;return s},Py=function(e,t){var r=yt(t,e.scroll.initial),s=ri(r),i=Xt({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),a={frame:i,scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:s}}};return a};function ig(e,t){return e.map(function(r){return t[r]})}function UN(e,t){for(var r=0;r<t.length;r++){var s=t[r].visible[e];if(s)return s}return null}var WN=function(e){var t=e.impact,r=e.viewport,s=e.destination,i=e.draggables,a=e.maxScrollChange,l=Py(r,Ge(r.scroll.current,a)),o=s.frame?jf(s,Ge(s.frame.scroll.current,a)):s,c=t.displaced,h=bo({afterDragging:ig(c.all,i),destination:s,displacedBy:t.displacedBy,viewport:l.frame,last:c,forceShouldAnimate:!1}),v=bo({afterDragging:ig(c.all,i),destination:o,displacedBy:t.displacedBy,viewport:r.frame,last:c,forceShouldAnimate:!1}),d={},g={},x=[c,h,v];c.all.forEach(function(y){var f=UN(y,x);if(f){g[y]=f;return}d[y]=!0});var _=oe({},t,{displaced:{all:c.all,invisible:d,visible:g}});return _},zN=function(e,t){return Ge(e.scroll.diff.displacement,t)},Pf=function(e){var t=e.pageBorderBoxCenter,r=e.draggable,s=e.viewport,i=zN(s,t),a=yt(i,r.page.borderBox.center);return Ge(r.client.borderBox.center,a)},Ly=function(e){var t=e.draggable,r=e.destination,s=e.newPageBorderBoxCenter,i=e.viewport,a=e.withDroppableDisplacement,l=e.onlyOnMainAxis,o=l===void 0?!1:l,c=yt(s,t.page.borderBox.center),h=Xo(t.page.borderBox,c),v={target:h,destination:r,withDroppableDisplacement:a,viewport:i};return o?DN(v):Ay(v)},VN=function(e){var t=e.isMovingForward,r=e.draggable,s=e.destination,i=e.draggables,a=e.previousImpact,l=e.viewport,o=e.previousPageBorderBoxCenter,c=e.previousClientSelection,h=e.afterCritical;if(!s.isEnabled)return null;var v=si(s.descriptor.id,i),d=ni(r,s),g=_N({isMovingForward:t,draggable:r,destination:s,insideDestination:v,previousImpact:a})||IN({isMovingForward:t,isInHomeList:d,draggable:r,draggables:i,destination:s,insideDestination:v,previousImpact:a,viewport:l,afterCritical:h});if(!g)return null;var x=Nc({impact:g,draggable:r,droppable:s,draggables:i,afterCritical:h}),_=Ly({draggable:r,destination:s,newPageBorderBoxCenter:x,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(_){var y=Pf({pageBorderBoxCenter:x,draggable:r,viewport:l});return{clientSelection:y,impact:g,scrollJumpRequest:null}}var f=yt(x,o),p=WN({impact:g,viewport:l,destination:s,draggables:i,maxScrollChange:f});return{clientSelection:c,impact:p,scrollJumpRequest:f}},tt=function(t){var r=t.subject.active;return r||Q(!1),r},qN=function(e){var t=e.isMovingForward,r=e.pageBorderBoxCenter,s=e.source,i=e.droppables,a=e.viewport,l=s.subject.active;if(!l)return null;var o=s.axis,c=Ft(l[o.start],l[o.end]),h=kc(i).filter(function(d){return d!==s}).filter(function(d){return d.isEnabled}).filter(function(d){return!!d.subject.active}).filter(function(d){return Dy(a.frame)(tt(d))}).filter(function(d){var g=tt(d);return t?l[o.crossAxisEnd]<g[o.crossAxisEnd]:g[o.crossAxisStart]<l[o.crossAxisStart]}).filter(function(d){var g=tt(d),x=Ft(g[o.start],g[o.end]);return c(g[o.start])||c(g[o.end])||x(l[o.start])||x(l[o.end])}).sort(function(d,g){var x=tt(d)[o.crossAxisStart],_=tt(g)[o.crossAxisStart];return t?x-_:_-x}).filter(function(d,g,x){return tt(d)[o.crossAxisStart]===tt(x[0])[o.crossAxisStart]});if(!h.length)return null;if(h.length===1)return h[0];var v=h.filter(function(d){var g=Ft(tt(d)[o.start],tt(d)[o.end]);return g(r[o.line])});return v.length===1?v[0]:v.length>1?v.sort(function(d,g){return tt(d)[o.start]-tt(g)[o.start]})[0]:h.sort(function(d,g){var x=eg(r,tg(tt(d))),_=eg(r,tg(tt(g)));return x!==_?x-_:tt(d)[o.start]-tt(g)[o.start]})[0]},og=function(t,r){var s=t.page.borderBox.center;return hs(t.descriptor.id,r)?yt(s,r.displacedBy.point):s},GN=function(t,r){var s=t.page.borderBox;return hs(t.descriptor.id,r)?Xo(s,ri(r.displacedBy.point)):s},KN=function(e){var t=e.pageBorderBoxCenter,r=e.viewport,s=e.destination,i=e.insideDestination,a=e.afterCritical,l=i.filter(function(o){return Ay({target:GN(o,a),destination:s,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(o,c){var h=xo(t,Xu(s,og(o,a))),v=xo(t,Xu(s,og(c,a)));return h<v?-1:v<h?1:o.descriptor.index-c.descriptor.index});return l[0]||null},Jo=He(function(t,r){var s=r[t.line];return{value:s,point:Zs(t.line,s)}}),QN=function(t,r,s){var i=t.axis;if(t.descriptor.mode==="virtual")return Zs(i.line,r[i.line]);var a=t.subject.page.contentBox[i.size],l=si(t.descriptor.id,s),o=l.reduce(function(v,d){return v+d.client.marginBox[i.size]},0),c=o+r[i.line],h=c-a;return h<=0?null:Zs(i.line,h)},Iy=function(t,r){return oe({},t,{scroll:oe({},t.scroll,{max:r})})},Oy=function(t,r,s){var i=t.frame;ni(r,t)&&Q(!1),t.subject.withPlaceholder&&Q(!1);var a=Jo(t.axis,r.displaceBy).point,l=QN(t,a,s),o={placeholderSize:a,increasedBy:l,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!i){var c=Kn({page:t.subject.page,withPlaceholder:o,axis:t.axis,frame:t.frame});return oe({},t,{subject:c})}var h=l?Ge(i.scroll.max,l):i.scroll.max,v=Iy(i,h),d=Kn({page:t.subject.page,withPlaceholder:o,axis:t.axis,frame:v});return oe({},t,{subject:d,frame:v})},YN=function(t){var r=t.subject.withPlaceholder;r||Q(!1);var s=t.frame;if(!s){var i=Kn({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return oe({},t,{subject:i})}var a=r.oldFrameMaxScroll;a||Q(!1);var l=Iy(s,a),o=Kn({page:t.subject.page,axis:t.axis,frame:l,withPlaceholder:null});return oe({},t,{subject:o,frame:l})},XN=function(e){var t=e.previousPageBorderBoxCenter,r=e.moveRelativeTo,s=e.insideDestination,i=e.draggable,a=e.draggables,l=e.destination,o=e.viewport,c=e.afterCritical;if(!r){if(s.length)return null;var h={displaced:yo,displacedBy:Ny,at:{type:"REORDER",destination:{droppableId:l.descriptor.id,index:0}}},v=Nc({impact:h,draggable:i,droppable:l,draggables:a,afterCritical:c}),d=ni(i,l)?l:Oy(l,i,a),g=Ly({draggable:i,destination:d,newPageBorderBoxCenter:v,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return g?h:null}var x=t[l.axis.line]<=r.page.borderBox.center[l.axis.line],_=function(){var f=r.descriptor.index;return r.descriptor.id===i.descriptor.id||x?f:f+1}(),y=Jo(l.axis,i.displaceBy);return Ml({draggable:i,insideDestination:s,destination:l,viewport:o,displacedBy:y,last:yo,index:_})},JN=function(e){var t=e.isMovingForward,r=e.previousPageBorderBoxCenter,s=e.draggable,i=e.isOver,a=e.draggables,l=e.droppables,o=e.viewport,c=e.afterCritical,h=qN({isMovingForward:t,pageBorderBoxCenter:r,source:i,droppables:l,viewport:o});if(!h)return null;var v=si(h.descriptor.id,a),d=KN({pageBorderBoxCenter:r,viewport:o,destination:h,insideDestination:v,afterCritical:c}),g=XN({previousPageBorderBoxCenter:r,destination:h,draggable:s,draggables:a,moveRelativeTo:d,insideDestination:v,viewport:o,afterCritical:c});if(!g)return null;var x=Nc({impact:g,draggable:s,droppable:h,draggables:a,afterCritical:c}),_=Pf({pageBorderBoxCenter:x,draggable:s,viewport:o});return{clientSelection:_,impact:g,scrollJumpRequest:null}},_t=function(e){var t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null},ZN=function(t,r){var s=_t(t);return s?r[s]:null},e5=function(e){var t=e.state,r=e.type,s=ZN(t.impact,t.dimensions.droppables),i=!!s,a=t.dimensions.droppables[t.critical.droppable.id],l=s||a,o=l.axis.direction,c=o==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||o==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(c&&!i)return null;var h=r==="MOVE_DOWN"||r==="MOVE_RIGHT",v=t.dimensions.draggables[t.critical.draggable.id],d=t.current.page.borderBoxCenter,g=t.dimensions,x=g.draggables,_=g.droppables;return c?VN({isMovingForward:h,previousPageBorderBoxCenter:d,draggable:v,destination:l,draggables:x,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):JN({isMovingForward:h,previousPageBorderBoxCenter:d,draggable:v,isOver:l,draggables:x,droppables:_,viewport:t.viewport,afterCritical:t.afterCritical})};function Es(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function My(e){var t=Ft(e.top,e.bottom),r=Ft(e.left,e.right);return function(i){return t(i.y)&&r(i.x)}}function t5(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function r5(e){var t=e.pageBorderBox,r=e.draggable,s=e.candidates,i=r.page.borderBox.center,a=s.map(function(l){var o=l.axis,c=Zs(l.axis.line,t.center[o.line],l.page.borderBox.center[o.crossAxisLine]);return{id:l.descriptor.id,distance:xo(i,c)}}).sort(function(l,o){return o.distance-l.distance});return a[0]?a[0].id:null}function s5(e){var t=e.pageBorderBox,r=e.draggable,s=e.droppables,i=kc(s).filter(function(a){if(!a.isEnabled)return!1;var l=a.subject.active;if(!l||!t5(t,l))return!1;if(My(l)(t.center))return!0;var o=a.axis,c=l.center[o.crossAxisLine],h=t[o.crossAxisStart],v=t[o.crossAxisEnd],d=Ft(l[o.crossAxisStart],l[o.crossAxisEnd]),g=d(h),x=d(v);return!g&&!x?!0:g?h<c:v>c});return i.length?i.length===1?i[0].descriptor.id:r5({pageBorderBox:t,draggable:r,candidates:i}):null}var By=function(t,r){return Xt(Xo(t,r))},n5=function(e,t){var r=e.frame;return r?By(t,r.scroll.diff.value):t};function Fy(e){var t=e.displaced,r=e.id;return!!(t.visible[r]||t.invisible[r])}function i5(e){var t=e.draggable,r=e.closest,s=e.inHomeList;return r?s&&r.descriptor.index>t.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var o5=function(e){var t=e.pageBorderBoxWithDroppableScroll,r=e.draggable,s=e.destination,i=e.insideDestination,a=e.last,l=e.viewport,o=e.afterCritical,c=s.axis,h=Jo(s.axis,r.displaceBy),v=h.value,d=t[c.start],g=t[c.end],x=jc(r,i),_=ys(x,function(f){var p=f.descriptor.id,u=f.page.borderBox.center[c.line],m=hs(p,o),b=Fy({displaced:a,id:p});return m?b?g<=u:d<u-v:b?g<=u+v:d<u}),y=i5({draggable:r,closest:_,inHomeList:ni(r,s)});return Ml({draggable:r,insideDestination:i,destination:s,viewport:l,last:a,displacedBy:h,index:y})},a5=4,l5=function(e){var t=e.draggable,r=e.pageBorderBoxWithDroppableScroll,s=e.previousImpact,i=e.destination,a=e.insideDestination,l=e.afterCritical;if(!i.isCombineEnabled)return null;var o=i.axis,c=Jo(i.axis,t.displaceBy),h=c.value,v=r[o.start],d=r[o.end],g=jc(t,a),x=ys(g,function(y){var f=y.descriptor.id,p=y.page.borderBox,u=p[o.size],m=u/a5,b=hs(f,l),S=Fy({displaced:s.displaced,id:f});return b?S?d>p[o.start]+m&&d<p[o.end]-m:v>p[o.start]-h+m&&v<p[o.end]-h-m:S?d>p[o.start]+h+m&&d<p[o.end]+h-m:v>p[o.start]+m&&v<p[o.end]-m});if(!x)return null;var _={displacedBy:c,displaced:s.displaced,at:{type:"COMBINE",combine:{draggableId:x.descriptor.id,droppableId:i.descriptor.id}}};return _},$y=function(e){var t=e.pageOffset,r=e.draggable,s=e.draggables,i=e.droppables,a=e.previousImpact,l=e.viewport,o=e.afterCritical,c=By(r.page.borderBox,t),h=s5({pageBorderBox:c,draggable:r,droppables:i});if(!h)return wN;var v=i[h],d=si(v.descriptor.id,s),g=n5(v,c);return l5({pageBorderBoxWithDroppableScroll:g,draggable:r,previousImpact:a,destination:v,insideDestination:d,afterCritical:o})||o5({pageBorderBoxWithDroppableScroll:g,draggable:r,destination:v,insideDestination:d,last:a.displaced,viewport:l,afterCritical:o})},Lf=function(e,t){var r;return oe({},e,(r={},r[t.descriptor.id]=t,r))},c5=function(t){var r=t.previousImpact,s=t.impact,i=t.droppables,a=_t(r),l=_t(s);if(!a||a===l)return i;var o=i[a];if(!o.subject.withPlaceholder)return i;var c=YN(o);return Lf(i,c)},d5=function(e){var t=e.draggable,r=e.draggables,s=e.droppables,i=e.previousImpact,a=e.impact,l=c5({previousImpact:i,impact:a,droppables:s}),o=_t(a);if(!o)return l;var c=s[o];if(ni(t,c)||c.subject.withPlaceholder)return l;var h=Oy(c,t,r);return Lf(l,h)},Hi=function(e){var t=e.state,r=e.clientSelection,s=e.dimensions,i=e.viewport,a=e.impact,l=e.scrollJumpRequest,o=i||t.viewport,c=s||t.dimensions,h=r||t.current.client.selection,v=yt(h,t.initial.client.selection),d={offset:v,selection:h,borderBoxCenter:Ge(t.initial.client.borderBoxCenter,v)},g={selection:Ge(d.selection,o.scroll.current),borderBoxCenter:Ge(d.borderBoxCenter,o.scroll.current),offset:Ge(d.offset,o.scroll.diff.value)},x={client:d,page:g};if(t.phase==="COLLECTING")return oe({phase:"COLLECTING"},t,{dimensions:c,viewport:o,current:x});var _=c.draggables[t.critical.draggable.id],y=a||$y({pageOffset:g.offset,draggable:_,draggables:c.draggables,droppables:c.droppables,previousImpact:t.impact,viewport:o,afterCritical:t.afterCritical}),f=d5({draggable:_,impact:y,previousImpact:t.impact,draggables:c.draggables,droppables:c.droppables}),p=oe({},t,{current:x,dimensions:{draggables:c.draggables,droppables:f},impact:y,viewport:o,scrollJumpRequest:l||null,forceShouldAnimate:l?!1:null});return p};function u5(e,t){return e.map(function(r){return t[r]})}var Hy=function(e){var t=e.impact,r=e.viewport,s=e.draggables,i=e.destination,a=e.forceShouldAnimate,l=t.displaced,o=u5(l.all,s),c=bo({afterDragging:o,destination:i,displacedBy:t.displacedBy,viewport:r.frame,forceShouldAnimate:a,last:l});return oe({},t,{displaced:c})},Uy=function(e){var t=e.impact,r=e.draggable,s=e.droppable,i=e.draggables,a=e.viewport,l=e.afterCritical,o=Nc({impact:t,draggable:r,draggables:i,droppable:s,afterCritical:l});return Pf({pageBorderBoxCenter:o,draggable:r,viewport:a})},Wy=function(e){var t=e.state,r=e.dimensions,s=e.viewport;t.movementMode!=="SNAP"&&Q(!1);var i=t.impact,a=s||t.viewport,l=r||t.dimensions,o=l.draggables,c=l.droppables,h=o[t.critical.draggable.id],v=_t(i);v||Q(!1);var d=c[v],g=Hy({impact:i,viewport:a,destination:d,draggables:o}),x=Uy({impact:g,draggable:h,droppable:d,draggables:o,viewport:a,afterCritical:t.afterCritical});return Hi({impact:g,clientSelection:x,state:t,dimensions:l,viewport:a})},h5=function(e){return{index:e.index,droppableId:e.droppableId}},zy=function(e){var t=e.draggable,r=e.home,s=e.draggables,i=e.viewport,a=Jo(r.axis,t.displaceBy),l=si(r.descriptor.id,s),o=l.indexOf(t);o===-1&&Q(!1);var c=l.slice(o+1),h=c.reduce(function(x,_){return x[_.descriptor.id]=!0,x},{}),v={inVirtualList:r.descriptor.mode==="virtual",displacedBy:a,effected:h},d=bo({afterDragging:c,destination:r,displacedBy:a,last:null,viewport:i.frame,forceShouldAnimate:!1}),g={displaced:d,displacedBy:a,at:{type:"REORDER",destination:h5(t.descriptor)}};return{impact:g,afterCritical:v}},f5=function(e,t){return{draggables:e.draggables,droppables:Lf(e.droppables,t)}},p5=function(e){var t=e.draggable,r=e.offset,s=e.initialWindowScroll,i=Tl(t.client,r),a=Pl(i,s),l=oe({},t,{placeholder:oe({},t.placeholder,{client:i}),client:i,page:a});return l},m5=function(e){var t=e.frame;return t||Q(!1),t},g5=function(e){var t=e.additions,r=e.updatedDroppables,s=e.viewport,i=s.scroll.diff.value;return t.map(function(a){var l=a.descriptor.droppableId,o=r[l],c=m5(o),h=c.scroll.diff.value,v=Ge(i,h),d=p5({draggable:a,offset:v,initialWindowScroll:s.scroll.initial});return d})},v5=function(e){var t=e.state,r=e.published,s=r.modified.map(function(m){var b=t.dimensions.droppables[m.droppableId],S=jf(b,m.scroll);return S}),i=oe({},t.dimensions.droppables,{},Ey(s)),a=jy(g5({additions:r.additions,updatedDroppables:i,viewport:t.viewport})),l=oe({},t.dimensions.draggables,{},a);r.removals.forEach(function(m){delete l[m]});var o={droppables:i,draggables:l},c=_t(t.impact),h=c?o.droppables[c]:null,v=o.draggables[t.critical.draggable.id],d=o.droppables[t.critical.droppable.id],g=zy({draggable:v,home:d,draggables:l,viewport:t.viewport}),x=g.impact,_=g.afterCritical,y=h&&h.isCombineEnabled?t.impact:x,f=$y({pageOffset:t.current.page.offset,draggable:o.draggables[t.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:y,viewport:t.viewport,afterCritical:_}),p=oe({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:f,onLiftImpact:x,dimensions:o,afterCritical:_,forceShouldAnimate:!1});if(t.phase==="COLLECTING")return p;var u=oe({phase:"DROP_PENDING"},p,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1});return u},Ju=function(t){return t.movementMode==="SNAP"},wd=function(t,r,s){var i=f5(t.dimensions,r);return!Ju(t)||s?Hi({state:t,dimensions:i}):Wy({state:t,dimensions:i})};function Sd(e){return e.isDragging&&e.movementMode==="SNAP"?oe({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var ag={phase:"IDLE",completed:null,shouldFlush:!1},x5=function(e,t){if(e===void 0&&(e=ag),t.type==="FLUSH")return oe({},ag,{shouldFlush:!0});if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&Q(!1);var r=t.payload,s=r.critical,i=r.clientSelection,a=r.viewport,l=r.dimensions,o=r.movementMode,c=l.draggables[s.draggable.id],h=l.droppables[s.droppable.id],v={selection:i,borderBoxCenter:c.client.borderBox.center,offset:Ue},d={client:v,page:{selection:Ge(v.selection,a.scroll.initial),borderBoxCenter:Ge(v.selection,a.scroll.initial),offset:Ge(v.selection,a.scroll.diff.value)}},g=kc(l.droppables).every(function(X){return!X.isFixedOnPage}),x=zy({draggable:c,home:h,draggables:l.draggables,viewport:a}),_=x.impact,y=x.afterCritical,f={phase:"DRAGGING",isDragging:!0,critical:s,movementMode:o,dimensions:l,initial:d,current:d,isWindowScrollAllowed:g,impact:_,afterCritical:y,onLiftImpact:_,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null};return f}if(t.type==="COLLECTION_STARTING"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&Q(!1);var p=oe({phase:"COLLECTING"},e,{phase:"COLLECTING"});return p}if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||Q(!1),v5({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Es(e)||Q(!1);var u=t.payload.client;return os(u,e.current.client.selection)?e:Hi({state:e,clientSelection:u,impact:Ju(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return Sd(e);Es(e)||Q(!1);var m=t.payload,b=m.id,S=m.newScroll,C=e.dimensions.droppables[b];if(!C)return e;var k=jf(C,S);return wd(e,k,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Es(e)||Q(!1);var w=t.payload,j=w.id,D=w.isEnabled,I=e.dimensions.droppables[j];I||Q(!1),I.isEnabled===D&&Q(!1);var T=oe({},I,{isEnabled:D});return wd(e,T,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Es(e)||Q(!1);var A=t.payload,O=A.id,R=A.isCombineEnabled,B=e.dimensions.droppables[O];B||Q(!1),B.isCombineEnabled===R&&Q(!1);var U=oe({},B,{isCombineEnabled:R});return wd(e,U,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Es(e)||Q(!1),e.isWindowScrollAllowed||Q(!1);var $=t.payload.newScroll;if(os(e.viewport.scroll.current,$))return Sd(e);var N=Py(e.viewport,$);return Ju(e)?Wy({state:e,viewport:N}):Hi({state:e,viewport:N})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Es(e))return e;var P=t.payload.maxScroll;if(os(P,e.viewport.scroll.max))return e;var M=oe({},e.viewport,{scroll:oe({},e.viewport.scroll,{max:P})});return oe({phase:"DRAGGING"},e,{viewport:M})}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&Q(!1);var F=e5({state:e,type:t.type});return F?Hi({state:e,impact:F.impact,clientSelection:F.clientSelection,scrollJumpRequest:F.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){var V=t.payload.reason;e.phase!=="COLLECTING"&&Q(!1);var K=oe({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:V});return K}if(t.type==="DROP_ANIMATE"){var J=t.payload,te=J.completed,W=J.dropDuration,L=J.newHomeClientOffset;e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||Q(!1);var q={phase:"DROP_ANIMATING",completed:te,dropDuration:W,newHomeClientOffset:L,dimensions:e.dimensions};return q}if(t.type==="DROP_COMPLETE"){var z=t.payload.completed;return{phase:"IDLE",completed:z,shouldFlush:!1}}return e},y5=function(t){return{type:"BEFORE_INITIAL_CAPTURE",payload:t}},b5=function(t){return{type:"LIFT",payload:t}},_5=function(t){return{type:"INITIAL_PUBLISH",payload:t}},w5=function(t){return{type:"PUBLISH_WHILE_DRAGGING",payload:t}},S5=function(){return{type:"COLLECTION_STARTING",payload:null}},C5=function(t){return{type:"UPDATE_DROPPABLE_SCROLL",payload:t}},k5=function(t){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}},E5=function(t){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}},Vy=function(t){return{type:"MOVE",payload:t}},j5=function(t){return{type:"MOVE_BY_WINDOW_SCROLL",payload:t}},N5=function(t){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}},D5=function(){return{type:"MOVE_UP",payload:null}},R5=function(){return{type:"MOVE_DOWN",payload:null}},A5=function(){return{type:"MOVE_RIGHT",payload:null}},T5=function(){return{type:"MOVE_LEFT",payload:null}},If=function(){return{type:"FLUSH",payload:null}},P5=function(t){return{type:"DROP_ANIMATE",payload:t}},Of=function(t){return{type:"DROP_COMPLETE",payload:t}},qy=function(t){return{type:"DROP",payload:t}},L5=function(t){return{type:"DROP_PENDING",payload:t}},Gy=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},I5=function(e){return function(t){var r=t.getState,s=t.dispatch;return function(i){return function(a){if(a.type!=="LIFT"){i(a);return}var l=a.payload,o=l.id,c=l.clientSelection,h=l.movementMode,v=r();v.phase==="DROP_ANIMATING"&&s(Of({completed:v.completed})),r().phase!=="IDLE"&&Q(!1),s(If()),s(y5({draggableId:o,movementMode:h}));var d={shouldPublishImmediately:h==="SNAP"},g={draggableId:o,scrollOptions:d},x=e.startPublishing(g),_=x.critical,y=x.dimensions,f=x.viewport;s(_5({critical:_,dimensions:y,clientSelection:c,movementMode:h,viewport:f}))}}}},O5=function(e){return function(){return function(t){return function(r){r.type==="INITIAL_PUBLISH"&&e.dragging(),r.type==="DROP_ANIMATE"&&e.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&e.resting(),t(r)}}}},Mf={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},_o={opacity:{drop:0,combining:.7},scale:{drop:.75}},Bf={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},ws=Bf.outOfTheWay+"s "+Mf.outOfTheWay,Ui={fluid:"opacity "+ws,snap:"transform "+ws+", opacity "+ws,drop:function(t){var r=t+"s "+Mf.drop;return"transform "+r+", opacity "+r},outOfTheWay:"transform "+ws,placeholder:"height "+ws+", width "+ws+", margin "+ws},lg=function(t){return os(t,Ue)?null:"translate("+t.x+"px, "+t.y+"px)"},Zu={moveTo:lg,drop:function(t,r){var s=lg(t);return s?r?s+" scale("+_o.scale.drop+")":s:null}},eh=Bf.minDropTime,Ky=Bf.maxDropTime,M5=Ky-eh,cg=1500,B5=.6,F5=function(e){var t=e.current,r=e.destination,s=e.reason,i=xo(t,r);if(i<=0)return eh;if(i>=cg)return Ky;var a=i/cg,l=eh+M5*a,o=s==="CANCEL"?l*B5:l;return Number(o.toFixed(2))},$5=function(e){var t=e.impact,r=e.draggable,s=e.dimensions,i=e.viewport,a=e.afterCritical,l=s.draggables,o=s.droppables,c=_t(t),h=c?o[c]:null,v=o[r.descriptor.droppableId],d=Uy({impact:t,draggable:r,draggables:l,afterCritical:a,droppable:h||v,viewport:i}),g=yt(d,r.client.borderBox.center);return g},H5=function(e){var t=e.draggables,r=e.reason,s=e.lastImpact,i=e.home,a=e.viewport,l=e.onLiftImpact;if(!s.at||r!=="DROP"){var o=Hy({draggables:t,impact:l,destination:i,viewport:a,forceShouldAnimate:!0});return{impact:o,didDropInsideDroppable:!1}}if(s.at.type==="REORDER")return{impact:s,didDropInsideDroppable:!0};var c=oe({},s,{displaced:yo});return{impact:c,didDropInsideDroppable:!0}},U5=function(e){var t=e.getState,r=e.dispatch;return function(s){return function(i){if(i.type!=="DROP"){s(i);return}var a=t(),l=i.payload.reason;if(a.phase==="COLLECTING"){r(L5({reason:l}));return}if(a.phase!=="IDLE"){var o=a.phase==="DROP_PENDING"&&a.isWaiting;o&&Q(!1),a.phase==="DRAGGING"||a.phase==="DROP_PENDING"||Q(!1);var c=a.critical,h=a.dimensions,v=h.draggables[a.critical.draggable.id],d=H5({reason:l,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),g=d.impact,x=d.didDropInsideDroppable,_=x?Df(g):null,y=x?Ec(g):null,f={index:c.draggable.index,droppableId:c.droppable.id},p={draggableId:v.descriptor.id,type:v.descriptor.type,source:f,reason:l,mode:a.movementMode,destination:_,combine:y},u=$5({impact:g,draggable:v,dimensions:h,viewport:a.viewport,afterCritical:a.afterCritical}),m={critical:a.critical,afterCritical:a.afterCritical,result:p,impact:g},b=!os(a.current.client.offset,u)||!!p.combine;if(!b){r(Of({completed:m}));return}var S=F5({current:a.current.client.offset,destination:u,reason:l}),C={newHomeClientOffset:u,dropDuration:S,completed:m};r(P5(C))}}}},Qy=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function W5(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(r){r.target!==window&&r.target!==window.document||e()}}}function z5(e){var t=e.onWindowScroll;function r(){t(Qy())}var s=vo(r),i=W5(s),a=is;function l(){return a!==is}function o(){l()&&Q(!1),a=Mt(window,[i])}function c(){l()||Q(!1),s.cancel(),a(),a=is}return{start:o,stop:c,isActive:l}}var V5=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},q5=function(e){var t=z5({onWindowScroll:function(s){e.dispatch(j5({newScroll:s}))}});return function(r){return function(s){!t.isActive()&&s.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&V5(s)&&t.stop(),r(s)}}},G5=function(e){var t=!1,r=!1,s=setTimeout(function(){r=!0}),i=function(l){t||r||(t=!0,e(l),clearTimeout(s))};return i.wasCalled=function(){return t},i},K5=function(){var e=[],t=function(a){var l=Nf(e,function(h){return h.timerId===a});l===-1&&Q(!1);var o=e.splice(l,1),c=o[0];c.callback()},r=function(a){var l=setTimeout(function(){return t(l)}),o={timerId:l,callback:a};e.push(o)},s=function(){if(e.length){var a=[].concat(e);e.length=0,a.forEach(function(l){clearTimeout(l.timerId),l.callback()})}};return{add:r,flush:s}},Q5=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.droppableId===r.droppableId&&t.index===r.index},Y5=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.draggableId===r.draggableId&&t.droppableId===r.droppableId},X5=function(t,r){if(t===r)return!0;var s=t.draggable.id===r.draggable.id&&t.draggable.droppableId===r.draggable.droppableId&&t.draggable.type===r.draggable.type&&t.draggable.index===r.draggable.index,i=t.droppable.id===r.droppable.id&&t.droppable.type===r.droppable.type;return s&&i},vi=function(t,r){r()},Ea=function(t,r){return{draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:r}},Cd=function(t,r,s,i){if(!t){s(i(r));return}var a=G5(s),l={announce:a};t(r,l),a.wasCalled()||s(i(r))},J5=function(e,t){var r=K5(),s=null,i=function(g,x){s&&Q(!1),vi("onBeforeCapture",function(){var _=e().onBeforeCapture;if(_){var y={draggableId:g,mode:x};_(y)}})},a=function(g,x){s&&Q(!1),vi("onBeforeDragStart",function(){var _=e().onBeforeDragStart;_&&_(Ea(g,x))})},l=function(g,x){s&&Q(!1);var _=Ea(g,x);s={mode:x,lastCritical:g,lastLocation:_.source,lastCombine:null},r.add(function(){vi("onDragStart",function(){return Cd(e().onDragStart,_,t,qa.onDragStart)})})},o=function(g,x){var _=Df(x),y=Ec(x);s||Q(!1);var f=!X5(g,s.lastCritical);f&&(s.lastCritical=g);var p=!Q5(s.lastLocation,_);p&&(s.lastLocation=_);var u=!Y5(s.lastCombine,y);if(u&&(s.lastCombine=y),!(!f&&!p&&!u)){var m=oe({},Ea(g,s.mode),{combine:y,destination:_});r.add(function(){vi("onDragUpdate",function(){return Cd(e().onDragUpdate,m,t,qa.onDragUpdate)})})}},c=function(){s||Q(!1),r.flush()},h=function(g){s||Q(!1),s=null,vi("onDragEnd",function(){return Cd(e().onDragEnd,g,t,qa.onDragEnd)})},v=function(){if(s){var g=oe({},Ea(s.lastCritical,s.mode),{combine:null,destination:null,reason:"CANCEL"});h(g)}};return{beforeCapture:i,beforeStart:a,start:l,update:o,flush:c,drop:h,abort:v}},Z5=function(e,t){var r=J5(e,t);return function(s){return function(i){return function(a){if(a.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(a.payload.draggableId,a.payload.movementMode);return}if(a.type==="INITIAL_PUBLISH"){var l=a.payload.critical;r.beforeStart(l,a.payload.movementMode),i(a),r.start(l,a.payload.movementMode);return}if(a.type==="DROP_COMPLETE"){var o=a.payload.completed.result;r.flush(),i(a),r.drop(o);return}if(i(a),a.type==="FLUSH"){r.abort();return}var c=s.getState();c.phase==="DRAGGING"&&r.update(c.critical,c.impact)}}}},e4=function(e){return function(t){return function(r){if(r.type!=="DROP_ANIMATION_FINISHED"){t(r);return}var s=e.getState();s.phase!=="DROP_ANIMATING"&&Q(!1),e.dispatch(Of({completed:s.completed}))}}},t4=function(e){var t=null,r=null;function s(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return function(i){return function(a){if((a.type==="FLUSH"||a.type==="DROP_COMPLETE"||a.type==="DROP_ANIMATION_FINISHED")&&s(),i(a),a.type==="DROP_ANIMATE"){var l={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var c=e.getState();c.phase==="DROP_ANIMATING"&&e.dispatch(Gy())}};r=requestAnimationFrame(function(){r=null,t=Mt(window,[l])})}}}},r4=function(e){return function(){return function(t){return function(r){(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&e.stopPublishing(),t(r)}}}},s4=function(e){var t=!1;return function(){return function(r){return function(s){if(s.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(s.payload.critical.draggable.id),r(s),e.tryRestoreFocusRecorded();return}if(r(s),!!t){if(s.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(s.type==="DROP_COMPLETE"){t=!1;var i=s.payload.completed.result;i.combine&&e.tryShiftRecord(i.draggableId,i.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}},n4=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},i4=function(e){return function(t){return function(r){return function(s){if(n4(s)){e.stop(),r(s);return}if(s.type==="INITIAL_PUBLISH"){r(s);var i=t.getState();i.phase!=="DRAGGING"&&Q(!1),e.start(i);return}r(s),e.scroll(t.getState())}}}},o4=function(e){return function(t){return function(r){if(t(r),r.type==="PUBLISH_WHILE_DRAGGING"){var s=e.getState();s.phase==="DROP_PENDING"&&(s.isWaiting||e.dispatch(qy({reason:s.reason})))}}}},a4=ty,l4=function(e){var t=e.dimensionMarshal,r=e.focusMarshal,s=e.styleMarshal,i=e.getResponders,a=e.announce,l=e.autoScroller;return ey(x5,a4(GE(O5(s),r4(t),I5(t),U5,e4,t4,o4,i4(l),q5,s4(r),Z5(i,a))))},kd=function(){return{additions:{},removals:{},modified:{}}};function c4(e){var t=e.registry,r=e.callbacks,s=kd(),i=null,a=function(){i||(r.collectionStarting(),i=requestAnimationFrame(function(){i=null;var v=s,d=v.additions,g=v.removals,x=v.modified,_=Object.keys(d).map(function(p){return t.draggable.getById(p).getDimension(Ue)}).sort(function(p,u){return p.descriptor.index-u.descriptor.index}),y=Object.keys(x).map(function(p){var u=t.droppable.getById(p),m=u.callbacks.getScrollWhileDragging();return{droppableId:p,scroll:m}}),f={additions:_,removals:Object.keys(g),modified:y};s=kd(),r.publish(f)}))},l=function(v){var d=v.descriptor.id;s.additions[d]=v,s.modified[v.descriptor.droppableId]=!0,s.removals[d]&&delete s.removals[d],a()},o=function(v){var d=v.descriptor;s.removals[d.id]=!0,s.modified[d.droppableId]=!0,s.additions[d.id]&&delete s.additions[d.id],a()},c=function(){i&&(cancelAnimationFrame(i),i=null,s=kd())};return{add:l,remove:o,stop:c}}var Yy=function(e){var t=e.scrollHeight,r=e.scrollWidth,s=e.height,i=e.width,a=yt({x:r,y:t},{x:i,y:s}),l={x:Math.max(0,a.x),y:Math.max(0,a.y)};return l},Xy=function(){var e=document.documentElement;return e||Q(!1),e},Jy=function(){var e=Xy(),t=Yy({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight});return t},d4=function(){var e=Qy(),t=Jy(),r=e.y,s=e.x,i=Xy(),a=i.clientWidth,l=i.clientHeight,o=s+a,c=r+l,h=Xt({top:r,left:s,right:o,bottom:c}),v={frame:h,scroll:{initial:e,current:e,max:t,diff:{value:Ue,displacement:Ue}}};return v},u4=function(e){var t=e.critical,r=e.scrollOptions,s=e.registry,i=d4(),a=i.scroll.current,l=t.droppable,o=s.droppable.getAllByType(l.type).map(function(d){return d.callbacks.getDimensionAndWatchScroll(a,r)}),c=s.draggable.getAllByType(t.draggable.type).map(function(d){return d.getDimension(a)}),h={draggables:jy(c),droppables:Ey(o)},v={dimensions:h,critical:t,viewport:i};return v};function dg(e,t,r){if(r.descriptor.id===t.id||r.descriptor.type!==t.type)return!1;var s=e.droppable.getById(r.descriptor.droppableId);return s.descriptor.mode==="virtual"}var h4=function(e,t){var r=null,s=c4({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),i=function(x,_){e.droppable.exists(x)||Q(!1),r&&t.updateDroppableIsEnabled({id:x,isEnabled:_})},a=function(x,_){r&&(e.droppable.exists(x)||Q(!1),t.updateDroppableIsCombineEnabled({id:x,isCombineEnabled:_}))},l=function(x,_){r&&(e.droppable.exists(x)||Q(!1),t.updateDroppableScroll({id:x,newScroll:_}))},o=function(x,_){r&&e.droppable.getById(x).callbacks.scroll(_)},c=function(){if(r){s.stop();var x=r.critical.droppable;e.droppable.getAllByType(x.type).forEach(function(_){return _.callbacks.dragStopped()}),r.unsubscribe(),r=null}},h=function(x){r||Q(!1);var _=r.critical.draggable;x.type==="ADDITION"&&dg(e,_,x.value)&&s.add(x.value),x.type==="REMOVAL"&&dg(e,_,x.value)&&s.remove(x.value)},v=function(x){r&&Q(!1);var _=e.draggable.getById(x.draggableId),y=e.droppable.getById(_.descriptor.droppableId),f={draggable:_.descriptor,droppable:y.descriptor},p=e.subscribe(h);return r={critical:f,unsubscribe:p},u4({critical:f,registry:e,scrollOptions:x.scrollOptions})},d={updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:a,scrollDroppable:o,updateDroppableScroll:l,startPublishing:v,stopPublishing:c};return d},Zy=function(e,t){return e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP"},f4=function(e){window.scrollBy(e.x,e.y)},p4=He(function(e){return kc(e).filter(function(t){return!(!t.isEnabled||!t.frame)})}),m4=function(t,r){var s=ys(p4(r),function(i){return i.frame||Q(!1),My(i.frame.pageMarginBox)(t)});return s},g4=function(e){var t=e.center,r=e.destination,s=e.droppables;if(r){var i=s[r];return i.frame?i:null}var a=m4(t,s);return a},as={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(t){return Math.pow(t,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},v4=function(e,t){var r=e[t.size]*as.startFromPercentage,s=e[t.size]*as.maxScrollAtPercentage,i={startScrollingFrom:r,maxScrollValueAt:s};return i},eb=function(e){var t=e.startOfRange,r=e.endOfRange,s=e.current,i=r-t;if(i===0)return 0;var a=s-t,l=a/i;return l},Ff=1,x4=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return as.maxPixelScroll;if(e===t.startScrollingFrom)return Ff;var r=eb({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),s=1-r,i=as.maxPixelScroll*as.ease(s);return Math.ceil(i)},ug=as.durationDampening.accelerateAt,hg=as.durationDampening.stopDampeningAt,y4=function(e,t){var r=t,s=hg,i=Date.now(),a=i-r;if(a>=hg)return e;if(a<ug)return Ff;var l=eb({startOfRange:ug,endOfRange:s,current:a}),o=e*as.ease(l);return Math.ceil(o)},fg=function(e){var t=e.distanceToEdge,r=e.thresholds,s=e.dragStartTime,i=e.shouldUseTimeDampening,a=x4(t,r);return a===0?0:i?Math.max(y4(a,s),Ff):a},pg=function(e){var t=e.container,r=e.distanceToEdges,s=e.dragStartTime,i=e.axis,a=e.shouldUseTimeDampening,l=v4(t,i),o=r[i.end]<r[i.start];return o?fg({distanceToEdge:r[i.end],thresholds:l,dragStartTime:s,shouldUseTimeDampening:a}):-1*fg({distanceToEdge:r[i.start],thresholds:l,dragStartTime:s,shouldUseTimeDampening:a})},b4=function(e){var t=e.container,r=e.subject,s=e.proposedScroll,i=r.height>t.height,a=r.width>t.width;return!a&&!i?s:a&&i?null:{x:a?0:s.x,y:i?0:s.y}},_4=Cy(function(e){return e===0?0:e}),tb=function(e){var t=e.dragStartTime,r=e.container,s=e.subject,i=e.center,a=e.shouldUseTimeDampening,l={top:i.y-r.top,right:r.right-i.x,bottom:r.bottom-i.y,left:i.x-r.left},o=pg({container:r,distanceToEdges:l,dragStartTime:t,axis:Rf,shouldUseTimeDampening:a}),c=pg({container:r,distanceToEdges:l,dragStartTime:t,axis:Ry,shouldUseTimeDampening:a}),h=_4({x:c,y:o});if(os(h,Ue))return null;var v=b4({container:r,subject:s,proposedScroll:h});return v?os(v,Ue)?null:v:null},w4=Cy(function(e){return e===0?0:e>0?1:-1}),$f=function(){var e=function(r,s){return r<0?r:r>s?r-s:0};return function(t){var r=t.current,s=t.max,i=t.change,a=Ge(r,i),l={x:e(a.x,s.x),y:e(a.y,s.y)};return os(l,Ue)?null:l}}(),rb=function(t){var r=t.max,s=t.current,i=t.change,a={x:Math.max(s.x,r.x),y:Math.max(s.y,r.y)},l=w4(i),o=$f({max:a,current:s,change:l});return!o||l.x!==0&&o.x===0||l.y!==0&&o.y===0},Hf=function(t,r){return rb({current:t.scroll.current,max:t.scroll.max,change:r})},S4=function(t,r){if(!Hf(t,r))return null;var s=t.scroll.max,i=t.scroll.current;return $f({current:i,max:s,change:r})},Uf=function(t,r){var s=t.frame;return s?rb({current:s.scroll.current,max:s.scroll.max,change:r}):!1},C4=function(t,r){var s=t.frame;return!s||!Uf(t,r)?null:$f({current:s.scroll.current,max:s.scroll.max,change:r})},k4=function(e){var t=e.viewport,r=e.subject,s=e.center,i=e.dragStartTime,a=e.shouldUseTimeDampening,l=tb({dragStartTime:i,container:t.frame,subject:r,center:s,shouldUseTimeDampening:a});return l&&Hf(t,l)?l:null},E4=function(e){var t=e.droppable,r=e.subject,s=e.center,i=e.dragStartTime,a=e.shouldUseTimeDampening,l=t.frame;if(!l)return null;var o=tb({dragStartTime:i,container:l.pageMarginBox,subject:r,center:s,shouldUseTimeDampening:a});return o&&Uf(t,o)?o:null},mg=function(e){var t=e.state,r=e.dragStartTime,s=e.shouldUseTimeDampening,i=e.scrollWindow,a=e.scrollDroppable,l=t.current.page.borderBoxCenter,o=t.dimensions.draggables[t.critical.draggable.id],c=o.page.marginBox;if(t.isWindowScrollAllowed){var h=t.viewport,v=k4({dragStartTime:r,viewport:h,subject:c,center:l,shouldUseTimeDampening:s});if(v){i(v);return}}var d=g4({center:l,destination:_t(t.impact),droppables:t.dimensions.droppables});if(d){var g=E4({dragStartTime:r,droppable:d,subject:c,center:l,shouldUseTimeDampening:s});g&&a(d.descriptor.id,g)}},j4=function(e){var t=e.scrollWindow,r=e.scrollDroppable,s=vo(t),i=vo(r),a=null,l=function(v){a||Q(!1);var d=a,g=d.shouldUseTimeDampening,x=d.dragStartTime;mg({state:v,scrollWindow:s,scrollDroppable:i,dragStartTime:x,shouldUseTimeDampening:g})},o=function(v){a&&Q(!1);var d=Date.now(),g=!1,x=function(){g=!0};mg({state:v,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:x,scrollDroppable:x}),a={dragStartTime:d,shouldUseTimeDampening:g},g&&l(v)},c=function(){a&&(s.cancel(),i.cancel(),a=null)};return{start:o,stop:c,scroll:l}},N4=function(e){var t=e.move,r=e.scrollDroppable,s=e.scrollWindow,i=function(h,v){var d=Ge(h.current.client.selection,v);t({client:d})},a=function(h,v){if(!Uf(h,v))return v;var d=C4(h,v);if(!d)return r(h.descriptor.id,v),null;var g=yt(v,d);r(h.descriptor.id,g);var x=yt(v,g);return x},l=function(h,v,d){if(!h||!Hf(v,d))return d;var g=S4(v,d);if(!g)return s(d),null;var x=yt(d,g);s(x);var _=yt(d,x);return _},o=function(h){var v=h.scrollJumpRequest;if(v){var d=_t(h.impact);d||Q(!1);var g=a(h.dimensions.droppables[d],v);if(g){var x=h.viewport,_=l(h.isWindowScrollAllowed,x,g);_&&i(h,_)}}};return o},D4=function(e){var t=e.scrollDroppable,r=e.scrollWindow,s=e.move,i=j4({scrollWindow:r,scrollDroppable:t}),a=N4({move:s,scrollWindow:r,scrollDroppable:t}),l=function(h){if(h.phase==="DRAGGING"){if(h.movementMode==="FLUID"){i.scroll(h);return}h.scrollJumpRequest&&a(h)}},o={scroll:l,start:i.start,stop:i.stop};return o},Qn="data-rbd",Yn=function(){var e=Qn+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),th=function(){var e=Qn+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),R4=function(){var e=Qn+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),gg={contextId:Qn+"-scroll-container-context-id"},A4=function(t){return function(r){return"["+r+'="'+t+'"]'}},xi=function(t,r){return t.map(function(s){var i=s.styles[r];return i?s.selector+" { "+i+" }":""}).join(" ")},T4="pointer-events: none;",P4=function(e){var t=A4(e),r=function(){var o=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(Yn.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:o,dragging:T4,dropAnimating:o}}}(),s=function(){var o=`
      transition: `+Ui.outOfTheWay+`;
    `;return{selector:t(th.contextId),styles:{dragging:o,dropAnimating:o,userCancel:o}}}(),i={selector:t(R4.contextId),styles:{always:"overflow-anchor: none;"}},a={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},l=[s,r,i,a];return{always:xi(l,"always"),resting:xi(l,"resting"),dragging:xi(l,"dragging"),dropAnimating:xi(l,"dropAnimating"),userCancel:xi(l,"userCancel")}},wt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?E.useLayoutEffect:E.useEffect,Ed=function(){var t=document.querySelector("head");return t||Q(!1),t},vg=function(t){var r=document.createElement("style");return t&&r.setAttribute("nonce",t),r.type="text/css",r};function L4(e,t){var r=pe(function(){return P4(e)},[e]),s=E.useRef(null),i=E.useRef(null),a=ne(He(function(d){var g=i.current;g||Q(!1),g.textContent=d}),[]),l=ne(function(d){var g=s.current;g||Q(!1),g.textContent=d},[]);wt(function(){!s.current&&!i.current||Q(!1);var d=vg(t),g=vg(t);return s.current=d,i.current=g,d.setAttribute(Qn+"-always",e),g.setAttribute(Qn+"-dynamic",e),Ed().appendChild(d),Ed().appendChild(g),l(r.always),a(r.resting),function(){var x=function(y){var f=y.current;f||Q(!1),Ed().removeChild(f),y.current=null};x(s),x(i)}},[t,l,a,r.always,r.resting,e]);var o=ne(function(){return a(r.dragging)},[a,r.dragging]),c=ne(function(d){if(d==="DROP"){a(r.dropAnimating);return}a(r.userCancel)},[a,r.dropAnimating,r.userCancel]),h=ne(function(){i.current&&a(r.resting)},[a,r.resting]),v=pe(function(){return{dragging:o,dropping:c,resting:h}},[o,c,h]);return v}var sb=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function Dc(e){return e instanceof sb(e).HTMLElement}function I4(e,t){var r="["+Yn.contextId+'="'+e+'"]',s=ky(document.querySelectorAll(r));if(!s.length)return null;var i=ys(s,function(a){return a.getAttribute(Yn.draggableId)===t});return!i||!Dc(i)?null:i}function O4(e){var t=E.useRef({}),r=E.useRef(null),s=E.useRef(null),i=E.useRef(!1),a=ne(function(g,x){var _={id:g,focus:x};return t.current[g]=_,function(){var f=t.current,p=f[g];p!==_&&delete f[g]}},[]),l=ne(function(g){var x=I4(e,g);x&&x!==document.activeElement&&x.focus()},[e]),o=ne(function(g,x){r.current===g&&(r.current=x)},[]),c=ne(function(){s.current||i.current&&(s.current=requestAnimationFrame(function(){s.current=null;var g=r.current;g&&l(g)}))},[l]),h=ne(function(g){r.current=null;var x=document.activeElement;x&&x.getAttribute(Yn.draggableId)===g&&(r.current=g)},[]);wt(function(){return i.current=!0,function(){i.current=!1;var g=s.current;g&&cancelAnimationFrame(g)}},[]);var v=pe(function(){return{register:a,tryRecordFocus:h,tryRestoreFocusRecorded:c,tryShiftRecord:o}},[a,h,c,o]);return v}function M4(){var e={draggables:{},droppables:{}},t=[];function r(d){return t.push(d),function(){var x=t.indexOf(d);x!==-1&&t.splice(x,1)}}function s(d){t.length&&t.forEach(function(g){return g(d)})}function i(d){return e.draggables[d]||null}function a(d){var g=i(d);return g||Q(!1),g}var l={register:function(g){e.draggables[g.descriptor.id]=g,s({type:"ADDITION",value:g})},update:function(g,x){var _=e.draggables[x.descriptor.id];_&&_.uniqueId===g.uniqueId&&(delete e.draggables[x.descriptor.id],e.draggables[g.descriptor.id]=g)},unregister:function(g){var x=g.descriptor.id,_=i(x);_&&g.uniqueId===_.uniqueId&&(delete e.draggables[x],s({type:"REMOVAL",value:g}))},getById:a,findById:i,exists:function(g){return!!i(g)},getAllByType:function(g){return Ol(e.draggables).filter(function(x){return x.descriptor.type===g})}};function o(d){return e.droppables[d]||null}function c(d){var g=o(d);return g||Q(!1),g}var h={register:function(g){e.droppables[g.descriptor.id]=g},unregister:function(g){var x=o(g.descriptor.id);x&&g.uniqueId===x.uniqueId&&delete e.droppables[g.descriptor.id]},getById:c,findById:o,exists:function(g){return!!o(g)},getAllByType:function(g){return Ol(e.droppables).filter(function(x){return x.descriptor.type===g})}};function v(){e.draggables={},e.droppables={},t.length=0}return{draggable:l,droppable:h,subscribe:r,clean:v}}function B4(){var e=pe(M4,[]);return E.useEffect(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}var Wf=ie.createContext(null),Bl=function(){var e=document.body;return e||Q(!1),e},F4={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},$4=function(t){return"rbd-announcement-"+t};function H4(e){var t=pe(function(){return $4(e)},[e]),r=E.useRef(null);E.useEffect(function(){var a=document.createElement("div");return r.current=a,a.id=t,a.setAttribute("aria-live","assertive"),a.setAttribute("aria-atomic","true"),oe(a.style,F4),Bl().appendChild(a),function(){setTimeout(function(){var c=Bl();c.contains(a)&&c.removeChild(a),a===r.current&&(r.current=null)})}},[t]);var s=ne(function(i){var a=r.current;if(a){a.textContent=i;return}},[]);return s}var U4=0,W4={separator:"::"};function zf(e,t){return t===void 0&&(t=W4),pe(function(){return""+e+t.separator+U4++},[t.separator,e])}function z4(e){var t=e.contextId,r=e.uniqueId;return"rbd-hidden-text-"+t+"-"+r}function V4(e){var t=e.contextId,r=e.text,s=zf("hidden-text",{separator:"-"}),i=pe(function(){return z4({contextId:t,uniqueId:s})},[s,t]);return E.useEffect(function(){var l=document.createElement("div");return l.id=i,l.textContent=r,l.style.display="none",Bl().appendChild(l),function(){var c=Bl();c.contains(l)&&c.removeChild(l)}},[i,r]),i}var Rc=ie.createContext(null);function nb(e){var t=E.useRef(e);return E.useEffect(function(){t.current=e}),t}function q4(){var e=null;function t(){return!!e}function r(l){return l===e}function s(l){e&&Q(!1);var o={abandon:l};return e=o,o}function i(){e||Q(!1),e=null}function a(){e&&(e.abandon(),i())}return{isClaimed:t,isActive:r,claim:s,release:i,tryAbandon:a}}var G4=9,K4=13,Vf=27,ib=32,Q4=33,Y4=34,X4=35,J4=36,Z4=37,e3=38,t3=39,r3=40,ja,s3=(ja={},ja[K4]=!0,ja[G4]=!0,ja),ob=function(e){s3[e.keyCode]&&e.preventDefault()},Ac=function(){var e="visibilitychange";if(typeof document>"u")return e;var t=[e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],r=ys(t,function(s){return"on"+s in document});return r||e}(),ab=0,xg=5;function n3(e,t){return Math.abs(t.x-e.x)>=xg||Math.abs(t.y-e.y)>=xg}var yg={type:"IDLE"};function i3(e){var t=e.cancel,r=e.completed,s=e.getPhase,i=e.setPhase;return[{eventName:"mousemove",fn:function(l){var o=l.button,c=l.clientX,h=l.clientY;if(o===ab){var v={x:c,y:h},d=s();if(d.type==="DRAGGING"){l.preventDefault(),d.actions.move(v);return}d.type!=="PENDING"&&Q(!1);var g=d.point;if(n3(g,v)){l.preventDefault();var x=d.actions.fluidLift(v);i({type:"DRAGGING",actions:x})}}}},{eventName:"mouseup",fn:function(l){var o=s();if(o.type!=="DRAGGING"){t();return}l.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:function(l){s().type==="DRAGGING"&&l.preventDefault(),t()}},{eventName:"keydown",fn:function(l){var o=s();if(o.type==="PENDING"){t();return}if(l.keyCode===Vf){l.preventDefault(),t();return}ob(l)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){s().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:function(l){var o=s();if(o.type==="IDLE"&&Q(!1),o.actions.shouldRespectForcePress()){t();return}l.preventDefault()}},{eventName:Ac,fn:t}]}function o3(e){var t=E.useRef(yg),r=E.useRef(is),s=pe(function(){return{eventName:"mousedown",fn:function(d){if(!d.defaultPrevented&&d.button===ab&&!(d.ctrlKey||d.metaKey||d.shiftKey||d.altKey)){var g=e.findClosestDraggableId(d);if(g){var x=e.tryGetLock(g,l,{sourceEvent:d});if(x){d.preventDefault();var _={x:d.clientX,y:d.clientY};r.current(),h(x,_)}}}}}},[e]),i=pe(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(d){if(!d.defaultPrevented){var g=e.findClosestDraggableId(d);if(g){var x=e.findOptionsForDraggable(g);x&&(x.shouldRespectForcePress||e.canGetLock(g)&&d.preventDefault())}}}}},[e]),a=ne(function(){var d={passive:!1,capture:!0};r.current=Mt(window,[i,s],d)},[i,s]),l=ne(function(){var v=t.current;v.type!=="IDLE"&&(t.current=yg,r.current(),a())},[a]),o=ne(function(){var v=t.current;l(),v.type==="DRAGGING"&&v.actions.cancel({shouldBlockNextClick:!0}),v.type==="PENDING"&&v.actions.abort()},[l]),c=ne(function(){var d={capture:!0,passive:!1},g=i3({cancel:o,completed:l,getPhase:function(){return t.current},setPhase:function(_){t.current=_}});r.current=Mt(window,g,d)},[o,l]),h=ne(function(d,g){t.current.type!=="IDLE"&&Q(!1),t.current={type:"PENDING",point:g,actions:d},c()},[c]);wt(function(){return a(),function(){r.current()}},[a])}var an;function a3(){}var l3=(an={},an[Y4]=!0,an[Q4]=!0,an[J4]=!0,an[X4]=!0,an);function c3(e,t){function r(){t(),e.cancel()}function s(){t(),e.drop()}return[{eventName:"keydown",fn:function(a){if(a.keyCode===Vf){a.preventDefault(),r();return}if(a.keyCode===ib){a.preventDefault(),s();return}if(a.keyCode===r3){a.preventDefault(),e.moveDown();return}if(a.keyCode===e3){a.preventDefault(),e.moveUp();return}if(a.keyCode===t3){a.preventDefault(),e.moveRight();return}if(a.keyCode===Z4){a.preventDefault(),e.moveLeft();return}if(l3[a.keyCode]){a.preventDefault();return}ob(a)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:Ac,fn:r}]}function d3(e){var t=E.useRef(a3),r=pe(function(){return{eventName:"keydown",fn:function(a){if(a.defaultPrevented||a.keyCode!==ib)return;var l=e.findClosestDraggableId(a);if(!l)return;var o=e.tryGetLock(l,v,{sourceEvent:a});if(!o)return;a.preventDefault();var c=!0,h=o.snapLift();t.current();function v(){c||Q(!1),c=!1,t.current(),s()}t.current=Mt(window,c3(h,v),{capture:!0,passive:!1})}}},[e]),s=ne(function(){var a={passive:!1,capture:!0};t.current=Mt(window,[r],a)},[r]);wt(function(){return s(),function(){t.current()}},[s])}var jd={type:"IDLE"},u3=120,h3=.15;function f3(e){var t=e.cancel,r=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(i){i.preventDefault()}},{eventName:"keydown",fn:function(i){if(r().type!=="DRAGGING"){t();return}i.keyCode===Vf&&i.preventDefault(),t()}},{eventName:Ac,fn:t}]}function p3(e){var t=e.cancel,r=e.completed,s=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(a){var l=s();if(l.type!=="DRAGGING"){t();return}l.hasMoved=!0;var o=a.touches[0],c=o.clientX,h=o.clientY,v={x:c,y:h};a.preventDefault(),l.actions.move(v)}},{eventName:"touchend",fn:function(a){var l=s();if(l.type!=="DRAGGING"){t();return}a.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:function(a){if(s().type!=="DRAGGING"){t();return}a.preventDefault(),t()}},{eventName:"touchforcechange",fn:function(a){var l=s();l.type==="IDLE"&&Q(!1);var o=a.touches[0];if(o){var c=o.force>=h3;if(c){var h=l.actions.shouldRespectForcePress();if(l.type==="PENDING"){h&&t();return}if(h){if(l.hasMoved){a.preventDefault();return}t();return}a.preventDefault()}}}},{eventName:Ac,fn:t}]}function m3(e){var t=E.useRef(jd),r=E.useRef(is),s=ne(function(){return t.current},[]),i=ne(function(x){t.current=x},[]),a=pe(function(){return{eventName:"touchstart",fn:function(x){if(!x.defaultPrevented){var _=e.findClosestDraggableId(x);if(_){var y=e.tryGetLock(_,o,{sourceEvent:x});if(y){var f=x.touches[0],p=f.clientX,u=f.clientY,m={x:p,y:u};r.current(),d(y,m)}}}}}},[e]),l=ne(function(){var x={capture:!0,passive:!1};r.current=Mt(window,[a],x)},[a]),o=ne(function(){var g=t.current;g.type!=="IDLE"&&(g.type==="PENDING"&&clearTimeout(g.longPressTimerId),i(jd),r.current(),l())},[l,i]),c=ne(function(){var g=t.current;o(),g.type==="DRAGGING"&&g.actions.cancel({shouldBlockNextClick:!0}),g.type==="PENDING"&&g.actions.abort()},[o]),h=ne(function(){var x={capture:!0,passive:!1},_={cancel:c,completed:o,getPhase:s},y=Mt(window,p3(_),x),f=Mt(window,f3(_),x);r.current=function(){y(),f()}},[c,s,o]),v=ne(function(){var x=s();x.type!=="PENDING"&&Q(!1);var _=x.actions.fluidLift(x.point);i({type:"DRAGGING",actions:_,hasMoved:!1})},[s,i]),d=ne(function(x,_){s().type!=="IDLE"&&Q(!1);var y=setTimeout(v,u3);i({type:"PENDING",point:_,actions:x,longPressTimerId:y}),h()},[h,s,i,v]);wt(function(){return l(),function(){r.current();var _=s();_.type==="PENDING"&&(clearTimeout(_.longPressTimerId),i(jd))}},[s,l,i]),wt(function(){var x=Mt(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return x},[])}var g3={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function lb(e,t){if(t==null)return!1;var r=!!g3[t.tagName.toLowerCase()];if(r)return!0;var s=t.getAttribute("contenteditable");return s==="true"||s===""?!0:t===e?!1:lb(e,t.parentElement)}function v3(e,t){var r=t.target;return Dc(r)?lb(e,r):!1}var x3=function(e){return Xt(e.getBoundingClientRect()).center};function y3(e){return e instanceof sb(e).Element}var b3=function(){var e="matches";if(typeof document>"u")return e;var t=[e,"msMatchesSelector","webkitMatchesSelector"],r=ys(t,function(s){return s in Element.prototype});return r||e}();function cb(e,t){return e==null?null:e[b3](t)?e:cb(e.parentElement,t)}function _3(e,t){return e.closest?e.closest(t):cb(e,t)}function w3(e){return"["+Yn.contextId+'="'+e+'"]'}function S3(e,t){var r=t.target;if(!y3(r))return null;var s=w3(e),i=_3(r,s);return!i||!Dc(i)?null:i}function C3(e,t){var r=S3(e,t);return r?r.getAttribute(Yn.draggableId):null}function k3(e,t){var r="["+th.contextId+'="'+e+'"]',s=ky(document.querySelectorAll(r)),i=ys(s,function(a){return a.getAttribute(th.id)===t});return!i||!Dc(i)?null:i}function E3(e){e.preventDefault()}function Na(e){var t=e.expected,r=e.phase,s=e.isLockActive;return e.shouldWarn,!(!s()||t!==r)}function db(e){var t=e.lockAPI,r=e.store,s=e.registry,i=e.draggableId;if(t.isClaimed())return!1;var a=s.draggable.findById(i);return!(!a||!a.options.isEnabled||!Zy(r.getState(),i))}function j3(e){var t=e.lockAPI,r=e.contextId,s=e.store,i=e.registry,a=e.draggableId,l=e.forceSensorStop,o=e.sourceEvent,c=db({lockAPI:t,store:s,registry:i,draggableId:a});if(!c)return null;var h=i.draggable.getById(a),v=k3(r,h.descriptor.id);if(!v||o&&!h.options.canDragInteractiveElements&&v3(v,o))return null;var d=t.claim(l||is),g="PRE_DRAG";function x(){return h.options.shouldRespectForcePress}function _(){return t.isActive(d)}function y(C,k){Na({expected:C,phase:g,isLockActive:_,shouldWarn:!0})&&s.dispatch(k())}var f=y.bind(null,"DRAGGING");function p(C){function k(){t.release(),g="COMPLETED"}g!=="PRE_DRAG"&&(k(),g!=="PRE_DRAG"&&Q(!1)),s.dispatch(b5(C.liftActionArgs)),g="DRAGGING";function w(j,D){if(D===void 0&&(D={shouldBlockNextClick:!1}),C.cleanup(),D.shouldBlockNextClick){var I=Mt(window,[{eventName:"click",fn:E3,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(I)}k(),s.dispatch(qy({reason:j}))}return oe({isActive:function(){return Na({expected:"DRAGGING",phase:g,isLockActive:_,shouldWarn:!1})},shouldRespectForcePress:x,drop:function(D){return w("DROP",D)},cancel:function(D){return w("CANCEL",D)}},C.actions)}function u(C){var k=vo(function(j){f(function(){return Vy({client:j})})}),w=p({liftActionArgs:{id:a,clientSelection:C,movementMode:"FLUID"},cleanup:function(){return k.cancel()},actions:{move:k}});return oe({},w,{move:k})}function m(){var C={moveUp:function(){return f(D5)},moveRight:function(){return f(A5)},moveDown:function(){return f(R5)},moveLeft:function(){return f(T5)}};return p({liftActionArgs:{id:a,clientSelection:x3(v),movementMode:"SNAP"},cleanup:is,actions:C})}function b(){var C=Na({expected:"PRE_DRAG",phase:g,isLockActive:_,shouldWarn:!0});C&&t.release()}var S={isActive:function(){return Na({expected:"PRE_DRAG",phase:g,isLockActive:_,shouldWarn:!1})},shouldRespectForcePress:x,fluidLift:u,snapLift:m,abort:b};return S}var N3=[o3,d3,m3];function D3(e){var t=e.contextId,r=e.store,s=e.registry,i=e.customSensors,a=e.enableDefaultSensors,l=[].concat(a?N3:[],i||[]),o=E.useState(function(){return q4()})[0],c=ne(function(u,m){u.isDragging&&!m.isDragging&&o.tryAbandon()},[o]);wt(function(){var u=r.getState(),m=r.subscribe(function(){var b=r.getState();c(u,b),u=b});return m},[o,r,c]),wt(function(){return o.tryAbandon},[o.tryAbandon]);for(var h=ne(function(p){return db({lockAPI:o,registry:s,store:r,draggableId:p})},[o,s,r]),v=ne(function(p,u,m){return j3({lockAPI:o,registry:s,contextId:t,store:r,draggableId:p,forceSensorStop:u,sourceEvent:m&&m.sourceEvent?m.sourceEvent:null})},[t,o,s,r]),d=ne(function(p){return C3(t,p)},[t]),g=ne(function(p){var u=s.draggable.findById(p);return u?u.options:null},[s.draggable]),x=ne(function(){o.isClaimed()&&(o.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch(If()))},[o,r]),_=ne(o.isClaimed,[o]),y=pe(function(){return{canGetLock:h,tryGetLock:v,findClosestDraggableId:d,findOptionsForDraggable:g,tryReleaseLock:x,isLockClaimed:_}},[h,v,d,g,x,_]),f=0;f<l.length;f++)l[f](y)}var R3=function(t){return{onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}};function yi(e){return e.current||Q(!1),e.current}function A3(e){var t=e.contextId,r=e.setCallbacks,s=e.sensors,i=e.nonce,a=e.dragHandleUsageInstructions,l=E.useRef(null),o=nb(e),c=ne(function(){return R3(o.current)},[o]),h=H4(t),v=V4({contextId:t,text:a}),d=L4(t,i),g=ne(function(j){yi(l).dispatch(j)},[]),x=pe(function(){return Um({publishWhileDragging:w5,updateDroppableScroll:C5,updateDroppableIsEnabled:k5,updateDroppableIsCombineEnabled:E5,collectionStarting:S5},g)},[g]),_=B4(),y=pe(function(){return h4(_,x)},[_,x]),f=pe(function(){return D4(oe({scrollWindow:f4,scrollDroppable:y.scrollDroppable},Um({move:Vy},g)))},[y.scrollDroppable,g]),p=O4(t),u=pe(function(){return l4({announce:h,autoScroller:f,dimensionMarshal:y,focusMarshal:p,getResponders:c,styleMarshal:d})},[h,f,y,p,c,d]);l.current=u;var m=ne(function(){var j=yi(l),D=j.getState();D.phase!=="IDLE"&&j.dispatch(If())},[]),b=ne(function(){var j=yi(l).getState();return j.isDragging||j.phase==="DROP_ANIMATING"},[]),S=pe(function(){return{isDragging:b,tryAbort:m}},[b,m]);r(S);var C=ne(function(j){return Zy(yi(l).getState(),j)},[]),k=ne(function(){return Es(yi(l).getState())},[]),w=pe(function(){return{marshal:y,focus:p,contextId:t,canLift:C,isMovementAllowed:k,dragHandleUsageInstructionsId:v,registry:_}},[t,y,v,p,C,k,_]);return D3({contextId:t,store:u,registry:_,customSensors:s,enableDefaultSensors:e.enableDefaultSensors!==!1}),E.useEffect(function(){return m},[m]),ie.createElement(Rc.Provider,{value:w},ie.createElement(JE,{context:Wf,store:u},e.children))}var T3=0;function P3(){return pe(function(){return""+T3++},[])}function L3(e){var t=P3(),r=e.dragHandleUsageInstructions||qa.dragHandleUsageInstructions;return ie.createElement(dN,null,function(s){return ie.createElement(A3,{nonce:e.nonce,contextId:t,setCallbacks:s,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var ub=function(t){return function(r){return t===r}},I3=ub("scroll"),O3=ub("auto"),bg=function(t,r){return r(t.overflowX)||r(t.overflowY)},M3=function(t){var r=window.getComputedStyle(t),s={overflowX:r.overflowX,overflowY:r.overflowY};return bg(s,I3)||bg(s,O3)},B3=function(){return!1},F3=function e(t){return t==null?null:t===document.body?B3()?t:null:t===document.documentElement?null:M3(t)?t:e(t.parentElement)},rh=function(e){return{x:e.scrollLeft,y:e.scrollTop}},$3=function e(t){if(!t)return!1;var r=window.getComputedStyle(t);return r.position==="fixed"?!0:e(t.parentElement)},H3=function(e){var t=F3(e),r=$3(e);return{closestScrollable:t,isFixedOnPage:r}},U3=function(e){var t=e.descriptor,r=e.isEnabled,s=e.isCombineEnabled,i=e.isFixedOnPage,a=e.direction,l=e.client,o=e.page,c=e.closest,h=function(){if(!c)return null;var x=c.scrollSize,_=c.client,y=Yy({scrollHeight:x.scrollHeight,scrollWidth:x.scrollWidth,height:_.paddingBox.height,width:_.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:_,scrollSize:x,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:y,diff:{value:Ue,displacement:Ue}}}}(),v=a==="vertical"?Rf:Ry,d=Kn({page:o,withPlaceholder:null,axis:v,frame:h}),g={descriptor:t,isCombineEnabled:s,isFixedOnPage:i,axis:v,isEnabled:r,client:l,page:o,frame:h,subject:d};return g},W3=function(t,r){var s=by(t);if(!r||t!==r)return s;var i=s.paddingBox.top-r.scrollTop,a=s.paddingBox.left-r.scrollLeft,l=i+r.scrollHeight,o=a+r.scrollWidth,c={top:i,right:o,bottom:l,left:a},h=kf(c,s.border),v=Ef({borderBox:h,margin:s.margin,border:s.border,padding:s.padding});return v},z3=function(e){var t=e.ref,r=e.descriptor,s=e.env,i=e.windowScroll,a=e.direction,l=e.isDropDisabled,o=e.isCombineEnabled,c=e.shouldClipSubject,h=s.closestScrollable,v=W3(t,h),d=Pl(v,i),g=function(){if(!h)return null;var _=by(h),y={scrollHeight:h.scrollHeight,scrollWidth:h.scrollWidth};return{client:_,page:Pl(_,i),scroll:rh(h),scrollSize:y,shouldClipSubject:c}}(),x=U3({descriptor:r,isEnabled:!l,isCombineEnabled:o,isFixedOnPage:s.isFixedOnPage,direction:a,client:v,page:d,closest:g});return x},V3={passive:!1},q3={passive:!0},_g=function(e){return e.shouldPublishImmediately?V3:q3};function Fl(e){var t=E.useContext(e);return t||Q(!1),t}var Da=function(t){return t&&t.env.closestScrollable||null};function G3(e){var t=E.useRef(null),r=Fl(Rc),s=zf("droppable"),i=r.registry,a=r.marshal,l=nb(e),o=pe(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),c=E.useRef(o),h=pe(function(){return He(function(b,S){t.current||Q(!1);var C={x:b,y:S};a.updateDroppableScroll(o.id,C)})},[o.id,a]),v=ne(function(){var b=t.current;return!b||!b.env.closestScrollable?Ue:rh(b.env.closestScrollable)},[]),d=ne(function(){var b=v();h(b.x,b.y)},[v,h]),g=pe(function(){return vo(d)},[d]),x=ne(function(){var b=t.current,S=Da(b);b&&S||Q(!1);var C=b.scrollOptions;if(C.shouldPublishImmediately){d();return}g()},[g,d]),_=ne(function(b,S){t.current&&Q(!1);var C=l.current,k=C.getDroppableRef();k||Q(!1);var w=H3(k),j={ref:k,descriptor:o,env:w,scrollOptions:S};t.current=j;var D=z3({ref:k,descriptor:o,env:w,windowScroll:b,direction:C.direction,isDropDisabled:C.isDropDisabled,isCombineEnabled:C.isCombineEnabled,shouldClipSubject:!C.ignoreContainerClipping}),I=w.closestScrollable;return I&&(I.setAttribute(gg.contextId,r.contextId),I.addEventListener("scroll",x,_g(j.scrollOptions))),D},[r.contextId,o,x,l]),y=ne(function(){var b=t.current,S=Da(b);return b&&S||Q(!1),rh(S)},[]),f=ne(function(){var b=t.current;b||Q(!1);var S=Da(b);t.current=null,S&&(g.cancel(),S.removeAttribute(gg.contextId),S.removeEventListener("scroll",x,_g(b.scrollOptions)))},[x,g]),p=ne(function(b){var S=t.current;S||Q(!1);var C=Da(S);C||Q(!1),C.scrollTop+=b.y,C.scrollLeft+=b.x},[]),u=pe(function(){return{getDimensionAndWatchScroll:_,getScrollWhileDragging:y,dragStopped:f,scroll:p}},[f,_,y,p]),m=pe(function(){return{uniqueId:s,descriptor:o,callbacks:u}},[u,o,s]);wt(function(){return c.current=m.descriptor,i.droppable.register(m),function(){t.current&&f(),i.droppable.unregister(m)}},[u,o,f,m,a,i.droppable]),wt(function(){t.current&&a.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,a]),wt(function(){t.current&&a.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,a])}function Nd(){}var wg={width:0,height:0,margin:gN},K3=function(t){var r=t.isAnimatingOpenOnMount,s=t.placeholder,i=t.animate;return r||i==="close"?wg:{height:s.client.borderBox.height,width:s.client.borderBox.width,margin:s.client.margin}},Q3=function(t){var r=t.isAnimatingOpenOnMount,s=t.placeholder,i=t.animate,a=K3({isAnimatingOpenOnMount:r,placeholder:s,animate:i});return{display:s.display,boxSizing:"border-box",width:a.width,height:a.height,marginTop:a.margin.top,marginRight:a.margin.right,marginBottom:a.margin.bottom,marginLeft:a.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:i!=="none"?Ui.placeholder:null}};function Y3(e){var t=E.useRef(null),r=ne(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),s=e.animate,i=e.onTransitionEnd,a=e.onClose,l=e.contextId,o=E.useState(e.animate==="open"),c=o[0],h=o[1];E.useEffect(function(){return c?s!=="open"?(r(),h(!1),Nd):t.current?Nd:(t.current=setTimeout(function(){t.current=null,h(!1)}),r):Nd},[s,c,r]);var v=ne(function(g){g.propertyName==="height"&&(i(),s==="close"&&a())},[s,a,i]),d=Q3({isAnimatingOpenOnMount:c,animate:e.animate,placeholder:e.placeholder});return ie.createElement(e.placeholder.tagName,{style:d,"data-rbd-placeholder-context-id":l,onTransitionEnd:v,ref:e.innerRef})}var X3=ie.memo(Y3),qf=ie.createContext(null),J3=function(e){Zx(t,e);function t(){for(var s,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return s=e.call.apply(e,[this].concat(a))||this,s.state={isVisible:!!s.props.on,data:s.props.on,animate:s.props.shouldAnimate&&s.props.on?"open":"none"},s.onClose=function(){s.state.animate==="close"&&s.setState({isVisible:!1})},s}t.getDerivedStateFromProps=function(i,a){return i.shouldAnimate?i.on?{isVisible:!0,data:i.on,animate:"open"}:a.isVisible?{isVisible:!0,data:a.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!i.on,data:i.on,animate:"none"}};var r=t.prototype;return r.render=function(){if(!this.state.isVisible)return null;var i={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(i)},t}(ie.PureComponent),Sg={dragging:5e3,dropAnimating:4500},Z3=function(t,r){return r?Ui.drop(r.duration):t?Ui.snap:Ui.fluid},eD=function(t,r){return t?r?_o.opacity.drop:_o.opacity.combining:null},tD=function(t){return t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP"};function rD(e){var t=e.dimension,r=t.client,s=e.offset,i=e.combineWith,a=e.dropping,l=!!i,o=tD(e),c=!!a,h=c?Zu.drop(s,l):Zu.moveTo(s),v={position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:Z3(o,a),transform:h,opacity:eD(l,c),zIndex:c?Sg.dropAnimating:Sg.dragging,pointerEvents:"none"};return v}function sD(e){return{transform:Zu.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function nD(e){return e.type==="DRAGGING"?rD(e):sD(e)}function iD(e,t,r){r===void 0&&(r=Ue);var s=window.getComputedStyle(t),i=t.getBoundingClientRect(),a=yy(i,s),l=Pl(a,r),o={client:a,tagName:t.tagName.toLowerCase(),display:s.display},c={x:a.marginBox.width,y:a.marginBox.height},h={descriptor:e,placeholder:o,displaceBy:c,client:a,page:l};return h}function oD(e){var t=zf("draggable"),r=e.descriptor,s=e.registry,i=e.getDraggableRef,a=e.canDragInteractiveElements,l=e.shouldRespectForcePress,o=e.isEnabled,c=pe(function(){return{canDragInteractiveElements:a,shouldRespectForcePress:l,isEnabled:o}},[a,o,l]),h=ne(function(x){var _=i();return _||Q(!1),iD(r,_,x)},[r,i]),v=pe(function(){return{uniqueId:t,descriptor:r,options:c,getDimension:h}},[r,h,c,t]),d=E.useRef(v),g=E.useRef(!0);wt(function(){return s.draggable.register(d.current),function(){return s.draggable.unregister(d.current)}},[s.draggable]),wt(function(){if(g.current){g.current=!1;return}var x=d.current;d.current=v,s.draggable.update(v,x)},[v,s.draggable])}function aD(e){e.preventDefault()}function lD(e){var t=E.useRef(null),r=ne(function(j){t.current=j},[]),s=ne(function(){return t.current},[]),i=Fl(Rc),a=i.contextId,l=i.dragHandleUsageInstructionsId,o=i.registry,c=Fl(qf),h=c.type,v=c.droppableId,d=pe(function(){return{id:e.draggableId,index:e.index,type:h,droppableId:v}},[e.draggableId,e.index,h,v]),g=e.children,x=e.draggableId,_=e.isEnabled,y=e.shouldRespectForcePress,f=e.canDragInteractiveElements,p=e.isClone,u=e.mapped,m=e.dropAnimationFinished;if(!p){var b=pe(function(){return{descriptor:d,registry:o,getDraggableRef:s,canDragInteractiveElements:f,shouldRespectForcePress:y,isEnabled:_}},[d,o,s,f,y,_]);oD(b)}var S=pe(function(){return _?{tabIndex:0,role:"button","aria-describedby":l,"data-rbd-drag-handle-draggable-id":x,"data-rbd-drag-handle-context-id":a,draggable:!1,onDragStart:aD}:null},[a,l,x,_]),C=ne(function(j){u.type==="DRAGGING"&&u.dropping&&j.propertyName==="transform"&&m()},[m,u]),k=pe(function(){var j=nD(u),D=u.type==="DRAGGING"&&u.dropping?C:null,I={innerRef:r,draggableProps:{"data-rbd-draggable-context-id":a,"data-rbd-draggable-id":x,style:j,onTransitionEnd:D},dragHandleProps:S};return I},[a,S,x,u,C,r]),w=pe(function(){return{draggableId:d.id,type:d.type,source:{index:d.index,droppableId:d.droppableId}}},[d.droppableId,d.id,d.index,d.type]);return g(k,u.snapshot,w)}var hb=function(e,t){return e===t},fb=function(e){var t=e.combine,r=e.destination;return r?r.droppableId:t?t.droppableId:null},cD=function(t){return t.combine?t.combine.draggableId:null},dD=function(t){return t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null};function uD(){var e=He(function(i,a){return{x:i,y:a}}),t=He(function(i,a,l,o,c){return{isDragging:!0,isClone:a,isDropAnimating:!!c,dropAnimation:c,mode:i,draggingOver:l,combineWith:o,combineTargetFor:null}}),r=He(function(i,a,l,o,c,h,v){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:h,mode:a,offset:i,dimension:l,forceShouldAnimate:v,snapshot:t(a,o,c,h,null)}}}),s=function(a,l){if(a.isDragging){if(a.critical.draggable.id!==l.draggableId)return null;var o=a.current.client.offset,c=a.dimensions.draggables[l.draggableId],h=_t(a.impact),v=dD(a.impact),d=a.forceShouldAnimate;return r(e(o.x,o.y),a.movementMode,c,l.isClone,h,v,d)}if(a.phase==="DROP_ANIMATING"){var g=a.completed;if(g.result.draggableId!==l.draggableId)return null;var x=l.isClone,_=a.dimensions.draggables[l.draggableId],y=g.result,f=y.mode,p=fb(y),u=cD(y),m=a.dropDuration,b={duration:m,curve:Mf.drop,moveTo:a.newHomeClientOffset,opacity:u?_o.opacity.drop:null,scale:u?_o.scale.drop:null};return{mapped:{type:"DRAGGING",offset:a.newHomeClientOffset,dimension:_,dropping:b,draggingOver:p,combineWith:u,mode:f,forceShouldAnimate:null,snapshot:t(f,x,p,u,b)}}}return null};return s}function pb(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var hD={mapped:{type:"SECONDARY",offset:Ue,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:pb(null)}};function fD(){var e=He(function(l,o){return{x:l,y:o}}),t=He(pb),r=He(function(l,o,c){return o===void 0&&(o=null),{mapped:{type:"SECONDARY",offset:l,combineTargetFor:o,shouldAnimateDisplacement:c,snapshot:t(o)}}}),s=function(o){return o?r(Ue,o,!0):null},i=function(o,c,h,v){var d=h.displaced.visible[o],g=!!(v.inVirtualList&&v.effected[o]),x=Ec(h),_=x&&x.draggableId===o?c:null;if(!d){if(!g)return s(_);if(h.displaced.invisible[o])return null;var y=ri(v.displacedBy.point),f=e(y.x,y.y);return r(f,_,!0)}if(g)return s(_);var p=h.displacedBy.point,u=e(p.x,p.y);return r(u,_,d.shouldAnimate)},a=function(o,c){if(o.isDragging)return o.critical.draggable.id===c.draggableId?null:i(c.draggableId,o.critical.draggable.id,o.impact,o.afterCritical);if(o.phase==="DROP_ANIMATING"){var h=o.completed;return h.result.draggableId===c.draggableId?null:i(c.draggableId,h.result.draggableId,h.impact,h.afterCritical)}return null};return a}var pD=function(){var t=uD(),r=fD(),s=function(a,l){return t(a,l)||r(a,l)||hD};return s},mD={dropAnimationFinished:Gy},gD=vy(pD,mD,null,{context:Wf,pure:!0,areStatePropsEqual:hb})(lD);function mb(e){var t=Fl(qf),r=t.isUsingCloneFor;return r===e.draggableId&&!e.isClone?null:ie.createElement(gD,e)}function vD(e){var t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,s=!!e.shouldRespectForcePress;return ie.createElement(mb,oe({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:s}))}function xD(e){var t=E.useContext(Rc);t||Q(!1);var r=t.contextId,s=t.isMovementAllowed,i=E.useRef(null),a=E.useRef(null),l=e.children,o=e.droppableId,c=e.type,h=e.mode,v=e.direction,d=e.ignoreContainerClipping,g=e.isDropDisabled,x=e.isCombineEnabled,_=e.snapshot,y=e.useClone,f=e.updateViewportMaxScroll,p=e.getContainerForClone,u=ne(function(){return i.current},[]),m=ne(function(I){i.current=I},[]);ne(function(){return a.current},[]);var b=ne(function(I){a.current=I},[]),S=ne(function(){s()&&f({maxScroll:Jy()})},[s,f]);G3({droppableId:o,type:c,mode:h,direction:v,isDropDisabled:g,isCombineEnabled:x,ignoreContainerClipping:d,getDroppableRef:u});var C=ie.createElement(J3,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(I){var T=I.onClose,A=I.data,O=I.animate;return ie.createElement(X3,{placeholder:A,onClose:T,innerRef:b,animate:O,contextId:r,onTransitionEnd:S})}),k=pe(function(){return{innerRef:m,placeholder:C,droppableProps:{"data-rbd-droppable-id":o,"data-rbd-droppable-context-id":r}}},[r,o,C,m]),w=y?y.dragging.draggableId:null,j=pe(function(){return{droppableId:o,type:c,isUsingCloneFor:w}},[o,w,c]);function D(){if(!y)return null;var I=y.dragging,T=y.render,A=ie.createElement(mb,{draggableId:I.draggableId,index:I.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(O,R){return T(O,R,I)});return q1.createPortal(A,p())}return ie.createElement(qf.Provider,{value:j},l(k,_),D())}var Dd=function(t,r){return t===r.droppable.type},Cg=function(t,r){return r.draggables[t.draggable.id]},yD=function(){var t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r=oe({},t,{shouldAnimatePlaceholder:!1}),s=He(function(l){return{draggableId:l.id,type:l.type,source:{index:l.index,droppableId:l.droppableId}}}),i=He(function(l,o,c,h,v,d){var g=v.descriptor.id,x=v.descriptor.droppableId===l;if(x){var _=d?{render:d,dragging:s(v.descriptor)}:null,y={isDraggingOver:c,draggingOverWith:c?g:null,draggingFromThisWith:g,isUsingPlaceholder:!0};return{placeholder:v.placeholder,shouldAnimatePlaceholder:!1,snapshot:y,useClone:_}}if(!o)return r;if(!h)return t;var f={isDraggingOver:c,draggingOverWith:g,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:v.placeholder,shouldAnimatePlaceholder:!0,snapshot:f,useClone:null}}),a=function(o,c){var h=c.droppableId,v=c.type,d=!c.isDropDisabled,g=c.renderClone;if(o.isDragging){var x=o.critical;if(!Dd(v,x))return r;var _=Cg(x,o.dimensions),y=_t(o.impact)===h;return i(h,d,y,y,_,g)}if(o.phase==="DROP_ANIMATING"){var f=o.completed;if(!Dd(v,f.critical))return r;var p=Cg(f.critical,o.dimensions);return i(h,d,fb(f.result)===h,_t(f.impact)===h,p,g)}if(o.phase==="IDLE"&&o.completed&&!o.shouldFlush){var u=o.completed;if(!Dd(v,u.critical))return r;var m=_t(u.impact)===h,b=!!(u.impact.at&&u.impact.at.type==="COMBINE"),S=u.critical.droppable.id===h;return m?b?t:r:S?t:r}return r};return a},bD={updateViewportMaxScroll:N5};function _D(){return document.body||Q(!1),document.body}var wD={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:_D},gb=vy(yD,bD,null,{context:Wf,pure:!0,areStatePropsEqual:hb})(xD);gb.defaultProps=wD;const SD=({task:e,index:t,isDragging:r})=>{const s=()=>{switch(e.status){case"done":return n.jsx(ff,{className:"w-4 h-4 text-green-600"});case"in-progress":return n.jsx(uc,{className:"w-4 h-4 text-blue-600"});case"blocked":return n.jsx(Ct,{className:"w-4 h-4 text-red-600"});default:return n.jsx(gf,{className:"w-4 h-4 text-yellow-600"})}},i=()=>{switch(e.priority){case"high":return"border-red-300 bg-red-50";case"medium":return"border-yellow-300 bg-yellow-50";case"low":return"border-green-300 bg-green-50";default:return"border-gray-300 bg-gray-50"}};return n.jsx(vD,{draggableId:e.id,index:t,children:(a,l)=>n.jsxs("div",{ref:a.innerRef,...a.draggableProps,...a.dragHandleProps,className:`p-3 mb-2 border rounded-lg transition-all cursor-move ${i()} ${r||l.isDragging?"shadow-lg opacity-90 rotate-2":"shadow-sm hover:shadow-md"}`,children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[s(),n.jsxs("span",{className:"text-sm font-mono text-gray-600",children:["#",e.id]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${e.priority==="high"?"bg-red-200 text-red-800":e.priority==="medium"?"bg-yellow-200 text-yellow-800":"bg-green-200 text-green-800"}`,children:e.priority})]}),n.jsx(mf,{className:"w-4 h-4 text-gray-400"})]}),n.jsx("h4",{className:"mt-2 font-medium text-gray-900",children:e.title}),e.description&&n.jsx("p",{className:"mt-1 text-sm text-gray-600 line-clamp-2",children:e.description}),e.dependencies&&e.dependencies.length>0&&n.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Dependencies: ",e.dependencies.join(", ")]})]})})},vb=({tasks:e,droppableId:t,isDraggingOver:r})=>n.jsx(gb,{droppableId:t,children:(s,i)=>n.jsxs("div",{ref:s.innerRef,...s.droppableProps,className:`h-full p-4 rounded-lg transition-colors ${r||i.isDraggingOver?"bg-blue-50 border-2 border-blue-300 border-dashed":"bg-gray-50"}`,children:[e.length===0?n.jsx("p",{className:"text-center text-gray-500 py-8",children:t==="unassigned"?"No unassigned tasks":"Drop tasks here to assign"}):e.map((a,l)=>n.jsx(SD,{task:a,index:l},a.id)),s.placeholder]})}),CD=({agent:e,assignedTasks:t,isDraggingOver:r})=>{const s=()=>{switch(e.status){case"RUNNING":return"text-green-600 bg-green-100";case"STOPPED":return"text-red-600 bg-red-100";case"ERROR":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}};return n.jsxs("div",{className:"border rounded-lg overflow-hidden h-full flex flex-col",children:[n.jsxs("div",{className:"p-4 bg-white border-b",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Yx,{className:"w-5 h-5 text-gray-600"}),n.jsx("h3",{className:"font-semibold text-gray-900",children:e.id})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${s()}`,children:e.status})]}),n.jsx("p",{className:"mt-1 text-sm text-gray-600",children:e.branch}),n.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[t.length," task",t.length!==1?"s":""," assigned"]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto",children:n.jsx(vb,{tasks:t,droppableId:`agent-${e.id}`,isDraggingOver:r})})]})},kD=({projectPath:e})=>{const[t,r]=E.useState([]),[s,i]=E.useState([]),[a,l]=E.useState({}),[o,c]=E.useState(!0),[h,v]=E.useState(!1),d=async()=>{try{v(!0);const[y,f]=await Promise.all([_e.getTaskMasterTasks(e),_e.getAgents()]);r(y),i(f.filter(u=>u.status==="RUNNING"));const p={};f.forEach(u=>{var m;(m=u.config)!=null&&m.taskId&&(p[u.config.taskId]=u.id)}),l(p)}catch(y){console.error("Failed to fetch data:",y),re.error("Failed to load tasks and agents")}finally{c(!1),v(!1)}};E.useEffect(()=>{d()},[e]);const g=async y=>{const{destination:f,source:p,draggableId:u}=y;if(!f||f.droppableId===p.droppableId&&f.index===p.index)return;const m=u,b=t.find(S=>S.id===m);if(b){if(f.droppableId.startsWith("agent-")){const S=f.droppableId.replace("agent-","");if(!s.find(w=>w.id===S))return;if(b.dependencies&&b.dependencies.length>0){const w=b.dependencies.filter(j=>{const D=t.find(I=>I.id===j);return D&&D.status!=="done"});if(w.length>0){re.warning(`Cannot assign task: Dependencies ${w.join(", ")} are not complete`,{autoClose:5e3});return}}if(!window.confirm(`Assign task "${b.title}" to agent ${S}?`))return;try{await _e.assignTaskToAgent(S,m,e),l(w=>({...w,[m]:S})),re.success(`Task assigned to agent ${S}`)}catch(w){console.error("Failed to assign task:",w),re.error("Failed to assign task")}}else if(f.droppableId==="unassigned"){const S=a[m];if(S){if(!window.confirm(`Remove task "${b.title}" from agent ${S}?`))return;l(k=>{const w={...k};return delete w[m],w}),re.info("Task unassigned")}}}},x=()=>t.filter(y=>!a[y.id]&&y.status!=="done"&&y.status!=="cancelled"),_=y=>t.filter(f=>a[f.id]===y);return o?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(us,{className:"w-8 h-8 text-gray-400 animate-spin"})}):n.jsxs("div",{className:"h-full flex flex-col",children:[n.jsxs("div",{className:"p-4 border-b bg-white",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Task Assignment"}),n.jsx("button",{onClick:d,disabled:h,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-md transition-colors disabled:opacity-50",title:"Refresh",children:n.jsx(us,{className:`w-4 h-4 ${h?"animate-spin":""}`})})]}),n.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Drag tasks from the left panel to assign them to agents"})]}),n.jsx("div",{className:"flex-1 flex overflow-hidden",children:n.jsxs(L3,{onDragEnd:g,children:[n.jsxs("div",{className:"w-1/3 border-r flex flex-col",children:[n.jsxs("div",{className:"p-4 bg-gray-50 border-b",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:"Unassigned Tasks"}),n.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[x().length," tasks available"]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto",children:n.jsx(vb,{tasks:x(),droppableId:"unassigned"})})]}),n.jsx("div",{className:"flex-1 p-4",children:s.length===0?n.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Yx,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:"No running agents available"}),n.jsx("p",{className:"text-sm mt-2",children:"Start an agent to assign tasks"})]})}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 h-full",children:s.map(y=>n.jsx(CD,{agent:y,assignedTasks:_(y.id)},y.id))})})]})})]})},ED=()=>{const[e,t]=E.useState(""),[r,s]=E.useState(null),[i,a]=E.useState(!0);return E.useEffect(()=>{(async()=>{try{const o=await _e.getProjects();if(o.length>0){const c=o[0].path;t(c);const h=await _e.detectTaskMaster(c);s(h.isConfigured)}else{const c="/Users/santossafrao/Development/personal/magents";t(c);const h=await _e.detectTaskMaster(c);s(h.isConfigured)}}catch(o){console.error("Failed to detect TaskMaster:",o),s(!1)}finally{a(!1)}})()},[]),i?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx("p",{className:"text-foreground-secondary",children:"Checking for TaskMaster configuration..."})}):r?n.jsx(kD,{projectPath:e}):n.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[n.jsx(Ct,{className:"w-16 h-16 text-status-warning mb-4"}),n.jsx("h2",{className:"text-2xl font-semibold text-foreground mb-2",children:"TaskMaster Not Configured"}),n.jsx("p",{className:"text-foreground-secondary mb-6 max-w-md",children:"This project does not have TaskMaster configured. To use task assignment, you need to initialize TaskMaster in your project."}),n.jsx("div",{className:"bg-background-tertiary rounded-lg p-4 max-w-md border border-border",children:n.jsx("p",{className:"font-mono text-sm text-foreground",children:"task-master init"})})]})},jD=()=>{const{data:e=[]}=hr({queryKey:["agents"],queryFn:()=>_e.getAgents()}),{data:t=[]}=hr({queryKey:["projects"],queryFn:()=>_e.getProjects()}),r=e.length,s=e.filter(h=>h.status==="RUNNING").length,i=e.filter(h=>h.status==="STOPPED").length,a=e.filter(h=>h.status==="ERROR").length,l=r>0?Math.round(s/r*100):0,o=t.filter(h=>e.some(v=>v.projectId===h.id)).length,c=t.length>0?(r/t.length).toFixed(1):"0";return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Analytics"}),n.jsx("p",{className:"text-foreground-secondary mt-1",children:"System performance and usage metrics"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsx("div",{className:"bg-background-card border border-border rounded-lg p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-foreground-secondary",children:"Agent Uptime"}),n.jsxs("p",{className:"text-2xl font-bold text-foreground mt-1",children:[l,"%"]}),n.jsxs("p",{className:"text-xs text-foreground-tertiary mt-2",children:[s," of ",r," running"]})]}),n.jsx("div",{className:"p-3 rounded-lg bg-status-success/20",children:n.jsx(wm,{className:"h-6 w-6 text-status-success"})})]})}),n.jsx("div",{className:"bg-background-card border border-border rounded-lg p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-foreground-secondary",children:"Total Agents"}),n.jsx("p",{className:"text-2xl font-bold text-foreground mt-1",children:r}),n.jsxs("p",{className:"text-xs text-foreground-tertiary mt-2",children:["Across ",t.length," projects"]})]}),n.jsx("div",{className:"p-3 rounded-lg bg-brand/20",children:n.jsx(ds,{className:"h-6 w-6 text-brand"})})]})}),n.jsx("div",{className:"bg-background-card border border-border rounded-lg p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-foreground-secondary",children:"Active Projects"}),n.jsx("p",{className:"text-2xl font-bold text-foreground mt-1",children:o}),n.jsx("p",{className:"text-xs text-foreground-tertiary mt-2",children:"With running agents"})]}),n.jsx("div",{className:"p-3 rounded-lg bg-brand/20",children:n.jsx(Cl,{className:"h-6 w-6 text-brand"})})]})}),n.jsx("div",{className:"bg-background-card border border-border rounded-lg p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-foreground-secondary",children:"Avg Agents/Project"}),n.jsx("p",{className:"text-2xl font-bold text-foreground mt-1",children:c}),n.jsx("p",{className:"text-xs text-foreground-tertiary mt-2",children:"Distribution metric"})]}),n.jsx("div",{className:"p-3 rounded-lg bg-foreground-tertiary/20",children:n.jsx(sf,{className:"h-6 w-6 text-foreground-tertiary"})})]})})]}),n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-foreground mb-6",children:"Agent Status Distribution"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-foreground-secondary",children:"Running"}),n.jsxs("span",{className:"text-sm font-medium text-status-success",children:[s," agents"]})]}),n.jsx("div",{className:"w-full bg-background-tertiary rounded-full h-2",children:n.jsx("div",{className:"bg-status-success h-2 rounded-full transition-all duration-300",style:{width:`${r>0?s/r*100:0}%`}})})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-foreground-secondary",children:"Stopped"}),n.jsxs("span",{className:"text-sm font-medium text-foreground-tertiary",children:[i," agents"]})]}),n.jsx("div",{className:"w-full bg-background-tertiary rounded-full h-2",children:n.jsx("div",{className:"bg-foreground-tertiary h-2 rounded-full transition-all duration-300",style:{width:`${r>0?i/r*100:0}%`}})})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-foreground-secondary",children:"Error"}),n.jsxs("span",{className:"text-sm font-medium text-status-error",children:[a," agents"]})]}),n.jsx("div",{className:"w-full bg-background-tertiary rounded-full h-2",children:n.jsx("div",{className:"bg-status-error h-2 rounded-full transition-all duration-300",style:{width:`${r>0?a/r*100:0}%`}})})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"System Activity"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 bg-background-tertiary rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ys,{className:"h-5 w-5 text-foreground-tertiary"}),n.jsx("span",{className:"text-sm text-foreground",children:"Average agent runtime"})]}),n.jsx("span",{className:"text-sm font-medium text-foreground",children:"2h 34m"})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-background-tertiary rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Cl,{className:"h-5 w-5 text-status-success"}),n.jsx("span",{className:"text-sm text-foreground",children:"Tasks completed today"})]}),n.jsx("span",{className:"text-sm font-medium text-foreground",children:"12"})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-background-tertiary rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(ds,{className:"h-5 w-5 text-brand"}),n.jsx("span",{className:"text-sm text-foreground",children:"New agents this week"})]}),n.jsx("span",{className:"text-sm font-medium text-foreground",children:"3"})]})]})]}),n.jsxs("div",{className:"bg-background-card border border-border rounded-lg p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"Performance Metrics"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 bg-background-tertiary rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(wm,{className:"h-5 w-5 text-status-success"}),n.jsx("span",{className:"text-sm text-foreground",children:"Success rate"})]}),n.jsx("span",{className:"text-sm font-medium text-status-success",children:"94.2%"})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-background-tertiary rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(zS,{className:"h-5 w-5 text-status-error"}),n.jsx("span",{className:"text-sm text-foreground",children:"Error rate"})]}),n.jsx("span",{className:"text-sm font-medium text-status-error",children:"5.8%"})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-background-tertiary rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ys,{className:"h-5 w-5 text-foreground-tertiary"}),n.jsx("span",{className:"text-sm text-foreground",children:"Avg response time"})]}),n.jsx("span",{className:"text-sm font-medium text-foreground",children:"234ms"})]})]})]})]})]})},ND=()=>{const[e,t]=E.useState([]),[r,s]=E.useState(""),i=E.useRef(null),a=E.useRef(null);E.useEffect(()=>{var c;(c=i.current)==null||c.focus()},[]),E.useEffect(()=>{a.current&&(a.current.scrollTop=a.current.scrollHeight)},[e]);const l=c=>{if(c.preventDefault(),!r.trim())return;const h=o(r);t([...e,{command:r,output:h,timestamp:new Date}]),s("")},o=c=>{const[h,...v]=c.split(" ");switch(h){case"help":return`Available commands:
  help              - Show this help message
  clear             - Clear terminal
  status            - Show system status
  agents            - List all agents
  projects          - List all projects
  agent start <id>  - Start an agent
  agent stop <id>   - Stop an agent
  exit              - Close terminal`;case"clear":return t([]),"";case"status":return"System is running. All services operational.";case"agents":return"Fetching agents... Use the Agents page for detailed view.";case"projects":return"Fetching projects... Use the Projects page for detailed view.";case"exit":return"Terminal session ended. Refresh to start a new session.";default:return`Command not found: ${h}. Type 'help' for available commands.`}};return n.jsxs("div",{className:"h-full flex flex-col bg-background",children:[n.jsx("div",{className:"p-4 border-b border-border",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Xs,{className:"h-6 w-6 text-foreground-secondary"}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-semibold text-foreground",children:"Terminal"}),n.jsx("p",{className:"text-sm text-foreground-tertiary",children:"Execute commands and interact with the system"})]})]})}),n.jsx("div",{ref:a,className:"flex-1 overflow-y-auto p-4 font-mono text-sm",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"text-foreground-secondary",children:["Welcome to Magents Terminal v1.0.0",n.jsx("br",{}),"Type 'help' for available commands."]}),e.map((c,h)=>n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-brand",children:"$"}),n.jsx("span",{className:"text-foreground",children:c.command})]}),c.output&&n.jsx("div",{className:"text-foreground-secondary whitespace-pre-wrap ml-6",children:c.output})]},h))]})}),n.jsx("form",{onSubmit:l,className:"p-4 border-t border-border",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-brand font-mono",children:"$"}),n.jsx("input",{ref:i,type:"text",value:r,onChange:c=>s(c.target.value),className:"flex-1 bg-transparent text-foreground font-mono text-sm focus:outline-none",placeholder:"Enter command...",autoComplete:"off",spellCheck:!1})]})})]})};const DD=new mS({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:3e4}}});function RD(){return n.jsxs(yS,{client:DD,children:[n.jsx(xk,{children:n.jsx(zw,{children:n.jsxs("div",{className:"App",children:[n.jsx(_k,{children:n.jsxs(Iw,{children:[n.jsx(Rt,{path:"/",element:n.jsx($k,{})}),n.jsx(Rt,{path:"/agents",element:n.jsx(Hk,{})}),n.jsx(Rt,{path:"/agents/new",element:n.jsx(EE,{})}),n.jsx(Rt,{path:"/agents/:id",element:n.jsx(PE,{})}),n.jsx(Rt,{path:"/projects",element:n.jsx(jE,{})}),n.jsx(Rt,{path:"/projects/:id",element:n.jsx(LE,{})}),n.jsx(Rt,{path:"/tasks",element:n.jsx(UE,{})}),n.jsx(Rt,{path:"/tasks/assign",element:n.jsx(ED,{})}),n.jsx(Rt,{path:"/analytics",element:n.jsx(jD,{})}),n.jsx(Rt,{path:"/settings",element:n.jsx(NE,{})}),n.jsx(Rt,{path:"/terminal",element:n.jsx(ND,{})})]})}),n.jsx($u,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})})}),n.jsx(AS,{initialIsOpen:!1})]})}const AD=Rd.createRoot(document.getElementById("root"));AD.render(n.jsx(ie.StrictMode,{children:n.jsx(RD,{})}));
//# sourceMappingURL=index-be241ba8.js.map
